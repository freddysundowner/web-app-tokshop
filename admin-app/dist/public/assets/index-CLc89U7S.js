var lF=Object.defineProperty;var YS=t=>{throw TypeError(t)};var cF=(t,e,s)=>e in t?lF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var dF=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ge=(t,e,s)=>cF(t,typeof e!="symbol"?e+"":e,s),w0=(t,e,s)=>e.has(t)||YS("Cannot "+s);var ne=(t,e,s)=>(w0(t,e,"read from private field"),s?s.call(t):e.get(t)),ht=(t,e,s)=>e.has(t)?YS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),He=(t,e,s,r)=>(w0(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),Pt=(t,e,s)=>(w0(t,e,"access private method"),s);var wg=(t,e,s,r)=>({set _(i){He(t,e,i,s)},get _(){return ne(t,e,r)}});var Ihe=dF((Yr,Qr)=>{function uF(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d4={exports:{}},Jy={},u4={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=Symbol.for("react.element"),hF=Symbol.for("react.portal"),fF=Symbol.for("react.fragment"),pF=Symbol.for("react.strict_mode"),mF=Symbol.for("react.profiler"),gF=Symbol.for("react.provider"),xF=Symbol.for("react.context"),yF=Symbol.for("react.forward_ref"),vF=Symbol.for("react.suspense"),bF=Symbol.for("react.memo"),wF=Symbol.for("react.lazy"),QS=Symbol.iterator;function jF(t){return t===null||typeof t!="object"?null:(t=QS&&t[QS]||t["@@iterator"],typeof t=="function"?t:null)}var h4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f4=Object.assign,p4={};function yf(t,e,s){this.props=t,this.context=e,this.refs=p4,this.updater=s||h4}yf.prototype.isReactComponent={};yf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function m4(){}m4.prototype=yf.prototype;function C1(t,e,s){this.props=t,this.context=e,this.refs=p4,this.updater=s||h4}var k1=C1.prototype=new m4;k1.constructor=C1;f4(k1,yf.prototype);k1.isPureReactComponent=!0;var ZS=Array.isArray,g4=Object.prototype.hasOwnProperty,E1={current:null},x4={key:!0,ref:!0,__self:!0,__source:!0};function y4(t,e,s){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)g4.call(e,r)&&!x4.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Mm,type:t,key:a,ref:o,props:i,_owner:E1.current}}function NF(t,e){return{$$typeof:Mm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function T1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mm}function _F(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var XS=/\/+/g;function j0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_F(""+t.key):e.toString(36)}function ax(t,e,s,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mm:case hF:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+j0(o,0):r,ZS(i)?(s="",t!=null&&(s=t.replace(XS,"$&/")+"/"),ax(i,e,s,"",function(d){return d})):i!=null&&(T1(i)&&(i=NF(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(XS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ZS(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+j0(a,l);o+=ax(a,e,s,c,i)}else if(c=jF(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+j0(a,l++),o+=ax(a,e,s,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jg(t,e,s){if(t==null)return t;var r=[],i=0;return ax(t,r,"","",function(a){return e.call(s,a,i++)}),r}function SF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mr={current:null},ox={transition:null},CF={ReactCurrentDispatcher:mr,ReactCurrentBatchConfig:ox,ReactCurrentOwner:E1};function v4(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:jg,forEach:function(t,e,s){jg(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return jg(t,function(){e++}),e},toArray:function(t){return jg(t,function(e){return e})||[]},only:function(t){if(!T1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Lt.Component=yf;Lt.Fragment=fF;Lt.Profiler=mF;Lt.PureComponent=C1;Lt.StrictMode=pF;Lt.Suspense=vF;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CF;Lt.act=v4;Lt.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=f4({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=E1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)g4.call(e,c)&&!x4.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Mm,type:t.type,key:i,ref:a,props:r,_owner:o}};Lt.createContext=function(t){return t={$$typeof:xF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gF,_context:t},t.Consumer=t};Lt.createElement=y4;Lt.createFactory=function(t){var e=y4.bind(null,t);return e.type=t,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(t){return{$$typeof:yF,render:t}};Lt.isValidElement=T1;Lt.lazy=function(t){return{$$typeof:wF,_payload:{_status:-1,_result:t},_init:SF}};Lt.memo=function(t,e){return{$$typeof:bF,type:t,compare:e===void 0?null:e}};Lt.startTransition=function(t){var e=ox.transition;ox.transition={};try{t()}finally{ox.transition=e}};Lt.unstable_act=v4;Lt.useCallback=function(t,e){return mr.current.useCallback(t,e)};Lt.useContext=function(t){return mr.current.useContext(t)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(t){return mr.current.useDeferredValue(t)};Lt.useEffect=function(t,e){return mr.current.useEffect(t,e)};Lt.useId=function(){return mr.current.useId()};Lt.useImperativeHandle=function(t,e,s){return mr.current.useImperativeHandle(t,e,s)};Lt.useInsertionEffect=function(t,e){return mr.current.useInsertionEffect(t,e)};Lt.useLayoutEffect=function(t,e){return mr.current.useLayoutEffect(t,e)};Lt.useMemo=function(t,e){return mr.current.useMemo(t,e)};Lt.useReducer=function(t,e,s){return mr.current.useReducer(t,e,s)};Lt.useRef=function(t){return mr.current.useRef(t)};Lt.useState=function(t){return mr.current.useState(t)};Lt.useSyncExternalStore=function(t,e,s){return mr.current.useSyncExternalStore(t,e,s)};Lt.useTransition=function(){return mr.current.useTransition()};Lt.version="18.3.1";u4.exports=Lt;var p=u4.exports;const qe=Xy(p),ev=uF({__proto__:null,default:qe},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kF=p,EF=Symbol.for("react.element"),TF=Symbol.for("react.fragment"),AF=Object.prototype.hasOwnProperty,PF=kF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IF={key:!0,ref:!0,__self:!0,__source:!0};function b4(t,e,s){var r,i={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)AF.call(e,r)&&!IF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:EF,type:t,key:a,ref:o,props:i,_owner:PF.current}}Jy.Fragment=TF;Jy.jsx=b4;Jy.jsxs=b4;d4.exports=Jy;var n=d4.exports,w4={exports:{}},ii={},j4={exports:{}},N4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,L){var te=$.length;$.push(L);e:for(;0<te;){var F=te-1>>>1,z=$[F];if(0<i(z,L))$[F]=L,$[te]=z,te=F;else break e}}function s($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var L=$[0],te=$.pop();if(te!==L){$[0]=te;e:for(var F=0,z=$.length,pe=z>>>1;F<pe;){var xe=2*(F+1)-1,_e=$[xe],Me=xe+1,K=$[Me];if(0>i(_e,te))Me<z&&0>i(K,_e)?($[F]=K,$[Me]=te,F=Me):($[F]=_e,$[xe]=te,F=xe);else if(Me<z&&0>i(K,te))$[F]=K,$[Me]=te,F=Me;else break e}}return L}function i($,L){var te=$.sortIndex-L.sortIndex;return te!==0?te:$.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,h=3,x=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var L=s(d);L!==null;){if(L.callback===null)r(d);else if(L.startTime<=$)r(d),L.sortIndex=L.expirationTime,e(c,L);else break;L=s(d)}}function C($){if(y=!1,N($),!g)if(s(c)!==null)g=!0,X(_);else{var L=s(d);L!==null&&U(C,L.startTime-$)}}function _($,L){g=!1,y&&(y=!1,b(S),S=-1),x=!0;var te=h;try{for(N(L),f=s(c);f!==null&&(!(f.expirationTime>L)||$&&!P());){var F=f.callback;if(typeof F=="function"){f.callback=null,h=f.priorityLevel;var z=F(f.expirationTime<=L);L=t.unstable_now(),typeof z=="function"?f.callback=z:f===s(c)&&r(c),N(L)}else r(c);f=s(c)}if(f!==null)var pe=!0;else{var xe=s(d);xe!==null&&U(C,xe.startTime-L),pe=!1}return pe}finally{f=null,h=te,x=!1}}var T=!1,j=null,S=-1,A=5,I=-1;function P(){return!(t.unstable_now()-I<A)}function O(){if(j!==null){var $=t.unstable_now();I=$;var L=!0;try{L=j(!0,$)}finally{L?D():(T=!1,j=null)}}else T=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,J=M.port2;M.port1.onmessage=O,D=function(){J.postMessage(null)}}else D=function(){w(O,0)};function X($){j=$,T||(T=!0,D())}function U($,L){S=w(function(){$(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){g||x||(g=!0,X(_))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var te=h;h=L;try{return $()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=h;h=$;try{return L()}finally{h=te}},t.unstable_scheduleCallback=function($,L,te){var F=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?F+te:F):te=F,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=te+z,$={id:u++,callback:L,priorityLevel:$,startTime:te,expirationTime:z,sortIndex:-1},te>F?($.sortIndex=te,e(d,$),s(c)===null&&$===s(d)&&(y?(b(S),S=-1):y=!0,U(C,te-F))):($.sortIndex=z,e(c,$),g||x||(g=!0,X(_))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var L=h;return function(){var te=h;h=L;try{return $.apply(this,arguments)}finally{h=te}}}})(N4);j4.exports=N4;var RF=j4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OF=p,ti=RF;function De(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _4=new Set,Vp={};function au(t,e){Vh(t,e),Vh(t+"Capture",e)}function Vh(t,e){for(Vp[t]=e,t=0;t<e.length;t++)_4.add(e[t])}var ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ew=Object.prototype.hasOwnProperty,DF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JS={},e2={};function MF(t){return ew.call(e2,t)?!0:ew.call(JS,t)?!1:DF.test(t)?e2[t]=!0:(JS[t]=!0,!1)}function LF(t,e,s,r){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FF(t,e,s,r){if(e===null||typeof e>"u"||LF(t,e,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,s,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qn[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qn[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qn[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qn[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qn[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qn[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qn[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qn[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qn[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var A1=/[\-:]([a-z])/g;function P1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(A1,P1);qn[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(A1,P1);qn[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(A1,P1);qn[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qn[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});qn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qn[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function I1(t,e,s,r){var i=qn.hasOwnProperty(e)?qn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FF(e,s,i,r)&&(s=null),r||i===null?MF(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,r=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?t.setAttributeNS(r,e,s):t.setAttribute(e,s))))}var wl=OF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ng=Symbol.for("react.element"),Ju=Symbol.for("react.portal"),eh=Symbol.for("react.fragment"),R1=Symbol.for("react.strict_mode"),tw=Symbol.for("react.profiler"),S4=Symbol.for("react.provider"),C4=Symbol.for("react.context"),O1=Symbol.for("react.forward_ref"),sw=Symbol.for("react.suspense"),nw=Symbol.for("react.suspense_list"),D1=Symbol.for("react.memo"),Ul=Symbol.for("react.lazy"),k4=Symbol.for("react.offscreen"),t2=Symbol.iterator;function Gf(t){return t===null||typeof t!="object"?null:(t=t2&&t[t2]||t["@@iterator"],typeof t=="function"?t:null)}var Ws=Object.assign,N0;function fp(t){if(N0===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);N0=e&&e[1]||""}return`
`+N0+t}var _0=!1;function S0(t,e){if(!t||_0)return"";_0=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{_0=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?fp(t):""}function $F(t){switch(t.tag){case 5:return fp(t.type);case 16:return fp("Lazy");case 13:return fp("Suspense");case 19:return fp("SuspenseList");case 0:case 2:case 15:return t=S0(t.type,!1),t;case 11:return t=S0(t.type.render,!1),t;case 1:return t=S0(t.type,!0),t;default:return""}}function rw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case eh:return"Fragment";case Ju:return"Portal";case tw:return"Profiler";case R1:return"StrictMode";case sw:return"Suspense";case nw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C4:return(t.displayName||"Context")+".Consumer";case S4:return(t._context.displayName||"Context")+".Provider";case O1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D1:return e=t.displayName||null,e!==null?e:rw(t.type)||"Memo";case Ul:e=t._payload,t=t._init;try{return rw(t(e))}catch{}}return null}function UF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rw(e);case 8:return e===R1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ec(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zF(t){var e=E4(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _g(t){t._valueTracker||(t._valueTracker=zF(t))}function T4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),r="";return t&&(r=E4(t)?t.checked?"true":"false":t.value),t=r,t!==s?(e.setValue(t),!0):!1}function Dx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iw(t,e){var s=e.checked;return Ws({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function s2(t,e){var s=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;s=Ec(e.value!=null?e.value:s),t._wrapperState={initialChecked:r,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A4(t,e){e=e.checked,e!=null&&I1(t,"checked",e,!1)}function aw(t,e){A4(t,e);var s=Ec(e.value),r=e.type;if(s!=null)r==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ow(t,e.type,s):e.hasOwnProperty("defaultValue")&&ow(t,e.type,Ec(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n2(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function ow(t,e,s){(e!=="number"||Dx(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var pp=Array.isArray;function hh(t,e,s,r){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&r&&(t[s].defaultSelected=!0)}else{for(s=""+Ec(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function lw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(De(91));return Ws({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r2(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(De(92));if(pp(s)){if(1<s.length)throw Error(De(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Ec(s)}}function P4(t,e){var s=Ec(e.value),r=Ec(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),r!=null&&(t.defaultValue=""+r)}function i2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sg,R4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sg=Sg||document.createElement("div"),Sg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hp(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BF=["Webkit","ms","Moz","O"];Object.keys(jp).forEach(function(t){BF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jp[e]=jp[t]})});function O4(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||jp.hasOwnProperty(t)&&jp[t]?(""+e).trim():e+"px"}function D4(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=O4(s,e[s],r);s==="float"&&(s="cssFloat"),r?t.setProperty(s,i):t[s]=i}}var qF=Ws({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dw(t,e){if(e){if(qF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(De(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(De(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(De(61))}if(e.style!=null&&typeof e.style!="object")throw Error(De(62))}}function uw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hw=null;function M1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fw=null,fh=null,ph=null;function a2(t){if(t=$m(t)){if(typeof fw!="function")throw Error(De(280));var e=t.stateNode;e&&(e=iv(e),fw(t.stateNode,t.type,e))}}function M4(t){fh?ph?ph.push(t):ph=[t]:fh=t}function L4(){if(fh){var t=fh,e=ph;if(ph=fh=null,a2(t),e)for(t=0;t<e.length;t++)a2(e[t])}}function F4(t,e){return t(e)}function $4(){}var C0=!1;function U4(t,e,s){if(C0)return t(e,s);C0=!0;try{return F4(t,e,s)}finally{C0=!1,(fh!==null||ph!==null)&&($4(),L4())}}function Wp(t,e){var s=t.stateNode;if(s===null)return null;var r=iv(s);if(r===null)return null;s=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(De(231,e,typeof s));return s}var pw=!1;if(ol)try{var Yf={};Object.defineProperty(Yf,"passive",{get:function(){pw=!0}}),window.addEventListener("test",Yf,Yf),window.removeEventListener("test",Yf,Yf)}catch{pw=!1}function VF(t,e,s,r,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var Np=!1,Mx=null,Lx=!1,mw=null,HF={onError:function(t){Np=!0,Mx=t}};function WF(t,e,s,r,i,a,o,l,c){Np=!1,Mx=null,VF.apply(HF,arguments)}function KF(t,e,s,r,i,a,o,l,c){if(WF.apply(this,arguments),Np){if(Np){var d=Mx;Np=!1,Mx=null}else throw Error(De(198));Lx||(Lx=!0,mw=d)}}function ou(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function z4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o2(t){if(ou(t)!==t)throw Error(De(188))}function GF(t){var e=t.alternate;if(!e){if(e=ou(t),e===null)throw Error(De(188));return e!==t?null:t}for(var s=t,r=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return o2(i),t;if(a===r)return o2(i),e;a=a.sibling}throw Error(De(188))}if(s.return!==r.return)s=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===s){o=!0,s=i,r=a;break}if(l===r){o=!0,r=i,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,r=i;break}if(l===r){o=!0,r=a,s=i;break}l=l.sibling}if(!o)throw Error(De(189))}}if(s.alternate!==r)throw Error(De(190))}if(s.tag!==3)throw Error(De(188));return s.stateNode.current===s?t:e}function B4(t){return t=GF(t),t!==null?q4(t):null}function q4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q4(t);if(e!==null)return e;t=t.sibling}return null}var V4=ti.unstable_scheduleCallback,l2=ti.unstable_cancelCallback,YF=ti.unstable_shouldYield,QF=ti.unstable_requestPaint,ln=ti.unstable_now,ZF=ti.unstable_getCurrentPriorityLevel,L1=ti.unstable_ImmediatePriority,H4=ti.unstable_UserBlockingPriority,Fx=ti.unstable_NormalPriority,XF=ti.unstable_LowPriority,W4=ti.unstable_IdlePriority,tv=null,no=null;function JF(t){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(tv,t,void 0,(t.current.flags&128)===128)}catch{}}var ma=Math.clz32?Math.clz32:s8,e8=Math.log,t8=Math.LN2;function s8(t){return t>>>=0,t===0?32:31-(e8(t)/t8|0)|0}var Cg=64,kg=4194304;function mp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $x(t,e){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~i;l!==0?r=mp(l):(a&=o,a!==0&&(r=mp(a)))}else o=s&~i,o!==0?r=mp(o):a!==0&&(r=mp(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)s=31-ma(e),i=1<<s,r|=t[s],e&=~i;return r}function n8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r8(t,e){for(var s=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ma(a),l=1<<o,c=i[o];c===-1?(!(l&s)||l&r)&&(i[o]=n8(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function gw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function K4(){var t=Cg;return Cg<<=1,!(Cg&4194240)&&(Cg=64),t}function k0(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Lm(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ma(e),t[e]=s}function i8(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-ma(s),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,s&=~a}}function F1(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var r=31-ma(s),i=1<<r;i&e|t[r]&e&&(t[r]|=e),s&=~i}}var xs=0;function G4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Y4,$1,Q4,Z4,X4,xw=!1,Eg=[],hc=null,fc=null,pc=null,Kp=new Map,Gp=new Map,ql=[],a8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c2(t,e){switch(t){case"focusin":case"focusout":hc=null;break;case"dragenter":case"dragleave":fc=null;break;case"mouseover":case"mouseout":pc=null;break;case"pointerover":case"pointerout":Kp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gp.delete(e.pointerId)}}function Qf(t,e,s,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=$m(e),e!==null&&$1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function o8(t,e,s,r,i){switch(e){case"focusin":return hc=Qf(hc,t,e,s,r,i),!0;case"dragenter":return fc=Qf(fc,t,e,s,r,i),!0;case"mouseover":return pc=Qf(pc,t,e,s,r,i),!0;case"pointerover":var a=i.pointerId;return Kp.set(a,Qf(Kp.get(a)||null,t,e,s,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Gp.set(a,Qf(Gp.get(a)||null,t,e,s,r,i)),!0}return!1}function J4(t){var e=hd(t.target);if(e!==null){var s=ou(e);if(s!==null){if(e=s.tag,e===13){if(e=z4(s),e!==null){t.blockedOn=e,X4(t.priority,function(){Q4(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=yw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);hw=r,s.target.dispatchEvent(r),hw=null}else return e=$m(s),e!==null&&$1(e),t.blockedOn=s,!1;e.shift()}return!0}function d2(t,e,s){lx(t)&&s.delete(e)}function l8(){xw=!1,hc!==null&&lx(hc)&&(hc=null),fc!==null&&lx(fc)&&(fc=null),pc!==null&&lx(pc)&&(pc=null),Kp.forEach(d2),Gp.forEach(d2)}function Zf(t,e){t.blockedOn===e&&(t.blockedOn=null,xw||(xw=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,l8)))}function Yp(t){function e(i){return Zf(i,t)}if(0<Eg.length){Zf(Eg[0],t);for(var s=1;s<Eg.length;s++){var r=Eg[s];r.blockedOn===t&&(r.blockedOn=null)}}for(hc!==null&&Zf(hc,t),fc!==null&&Zf(fc,t),pc!==null&&Zf(pc,t),Kp.forEach(e),Gp.forEach(e),s=0;s<ql.length;s++)r=ql[s],r.blockedOn===t&&(r.blockedOn=null);for(;0<ql.length&&(s=ql[0],s.blockedOn===null);)J4(s),s.blockedOn===null&&ql.shift()}var mh=wl.ReactCurrentBatchConfig,Ux=!0;function c8(t,e,s,r){var i=xs,a=mh.transition;mh.transition=null;try{xs=1,U1(t,e,s,r)}finally{xs=i,mh.transition=a}}function d8(t,e,s,r){var i=xs,a=mh.transition;mh.transition=null;try{xs=4,U1(t,e,s,r)}finally{xs=i,mh.transition=a}}function U1(t,e,s,r){if(Ux){var i=yw(t,e,s,r);if(i===null)L0(t,e,r,zx,s),c2(t,r);else if(o8(i,t,e,s,r))r.stopPropagation();else if(c2(t,r),e&4&&-1<a8.indexOf(t)){for(;i!==null;){var a=$m(i);if(a!==null&&Y4(a),a=yw(t,e,s,r),a===null&&L0(t,e,r,zx,s),a===i)break;i=a}i!==null&&r.stopPropagation()}else L0(t,e,r,null,s)}}var zx=null;function yw(t,e,s,r){if(zx=null,t=M1(r),t=hd(t),t!==null)if(e=ou(t),e===null)t=null;else if(s=e.tag,s===13){if(t=z4(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zx=t,null}function eA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZF()){case L1:return 1;case H4:return 4;case Fx:case XF:return 16;case W4:return 536870912;default:return 16}default:return 16}}var ac=null,z1=null,cx=null;function tA(){if(cx)return cx;var t,e=z1,s=e.length,r,i="value"in ac?ac.value:ac.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var o=s-t;for(r=1;r<=o&&e[s-r]===i[a-r];r++);return cx=i.slice(t,1<r?1-r:void 0)}function dx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tg(){return!0}function u2(){return!1}function ai(t){function e(s,r,i,a,o){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Tg:u2,this.isPropagationStopped=u2,this}return Ws(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Tg)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Tg)},persist:function(){},isPersistent:Tg}),e}var vf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B1=ai(vf),Fm=Ws({},vf,{view:0,detail:0}),u8=ai(Fm),E0,T0,Xf,sv=Ws({},Fm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xf&&(Xf&&t.type==="mousemove"?(E0=t.screenX-Xf.screenX,T0=t.screenY-Xf.screenY):T0=E0=0,Xf=t),E0)},movementY:function(t){return"movementY"in t?t.movementY:T0}}),h2=ai(sv),h8=Ws({},sv,{dataTransfer:0}),f8=ai(h8),p8=Ws({},Fm,{relatedTarget:0}),A0=ai(p8),m8=Ws({},vf,{animationName:0,elapsedTime:0,pseudoElement:0}),g8=ai(m8),x8=Ws({},vf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y8=ai(x8),v8=Ws({},vf,{data:0}),f2=ai(v8),b8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N8(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=j8[t])?!!e[t]:!1}function q1(){return N8}var _8=Ws({},Fm,{key:function(t){if(t.key){var e=b8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?w8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q1,charCode:function(t){return t.type==="keypress"?dx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S8=ai(_8),C8=Ws({},sv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p2=ai(C8),k8=Ws({},Fm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q1}),E8=ai(k8),T8=Ws({},vf,{propertyName:0,elapsedTime:0,pseudoElement:0}),A8=ai(T8),P8=Ws({},sv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),I8=ai(P8),R8=[9,13,27,32],V1=ol&&"CompositionEvent"in window,_p=null;ol&&"documentMode"in document&&(_p=document.documentMode);var O8=ol&&"TextEvent"in window&&!_p,sA=ol&&(!V1||_p&&8<_p&&11>=_p),m2=" ",g2=!1;function nA(t,e){switch(t){case"keyup":return R8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var th=!1;function D8(t,e){switch(t){case"compositionend":return rA(e);case"keypress":return e.which!==32?null:(g2=!0,m2);case"textInput":return t=e.data,t===m2&&g2?null:t;default:return null}}function M8(t,e){if(th)return t==="compositionend"||!V1&&nA(t,e)?(t=tA(),cx=z1=ac=null,th=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sA&&e.locale!=="ko"?null:e.data;default:return null}}var L8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!L8[t.type]:e==="textarea"}function iA(t,e,s,r){M4(r),e=Bx(e,"onChange"),0<e.length&&(s=new B1("onChange","change",null,s,r),t.push({event:s,listeners:e}))}var Sp=null,Qp=null;function F8(t){gA(t,0)}function nv(t){var e=rh(t);if(T4(e))return t}function $8(t,e){if(t==="change")return e}var aA=!1;if(ol){var P0;if(ol){var I0="oninput"in document;if(!I0){var y2=document.createElement("div");y2.setAttribute("oninput","return;"),I0=typeof y2.oninput=="function"}P0=I0}else P0=!1;aA=P0&&(!document.documentMode||9<document.documentMode)}function v2(){Sp&&(Sp.detachEvent("onpropertychange",oA),Qp=Sp=null)}function oA(t){if(t.propertyName==="value"&&nv(Qp)){var e=[];iA(e,Qp,t,M1(t)),U4(F8,e)}}function U8(t,e,s){t==="focusin"?(v2(),Sp=e,Qp=s,Sp.attachEvent("onpropertychange",oA)):t==="focusout"&&v2()}function z8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nv(Qp)}function B8(t,e){if(t==="click")return nv(e)}function q8(t,e){if(t==="input"||t==="change")return nv(e)}function V8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var va=typeof Object.is=="function"?Object.is:V8;function Zp(t,e){if(va(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!ew.call(e,i)||!va(t[i],e[i]))return!1}return!0}function b2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function w2(t,e){var s=b2(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=e&&r>=e)return{node:s,offset:e-t};t=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=b2(s)}}function lA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cA(){for(var t=window,e=Dx();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Dx(t.document)}return e}function H1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H8(t){var e=cA(),s=t.focusedElem,r=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&lA(s.ownerDocument.documentElement,s)){if(r!==null&&H1(s)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=w2(s,a);var o=w2(s,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W8=ol&&"documentMode"in document&&11>=document.documentMode,sh=null,vw=null,Cp=null,bw=!1;function j2(t,e,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;bw||sh==null||sh!==Dx(r)||(r=sh,"selectionStart"in r&&H1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cp&&Zp(Cp,r)||(Cp=r,r=Bx(vw,"onSelect"),0<r.length&&(e=new B1("onSelect","select",null,e,s),t.push({event:e,listeners:r}),e.target=sh)))}function Ag(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var nh={animationend:Ag("Animation","AnimationEnd"),animationiteration:Ag("Animation","AnimationIteration"),animationstart:Ag("Animation","AnimationStart"),transitionend:Ag("Transition","TransitionEnd")},R0={},dA={};ol&&(dA=document.createElement("div").style,"AnimationEvent"in window||(delete nh.animationend.animation,delete nh.animationiteration.animation,delete nh.animationstart.animation),"TransitionEvent"in window||delete nh.transitionend.transition);function rv(t){if(R0[t])return R0[t];if(!nh[t])return t;var e=nh[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in dA)return R0[t]=e[s];return t}var uA=rv("animationend"),hA=rv("animationiteration"),fA=rv("animationstart"),pA=rv("transitionend"),mA=new Map,N2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lc(t,e){mA.set(t,e),au(e,[t])}for(var O0=0;O0<N2.length;O0++){var D0=N2[O0],K8=D0.toLowerCase(),G8=D0[0].toUpperCase()+D0.slice(1);Lc(K8,"on"+G8)}Lc(uA,"onAnimationEnd");Lc(hA,"onAnimationIteration");Lc(fA,"onAnimationStart");Lc("dblclick","onDoubleClick");Lc("focusin","onFocus");Lc("focusout","onBlur");Lc(pA,"onTransitionEnd");Vh("onMouseEnter",["mouseout","mouseover"]);Vh("onMouseLeave",["mouseout","mouseover"]);Vh("onPointerEnter",["pointerout","pointerover"]);Vh("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y8=new Set("cancel close invalid load scroll toggle".split(" ").concat(gp));function _2(t,e,s){var r=t.type||"unknown-event";t.currentTarget=s,KF(r,e,void 0,t),t.currentTarget=null}function gA(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;_2(i,l,d),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;_2(i,l,d),a=c}}}if(Lx)throw t=mw,Lx=!1,mw=null,t}function Ps(t,e){var s=e[Sw];s===void 0&&(s=e[Sw]=new Set);var r=t+"__bubble";s.has(r)||(xA(e,t,2,!1),s.add(r))}function M0(t,e,s){var r=0;e&&(r|=4),xA(s,t,r,e)}var Pg="_reactListening"+Math.random().toString(36).slice(2);function Xp(t){if(!t[Pg]){t[Pg]=!0,_4.forEach(function(s){s!=="selectionchange"&&(Y8.has(s)||M0(s,!1,t),M0(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pg]||(e[Pg]=!0,M0("selectionchange",!1,e))}}function xA(t,e,s,r){switch(eA(e)){case 1:var i=c8;break;case 4:i=d8;break;default:i=U1}s=i.bind(null,e,s,t),i=void 0,!pw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function L0(t,e,s,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=hd(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}U4(function(){var d=a,u=M1(s),f=[];e:{var h=mA.get(t);if(h!==void 0){var x=B1,g=t;switch(t){case"keypress":if(dx(s)===0)break e;case"keydown":case"keyup":x=S8;break;case"focusin":g="focus",x=A0;break;case"focusout":g="blur",x=A0;break;case"beforeblur":case"afterblur":x=A0;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=h2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=f8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=E8;break;case uA:case hA:case fA:x=g8;break;case pA:x=A8;break;case"scroll":x=u8;break;case"wheel":x=I8;break;case"copy":case"cut":case"paste":x=y8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=p2}var y=(e&4)!==0,w=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var v=d,N;v!==null;){N=v;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,b!==null&&(C=Wp(v,b),C!=null&&y.push(Jp(v,C,N)))),w)break;v=v.return}0<y.length&&(h=new x(h,g,null,s,u),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&s!==hw&&(g=s.relatedTarget||s.fromElement)&&(hd(g)||g[ll]))break e;if((x||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,x?(g=s.relatedTarget||s.toElement,x=d,g=g?hd(g):null,g!==null&&(w=ou(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(x=null,g=d),x!==g)){if(y=h2,C="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=p2,C="onPointerLeave",b="onPointerEnter",v="pointer"),w=x==null?h:rh(x),N=g==null?h:rh(g),h=new y(C,v+"leave",x,s,u),h.target=w,h.relatedTarget=N,C=null,hd(u)===d&&(y=new y(b,v+"enter",g,s,u),y.target=N,y.relatedTarget=w,C=y),w=C,x&&g)t:{for(y=x,b=g,v=0,N=y;N;N=Fu(N))v++;for(N=0,C=b;C;C=Fu(C))N++;for(;0<v-N;)y=Fu(y),v--;for(;0<N-v;)b=Fu(b),N--;for(;v--;){if(y===b||b!==null&&y===b.alternate)break t;y=Fu(y),b=Fu(b)}y=null}else y=null;x!==null&&S2(f,h,x,y,!1),g!==null&&w!==null&&S2(f,w,g,y,!0)}}e:{if(h=d?rh(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var _=$8;else if(x2(h))if(aA)_=q8;else{_=z8;var T=U8}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=B8);if(_&&(_=_(t,d))){iA(f,_,s,u);break e}T&&T(t,h,d),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&ow(h,"number",h.value)}switch(T=d?rh(d):window,t){case"focusin":(x2(T)||T.contentEditable==="true")&&(sh=T,vw=d,Cp=null);break;case"focusout":Cp=vw=sh=null;break;case"mousedown":bw=!0;break;case"contextmenu":case"mouseup":case"dragend":bw=!1,j2(f,s,u);break;case"selectionchange":if(W8)break;case"keydown":case"keyup":j2(f,s,u)}var j;if(V1)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else th?nA(t,s)&&(S="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(S="onCompositionStart");S&&(sA&&s.locale!=="ko"&&(th||S!=="onCompositionStart"?S==="onCompositionEnd"&&th&&(j=tA()):(ac=u,z1="value"in ac?ac.value:ac.textContent,th=!0)),T=Bx(d,S),0<T.length&&(S=new f2(S,t,null,s,u),f.push({event:S,listeners:T}),j?S.data=j:(j=rA(s),j!==null&&(S.data=j)))),(j=O8?D8(t,s):M8(t,s))&&(d=Bx(d,"onBeforeInput"),0<d.length&&(u=new f2("onBeforeInput","beforeinput",null,s,u),f.push({event:u,listeners:d}),u.data=j))}gA(f,e)})}function Jp(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Bx(t,e){for(var s=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Wp(t,s),a!=null&&r.unshift(Jp(t,a,i)),a=Wp(t,e),a!=null&&r.push(Jp(t,a,i))),t=t.return}return r}function Fu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function S2(t,e,s,r,i){for(var a=e._reactName,o=[];s!==null&&s!==r;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=Wp(s,a),c!=null&&o.unshift(Jp(s,c,l))):i||(c=Wp(s,a),c!=null&&o.push(Jp(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var Q8=/\r\n?/g,Z8=/\u0000|\uFFFD/g;function C2(t){return(typeof t=="string"?t:""+t).replace(Q8,`
`).replace(Z8,"")}function Ig(t,e,s){if(e=C2(e),C2(t)!==e&&s)throw Error(De(425))}function qx(){}var ww=null,jw=null;function Nw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _w=typeof setTimeout=="function"?setTimeout:void 0,X8=typeof clearTimeout=="function"?clearTimeout:void 0,k2=typeof Promise=="function"?Promise:void 0,J8=typeof queueMicrotask=="function"?queueMicrotask:typeof k2<"u"?function(t){return k2.resolve(null).then(t).catch(e$)}:_w;function e$(t){setTimeout(function(){throw t})}function F0(t,e){var s=e,r=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){t.removeChild(i),Yp(e);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);Yp(e)}function mc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var bf=Math.random().toString(36).slice(2),Ya="__reactFiber$"+bf,em="__reactProps$"+bf,ll="__reactContainer$"+bf,Sw="__reactEvents$"+bf,t$="__reactListeners$"+bf,s$="__reactHandles$"+bf;function hd(t){var e=t[Ya];if(e)return e;for(var s=t.parentNode;s;){if(e=s[ll]||s[Ya]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=E2(t);t!==null;){if(s=t[Ya])return s;t=E2(t)}return e}t=s,s=t.parentNode}return null}function $m(t){return t=t[Ya]||t[ll],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(De(33))}function iv(t){return t[em]||null}var Cw=[],ih=-1;function Fc(t){return{current:t}}function Os(t){0>ih||(t.current=Cw[ih],Cw[ih]=null,ih--)}function Cs(t,e){ih++,Cw[ih]=t.current,t.current=e}var Tc={},Jn=Fc(Tc),Tr=Fc(!1),Dd=Tc;function Hh(t,e){var s=t.type.contextTypes;if(!s)return Tc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(t){return t=t.childContextTypes,t!=null}function Vx(){Os(Tr),Os(Jn)}function T2(t,e,s){if(Jn.current!==Tc)throw Error(De(168));Cs(Jn,e),Cs(Tr,s)}function yA(t,e,s){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(De(108,UF(t)||"Unknown",i));return Ws({},s,r)}function Hx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tc,Dd=Jn.current,Cs(Jn,t),Cs(Tr,Tr.current),!0}function A2(t,e,s){var r=t.stateNode;if(!r)throw Error(De(169));s?(t=yA(t,e,Dd),r.__reactInternalMemoizedMergedChildContext=t,Os(Tr),Os(Jn),Cs(Jn,t)):Os(Tr),Cs(Tr,s)}var Wo=null,av=!1,$0=!1;function vA(t){Wo===null?Wo=[t]:Wo.push(t)}function n$(t){av=!0,vA(t)}function $c(){if(!$0&&Wo!==null){$0=!0;var t=0,e=xs;try{var s=Wo;for(xs=1;t<s.length;t++){var r=s[t];do r=r(!0);while(r!==null)}Wo=null,av=!1}catch(i){throw Wo!==null&&(Wo=Wo.slice(t+1)),V4(L1,$c),i}finally{xs=e,$0=!1}}return null}var ah=[],oh=0,Wx=null,Kx=0,xi=[],yi=0,Md=null,Jo=1,el="";function rd(t,e){ah[oh++]=Kx,ah[oh++]=Wx,Wx=t,Kx=e}function bA(t,e,s){xi[yi++]=Jo,xi[yi++]=el,xi[yi++]=Md,Md=t;var r=Jo;t=el;var i=32-ma(r)-1;r&=~(1<<i),s+=1;var a=32-ma(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-ma(e)+i|s<<i|r,el=a+t}else Jo=1<<a|s<<i|r,el=t}function W1(t){t.return!==null&&(rd(t,1),bA(t,1,0))}function K1(t){for(;t===Wx;)Wx=ah[--oh],ah[oh]=null,Kx=ah[--oh],ah[oh]=null;for(;t===Md;)Md=xi[--yi],xi[yi]=null,el=xi[--yi],xi[yi]=null,Jo=xi[--yi],xi[yi]=null}var Zr=null,Wr=null,Ms=!1,ia=null;function wA(t,e){var s=Si(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function P2(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zr=t,Wr=mc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zr=t,Wr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Md!==null?{id:Jo,overflow:el}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Si(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Zr=t,Wr=null,!0):!1;default:return!1}}function kw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ew(t){if(Ms){var e=Wr;if(e){var s=e;if(!P2(t,e)){if(kw(t))throw Error(De(418));e=mc(s.nextSibling);var r=Zr;e&&P2(t,e)?wA(r,s):(t.flags=t.flags&-4097|2,Ms=!1,Zr=t)}}else{if(kw(t))throw Error(De(418));t.flags=t.flags&-4097|2,Ms=!1,Zr=t}}}function I2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zr=t}function Rg(t){if(t!==Zr)return!1;if(!Ms)return I2(t),Ms=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nw(t.type,t.memoizedProps)),e&&(e=Wr)){if(kw(t))throw jA(),Error(De(418));for(;e;)wA(t,e),e=mc(e.nextSibling)}if(I2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(De(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Wr=mc(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Wr=null}}else Wr=Zr?mc(t.stateNode.nextSibling):null;return!0}function jA(){for(var t=Wr;t;)t=mc(t.nextSibling)}function Wh(){Wr=Zr=null,Ms=!1}function G1(t){ia===null?ia=[t]:ia.push(t)}var r$=wl.ReactCurrentBatchConfig;function Jf(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(De(309));var r=s.stateNode}if(!r)throw Error(De(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(De(284));if(!s._owner)throw Error(De(290,t))}return t}function Og(t,e){throw t=Object.prototype.toString.call(e),Error(De(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R2(t){var e=t._init;return e(t._payload)}function NA(t){function e(b,v){if(t){var N=b.deletions;N===null?(b.deletions=[v],b.flags|=16):N.push(v)}}function s(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function r(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=vc(b,v),b.index=0,b.sibling=null,b}function a(b,v,N){return b.index=N,t?(N=b.alternate,N!==null?(N=N.index,N<v?(b.flags|=2,v):N):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,v,N,C){return v===null||v.tag!==6?(v=W0(N,b.mode,C),v.return=b,v):(v=i(v,N),v.return=b,v)}function c(b,v,N,C){var _=N.type;return _===eh?u(b,v,N.props.children,C,N.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ul&&R2(_)===v.type)?(C=i(v,N.props),C.ref=Jf(b,v,N),C.return=b,C):(C=xx(N.type,N.key,N.props,null,b.mode,C),C.ref=Jf(b,v,N),C.return=b,C)}function d(b,v,N,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==N.containerInfo||v.stateNode.implementation!==N.implementation?(v=K0(N,b.mode,C),v.return=b,v):(v=i(v,N.children||[]),v.return=b,v)}function u(b,v,N,C,_){return v===null||v.tag!==7?(v=Ad(N,b.mode,C,_),v.return=b,v):(v=i(v,N),v.return=b,v)}function f(b,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return v=W0(""+v,b.mode,N),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ng:return N=xx(v.type,v.key,v.props,null,b.mode,N),N.ref=Jf(b,null,v),N.return=b,N;case Ju:return v=K0(v,b.mode,N),v.return=b,v;case Ul:var C=v._init;return f(b,C(v._payload),N)}if(pp(v)||Gf(v))return v=Ad(v,b.mode,N,null),v.return=b,v;Og(b,v)}return null}function h(b,v,N,C){var _=v!==null?v.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return _!==null?null:l(b,v,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ng:return N.key===_?c(b,v,N,C):null;case Ju:return N.key===_?d(b,v,N,C):null;case Ul:return _=N._init,h(b,v,_(N._payload),C)}if(pp(N)||Gf(N))return _!==null?null:u(b,v,N,C,null);Og(b,N)}return null}function x(b,v,N,C,_){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(N)||null,l(v,b,""+C,_);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ng:return b=b.get(C.key===null?N:C.key)||null,c(v,b,C,_);case Ju:return b=b.get(C.key===null?N:C.key)||null,d(v,b,C,_);case Ul:var T=C._init;return x(b,v,N,T(C._payload),_)}if(pp(C)||Gf(C))return b=b.get(N)||null,u(v,b,C,_,null);Og(v,C)}return null}function g(b,v,N,C){for(var _=null,T=null,j=v,S=v=0,A=null;j!==null&&S<N.length;S++){j.index>S?(A=j,j=null):A=j.sibling;var I=h(b,j,N[S],C);if(I===null){j===null&&(j=A);break}t&&j&&I.alternate===null&&e(b,j),v=a(I,v,S),T===null?_=I:T.sibling=I,T=I,j=A}if(S===N.length)return s(b,j),Ms&&rd(b,S),_;if(j===null){for(;S<N.length;S++)j=f(b,N[S],C),j!==null&&(v=a(j,v,S),T===null?_=j:T.sibling=j,T=j);return Ms&&rd(b,S),_}for(j=r(b,j);S<N.length;S++)A=x(j,b,S,N[S],C),A!==null&&(t&&A.alternate!==null&&j.delete(A.key===null?S:A.key),v=a(A,v,S),T===null?_=A:T.sibling=A,T=A);return t&&j.forEach(function(P){return e(b,P)}),Ms&&rd(b,S),_}function y(b,v,N,C){var _=Gf(N);if(typeof _!="function")throw Error(De(150));if(N=_.call(N),N==null)throw Error(De(151));for(var T=_=null,j=v,S=v=0,A=null,I=N.next();j!==null&&!I.done;S++,I=N.next()){j.index>S?(A=j,j=null):A=j.sibling;var P=h(b,j,I.value,C);if(P===null){j===null&&(j=A);break}t&&j&&P.alternate===null&&e(b,j),v=a(P,v,S),T===null?_=P:T.sibling=P,T=P,j=A}if(I.done)return s(b,j),Ms&&rd(b,S),_;if(j===null){for(;!I.done;S++,I=N.next())I=f(b,I.value,C),I!==null&&(v=a(I,v,S),T===null?_=I:T.sibling=I,T=I);return Ms&&rd(b,S),_}for(j=r(b,j);!I.done;S++,I=N.next())I=x(j,b,S,I.value,C),I!==null&&(t&&I.alternate!==null&&j.delete(I.key===null?S:I.key),v=a(I,v,S),T===null?_=I:T.sibling=I,T=I);return t&&j.forEach(function(O){return e(b,O)}),Ms&&rd(b,S),_}function w(b,v,N,C){if(typeof N=="object"&&N!==null&&N.type===eh&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ng:e:{for(var _=N.key,T=v;T!==null;){if(T.key===_){if(_=N.type,_===eh){if(T.tag===7){s(b,T.sibling),v=i(T,N.props.children),v.return=b,b=v;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ul&&R2(_)===T.type){s(b,T.sibling),v=i(T,N.props),v.ref=Jf(b,T,N),v.return=b,b=v;break e}s(b,T);break}else e(b,T);T=T.sibling}N.type===eh?(v=Ad(N.props.children,b.mode,C,N.key),v.return=b,b=v):(C=xx(N.type,N.key,N.props,null,b.mode,C),C.ref=Jf(b,v,N),C.return=b,b=C)}return o(b);case Ju:e:{for(T=N.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===N.containerInfo&&v.stateNode.implementation===N.implementation){s(b,v.sibling),v=i(v,N.children||[]),v.return=b,b=v;break e}else{s(b,v);break}else e(b,v);v=v.sibling}v=K0(N,b.mode,C),v.return=b,b=v}return o(b);case Ul:return T=N._init,w(b,v,T(N._payload),C)}if(pp(N))return g(b,v,N,C);if(Gf(N))return y(b,v,N,C);Og(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,v!==null&&v.tag===6?(s(b,v.sibling),v=i(v,N),v.return=b,b=v):(s(b,v),v=W0(N,b.mode,C),v.return=b,b=v),o(b)):s(b,v)}return w}var Kh=NA(!0),_A=NA(!1),Gx=Fc(null),Yx=null,lh=null,Y1=null;function Q1(){Y1=lh=Yx=null}function Z1(t){var e=Gx.current;Os(Gx),t._currentValue=e}function Tw(t,e,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===s)break;t=t.return}}function gh(t,e){Yx=t,Y1=lh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sr=!0),t.firstContext=null)}function Pi(t){var e=t._currentValue;if(Y1!==t)if(t={context:t,memoizedValue:e,next:null},lh===null){if(Yx===null)throw Error(De(308));lh=t,Yx.dependencies={lanes:0,firstContext:t}}else lh=lh.next=t;return e}var fd=null;function X1(t){fd===null?fd=[t]:fd.push(t)}function SA(t,e,s,r){var i=e.interleaved;return i===null?(s.next=s,X1(e)):(s.next=i.next,i.next=s),e.interleaved=s,cl(t,r)}function cl(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var zl=!1;function J1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gc(t,e,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,cl(t,s)}return i=r.interleaved,i===null?(e.next=e,X1(r)):(e.next=i.next,i.next=e),r.interleaved=e,cl(t,s)}function ux(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,F1(t,s)}}function O2(t,e){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Qx(t,e,s,r){var i=t.updateQueue;zl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;o=0,u=d=c=null,l=a;do{var h=l.lane,x=l.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,y=l;switch(h=e,x=s,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(x,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(x,f,h):g,h==null)break e;f=Ws({},f,h);break e;case 2:zl=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else x={eventTime:x,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=f):u=u.next=x,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Fd|=o,t.lanes=o,t.memoizedState=f}}function D2(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error(De(191,i));i.call(r)}}}var Um={},ro=Fc(Um),tm=Fc(Um),sm=Fc(Um);function pd(t){if(t===Um)throw Error(De(174));return t}function eN(t,e){switch(Cs(sm,e),Cs(tm,t),Cs(ro,Um),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cw(e,t)}Os(ro),Cs(ro,e)}function Gh(){Os(ro),Os(tm),Os(sm)}function kA(t){pd(sm.current);var e=pd(ro.current),s=cw(e,t.type);e!==s&&(Cs(tm,t),Cs(ro,s))}function tN(t){tm.current===t&&(Os(ro),Os(tm))}var Vs=Fc(0);function Zx(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var U0=[];function sN(){for(var t=0;t<U0.length;t++)U0[t]._workInProgressVersionPrimary=null;U0.length=0}var hx=wl.ReactCurrentDispatcher,z0=wl.ReactCurrentBatchConfig,Ld=0,Hs=null,jn=null,Pn=null,Xx=!1,kp=!1,nm=0,i$=0;function Wn(){throw Error(De(321))}function nN(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!va(t[s],e[s]))return!1;return!0}function rN(t,e,s,r,i,a){if(Ld=a,Hs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hx.current=t===null||t.memoizedState===null?c$:d$,t=s(r,i),kp){a=0;do{if(kp=!1,nm=0,25<=a)throw Error(De(301));a+=1,Pn=jn=null,e.updateQueue=null,hx.current=u$,t=s(r,i)}while(kp)}if(hx.current=Jx,e=jn!==null&&jn.next!==null,Ld=0,Pn=jn=Hs=null,Xx=!1,e)throw Error(De(300));return t}function iN(){var t=nm!==0;return nm=0,t}function Ba(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Hs.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function Ii(){if(jn===null){var t=Hs.alternate;t=t!==null?t.memoizedState:null}else t=jn.next;var e=Pn===null?Hs.memoizedState:Pn.next;if(e!==null)Pn=e,jn=t;else{if(t===null)throw Error(De(310));jn=t,t={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Pn===null?Hs.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function rm(t,e){return typeof e=="function"?e(t):e}function B0(t){var e=Ii(),s=e.queue;if(s===null)throw Error(De(311));s.lastRenderedReducer=t;var r=jn,i=r.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((Ld&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Hs.lanes|=u,Fd|=u}d=d.next}while(d!==null&&d!==a);c===null?o=r:c.next=l,va(r,e.memoizedState)||(Sr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,s.lastRenderedState=r}if(t=s.interleaved,t!==null){i=t;do a=i.lane,Hs.lanes|=a,Fd|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function q0(t){var e=Ii(),s=e.queue;if(s===null)throw Error(De(311));s.lastRenderedReducer=t;var r=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);va(a,e.memoizedState)||(Sr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,r]}function EA(){}function TA(t,e){var s=Hs,r=Ii(),i=e(),a=!va(r.memoizedState,i);if(a&&(r.memoizedState=i,Sr=!0),r=r.queue,aN(IA.bind(null,s,r,t),[t]),r.getSnapshot!==e||a||Pn!==null&&Pn.memoizedState.tag&1){if(s.flags|=2048,im(9,PA.bind(null,s,r,i,e),void 0,null),In===null)throw Error(De(349));Ld&30||AA(s,e,i)}return i}function AA(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Hs.updateQueue,e===null?(e={lastEffect:null,stores:null},Hs.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function PA(t,e,s,r){e.value=s,e.getSnapshot=r,RA(e)&&OA(t)}function IA(t,e,s){return s(function(){RA(e)&&OA(t)})}function RA(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!va(t,s)}catch{return!0}}function OA(t){var e=cl(t,1);e!==null&&ga(e,t,1,-1)}function M2(t){var e=Ba();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:t},e.queue=t,t=t.dispatch=l$.bind(null,Hs,t),[e.memoizedState,t]}function im(t,e,s,r){return t={tag:t,create:e,destroy:s,deps:r,next:null},e=Hs.updateQueue,e===null?(e={lastEffect:null,stores:null},Hs.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,e.lastEffect=t)),t}function DA(){return Ii().memoizedState}function fx(t,e,s,r){var i=Ba();Hs.flags|=t,i.memoizedState=im(1|e,s,void 0,r===void 0?null:r)}function ov(t,e,s,r){var i=Ii();r=r===void 0?null:r;var a=void 0;if(jn!==null){var o=jn.memoizedState;if(a=o.destroy,r!==null&&nN(r,o.deps)){i.memoizedState=im(e,s,a,r);return}}Hs.flags|=t,i.memoizedState=im(1|e,s,a,r)}function L2(t,e){return fx(8390656,8,t,e)}function aN(t,e){return ov(2048,8,t,e)}function MA(t,e){return ov(4,2,t,e)}function LA(t,e){return ov(4,4,t,e)}function FA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $A(t,e,s){return s=s!=null?s.concat([t]):null,ov(4,4,FA.bind(null,e,t),s)}function oN(){}function UA(t,e){var s=Ii();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&nN(e,r[1])?r[0]:(s.memoizedState=[t,e],t)}function zA(t,e){var s=Ii();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&nN(e,r[1])?r[0]:(t=t(),s.memoizedState=[t,e],t)}function BA(t,e,s){return Ld&21?(va(s,e)||(s=K4(),Hs.lanes|=s,Fd|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sr=!0),t.memoizedState=s)}function a$(t,e){var s=xs;xs=s!==0&&4>s?s:4,t(!0);var r=z0.transition;z0.transition={};try{t(!1),e()}finally{xs=s,z0.transition=r}}function qA(){return Ii().memoizedState}function o$(t,e,s){var r=yc(t);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},VA(t))HA(e,s);else if(s=SA(t,e,s,r),s!==null){var i=hr();ga(s,t,r,i),WA(s,e,r)}}function l$(t,e,s){var r=yc(t),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(VA(t))HA(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,s);if(i.hasEagerState=!0,i.eagerState=l,va(l,o)){var c=e.interleaved;c===null?(i.next=i,X1(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=SA(t,e,i,r),s!==null&&(i=hr(),ga(s,t,r,i),WA(s,e,r))}}function VA(t){var e=t.alternate;return t===Hs||e!==null&&e===Hs}function HA(t,e){kp=Xx=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function WA(t,e,s){if(s&4194240){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,F1(t,s)}}var Jx={readContext:Pi,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},c$={readContext:Pi,useCallback:function(t,e){return Ba().memoizedState=[t,e===void 0?null:e],t},useContext:Pi,useEffect:L2,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,fx(4194308,4,FA.bind(null,e,t),s)},useLayoutEffect:function(t,e){return fx(4194308,4,t,e)},useInsertionEffect:function(t,e){return fx(4,2,t,e)},useMemo:function(t,e){var s=Ba();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var r=Ba();return e=s!==void 0?s(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=o$.bind(null,Hs,t),[r.memoizedState,t]},useRef:function(t){var e=Ba();return t={current:t},e.memoizedState=t},useState:M2,useDebugValue:oN,useDeferredValue:function(t){return Ba().memoizedState=t},useTransition:function(){var t=M2(!1),e=t[0];return t=a$.bind(null,t[1]),Ba().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var r=Hs,i=Ba();if(Ms){if(s===void 0)throw Error(De(407));s=s()}else{if(s=e(),In===null)throw Error(De(349));Ld&30||AA(r,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,L2(IA.bind(null,r,a,t),[t]),r.flags|=2048,im(9,PA.bind(null,r,a,s,e),void 0,null),s},useId:function(){var t=Ba(),e=In.identifierPrefix;if(Ms){var s=el,r=Jo;s=(r&~(1<<32-ma(r)-1)).toString(32)+s,e=":"+e+"R"+s,s=nm++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=i$++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d$={readContext:Pi,useCallback:UA,useContext:Pi,useEffect:aN,useImperativeHandle:$A,useInsertionEffect:MA,useLayoutEffect:LA,useMemo:zA,useReducer:B0,useRef:DA,useState:function(){return B0(rm)},useDebugValue:oN,useDeferredValue:function(t){var e=Ii();return BA(e,jn.memoizedState,t)},useTransition:function(){var t=B0(rm)[0],e=Ii().memoizedState;return[t,e]},useMutableSource:EA,useSyncExternalStore:TA,useId:qA,unstable_isNewReconciler:!1},u$={readContext:Pi,useCallback:UA,useContext:Pi,useEffect:aN,useImperativeHandle:$A,useInsertionEffect:MA,useLayoutEffect:LA,useMemo:zA,useReducer:q0,useRef:DA,useState:function(){return q0(rm)},useDebugValue:oN,useDeferredValue:function(t){var e=Ii();return jn===null?e.memoizedState=t:BA(e,jn.memoizedState,t)},useTransition:function(){var t=q0(rm)[0],e=Ii().memoizedState;return[t,e]},useMutableSource:EA,useSyncExternalStore:TA,useId:qA,unstable_isNewReconciler:!1};function ta(t,e){if(t&&t.defaultProps){e=Ws({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Aw(t,e,s,r){e=t.memoizedState,s=s(r,e),s=s==null?e:Ws({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var lv={isMounted:function(t){return(t=t._reactInternals)?ou(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var r=hr(),i=yc(t),a=rl(r,i);a.payload=e,s!=null&&(a.callback=s),e=gc(t,a,i),e!==null&&(ga(e,t,i,r),ux(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var r=hr(),i=yc(t),a=rl(r,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=gc(t,a,i),e!==null&&(ga(e,t,i,r),ux(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=hr(),r=yc(t),i=rl(s,r);i.tag=2,e!=null&&(i.callback=e),e=gc(t,i,r),e!==null&&(ga(e,t,r,s),ux(e,t,r))}};function F2(t,e,s,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Zp(s,r)||!Zp(i,a):!0}function KA(t,e,s){var r=!1,i=Tc,a=e.contextType;return typeof a=="object"&&a!==null?a=Pi(a):(i=Ar(e)?Dd:Jn.current,r=e.contextTypes,a=(r=r!=null)?Hh(t,i):Tc),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function $2(t,e,s,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,r),e.state!==t&&lv.enqueueReplaceState(e,e.state,null)}function Pw(t,e,s,r){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},J1(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Pi(a):(a=Ar(e)?Dd:Jn.current,i.context=Hh(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Aw(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lv.enqueueReplaceState(i,i.state,null),Qx(t,s,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yh(t,e){try{var s="",r=e;do s+=$F(r),r=r.return;while(r);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function V0(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Iw(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var h$=typeof WeakMap=="function"?WeakMap:Map;function GA(t,e,s){s=rl(-1,s),s.tag=3,s.payload={element:null};var r=e.value;return s.callback=function(){ty||(ty=!0,Bw=r),Iw(t,e)},s}function YA(t,e,s){s=rl(-1,s),s.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;s.payload=function(){return r(i)},s.callback=function(){Iw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Iw(t,e),typeof r!="function"&&(xc===null?xc=new Set([this]):xc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function U2(t,e,s){var r=t.pingCache;if(r===null){r=t.pingCache=new h$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(s)||(i.add(s),t=C$.bind(null,t,e,s),e.then(t,t))}function z2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function B2(t,e,s,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=rl(-1,1),e.tag=2,gc(s,e,1))),s.lanes|=1),t)}var f$=wl.ReactCurrentOwner,Sr=!1;function ir(t,e,s,r){e.child=t===null?_A(e,null,s,r):Kh(e,t.child,s,r)}function q2(t,e,s,r,i){s=s.render;var a=e.ref;return gh(e,i),r=rN(t,e,s,r,a,i),s=iN(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dl(t,e,i)):(Ms&&s&&W1(e),e.flags|=1,ir(t,e,r,i),e.child)}function V2(t,e,s,r,i){if(t===null){var a=s.type;return typeof a=="function"&&!mN(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,QA(t,e,a,r,i)):(t=xx(s.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:Zp,s(o,r)&&t.ref===e.ref)return dl(t,e,i)}return e.flags|=1,t=vc(a,r),t.ref=e.ref,t.return=e,e.child=t}function QA(t,e,s,r,i){if(t!==null){var a=t.memoizedProps;if(Zp(a,r)&&t.ref===e.ref)if(Sr=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Sr=!0);else return e.lanes=t.lanes,dl(t,e,i)}return Rw(t,e,s,r,i)}function ZA(t,e,s){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(dh,Ur),Ur|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Cs(dh,Ur),Ur|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,Cs(dh,Ur),Ur|=r}else a!==null?(r=a.baseLanes|s,e.memoizedState=null):r=s,Cs(dh,Ur),Ur|=r;return ir(t,e,i,s),e.child}function XA(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Rw(t,e,s,r,i){var a=Ar(s)?Dd:Jn.current;return a=Hh(e,a),gh(e,i),s=rN(t,e,s,r,a,i),r=iN(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dl(t,e,i)):(Ms&&r&&W1(e),e.flags|=1,ir(t,e,s,i),e.child)}function H2(t,e,s,r,i){if(Ar(s)){var a=!0;Hx(e)}else a=!1;if(gh(e,i),e.stateNode===null)px(t,e),KA(e,s,r),Pw(e,s,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Pi(d):(d=Ar(s)?Dd:Jn.current,d=Hh(e,d));var u=s.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&$2(e,o,r,d),zl=!1;var h=e.memoizedState;o.state=h,Qx(e,r,o,i),c=e.memoizedState,l!==r||h!==c||Tr.current||zl?(typeof u=="function"&&(Aw(e,s,u,r),c=e.memoizedState),(l=zl||F2(e,s,l,r,h,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,CA(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:ta(e.type,l),o.props=d,f=e.pendingProps,h=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Pi(c):(c=Ar(s)?Dd:Jn.current,c=Hh(e,c));var x=s.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&$2(e,o,r,c),zl=!1,h=e.memoizedState,o.state=h,Qx(e,r,o,i);var g=e.memoizedState;l!==f||h!==g||Tr.current||zl?(typeof x=="function"&&(Aw(e,s,x,r),g=e.memoizedState),(d=zl||F2(e,s,d,r,h,g,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ow(t,e,s,r,a,i)}function Ow(t,e,s,r,i,a){XA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&A2(e,s,!1),dl(t,e,a);r=e.stateNode,f$.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Kh(e,t.child,null,a),e.child=Kh(e,null,l,a)):ir(t,e,l,a),e.memoizedState=r.state,i&&A2(e,s,!0),e.child}function JA(t){var e=t.stateNode;e.pendingContext?T2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T2(t,e.context,!1),eN(t,e.containerInfo)}function W2(t,e,s,r,i){return Wh(),G1(i),e.flags|=256,ir(t,e,s,r),e.child}var Dw={dehydrated:null,treeContext:null,retryLane:0};function Mw(t){return{baseLanes:t,cachePool:null,transitions:null}}function eP(t,e,s){var r=e.pendingProps,i=Vs.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Cs(Vs,i&1),t===null)return Ew(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=uv(o,r,0,null),t=Ad(t,r,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Mw(s),e.memoizedState=Dw,t):lN(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return p$(t,e,o,r,l,i,s);if(a){a=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=vc(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=vc(l,a):(a=Ad(a,o,s,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Mw(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~s,e.memoizedState=Dw,r}return a=t.child,t=a.sibling,r=vc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=s),r.return=e,r.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=r,e.memoizedState=null,r}function lN(t,e){return e=uv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dg(t,e,s,r){return r!==null&&G1(r),Kh(e,t.child,null,s),t=lN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function p$(t,e,s,r,i,a,o){if(s)return e.flags&256?(e.flags&=-257,r=V0(Error(De(422))),Dg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=uv({mode:"visible",children:r.children},i,0,null),a=Ad(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Kh(e,t.child,null,o),e.child.memoizedState=Mw(o),e.memoizedState=Dw,a);if(!(e.mode&1))return Dg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(De(419)),r=V0(a,r,void 0),Dg(t,e,o,r)}if(l=(o&t.childLanes)!==0,Sr||l){if(r=In,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,cl(t,i),ga(r,t,i,-1))}return pN(),r=V0(Error(De(421))),Dg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=k$.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Wr=mc(i.nextSibling),Zr=e,Ms=!0,ia=null,t!==null&&(xi[yi++]=Jo,xi[yi++]=el,xi[yi++]=Md,Jo=t.id,el=t.overflow,Md=e),e=lN(e,r.children),e.flags|=4096,e)}function K2(t,e,s){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tw(t.return,e,s)}function H0(t,e,s,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=i)}function tP(t,e,s){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(ir(t,e,r.children,s),r=Vs.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K2(t,s,e);else if(t.tag===19)K2(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Cs(Vs,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&Zx(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),H0(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zx(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}H0(e,!0,s,null,a);break;case"together":H0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function px(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dl(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Fd|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(De(153));if(e.child!==null){for(t=e.child,s=vc(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=vc(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function m$(t,e,s){switch(e.tag){case 3:JA(e),Wh();break;case 5:kA(e);break;case 1:Ar(e.type)&&Hx(e);break;case 4:eN(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Cs(Gx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Cs(Vs,Vs.current&1),e.flags|=128,null):s&e.child.childLanes?eP(t,e,s):(Cs(Vs,Vs.current&1),t=dl(t,e,s),t!==null?t.sibling:null);Cs(Vs,Vs.current&1);break;case 19:if(r=(s&e.childLanes)!==0,t.flags&128){if(r)return tP(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Cs(Vs,Vs.current),r)break;return null;case 22:case 23:return e.lanes=0,ZA(t,e,s)}return dl(t,e,s)}var sP,Lw,nP,rP;sP=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Lw=function(){};nP=function(t,e,s,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pd(ro.current);var a=null;switch(s){case"input":i=iw(t,i),r=iw(t,r),a=[];break;case"select":i=Ws({},i,{value:void 0}),r=Ws({},r,{value:void 0}),a=[];break;case"textarea":i=lw(t,i),r=lw(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qx)}dw(s,r);var o;s=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vp.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ps("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};rP=function(t,e,s,r){s!==r&&(e.flags|=4)};function ep(t,e){if(!Ms)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=s,e}function g$(t,e,s){var r=e.pendingProps;switch(K1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(e),null;case 1:return Ar(e.type)&&Vx(),Kn(e),null;case 3:return r=e.stateNode,Gh(),Os(Tr),Os(Jn),sN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ia!==null&&(Hw(ia),ia=null))),Lw(t,e),Kn(e),null;case 5:tN(e);var i=pd(sm.current);if(s=e.type,t!==null&&e.stateNode!=null)nP(t,e,s,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(De(166));return Kn(e),null}if(t=pd(ro.current),Rg(e)){r=e.stateNode,s=e.type;var a=e.memoizedProps;switch(r[Ya]=e,r[em]=a,t=(e.mode&1)!==0,s){case"dialog":Ps("cancel",r),Ps("close",r);break;case"iframe":case"object":case"embed":Ps("load",r);break;case"video":case"audio":for(i=0;i<gp.length;i++)Ps(gp[i],r);break;case"source":Ps("error",r);break;case"img":case"image":case"link":Ps("error",r),Ps("load",r);break;case"details":Ps("toggle",r);break;case"input":s2(r,a),Ps("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ps("invalid",r);break;case"textarea":r2(r,a),Ps("invalid",r)}dw(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ig(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ig(r.textContent,l,t),i=["children",""+l]):Vp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ps("scroll",r)}switch(s){case"input":_g(r),n2(r,a,!0);break;case"textarea":_g(r),i2(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=qx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I4(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(s,{is:r.is}):(t=o.createElement(s),s==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,s),t[Ya]=e,t[em]=r,sP(t,e,!1,!1),e.stateNode=t;e:{switch(o=uw(s,r),s){case"dialog":Ps("cancel",t),Ps("close",t),i=r;break;case"iframe":case"object":case"embed":Ps("load",t),i=r;break;case"video":case"audio":for(i=0;i<gp.length;i++)Ps(gp[i],t);i=r;break;case"source":Ps("error",t),i=r;break;case"img":case"image":case"link":Ps("error",t),Ps("load",t),i=r;break;case"details":Ps("toggle",t),i=r;break;case"input":s2(t,r),i=iw(t,r),Ps("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ws({},r,{value:void 0}),Ps("invalid",t);break;case"textarea":r2(t,r),i=lw(t,r),Ps("invalid",t);break;default:i=r}dw(s,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?D4(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&R4(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Hp(t,c):typeof c=="number"&&Hp(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Vp.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ps("scroll",t):c!=null&&I1(t,a,c,o))}switch(s){case"input":_g(t),n2(t,r,!1);break;case"textarea":_g(t),i2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ec(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?hh(t,!!r.multiple,a,!1):r.defaultValue!=null&&hh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=qx)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kn(e),null;case 6:if(t&&e.stateNode!=null)rP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(De(166));if(s=pd(sm.current),pd(ro.current),Rg(e)){if(r=e.stateNode,s=e.memoizedProps,r[Ya]=e,(a=r.nodeValue!==s)&&(t=Zr,t!==null))switch(t.tag){case 3:Ig(r.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ig(r.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[Ya]=e,e.stateNode=r}return Kn(e),null;case 13:if(Os(Vs),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ms&&Wr!==null&&e.mode&1&&!(e.flags&128))jA(),Wh(),e.flags|=98560,a=!1;else if(a=Rg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(De(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(De(317));a[Ya]=e}else Wh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kn(e),a=!1}else ia!==null&&(Hw(ia),ia=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vs.current&1?Sn===0&&(Sn=3):pN())),e.updateQueue!==null&&(e.flags|=4),Kn(e),null);case 4:return Gh(),Lw(t,e),t===null&&Xp(e.stateNode.containerInfo),Kn(e),null;case 10:return Z1(e.type._context),Kn(e),null;case 17:return Ar(e.type)&&Vx(),Kn(e),null;case 19:if(Os(Vs),a=e.memoizedState,a===null)return Kn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)ep(a,!1);else{if(Sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zx(t),o!==null){for(e.flags|=128,ep(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=s,s=e.child;s!==null;)a=s,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Cs(Vs,Vs.current&1|2),e.child}t=t.sibling}a.tail!==null&&ln()>Qh&&(e.flags|=128,r=!0,ep(a,!1),e.lanes=4194304)}else{if(!r)if(t=Zx(o),t!==null){if(e.flags|=128,r=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),ep(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ms)return Kn(e),null}else 2*ln()-a.renderingStartTime>Qh&&s!==1073741824&&(e.flags|=128,r=!0,ep(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(s=a.last,s!==null?s.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ln(),e.sibling=null,s=Vs.current,Cs(Vs,r?s&1|2:s&1),e):(Kn(e),null);case 22:case 23:return fN(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ur&1073741824&&(Kn(e),e.subtreeFlags&6&&(e.flags|=8192)):Kn(e),null;case 24:return null;case 25:return null}throw Error(De(156,e.tag))}function x$(t,e){switch(K1(e),e.tag){case 1:return Ar(e.type)&&Vx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gh(),Os(Tr),Os(Jn),sN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tN(e),null;case 13:if(Os(Vs),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(De(340));Wh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Os(Vs),null;case 4:return Gh(),null;case 10:return Z1(e.type._context),null;case 22:case 23:return fN(),null;case 24:return null;default:return null}}var Mg=!1,Qn=!1,y$=typeof WeakSet=="function"?WeakSet:Set,et=null;function ch(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Qs(t,e,r)}else s.current=null}function Fw(t,e,s){try{s()}catch(r){Qs(t,e,r)}}var G2=!1;function v$(t,e){if(ww=Ux,t=cA(),H1(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=t,h=null;t:for(;;){for(var x;f!==s||i!==0&&f.nodeType!==3||(l=o+i),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===t)break t;if(h===s&&++d===i&&(l=o),h===a&&++u===r&&(c=o),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(jw={focusedElem:t,selectionRange:s},Ux=!1,et=e;et!==null;)if(e=et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,et=t;else for(;et!==null;){e=et;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:ta(e.type,y),w);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(C){Qs(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}return g=G2,G2=!1,g}function Ep(t,e,s){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Fw(e,s,a)}i=i.next}while(i!==r)}}function cv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var r=s.create;s.destroy=r()}s=s.next}while(s!==e)}}function $w(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function iP(t){var e=t.alternate;e!==null&&(t.alternate=null,iP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ya],delete e[em],delete e[Sw],delete e[t$],delete e[s$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aP(t){return t.tag===5||t.tag===3||t.tag===4}function Y2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uw(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=qx));else if(r!==4&&(t=t.child,t!==null))for(Uw(t,e,s),t=t.sibling;t!==null;)Uw(t,e,s),t=t.sibling}function zw(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zw(t,e,s),t=t.sibling;t!==null;)zw(t,e,s),t=t.sibling}var $n=null,ra=!1;function Pl(t,e,s){for(s=s.child;s!==null;)oP(t,e,s),s=s.sibling}function oP(t,e,s){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(tv,s)}catch{}switch(s.tag){case 5:Qn||ch(s,e);case 6:var r=$n,i=ra;$n=null,Pl(t,e,s),$n=r,ra=i,$n!==null&&(ra?(t=$n,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):$n.removeChild(s.stateNode));break;case 18:$n!==null&&(ra?(t=$n,s=s.stateNode,t.nodeType===8?F0(t.parentNode,s):t.nodeType===1&&F0(t,s),Yp(t)):F0($n,s.stateNode));break;case 4:r=$n,i=ra,$n=s.stateNode.containerInfo,ra=!0,Pl(t,e,s),$n=r,ra=i;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Fw(s,e,o),i=i.next}while(i!==r)}Pl(t,e,s);break;case 1:if(!Qn&&(ch(s,e),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(l){Qs(s,e,l)}Pl(t,e,s);break;case 21:Pl(t,e,s);break;case 22:s.mode&1?(Qn=(r=Qn)||s.memoizedState!==null,Pl(t,e,s),Qn=r):Pl(t,e,s);break;default:Pl(t,e,s)}}function Q2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new y$),e.forEach(function(r){var i=E$.bind(null,t,r);s.has(r)||(s.add(r),r.then(i,i))})}}function Zi(t,e){var s=e.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:$n=l.stateNode,ra=!1;break e;case 3:$n=l.stateNode.containerInfo,ra=!0;break e;case 4:$n=l.stateNode.containerInfo,ra=!0;break e}l=l.return}if($n===null)throw Error(De(160));oP(a,o,i),$n=null,ra=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Qs(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lP(e,t),e=e.sibling}function lP(t,e){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zi(e,t),za(t),r&4){try{Ep(3,t,t.return),cv(3,t)}catch(y){Qs(t,t.return,y)}try{Ep(5,t,t.return)}catch(y){Qs(t,t.return,y)}}break;case 1:Zi(e,t),za(t),r&512&&s!==null&&ch(s,s.return);break;case 5:if(Zi(e,t),za(t),r&512&&s!==null&&ch(s,s.return),t.flags&32){var i=t.stateNode;try{Hp(i,"")}catch(y){Qs(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=s!==null?s.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&A4(i,a),uw(l,o);var d=uw(l,a);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?D4(i,f):u==="dangerouslySetInnerHTML"?R4(i,f):u==="children"?Hp(i,f):I1(i,u,f,d)}switch(l){case"input":aw(i,a);break;case"textarea":P4(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?hh(i,!!a.multiple,x,!1):h!==!!a.multiple&&(a.defaultValue!=null?hh(i,!!a.multiple,a.defaultValue,!0):hh(i,!!a.multiple,a.multiple?[]:"",!1))}i[em]=a}catch(y){Qs(t,t.return,y)}}break;case 6:if(Zi(e,t),za(t),r&4){if(t.stateNode===null)throw Error(De(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){Qs(t,t.return,y)}}break;case 3:if(Zi(e,t),za(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Yp(e.containerInfo)}catch(y){Qs(t,t.return,y)}break;case 4:Zi(e,t),za(t);break;case 13:Zi(e,t),za(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(uN=ln())),r&4&&Q2(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(Qn=(d=Qn)||u,Zi(e,t),Qn=d):Zi(e,t),za(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(et=t,u=t.child;u!==null;){for(f=et=u;et!==null;){switch(h=et,x=h.child,h.tag){case 0:case 11:case 14:case 15:Ep(4,h,h.return);break;case 1:ch(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,s=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){Qs(r,s,y)}}break;case 5:ch(h,h.return);break;case 22:if(h.memoizedState!==null){X2(f);continue}}x!==null?(x.return=h,et=x):X2(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=O4("display",o))}catch(y){Qs(t,t.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Qs(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zi(e,t),za(t),r&4&&Q2(t);break;case 21:break;default:Zi(e,t),za(t)}}function za(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(aP(s)){var r=s;break e}s=s.return}throw Error(De(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hp(i,""),r.flags&=-33);var a=Y2(t);zw(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Y2(t);Uw(t,l,o);break;default:throw Error(De(161))}}catch(c){Qs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b$(t,e,s){et=t,cP(t)}function cP(t,e,s){for(var r=(t.mode&1)!==0;et!==null;){var i=et,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Mg;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Qn;l=Mg;var d=Qn;if(Mg=o,(Qn=c)&&!d)for(et=i;et!==null;)o=et,c=o.child,o.tag===22&&o.memoizedState!==null?J2(i):c!==null?(c.return=o,et=c):J2(i);for(;a!==null;)et=a,cP(a),a=a.sibling;et=i,Mg=l,Qn=d}Z2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,et=a):Z2(t)}}function Z2(t){for(;et!==null;){var e=et;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qn||cv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(s===null)r.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:ta(e.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&D2(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}D2(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Yp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}Qn||e.flags&512&&$w(e)}catch(h){Qs(e,e.return,h)}}if(e===t){et=null;break}if(s=e.sibling,s!==null){s.return=e.return,et=s;break}et=e.return}}function X2(t){for(;et!==null;){var e=et;if(e===t){et=null;break}var s=e.sibling;if(s!==null){s.return=e.return,et=s;break}et=e.return}}function J2(t){for(;et!==null;){var e=et;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{cv(4,e)}catch(c){Qs(e,s,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Qs(e,i,c)}}var a=e.return;try{$w(e)}catch(c){Qs(e,a,c)}break;case 5:var o=e.return;try{$w(e)}catch(c){Qs(e,o,c)}}}catch(c){Qs(e,e.return,c)}if(e===t){et=null;break}var l=e.sibling;if(l!==null){l.return=e.return,et=l;break}et=e.return}}var w$=Math.ceil,ey=wl.ReactCurrentDispatcher,cN=wl.ReactCurrentOwner,Ei=wl.ReactCurrentBatchConfig,Xt=0,In=null,xn=null,Un=0,Ur=0,dh=Fc(0),Sn=0,am=null,Fd=0,dv=0,dN=0,Tp=null,_r=null,uN=0,Qh=1/0,Ho=null,ty=!1,Bw=null,xc=null,Lg=!1,oc=null,sy=0,Ap=0,qw=null,mx=-1,gx=0;function hr(){return Xt&6?ln():mx!==-1?mx:mx=ln()}function yc(t){return t.mode&1?Xt&2&&Un!==0?Un&-Un:r$.transition!==null?(gx===0&&(gx=K4()),gx):(t=xs,t!==0||(t=window.event,t=t===void 0?16:eA(t.type)),t):1}function ga(t,e,s,r){if(50<Ap)throw Ap=0,qw=null,Error(De(185));Lm(t,s,r),(!(Xt&2)||t!==In)&&(t===In&&(!(Xt&2)&&(dv|=s),Sn===4&&Vl(t,Un)),Pr(t,r),s===1&&Xt===0&&!(e.mode&1)&&(Qh=ln()+500,av&&$c()))}function Pr(t,e){var s=t.callbackNode;r8(t,e);var r=$x(t,t===In?Un:0);if(r===0)s!==null&&l2(s),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(s!=null&&l2(s),e===1)t.tag===0?n$(eC.bind(null,t)):vA(eC.bind(null,t)),J8(function(){!(Xt&6)&&$c()}),s=null;else{switch(G4(r)){case 1:s=L1;break;case 4:s=H4;break;case 16:s=Fx;break;case 536870912:s=W4;break;default:s=Fx}s=xP(s,dP.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function dP(t,e){if(mx=-1,gx=0,Xt&6)throw Error(De(327));var s=t.callbackNode;if(xh()&&t.callbackNode!==s)return null;var r=$x(t,t===In?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ny(t,r);else{e=r;var i=Xt;Xt|=2;var a=hP();(In!==t||Un!==e)&&(Ho=null,Qh=ln()+500,Td(t,e));do try{_$();break}catch(l){uP(t,l)}while(!0);Q1(),ey.current=a,Xt=i,xn!==null?e=0:(In=null,Un=0,e=Sn)}if(e!==0){if(e===2&&(i=gw(t),i!==0&&(r=i,e=Vw(t,i))),e===1)throw s=am,Td(t,0),Vl(t,r),Pr(t,ln()),s;if(e===6)Vl(t,r);else{if(i=t.current.alternate,!(r&30)&&!j$(i)&&(e=ny(t,r),e===2&&(a=gw(t),a!==0&&(r=a,e=Vw(t,a))),e===1))throw s=am,Td(t,0),Vl(t,r),Pr(t,ln()),s;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(De(345));case 2:id(t,_r,Ho);break;case 3:if(Vl(t,r),(r&130023424)===r&&(e=uN+500-ln(),10<e)){if($x(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){hr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_w(id.bind(null,t,_r,Ho),e);break}id(t,_r,Ho);break;case 4:if(Vl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ma(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=ln()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w$(r/1960))-r,10<r){t.timeoutHandle=_w(id.bind(null,t,_r,Ho),r);break}id(t,_r,Ho);break;case 5:id(t,_r,Ho);break;default:throw Error(De(329))}}}return Pr(t,ln()),t.callbackNode===s?dP.bind(null,t):null}function Vw(t,e){var s=Tp;return t.current.memoizedState.isDehydrated&&(Td(t,e).flags|=256),t=ny(t,e),t!==2&&(e=_r,_r=s,e!==null&&Hw(e)),t}function Hw(t){_r===null?_r=t:_r.push.apply(_r,t)}function j$(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],a=i.getSnapshot;i=i.value;try{if(!va(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vl(t,e){for(e&=~dN,e&=~dv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-ma(e),r=1<<s;t[s]=-1,e&=~r}}function eC(t){if(Xt&6)throw Error(De(327));xh();var e=$x(t,0);if(!(e&1))return Pr(t,ln()),null;var s=ny(t,e);if(t.tag!==0&&s===2){var r=gw(t);r!==0&&(e=r,s=Vw(t,r))}if(s===1)throw s=am,Td(t,0),Vl(t,e),Pr(t,ln()),s;if(s===6)throw Error(De(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,id(t,_r,Ho),Pr(t,ln()),null}function hN(t,e){var s=Xt;Xt|=1;try{return t(e)}finally{Xt=s,Xt===0&&(Qh=ln()+500,av&&$c())}}function $d(t){oc!==null&&oc.tag===0&&!(Xt&6)&&xh();var e=Xt;Xt|=1;var s=Ei.transition,r=xs;try{if(Ei.transition=null,xs=1,t)return t()}finally{xs=r,Ei.transition=s,Xt=e,!(Xt&6)&&$c()}}function fN(){Ur=dh.current,Os(dh)}function Td(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,X8(s)),xn!==null)for(s=xn.return;s!==null;){var r=s;switch(K1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vx();break;case 3:Gh(),Os(Tr),Os(Jn),sN();break;case 5:tN(r);break;case 4:Gh();break;case 13:Os(Vs);break;case 19:Os(Vs);break;case 10:Z1(r.type._context);break;case 22:case 23:fN()}s=s.return}if(In=t,xn=t=vc(t.current,null),Un=Ur=e,Sn=0,am=null,dN=dv=Fd=0,_r=Tp=null,fd!==null){for(e=0;e<fd.length;e++)if(s=fd[e],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}s.pending=r}fd=null}return t}function uP(t,e){do{var s=xn;try{if(Q1(),hx.current=Jx,Xx){for(var r=Hs.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xx=!1}if(Ld=0,Pn=jn=Hs=null,kp=!1,nm=0,cN.current=null,s===null||s.return===null){Sn=1,am=e,xn=null;break}e:{var a=t,o=s.return,l=s,c=e;if(e=Un,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=z2(o);if(x!==null){x.flags&=-257,B2(x,o,l,a,e),x.mode&1&&U2(a,d,e),e=x,c=d;var g=e.updateQueue;if(g===null){var y=new Set;y.add(c),e.updateQueue=y}else g.add(c);break e}else{if(!(e&1)){U2(a,d,e),pN();break e}c=Error(De(426))}}else if(Ms&&l.mode&1){var w=z2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),B2(w,o,l,a,e),G1(Yh(c,l));break e}}a=c=Yh(c,l),Sn!==4&&(Sn=2),Tp===null?Tp=[a]:Tp.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=GA(a,c,e);O2(a,b);break e;case 1:l=c;var v=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(xc===null||!xc.has(N)))){a.flags|=65536,e&=-e,a.lanes|=e;var C=YA(a,l,e);O2(a,C);break e}}a=a.return}while(a!==null)}pP(s)}catch(_){e=_,xn===s&&s!==null&&(xn=s=s.return);continue}break}while(!0)}function hP(){var t=ey.current;return ey.current=Jx,t===null?Jx:t}function pN(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),In===null||!(Fd&268435455)&&!(dv&268435455)||Vl(In,Un)}function ny(t,e){var s=Xt;Xt|=2;var r=hP();(In!==t||Un!==e)&&(Ho=null,Td(t,e));do try{N$();break}catch(i){uP(t,i)}while(!0);if(Q1(),Xt=s,ey.current=r,xn!==null)throw Error(De(261));return In=null,Un=0,Sn}function N$(){for(;xn!==null;)fP(xn)}function _$(){for(;xn!==null&&!YF();)fP(xn)}function fP(t){var e=gP(t.alternate,t,Ur);t.memoizedProps=t.pendingProps,e===null?pP(t):xn=e,cN.current=null}function pP(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=x$(s,e),s!==null){s.flags&=32767,xn=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sn=6,xn=null;return}}else if(s=g$(s,e,Ur),s!==null){xn=s;return}if(e=e.sibling,e!==null){xn=e;return}xn=e=t}while(e!==null);Sn===0&&(Sn=5)}function id(t,e,s){var r=xs,i=Ei.transition;try{Ei.transition=null,xs=1,S$(t,e,s,r)}finally{Ei.transition=i,xs=r}return null}function S$(t,e,s,r){do xh();while(oc!==null);if(Xt&6)throw Error(De(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(De(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(i8(t,a),t===In&&(xn=In=null,Un=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Lg||(Lg=!0,xP(Fx,function(){return xh(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Ei.transition,Ei.transition=null;var o=xs;xs=1;var l=Xt;Xt|=4,cN.current=null,v$(t,s),lP(s,t),H8(jw),Ux=!!ww,jw=ww=null,t.current=s,b$(s),QF(),Xt=l,xs=o,Ei.transition=a}else t.current=s;if(Lg&&(Lg=!1,oc=t,sy=i),a=t.pendingLanes,a===0&&(xc=null),JF(s.stateNode),Pr(t,ln()),e!==null)for(r=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(ty)throw ty=!1,t=Bw,Bw=null,t;return sy&1&&t.tag!==0&&xh(),a=t.pendingLanes,a&1?t===qw?Ap++:(Ap=0,qw=t):Ap=0,$c(),null}function xh(){if(oc!==null){var t=G4(sy),e=Ei.transition,s=xs;try{if(Ei.transition=null,xs=16>t?16:t,oc===null)var r=!1;else{if(t=oc,oc=null,sy=0,Xt&6)throw Error(De(331));var i=Xt;for(Xt|=4,et=t.current;et!==null;){var a=et,o=a.child;if(et.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(et=d;et!==null;){var u=et;switch(u.tag){case 0:case 11:case 15:Ep(8,u,a)}var f=u.child;if(f!==null)f.return=u,et=f;else for(;et!==null;){u=et;var h=u.sibling,x=u.return;if(iP(u),u===d){et=null;break}if(h!==null){h.return=x,et=h;break}et=x}}}var g=a.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}et=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,et=o;else e:for(;et!==null;){if(a=et,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ep(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,et=b;break e}et=a.return}}var v=t.current;for(et=v;et!==null;){o=et;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,et=N;else e:for(o=v;et!==null;){if(l=et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cv(9,l)}}catch(_){Qs(l,l.return,_)}if(l===o){et=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,et=C;break e}et=l.return}}if(Xt=i,$c(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(tv,t)}catch{}r=!0}return r}finally{xs=s,Ei.transition=e}}return!1}function tC(t,e,s){e=Yh(s,e),e=GA(t,e,1),t=gc(t,e,1),e=hr(),t!==null&&(Lm(t,1,e),Pr(t,e))}function Qs(t,e,s){if(t.tag===3)tC(t,t,s);else for(;e!==null;){if(e.tag===3){tC(e,t,s);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xc===null||!xc.has(r))){t=Yh(s,t),t=YA(e,t,1),e=gc(e,t,1),t=hr(),e!==null&&(Lm(e,1,t),Pr(e,t));break}}e=e.return}}function C$(t,e,s){var r=t.pingCache;r!==null&&r.delete(e),e=hr(),t.pingedLanes|=t.suspendedLanes&s,In===t&&(Un&s)===s&&(Sn===4||Sn===3&&(Un&130023424)===Un&&500>ln()-uN?Td(t,0):dN|=s),Pr(t,e)}function mP(t,e){e===0&&(t.mode&1?(e=kg,kg<<=1,!(kg&130023424)&&(kg=4194304)):e=1);var s=hr();t=cl(t,e),t!==null&&(Lm(t,e,s),Pr(t,s))}function k$(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),mP(t,s)}function E$(t,e){var s=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(De(314))}r!==null&&r.delete(e),mP(t,s)}var gP;gP=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tr.current)Sr=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Sr=!1,m$(t,e,s);Sr=!!(t.flags&131072)}else Sr=!1,Ms&&e.flags&1048576&&bA(e,Kx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;px(t,e),t=e.pendingProps;var i=Hh(e,Jn.current);gh(e,s),i=rN(null,e,r,t,i,s);var a=iN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(r)?(a=!0,Hx(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,J1(e),i.updater=lv,e.stateNode=i,i._reactInternals=e,Pw(e,r,t,s),e=Ow(null,e,r,!0,a,s)):(e.tag=0,Ms&&a&&W1(e),ir(null,e,i,s),e=e.child),e;case 16:r=e.elementType;e:{switch(px(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=A$(r),t=ta(r,t),i){case 0:e=Rw(null,e,r,t,s);break e;case 1:e=H2(null,e,r,t,s);break e;case 11:e=q2(null,e,r,t,s);break e;case 14:e=V2(null,e,r,ta(r.type,t),s);break e}throw Error(De(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ta(r,i),Rw(t,e,r,i,s);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ta(r,i),H2(t,e,r,i,s);case 3:e:{if(JA(e),t===null)throw Error(De(387));r=e.pendingProps,a=e.memoizedState,i=a.element,CA(t,e),Qx(e,r,null,s);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Yh(Error(De(423)),e),e=W2(t,e,r,s,i);break e}else if(r!==i){i=Yh(Error(De(424)),e),e=W2(t,e,r,s,i);break e}else for(Wr=mc(e.stateNode.containerInfo.firstChild),Zr=e,Ms=!0,ia=null,s=_A(e,null,r,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Wh(),r===i){e=dl(t,e,s);break e}ir(t,e,r,s)}e=e.child}return e;case 5:return kA(e),t===null&&Ew(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Nw(r,i)?o=null:a!==null&&Nw(r,a)&&(e.flags|=32),XA(t,e),ir(t,e,o,s),e.child;case 6:return t===null&&Ew(e),null;case 13:return eP(t,e,s);case 4:return eN(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kh(e,null,r,s):ir(t,e,r,s),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ta(r,i),q2(t,e,r,i,s);case 7:return ir(t,e,e.pendingProps,s),e.child;case 8:return ir(t,e,e.pendingProps.children,s),e.child;case 12:return ir(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Cs(Gx,r._currentValue),r._currentValue=o,a!==null)if(va(a.value,o)){if(a.children===i.children&&!Tr.current){e=dl(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=rl(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Tw(a.return,s,e),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(De(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Tw(o,s,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ir(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,gh(e,s),i=Pi(i),r=r(i),e.flags|=1,ir(t,e,r,s),e.child;case 14:return r=e.type,i=ta(r,e.pendingProps),i=ta(r.type,i),V2(t,e,r,i,s);case 15:return QA(t,e,e.type,e.pendingProps,s);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ta(r,i),px(t,e),e.tag=1,Ar(r)?(t=!0,Hx(e)):t=!1,gh(e,s),KA(e,r,i),Pw(e,r,i,s),Ow(null,e,r,!0,t,s);case 19:return tP(t,e,s);case 22:return ZA(t,e,s)}throw Error(De(156,e.tag))};function xP(t,e){return V4(t,e)}function T$(t,e,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(t,e,s,r){return new T$(t,e,s,r)}function mN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A$(t){if(typeof t=="function")return mN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O1)return 11;if(t===D1)return 14}return 2}function vc(t,e){var s=t.alternate;return s===null?(s=Si(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function xx(t,e,s,r,i,a){var o=2;if(r=t,typeof t=="function")mN(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case eh:return Ad(s.children,i,a,e);case R1:o=8,i|=8;break;case tw:return t=Si(12,s,e,i|2),t.elementType=tw,t.lanes=a,t;case sw:return t=Si(13,s,e,i),t.elementType=sw,t.lanes=a,t;case nw:return t=Si(19,s,e,i),t.elementType=nw,t.lanes=a,t;case k4:return uv(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S4:o=10;break e;case C4:o=9;break e;case O1:o=11;break e;case D1:o=14;break e;case Ul:o=16,r=null;break e}throw Error(De(130,t==null?t:typeof t,""))}return e=Si(o,s,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Ad(t,e,s,r){return t=Si(7,t,r,e),t.lanes=s,t}function uv(t,e,s,r){return t=Si(22,t,r,e),t.elementType=k4,t.lanes=s,t.stateNode={isHidden:!1},t}function W0(t,e,s){return t=Si(6,t,null,e),t.lanes=s,t}function K0(t,e,s){return e=Si(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function P$(t,e,s,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=k0(0),this.expirationTimes=k0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gN(t,e,s,r,i,a,o,l,c){return t=new P$(t,e,s,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Si(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},J1(a),t}function I$(t,e,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ju,key:r==null?null:""+r,children:t,containerInfo:e,implementation:s}}function yP(t){if(!t)return Tc;t=t._reactInternals;e:{if(ou(t)!==t||t.tag!==1)throw Error(De(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(De(171))}if(t.tag===1){var s=t.type;if(Ar(s))return yA(t,s,e)}return e}function vP(t,e,s,r,i,a,o,l,c){return t=gN(s,r,!0,t,i,a,o,l,c),t.context=yP(null),s=t.current,r=hr(),i=yc(s),a=rl(r,i),a.callback=e??null,gc(s,a,i),t.current.lanes=i,Lm(t,i,r),Pr(t,r),t}function hv(t,e,s,r){var i=e.current,a=hr(),o=yc(i);return s=yP(s),e.context===null?e.context=s:e.pendingContext=s,e=rl(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gc(i,e,o),t!==null&&(ga(t,i,o,a),ux(t,i,o)),o}function ry(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function xN(t,e){sC(t,e),(t=t.alternate)&&sC(t,e)}function R$(){return null}var bP=typeof reportError=="function"?reportError:function(t){console.error(t)};function yN(t){this._internalRoot=t}fv.prototype.render=yN.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(De(409));hv(t,e,null,null)};fv.prototype.unmount=yN.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$d(function(){hv(null,t,null,null)}),e[ll]=null}};function fv(t){this._internalRoot=t}fv.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z4();t={blockedOn:null,target:t,priority:e};for(var s=0;s<ql.length&&e!==0&&e<ql[s].priority;s++);ql.splice(s,0,t),s===0&&J4(t)}};function vN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nC(){}function O$(t,e,s,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=ry(o);a.call(d)}}var o=vP(e,r,t,0,null,!1,!1,"",nC);return t._reactRootContainer=o,t[ll]=o.current,Xp(t.nodeType===8?t.parentNode:t),$d(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=ry(c);l.call(d)}}var c=gN(t,0,!1,null,null,!1,!1,"",nC);return t._reactRootContainer=c,t[ll]=c.current,Xp(t.nodeType===8?t.parentNode:t),$d(function(){hv(e,c,s,r)}),c}function mv(t,e,s,r,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=ry(o);l.call(c)}}hv(e,o,t,i)}else o=O$(s,e,t,i,r);return ry(o)}Y4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=mp(e.pendingLanes);s!==0&&(F1(e,s|1),Pr(e,ln()),!(Xt&6)&&(Qh=ln()+500,$c()))}break;case 13:$d(function(){var r=cl(t,1);if(r!==null){var i=hr();ga(r,t,1,i)}}),xN(t,1)}};$1=function(t){if(t.tag===13){var e=cl(t,134217728);if(e!==null){var s=hr();ga(e,t,134217728,s)}xN(t,134217728)}};Q4=function(t){if(t.tag===13){var e=yc(t),s=cl(t,e);if(s!==null){var r=hr();ga(s,t,e,r)}xN(t,e)}};Z4=function(){return xs};X4=function(t,e){var s=xs;try{return xs=t,e()}finally{xs=s}};fw=function(t,e,s){switch(e){case"input":if(aw(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var r=s[e];if(r!==t&&r.form===t.form){var i=iv(r);if(!i)throw Error(De(90));T4(r),aw(r,i)}}}break;case"textarea":P4(t,s);break;case"select":e=s.value,e!=null&&hh(t,!!s.multiple,e,!1)}};F4=hN;$4=$d;var D$={usingClientEntryPoint:!1,Events:[$m,rh,iv,M4,L4,hN]},tp={findFiberByHostInstance:hd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M$={bundleType:tp.bundleType,version:tp.version,rendererPackageName:tp.rendererPackageName,rendererConfig:tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=B4(t),t===null?null:t.stateNode},findFiberByHostInstance:tp.findFiberByHostInstance||R$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fg.isDisabled&&Fg.supportsFiber)try{tv=Fg.inject(M$),no=Fg}catch{}}ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D$;ii.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vN(e))throw Error(De(200));return I$(t,e,null,s)};ii.createRoot=function(t,e){if(!vN(t))throw Error(De(299));var s=!1,r="",i=bP;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gN(t,1,!1,null,null,s,!1,r,i),t[ll]=e.current,Xp(t.nodeType===8?t.parentNode:t),new yN(e)};ii.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(De(188)):(t=Object.keys(t).join(","),Error(De(268,t)));return t=B4(e),t=t===null?null:t.stateNode,t};ii.flushSync=function(t){return $d(t)};ii.hydrate=function(t,e,s){if(!pv(e))throw Error(De(200));return mv(null,t,e,!0,s)};ii.hydrateRoot=function(t,e,s){if(!vN(t))throw Error(De(405));var r=s!=null&&s.hydratedSources||null,i=!1,a="",o=bP;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=vP(e,null,t,1,s??null,i,!1,a,o),t[ll]=e.current,Xp(t),r)for(t=0;t<r.length;t++)s=r[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new fv(e)};ii.render=function(t,e,s){if(!pv(e))throw Error(De(200));return mv(null,t,e,!1,s)};ii.unmountComponentAtNode=function(t){if(!pv(t))throw Error(De(40));return t._reactRootContainer?($d(function(){mv(null,null,t,!1,function(){t._reactRootContainer=null,t[ll]=null})}),!0):!1};ii.unstable_batchedUpdates=hN;ii.unstable_renderSubtreeIntoContainer=function(t,e,s,r){if(!pv(s))throw Error(De(200));if(t==null||t._reactInternals===void 0)throw Error(De(38));return mv(t,e,s,!1,r)};ii.version="18.3.1-next-f1338f8080-20240426";function wP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wP)}catch(t){console.error(t)}}wP(),w4.exports=ii;var lu=w4.exports;const L$=Xy(lu);var jP,rC=lu;jP=rC.createRoot,rC.hydrateRoot;function F$(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,i,a,o=[],l="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)s=i[0],s==="*"?(o.push(s),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(r=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~r?r:~a?a:i.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var NP={exports:{}},_P={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=p;function $$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var U$=typeof Object.is=="function"?Object.is:$$,z$=Zh.useState,B$=Zh.useEffect,q$=Zh.useLayoutEffect,V$=Zh.useDebugValue;function H$(t,e){var s=e(),r=z$({inst:{value:s,getSnapshot:e}}),i=r[0].inst,a=r[1];return q$(function(){i.value=s,i.getSnapshot=e,G0(i)&&a({inst:i})},[t,s,e]),B$(function(){return G0(i)&&a({inst:i}),t(function(){G0(i)&&a({inst:i})})},[t]),V$(s),s}function G0(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!U$(t,s)}catch{return!0}}function W$(t,e){return e()}var K$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?W$:H$;_P.useSyncExternalStore=Zh.useSyncExternalStore!==void 0?Zh.useSyncExternalStore:K$;NP.exports=_P;var SP=NP.exports;const G$=ev.useInsertionEffect,Y$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q$=Y$?p.useLayoutEffect:p.useEffect,Z$=G$||Q$,CP=t=>{const e=p.useRef([t,(...s)=>e[0](...s)]).current;return Z$(()=>{e[0]=t}),e[1]},X$="popstate",bN="pushState",wN="replaceState",J$="hashchange",iC=[X$,bN,wN,J$],e9=t=>{for(const e of iC)addEventListener(e,t);return()=>{for(const e of iC)removeEventListener(e,t)}},kP=(t,e)=>SP.useSyncExternalStore(e9,t,e),t9=()=>location.search,s9=({ssrSearch:t=""}={})=>kP(t9,()=>t),aC=()=>location.pathname,n9=({ssrPath:t}={})=>kP(aC,t?()=>t:aC),r9=(t,{replace:e=!1,state:s=null}={})=>history[e?wN:bN](s,"",t),i9=(t={})=>[n9(t),r9],oC=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[oC]>"u"){for(const t of[bN,wN]){const e=history[t];history[t]=function(){const s=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),s}}Object.defineProperty(window,oC,{value:!0})}const a9=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",EP=(t="")=>t==="/"?"":t,o9=(t,e)=>t[0]==="~"?t.slice(1):EP(e)+t,l9=(t="",e)=>a9(lC(EP(t)),lC(e)),lC=t=>{try{return decodeURI(t)}catch{return t}},TP={hook:i9,searchHook:s9,parser:F$,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},AP=p.createContext(TP),wf=()=>p.useContext(AP),PP={},IP=p.createContext(PP),RP=()=>p.useContext(IP),gv=t=>{const[e,s]=t.hook(t);return[l9(t.base,e),CP((r,i)=>s(o9(r,t.base),i))]},Ds=()=>gv(wf()),jN=(t,e,s,r)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=i.exec(s)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((f,h)=>[f,c[h]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...r?[l]:[]]:[!1,null]},Uc=t=>jN(wf().parser,t,Ds()[0]),c9=({children:t,...e})=>{var u,f;const s=wf(),r=e.hook?TP:s;let i=r;const[a,o]=((u=e.ssrPath)==null?void 0:u.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=a),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=p.useRef({}),c=l.current,d=c;for(let h in r){const x=h==="base"?r[h]+(e[h]||""):e[h]||r[h];c===d&&x!==d[h]&&(l.current=d={...d}),d[h]=x,(x!==r[h]||x!==i[h])&&(i=d)}return p.createElement(AP.Provider,{value:i,children:t})},cC=({children:t,component:e},s)=>e?p.createElement(e,{params:s}):typeof t=="function"?t(s):t,d9=t=>{let e=p.useRef(PP);const s=e.current;return e.current=Object.keys(t).length!==Object.keys(s).length||Object.entries(t).some(([r,i])=>i!==s[r])?t:s},wt=({path:t,nest:e,match:s,...r})=>{const i=wf(),[a]=gv(i),[o,l,c]=s??jN(i.parser,t,a,e),d=d9({...RP(),...l});if(!o)return null;const u=c?p.createElement(c9,{base:c},cC(r,d)):cC(r,d);return p.createElement(IP.Provider,{value:d,children:u})},Gn=p.forwardRef((t,e)=>{const s=wf(),[r,i]=gv(s),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:u,replace:f,state:h,...x}=t,g=CP(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),i(o,t)))}),y=s.hrefs(o[0]==="~"?o.slice(1):s.base+o,s);return c&&p.isValidElement(d)?p.cloneElement(d,{onClick:g,href:y}):p.createElement("a",{...x,onClick:g,href:y,className:u!=null&&u.call?u(r===o):u,children:d,ref:e})}),OP=t=>Array.isArray(t)?t.flatMap(e=>OP(e&&e.type===p.Fragment?e.props.children:e)):[t],dC=({children:t,location:e})=>{const s=wf(),[r]=gv(s);for(const i of OP(t)){let a=0;if(p.isValidElement(i)&&(a=jN(s.parser,i.props.path,e||r,i.props.nest))[0])return p.cloneElement(i,{match:a})}return null};var jf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},u9={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ql,S1,JT,h9=(JT=class{constructor(){ht(this,Ql,u9);ht(this,S1,!1)}setTimeoutProvider(t){He(this,Ql,t)}setTimeout(t,e){return ne(this,Ql).setTimeout(t,e)}clearTimeout(t){ne(this,Ql).clearTimeout(t)}setInterval(t,e){return ne(this,Ql).setInterval(t,e)}clearInterval(t){ne(this,Ql).clearInterval(t)}},Ql=new WeakMap,S1=new WeakMap,JT),md=new h9;function f9(t){setTimeout(t,0)}var Ud=typeof window>"u"||"Deno"in globalThis;function ar(){}function p9(t,e){return typeof t=="function"?t(e):t}function Ww(t){return typeof t=="number"&&t>=0&&t!==1/0}function DP(t,e){return Math.max(t+(e||0)-Date.now(),0)}function bc(t,e){return typeof t=="function"?t(e):t}function gi(t,e){return typeof t=="function"?t(e):t}function uC(t,e){const{type:s="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==NN(o,e.options))return!1}else if(!om(e.queryKey,o))return!1}if(s!=="all"){const c=e.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||a&&!a(e))}function hC(t,e){const{exact:s,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(s){if(zd(e.options.mutationKey)!==zd(a))return!1}else if(!om(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function NN(t,e){return((e==null?void 0:e.queryKeyHashFn)||zd)(t)}function zd(t){return JSON.stringify(t,(e,s)=>Kw(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function om(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>om(t[s],e[s])):!1}var m9=Object.prototype.hasOwnProperty;function MP(t,e){if(t===e)return t;const s=fC(t)&&fC(e);if(!s&&!(Kw(t)&&Kw(e)))return e;const i=(s?t:Object.keys(t)).length,a=s?e:Object.keys(e),o=a.length,l=s?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=s?d:a[d],f=t[u],h=e[u];if(f===h){l[u]=f,(s?d<i:m9.call(t,u))&&c++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){l[u]=h;continue}const x=MP(f,h);l[u]=x,x===f&&c++}return i===o&&c===i?t:l}function iy(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function fC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Kw(t){if(!pC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!pC(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function pC(t){return Object.prototype.toString.call(t)==="[object Object]"}function g9(t){return new Promise(e=>{md.setTimeout(e,t)})}function Gw(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?MP(t,e):e}function x9(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function y9(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var _N=Symbol();function LP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===_N?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function FP(t,e){return typeof t=="function"?t(...e):!!t}var bd,Zl,Ih,e4,v9=(e4=class extends jf{constructor(){super();ht(this,bd);ht(this,Zl);ht(this,Ih);He(this,Ih,e=>{if(!Ud&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){ne(this,Zl)||this.setEventListener(ne(this,Ih))}onUnsubscribe(){var e;this.hasListeners()||((e=ne(this,Zl))==null||e.call(this),He(this,Zl,void 0))}setEventListener(e){var s;He(this,Ih,e),(s=ne(this,Zl))==null||s.call(this),He(this,Zl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ne(this,bd)!==e&&(He(this,bd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof ne(this,bd)=="boolean"?ne(this,bd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},bd=new WeakMap,Zl=new WeakMap,Ih=new WeakMap,e4),SN=new v9;function Yw(){let t,e;const s=new Promise((i,a)=>{t=i,e=a});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},s.reject=i=>{r({status:"rejected",reason:i}),e(i)},s}var b9=f9;function w9(){let t=[],e=0,s=l=>{l()},r=l=>{l()},i=b9;const a=l=>{e?t.push(l):i(()=>{s(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{s(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Nn=w9(),Rh,Xl,Oh,t4,j9=(t4=class extends jf{constructor(){super();ht(this,Rh,!0);ht(this,Xl);ht(this,Oh);He(this,Oh,e=>{if(!Ud&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){ne(this,Xl)||this.setEventListener(ne(this,Oh))}onUnsubscribe(){var e;this.hasListeners()||((e=ne(this,Xl))==null||e.call(this),He(this,Xl,void 0))}setEventListener(e){var s;He(this,Oh,e),(s=ne(this,Xl))==null||s.call(this),He(this,Xl,e(this.setOnline.bind(this)))}setOnline(e){ne(this,Rh)!==e&&(He(this,Rh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ne(this,Rh)}},Rh=new WeakMap,Xl=new WeakMap,Oh=new WeakMap,t4),ay=new j9;function N9(t){return Math.min(1e3*2**t,3e4)}function $P(t){return(t??"online")==="online"?ay.isOnline():!0}var Qw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function UP(t){let e=!1,s=0,r;const i=Yw(),a=()=>i.status!=="pending",o=y=>{var w;if(!a()){const b=new Qw(y);h(b),(w=t.onCancel)==null||w.call(t,b)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>SN.isFocused()&&(t.networkMode==="always"||ay.isOnline())&&t.canRun(),u=()=>$P(t.networkMode)&&t.canRun(),f=y=>{a()||(r==null||r(),i.resolve(y))},h=y=>{a()||(r==null||r(),i.reject(y))},x=()=>new Promise(y=>{var w;r=b=>{(a()||d())&&y(b)},(w=t.onPause)==null||w.call(t)}).then(()=>{var y;r=void 0,a()||(y=t.onContinue)==null||y.call(t)}),g=()=>{if(a())return;let y;const w=s===0?t.initialPromise:void 0;try{y=w??t.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(f).catch(b=>{var T;if(a())return;const v=t.retry??(Ud?0:3),N=t.retryDelay??N9,C=typeof N=="function"?N(s,b):N,_=v===!0||typeof v=="number"&&s<v||typeof v=="function"&&v(s,b);if(e||!_){h(b);return}s++,(T=t.onFail)==null||T.call(t,s,b),g9(C).then(()=>d()?void 0:x()).then(()=>{e?h(b):g()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?g():x().then(g),i)}}var wd,s4,zP=(s4=class{constructor(){ht(this,wd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ww(this.gcTime)&&He(this,wd,md.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ud?1/0:5*60*1e3))}clearGcTimeout(){ne(this,wd)&&(md.clearTimeout(ne(this,wd)),He(this,wd,void 0))}},wd=new WeakMap,s4),jd,Dh,mi,Nd,An,Pm,_d,sa,Vo,n4,_9=(n4=class extends zP{constructor(s){super();ht(this,sa);ht(this,jd);ht(this,Dh);ht(this,mi);ht(this,Nd);ht(this,An);ht(this,Pm);ht(this,_d);He(this,_d,!1),He(this,Pm,s.defaultOptions),this.setOptions(s.options),this.observers=[],He(this,Nd,s.client),He(this,mi,ne(this,Nd).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,He(this,jd,gC(this.options)),this.state=s.state??ne(this,jd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=ne(this,An))==null?void 0:s.promise}setOptions(s){if(this.options={...ne(this,Pm),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=gC(this.options);r.data!==void 0&&(this.setState(mC(r.data,r.dataUpdatedAt)),He(this,jd,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ne(this,mi).remove(this)}setData(s,r){const i=Gw(this.state.data,s,this.options);return Pt(this,sa,Vo).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(s,r){Pt(this,sa,Vo).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var i,a;const r=(i=ne(this,An))==null?void 0:i.promise;return(a=ne(this,An))==null||a.cancel(s),r?r.then(ar).catch(ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ne(this,jd))}isActive(){return this.observers.some(s=>gi(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_N||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>bc(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!DP(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(i=>i.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=ne(this,An))==null||r.continue()}onOnline(){var r;const s=this.observers.find(i=>i.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=ne(this,An))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),ne(this,mi).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(ne(this,An)&&(ne(this,_d)?ne(this,An).cancel({revert:!0}):ne(this,An).cancelRetry()),this.scheduleGc()),ne(this,mi).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pt(this,sa,Vo).call(this,{type:"invalidate"})}async fetch(s,r){var d,u,f,h,x,g,y,w,b,v,N,C;if(this.state.fetchStatus!=="idle"&&((d=ne(this,An))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ne(this,An))return ne(this,An).continueRetry(),ne(this,An).promise}if(s&&this.setOptions(s),!this.options.queryFn){const _=this.observers.find(T=>T.options.queryFn);_&&this.setOptions(_.options)}const i=new AbortController,a=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(He(this,_d,!0),i.signal)})},o=()=>{const _=LP(this.options,r),j=(()=>{const S={client:ne(this,Nd),queryKey:this.queryKey,meta:this.meta};return a(S),S})();return He(this,_d,!1),this.options.persister?this.options.persister(_,j,this):_(j)},c=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ne(this,Nd),state:this.state,fetchFn:o};return a(_),_})();(u=this.options.behavior)==null||u.onFetch(c,this),He(this,Dh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&Pt(this,sa,Vo).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta}),He(this,An,UP({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:_=>{_ instanceof Qw&&_.revert&&this.setState({...ne(this,Dh),fetchStatus:"idle"}),i.abort()},onFail:(_,T)=>{Pt(this,sa,Vo).call(this,{type:"failed",failureCount:_,error:T})},onPause:()=>{Pt(this,sa,Vo).call(this,{type:"pause"})},onContinue:()=>{Pt(this,sa,Vo).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const _=await ne(this,An).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(g=(x=ne(this,mi).config).onSuccess)==null||g.call(x,_,this),(w=(y=ne(this,mi).config).onSettled)==null||w.call(y,_,this.state.error,this),_}catch(_){if(_ instanceof Qw){if(_.silent)return ne(this,An).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw Pt(this,sa,Vo).call(this,{type:"error",error:_}),(v=(b=ne(this,mi).config).onError)==null||v.call(b,_,this),(C=(N=ne(this,mi).config).onSettled)==null||C.call(N,this.state.data,_,this),_}finally{this.scheduleGc()}}},jd=new WeakMap,Dh=new WeakMap,mi=new WeakMap,Nd=new WeakMap,An=new WeakMap,Pm=new WeakMap,_d=new WeakMap,sa=new WeakSet,Vo=function(s){const r=i=>{switch(s.type){case"failed":return{...i,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...BP(i.data,this.options),fetchMeta:s.meta??null};case"success":const a={...i,...mC(s.data,s.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return He(this,Dh,s.manual?a:void 0),a;case"error":const o=s.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...s.state}}};this.state=r(this.state),Nn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),ne(this,mi).notify({query:this,type:"updated",action:s})})},n4);function BP(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$P(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function mC(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function gC(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var wr,zt,Im,nr,Sd,Mh,Ko,Jl,Rm,Lh,Fh,Cd,kd,ec,$h,ds,xp,Zw,Xw,Jw,ej,tj,sj,nj,qP,r4,S9=(r4=class extends jf{constructor(e,s){super();ht(this,ds);ht(this,wr);ht(this,zt);ht(this,Im);ht(this,nr);ht(this,Sd);ht(this,Mh);ht(this,Ko);ht(this,Jl);ht(this,Rm);ht(this,Lh);ht(this,Fh);ht(this,Cd);ht(this,kd);ht(this,ec);ht(this,$h,new Set);this.options=s,He(this,wr,e),He(this,Jl,null),He(this,Ko,Yw()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ne(this,zt).addObserver(this),xC(ne(this,zt),this.options)?Pt(this,ds,xp).call(this):this.updateResult(),Pt(this,ds,ej).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rj(ne(this,zt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rj(ne(this,zt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pt(this,ds,tj).call(this),Pt(this,ds,sj).call(this),ne(this,zt).removeObserver(this)}setOptions(e){const s=this.options,r=ne(this,zt);if(this.options=ne(this,wr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gi(this.options.enabled,ne(this,zt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pt(this,ds,nj).call(this),ne(this,zt).setOptions(this.options),s._defaulted&&!iy(this.options,s)&&ne(this,wr).getQueryCache().notify({type:"observerOptionsUpdated",query:ne(this,zt),observer:this});const i=this.hasListeners();i&&yC(ne(this,zt),r,this.options,s)&&Pt(this,ds,xp).call(this),this.updateResult(),i&&(ne(this,zt)!==r||gi(this.options.enabled,ne(this,zt))!==gi(s.enabled,ne(this,zt))||bc(this.options.staleTime,ne(this,zt))!==bc(s.staleTime,ne(this,zt)))&&Pt(this,ds,Zw).call(this);const a=Pt(this,ds,Xw).call(this);i&&(ne(this,zt)!==r||gi(this.options.enabled,ne(this,zt))!==gi(s.enabled,ne(this,zt))||a!==ne(this,ec))&&Pt(this,ds,Jw).call(this,a)}getOptimisticResult(e){const s=ne(this,wr).getQueryCache().build(ne(this,wr),e),r=this.createResult(s,e);return k9(this,r)&&(He(this,nr,r),He(this,Mh,this.options),He(this,Sd,ne(this,zt).state)),r}getCurrentResult(){return ne(this,nr)}trackResult(e,s){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),s==null||s(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ne(this,Ko).status==="pending"&&ne(this,Ko).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){ne(this,$h).add(e)}getCurrentQuery(){return ne(this,zt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=ne(this,wr).defaultQueryOptions(e),r=ne(this,wr).getQueryCache().build(ne(this,wr),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return Pt(this,ds,xp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ne(this,nr)))}createResult(e,s){var A;const r=ne(this,zt),i=this.options,a=ne(this,nr),o=ne(this,Sd),l=ne(this,Mh),d=e!==r?e.state:ne(this,Im),{state:u}=e;let f={...u},h=!1,x;if(s._optimisticResults){const I=this.hasListeners(),P=!I&&xC(e,s),O=I&&yC(e,r,s,i);(P||O)&&(f={...f,...BP(u.data,e.options)}),s._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:y,status:w}=f;x=f.data;let b=!1;if(s.placeholderData!==void 0&&x===void 0&&w==="pending"){let I;a!=null&&a.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData)?(I=a.data,b=!0):I=typeof s.placeholderData=="function"?s.placeholderData((A=ne(this,Fh))==null?void 0:A.state.data,ne(this,Fh)):s.placeholderData,I!==void 0&&(w="success",x=Gw(a==null?void 0:a.data,I,s),h=!0)}if(s.select&&x!==void 0&&!b)if(a&&x===(o==null?void 0:o.data)&&s.select===ne(this,Rm))x=ne(this,Lh);else try{He(this,Rm,s.select),x=s.select(x),x=Gw(a==null?void 0:a.data,x,s),He(this,Lh,x),He(this,Jl,null)}catch(I){He(this,Jl,I)}ne(this,Jl)&&(g=ne(this,Jl),x=ne(this,Lh),y=Date.now(),w="error");const v=f.fetchStatus==="fetching",N=w==="pending",C=w==="error",_=N&&v,T=x!==void 0,S={status:w,fetchStatus:f.fetchStatus,isPending:N,isSuccess:w==="success",isError:C,isInitialLoading:_,isLoading:_,data:x,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!N,isLoadingError:C&&!T,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:C&&T,isStale:CN(e,s),refetch:this.refetch,promise:ne(this,Ko),isEnabled:gi(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=D=>{S.status==="error"?D.reject(S.error):S.data!==void 0&&D.resolve(S.data)},P=()=>{const D=He(this,Ko,S.promise=Yw());I(D)},O=ne(this,Ko);switch(O.status){case"pending":e.queryHash===r.queryHash&&I(O);break;case"fulfilled":(S.status==="error"||S.data!==O.value)&&P();break;case"rejected":(S.status!=="error"||S.error!==O.reason)&&P();break}}return S}updateResult(){const e=ne(this,nr),s=this.createResult(ne(this,zt),this.options);if(He(this,Sd,ne(this,zt).state),He(this,Mh,this.options),ne(this,Sd).data!==void 0&&He(this,Fh,ne(this,zt)),iy(s,e))return;He(this,nr,s);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!ne(this,$h).size)return!0;const o=new Set(a??ne(this,$h));return this.options.throwOnError&&o.add("error"),Object.keys(ne(this,nr)).some(l=>{const c=l;return ne(this,nr)[c]!==e[c]&&o.has(c)})};Pt(this,ds,qP).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pt(this,ds,ej).call(this)}},wr=new WeakMap,zt=new WeakMap,Im=new WeakMap,nr=new WeakMap,Sd=new WeakMap,Mh=new WeakMap,Ko=new WeakMap,Jl=new WeakMap,Rm=new WeakMap,Lh=new WeakMap,Fh=new WeakMap,Cd=new WeakMap,kd=new WeakMap,ec=new WeakMap,$h=new WeakMap,ds=new WeakSet,xp=function(e){Pt(this,ds,nj).call(this);let s=ne(this,zt).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(ar)),s},Zw=function(){Pt(this,ds,tj).call(this);const e=bc(this.options.staleTime,ne(this,zt));if(Ud||ne(this,nr).isStale||!Ww(e))return;const r=DP(ne(this,nr).dataUpdatedAt,e)+1;He(this,Cd,md.setTimeout(()=>{ne(this,nr).isStale||this.updateResult()},r))},Xw=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ne(this,zt)):this.options.refetchInterval)??!1},Jw=function(e){Pt(this,ds,sj).call(this),He(this,ec,e),!(Ud||gi(this.options.enabled,ne(this,zt))===!1||!Ww(ne(this,ec))||ne(this,ec)===0)&&He(this,kd,md.setInterval(()=>{(this.options.refetchIntervalInBackground||SN.isFocused())&&Pt(this,ds,xp).call(this)},ne(this,ec)))},ej=function(){Pt(this,ds,Zw).call(this),Pt(this,ds,Jw).call(this,Pt(this,ds,Xw).call(this))},tj=function(){ne(this,Cd)&&(md.clearTimeout(ne(this,Cd)),He(this,Cd,void 0))},sj=function(){ne(this,kd)&&(md.clearInterval(ne(this,kd)),He(this,kd,void 0))},nj=function(){const e=ne(this,wr).getQueryCache().build(ne(this,wr),this.options);if(e===ne(this,zt))return;const s=ne(this,zt);He(this,zt,e),He(this,Im,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},qP=function(e){Nn.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(ne(this,nr))}),ne(this,wr).getQueryCache().notify({query:ne(this,zt),type:"observerResultsUpdated"})})},r4);function C9(t,e){return gi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function xC(t,e){return C9(t,e)||t.state.data!==void 0&&rj(t,e,e.refetchOnMount)}function rj(t,e,s){if(gi(e.enabled,t)!==!1&&bc(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&CN(t,e)}return!1}function yC(t,e,s,r){return(t!==e||gi(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&CN(t,s)}function CN(t,e){return gi(e.enabled,t)!==!1&&t.isStaleByTime(bc(e.staleTime,t))}function k9(t,e){return!iy(t.getCurrentResult(),e)}function vC(t){return{onFetch:(e,s)=>{var u,f,h,x,g;const r=e.options,i=(h=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((x=e.state.data)==null?void 0:x.pages)||[],o=((g=e.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const w=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},b=LP(e.options,e.fetchOptions),v=async(N,C,_)=>{if(y)return Promise.reject();if(C==null&&N.pages.length)return Promise.resolve(N);const j=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:C,direction:_?"backward":"forward",meta:e.options.meta};return w(P),P})(),S=await b(j),{maxPages:A}=e.options,I=_?y9:x9;return{pages:I(N.pages,S,A),pageParams:I(N.pageParams,C,A)}};if(i&&a.length){const N=i==="backward",C=N?E9:bC,_={pages:a,pageParams:o},T=C(r,_);l=await v(_,T,N)}else{const N=t??a.length;do{const C=c===0?o[0]??r.initialPageParam:bC(r,l);if(c>0&&C==null)break;l=await v(l,C),c++}while(c<N)}return l};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=d}}}function bC(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function E9(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var Om,Ha,rr,Ed,Wa,Ll,i4,T9=(i4=class extends zP{constructor(e){super();ht(this,Wa);ht(this,Om);ht(this,Ha);ht(this,rr);ht(this,Ed);He(this,Om,e.client),this.mutationId=e.mutationId,He(this,rr,e.mutationCache),He(this,Ha,[]),this.state=e.state||VP(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ne(this,Ha).includes(e)||(ne(this,Ha).push(e),this.clearGcTimeout(),ne(this,rr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){He(this,Ha,ne(this,Ha).filter(s=>s!==e)),this.scheduleGc(),ne(this,rr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ne(this,Ha).length||(this.state.status==="pending"?this.scheduleGc():ne(this,rr).remove(this))}continue(){var e;return((e=ne(this,Ed))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,u,f,h,x,g,y,w,b,v,N,C,_,T,j,S,A;const s=()=>{Pt(this,Wa,Ll).call(this,{type:"continue"})},r={client:ne(this,Om),meta:this.options.meta,mutationKey:this.options.mutationKey};He(this,Ed,UP({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(I,P)=>{Pt(this,Wa,Ll).call(this,{type:"failed",failureCount:I,error:P})},onPause:()=>{Pt(this,Wa,Ll).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ne(this,rr).canRun(this)}));const i=this.state.status==="pending",a=!ne(this,Ed).canStart();try{if(i)s();else{Pt(this,Wa,Ll).call(this,{type:"pending",variables:e,isPaused:a}),await((l=(o=ne(this,rr).config).onMutate)==null?void 0:l.call(o,e,this,r));const P=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,r));P!==this.state.context&&Pt(this,Wa,Ll).call(this,{type:"pending",context:P,variables:e,isPaused:a})}const I=await ne(this,Ed).start();return await((f=(u=ne(this,rr).config).onSuccess)==null?void 0:f.call(u,I,e,this.state.context,this,r)),await((x=(h=this.options).onSuccess)==null?void 0:x.call(h,I,e,this.state.context,r)),await((y=(g=ne(this,rr).config).onSettled)==null?void 0:y.call(g,I,null,this.state.variables,this.state.context,this,r)),await((b=(w=this.options).onSettled)==null?void 0:b.call(w,I,null,e,this.state.context,r)),Pt(this,Wa,Ll).call(this,{type:"success",data:I}),I}catch(I){try{throw await((N=(v=ne(this,rr).config).onError)==null?void 0:N.call(v,I,e,this.state.context,this,r)),await((_=(C=this.options).onError)==null?void 0:_.call(C,I,e,this.state.context,r)),await((j=(T=ne(this,rr).config).onSettled)==null?void 0:j.call(T,void 0,I,this.state.variables,this.state.context,this,r)),await((A=(S=this.options).onSettled)==null?void 0:A.call(S,void 0,I,e,this.state.context,r)),I}finally{Pt(this,Wa,Ll).call(this,{type:"error",error:I})}}finally{ne(this,rr).runNext(this)}}},Om=new WeakMap,Ha=new WeakMap,rr=new WeakMap,Ed=new WeakMap,Wa=new WeakSet,Ll=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Nn.batch(()=>{ne(this,Ha).forEach(r=>{r.onMutationUpdate(e)}),ne(this,rr).notify({mutation:this,type:"updated",action:e})})},i4);function VP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Go,na,Dm,a4,A9=(a4=class extends jf{constructor(e={}){super();ht(this,Go);ht(this,na);ht(this,Dm);this.config=e,He(this,Go,new Set),He(this,na,new Map),He(this,Dm,0)}build(e,s,r){const i=new T9({client:e,mutationCache:this,mutationId:++wg(this,Dm)._,options:e.defaultMutationOptions(s),state:r});return this.add(i),i}add(e){ne(this,Go).add(e);const s=$g(e);if(typeof s=="string"){const r=ne(this,na).get(s);r?r.push(e):ne(this,na).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ne(this,Go).delete(e)){const s=$g(e);if(typeof s=="string"){const r=ne(this,na).get(s);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ne(this,na).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=$g(e);if(typeof s=="string"){const r=ne(this,na).get(s),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const s=$g(e);if(typeof s=="string"){const i=(r=ne(this,na).get(s))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Nn.batch(()=>{ne(this,Go).forEach(e=>{this.notify({type:"removed",mutation:e})}),ne(this,Go).clear(),ne(this,na).clear()})}getAll(){return Array.from(ne(this,Go))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>hC(s,r))}findAll(e={}){return this.getAll().filter(s=>hC(e,s))}notify(e){Nn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Nn.batch(()=>Promise.all(e.map(s=>s.continue().catch(ar))))}},Go=new WeakMap,na=new WeakMap,Dm=new WeakMap,a4);function $g(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Yo,tc,jr,Qo,al,yx,ij,o4,P9=(o4=class extends jf{constructor(s,r){super();ht(this,al);ht(this,Yo);ht(this,tc);ht(this,jr);ht(this,Qo);He(this,Yo,s),this.setOptions(r),this.bindMethods(),Pt(this,al,yx).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var i;const r=this.options;this.options=ne(this,Yo).defaultMutationOptions(s),iy(this.options,r)||ne(this,Yo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ne(this,jr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&zd(r.mutationKey)!==zd(this.options.mutationKey)?this.reset():((i=ne(this,jr))==null?void 0:i.state.status)==="pending"&&ne(this,jr).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=ne(this,jr))==null||s.removeObserver(this)}onMutationUpdate(s){Pt(this,al,yx).call(this),Pt(this,al,ij).call(this,s)}getCurrentResult(){return ne(this,tc)}reset(){var s;(s=ne(this,jr))==null||s.removeObserver(this),He(this,jr,void 0),Pt(this,al,yx).call(this),Pt(this,al,ij).call(this)}mutate(s,r){var i;return He(this,Qo,r),(i=ne(this,jr))==null||i.removeObserver(this),He(this,jr,ne(this,Yo).getMutationCache().build(ne(this,Yo),this.options)),ne(this,jr).addObserver(this),ne(this,jr).execute(s)}},Yo=new WeakMap,tc=new WeakMap,jr=new WeakMap,Qo=new WeakMap,al=new WeakSet,yx=function(){var r;const s=((r=ne(this,jr))==null?void 0:r.state)??VP();He(this,tc,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},ij=function(s){Nn.batch(()=>{var r,i,a,o,l,c,d,u;if(ne(this,Qo)&&this.hasListeners()){const f=ne(this,tc).variables,h=ne(this,tc).context,x={client:ne(this,Yo),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((i=(r=ne(this,Qo)).onSuccess)==null||i.call(r,s.data,f,h,x),(o=(a=ne(this,Qo)).onSettled)==null||o.call(a,s.data,null,f,h,x)):(s==null?void 0:s.type)==="error"&&((c=(l=ne(this,Qo)).onError)==null||c.call(l,s.error,f,h,x),(u=(d=ne(this,Qo)).onSettled)==null||u.call(d,void 0,s.error,f,h,x))}this.listeners.forEach(f=>{f(ne(this,tc))})})},o4),Ka,l4,I9=(l4=class extends jf{constructor(e={}){super();ht(this,Ka);this.config=e,He(this,Ka,new Map)}build(e,s,r){const i=s.queryKey,a=s.queryHash??NN(i,s);let o=this.get(a);return o||(o=new _9({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ne(this,Ka).has(e.queryHash)||(ne(this,Ka).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=ne(this,Ka).get(e.queryHash);s&&(e.destroy(),s===e&&ne(this,Ka).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Nn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ne(this,Ka).get(e)}getAll(){return[...ne(this,Ka).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>uC(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>uC(e,r)):s}notify(e){Nn.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Nn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Nn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ka=new WeakMap,l4),Ys,sc,nc,Uh,zh,rc,Bh,qh,c4,R9=(c4=class{constructor(t={}){ht(this,Ys);ht(this,sc);ht(this,nc);ht(this,Uh);ht(this,zh);ht(this,rc);ht(this,Bh);ht(this,qh);He(this,Ys,t.queryCache||new I9),He(this,sc,t.mutationCache||new A9),He(this,nc,t.defaultOptions||{}),He(this,Uh,new Map),He(this,zh,new Map),He(this,rc,0)}mount(){wg(this,rc)._++,ne(this,rc)===1&&(He(this,Bh,SN.subscribe(async t=>{t&&(await this.resumePausedMutations(),ne(this,Ys).onFocus())})),He(this,qh,ay.subscribe(async t=>{t&&(await this.resumePausedMutations(),ne(this,Ys).onOnline())})))}unmount(){var t,e;wg(this,rc)._--,ne(this,rc)===0&&((t=ne(this,Bh))==null||t.call(this),He(this,Bh,void 0),(e=ne(this,qh))==null||e.call(this),He(this,qh,void 0))}isFetching(t){return ne(this,Ys).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ne(this,sc).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=ne(this,Ys).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=ne(this,Ys).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(bc(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ne(this,Ys).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),i=ne(this,Ys).get(r.queryHash),a=i==null?void 0:i.state.data,o=p9(e,a);if(o!==void 0)return ne(this,Ys).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return Nn.batch(()=>ne(this,Ys).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=ne(this,Ys).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=ne(this,Ys);Nn.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=ne(this,Ys);return Nn.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=Nn.batch(()=>ne(this,Ys).findAll(t).map(i=>i.cancel(s)));return Promise.all(r).then(ar).catch(ar)}invalidateQueries(t,e={}){return Nn.batch(()=>(ne(this,Ys).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=Nn.batch(()=>ne(this,Ys).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,s);return s.throwOnError||(a=a.catch(ar)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(ar)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=ne(this,Ys).build(this,e);return s.isStaleByTime(bc(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ar).catch(ar)}fetchInfiniteQuery(t){return t.behavior=vC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ar).catch(ar)}ensureInfiniteQueryData(t){return t.behavior=vC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ay.isOnline()?ne(this,sc).resumePausedMutations():Promise.resolve()}getQueryCache(){return ne(this,Ys)}getMutationCache(){return ne(this,sc)}getDefaultOptions(){return ne(this,nc)}setDefaultOptions(t){He(this,nc,t)}setQueryDefaults(t,e){ne(this,Uh).set(zd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ne(this,Uh).values()],s={};return e.forEach(r=>{om(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){ne(this,zh).set(zd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ne(this,zh).values()],s={};return e.forEach(r=>{om(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ne(this,nc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=NN(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_N&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ne(this,nc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ne(this,Ys).clear(),ne(this,sc).clear()}},Ys=new WeakMap,sc=new WeakMap,nc=new WeakMap,Uh=new WeakMap,zh=new WeakMap,rc=new WeakMap,Bh=new WeakMap,qh=new WeakMap,c4),HP=p.createContext(void 0),cu=t=>{const e=p.useContext(HP);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},O9=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),n.jsx(HP.Provider,{value:t,children:e})),WP=p.createContext(!1),D9=()=>p.useContext(WP);WP.Provider;function M9(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var L9=p.createContext(M9()),F9=()=>p.useContext(L9),$9=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},U9=t=>{p.useEffect(()=>{t.clearReset()},[t])},z9=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||FP(s,[t.error,r])),B9=t=>{if(t.suspense){const s=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>s(r(...i)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},q9=(t,e)=>t.isLoading&&t.isFetching&&!e,V9=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,wC=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function H9(t,e,s){var f,h,x,g,y;const r=D9(),i=F9(),a=cu(),o=a.defaultQueryOptions(t);(h=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",B9(o),$9(o,i),U9(i);const l=!a.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new e(a,o)),d=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(w=>{const b=u?c.subscribe(Nn.batchCalls(w)):ar;return c.updateResult(),b},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o)},[o,c]),V9(o,d))throw wC(o,c,i);if(z9({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((g=(x=a.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||g.call(x,o,d),o.experimental_prefetchInRender&&!Ud&&q9(d,r)){const w=l?wC(o,c,i):(y=a.getQueryCache().get(o.queryHash))==null?void 0:y.promise;w==null||w.catch(ar).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Ve(t,e){return H9(t,S9)}function st(t,e){const s=cu(),[r]=p.useState(()=>new P9(s,t));p.useEffect(()=>{r.setOptions(t)},[r,t]);const i=p.useSyncExternalStore(p.useCallback(o=>r.subscribe(Nn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=p.useCallback((o,l)=>{r.mutate(o,l).catch(ar)},[r]);if(i.error&&FP(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function KP(t){if(!t.ok){const e=await t.text()||t.statusText;console.error(`API Error: ${t.status} - ${t.statusText}`,{url:t.url,status:t.status,statusText:t.statusText,text:e});let s;try{s=JSON.parse(e)}catch(r){console.log("JSON parsing failed:",r,"Original text:",e)}if(s){if(s.error){if(typeof s.error=="string")throw new Error(s.error);if(typeof s.error=="object"){const r=s.error;throw r.message?new Error(r.message):r.error?new Error(r.error):new Error(`Validation failed: ${JSON.stringify(r)}`)}}else if(s.message)throw new Error(s.message)}throw t.status===400?new Error("Please check your information and try again."):t.status===401?new Error("Invalid email or password."):t.status===403?new Error("Access denied. Please contact support."):t.status===404?new Error("Service not available. Please try again later."):t.status>=500?new Error("Something went wrong. Please try again later."):new Error("Unable to complete request. Please try again.")}}async function ut(t,e,s){const r=e,i=localStorage.getItem("adminAccessToken"),a=localStorage.getItem("accessToken"),o=localStorage.getItem("user");e.includes("/api/admin/users")&&(console.log("[apiRequest] Calling /api/admin/users:"),console.log("  - adminAccessToken:",i?"present":"missing"),console.log("  - accessToken:",a?"present":"missing"),console.log("  - user:",o?"present":"missing"));const l=s?{"Content-Type":"application/json"}:{};i&&(l["x-admin-token"]=i,l.Authorization=`Bearer ${i}`),a&&(l["x-access-token"]=a,i||(l.Authorization=`Bearer ${a}`)),o&&(l["x-user-data"]=btoa(unescape(encodeURIComponent(o)))),e.includes("/api/admin/users")&&console.log("  - Headers:",Object.keys(l));const c=await fetch(r,{method:t,headers:l,body:s?JSON.stringify(s):void 0,credentials:"include"}).catch(d=>{throw console.error("Fetch error for:",r,d),d});return await KP(c),c}const W9=({on401:t})=>async({queryKey:e})=>{const[s,...r]=e,i=new URLSearchParams;if(r.length>0)if(s==="/api/admin/shows"&&r.length>=2){const[f,h,x,g]=r;f&&i.set("page",String(f)),h&&i.set("limit",String(h)),x&&i.set("title",String(x)),g&&i.set("type",String(g))}else if(s==="/api/admin/users"&&r.length>=2){const[f,h,x]=r;f&&i.set("page",String(f)),h&&i.set("limit",String(h)),x&&i.set("title",String(x))}else if(s==="/users"&&r.length>0&&typeof r[0]=="object"){const f=r[0];f.title&&i.set("title",f.title)}else r[0]&&typeof r[0]=="string"&&i.set("userId",r[0]);const a=`${s}${i.toString()?"?"+i.toString():""}`,o=localStorage.getItem("adminAccessToken"),l=localStorage.getItem("accessToken"),c=localStorage.getItem("user");s==="/api/admin/users"&&(console.log("[QueryClient] Fetching /api/admin/users:"),console.log("  - adminAccessToken:",o?"present":"missing"),console.log("  - accessToken:",l?"present":"missing"),console.log("  - user:",c?"present":"missing"));const d={"Content-Type":"application/json"};o&&(d["x-admin-token"]=o,d.Authorization=`Bearer ${o}`),l&&(d["x-access-token"]=l,o||(d.Authorization=`Bearer ${l}`)),c&&(d["x-user-data"]=btoa(unescape(encodeURIComponent(c)))),s==="/api/admin/users"&&console.log("  - Headers:",Object.keys(d));const u=await fetch(a,{credentials:"include",headers:d});return await KP(u),await u.json()},We=new R9({defaultOptions:{queries:{queryFn:W9({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),K9=1,G9=1e6;let Y0=0;function Y9(){return Y0=(Y0+1)%Number.MAX_SAFE_INTEGER,Y0.toString()}const Q0=new Map,jC=t=>{if(Q0.has(t))return;const e=setTimeout(()=>{Q0.delete(t),Pp({type:"REMOVE_TOAST",toastId:t})},G9);Q0.set(t,e)},Q9=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,K9)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?jC(s):t.toasts.forEach(r=>{jC(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},vx=[];let bx={toasts:[]};function Pp(t){bx=Q9(bx,t),vx.forEach(e=>{e(bx)})}function Z9({...t}){const e=Y9(),s=i=>Pp({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Pp({type:"DISMISS_TOAST",toastId:e});return Pp({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:s}}function Et(){const[t,e]=p.useState(bx);return p.useEffect(()=>(vx.push(e),()=>{const s=vx.indexOf(e);s>-1&&vx.splice(s,1)}),[t]),{...t,toast:Z9,dismiss:s=>Pp({type:"DISMISS_TOAST",toastId:s})}}function Ie(t,e,{checkForDefaultPrevented:s=!0}={}){return function(i){if(t==null||t(i),s===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function NC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vo(...t){return e=>{let s=!1;const r=t.map(i=>{const a=NC(i,e);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():NC(t[i],null)}}}}function ft(...t){return p.useCallback(vo(...t),t)}function X9(t,e){const s=p.createContext(e),r=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return n.jsx(s.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(a){const o=p.useContext(s);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function Cn(t,e=[]){let s=[];function r(a,o){const l=p.createContext(o),c=s.length;s=[...s,o];const d=f=>{var b;const{scope:h,children:x,...g}=f,y=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,w=p.useMemo(()=>g,Object.values(g));return n.jsx(y.Provider,{value:w,children:x})};d.displayName=a+"Provider";function u(f,h){var y;const x=((y=h==null?void 0:h[t])==null?void 0:y[c])||l,g=p.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=s.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,J9(i,...e)]}function J9(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}function _C(t){const e=e7(t),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),c=l.find(s7);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(e,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}function e7(t){const e=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=r7(i),l=n7(a,i.props);return i.type!==p.Fragment&&(l.ref=r?vo(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var t7=Symbol("radix.slottable");function s7(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===t7}function n7(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function r7(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function xv(t){const e=t+"CollectionProvider",[s,r]=Cn(e),[i,a]=s(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:b}=y,v=qe.useRef(null),N=qe.useRef(new Map).current;return n.jsx(i,{scope:w,itemMap:N,collectionRef:v,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=_C(l),d=qe.forwardRef((y,w)=>{const{scope:b,children:v}=y,N=a(l,b),C=ft(w,N.collectionRef);return n.jsx(c,{ref:C,children:v})});d.displayName=l;const u=t+"CollectionItemSlot",f="data-radix-collection-item",h=_C(u),x=qe.forwardRef((y,w)=>{const{scope:b,children:v,...N}=y,C=qe.useRef(null),_=ft(w,C),T=a(u,b);return qe.useEffect(()=>(T.itemMap.set(C,{ref:C,...N}),()=>void T.itemMap.delete(C))),n.jsx(h,{[f]:"",ref:_,children:v})});x.displayName=u;function g(y){const w=a(t+"CollectionConsumer",y);return qe.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const N=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((T,j)=>N.indexOf(T.ref.current)-N.indexOf(j.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:x},g,r]}function i7(t){const e=a7(t),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),c=l.find(l7);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(e,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}function a7(t){const e=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=d7(i),l=c7(a,i.props);return i.type!==p.Fragment&&(l.ref=r?vo(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var o7=Symbol("radix.slottable");function l7(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===o7}function c7(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function d7(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var u7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Je=u7.reduce((t,e)=>{const s=i7(`Primitive.${e}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function kN(t,e){t&&lu.flushSync(()=>t.dispatchEvent(e))}function Zs(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...s)=>{var r;return(r=e.current)==null?void 0:r.call(e,...s)},[])}function h7(t,e=globalThis==null?void 0:globalThis.document){const s=Zs(t);p.useEffect(()=>{const r=i=>{i.key==="Escape"&&s(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[s,e])}var f7="DismissableLayer",aj="dismissableLayer.update",p7="dismissableLayer.pointerDownOutside",m7="dismissableLayer.focusOutside",SC,GP=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zc=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=p.useContext(GP),[u,f]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=p.useState({}),g=ft(e,j=>f(j)),y=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(w),v=u?y.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,C=v>=b,_=x7(j=>{const S=j.target,A=[...d.branches].some(I=>I.contains(S));!C||A||(i==null||i(j),o==null||o(j),j.defaultPrevented||l==null||l())},h),T=y7(j=>{const S=j.target;[...d.branches].some(I=>I.contains(S))||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},h);return h7(j=>{v===d.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},h),p.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(SC=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),CC(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=SC)}},[u,h,s,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),CC())},[u,d]),p.useEffect(()=>{const j=()=>x({});return document.addEventListener(aj,j),()=>document.removeEventListener(aj,j)},[]),n.jsx(Je.div,{...c,ref:g,style:{pointerEvents:N?C?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,T.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,_.onPointerDownCapture)})});zc.displayName=f7;var g7="DismissableLayerBranch",YP=p.forwardRef((t,e)=>{const s=p.useContext(GP),r=p.useRef(null),i=ft(e,r);return p.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),n.jsx(Je.div,{...t,ref:i})});YP.displayName=g7;function x7(t,e=globalThis==null?void 0:globalThis.document){const s=Zs(t),r=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){QP(p7,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,s]),{onPointerDownCapture:()=>r.current=!0}}function y7(t,e=globalThis==null?void 0:globalThis.document){const s=Zs(t),r=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!r.current&&QP(m7,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function CC(){const t=new CustomEvent(aj);document.dispatchEvent(t)}function QP(t,e,s,{discrete:r}){const i=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),r?kN(i,a):i.dispatchEvent(a)}var v7=zc,b7=YP,en=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},w7="Portal",Nf=p.forwardRef((t,e)=>{var l;const{container:s,...r}=t,[i,a]=p.useState(!1);en(()=>a(!0),[]);const o=s||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?L$.createPortal(n.jsx(Je.div,{...r,ref:e}),o):null});Nf.displayName=w7;function j7(t,e){return p.useReducer((s,r)=>e[s][r]??s,t)}var hn=t=>{const{present:e,children:s}=t,r=N7(e),i=typeof s=="function"?s({present:r.isPresent}):p.Children.only(s),a=ft(r.ref,_7(i));return typeof s=="function"||r.isPresent?p.cloneElement(i,{ref:a}):null};hn.displayName="Presence";function N7(t){const[e,s]=p.useState(),r=p.useRef(null),i=p.useRef(t),a=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=j7(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Ug(r.current);a.current=l==="mounted"?d:"none"},[l]),en(()=>{const d=r.current,u=i.current;if(u!==t){const h=a.current,x=Ug(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),en(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,f=x=>{const y=Ug(r.current).includes(CSS.escape(x.animationName));if(x.target===e&&y&&(c("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},h=x=>{x.target===e&&(a.current=Ug(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{r.current=d?getComputedStyle(d):null,s(d)},[])}}function Ug(t){return(t==null?void 0:t.animationName)||"none"}function _7(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var S7=ev[" useInsertionEffect ".trim().toString()]||en;function si({prop:t,defaultProp:e,onChange:s=()=>{},caller:r}){const[i,a,o]=C7({defaultProp:e,onChange:s}),l=t!==void 0,c=l?t:i;{const u=p.useRef(t!==void 0);p.useEffect(()=>{const f=u.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,r])}const d=p.useCallback(u=>{var f;if(l){const h=k7(u)?u(t):u;h!==t&&((f=o.current)==null||f.call(o,h))}else a(u)},[l,t,a,o]);return[c,d]}function C7({defaultProp:t,onChange:e}){const[s,r]=p.useState(t),i=p.useRef(s),a=p.useRef(e);return S7(()=>{a.current=e},[e]),p.useEffect(()=>{var o;i.current!==s&&((o=a.current)==null||o.call(a,s),i.current=s)},[s,i]),[s,r,a]}function k7(t){return typeof t=="function"}var E7=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),T7="VisuallyHidden",EN=p.forwardRef((t,e)=>n.jsx(Je.span,{...t,ref:e,style:{...E7,...t.style}}));EN.displayName=T7;var TN="ToastProvider",[AN,A7,P7]=xv("Toast"),[ZP]=Cn("Toast",[P7]),[I7,yv]=ZP(TN),XP=t=>{const{__scopeToast:e,label:s="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[l,c]=p.useState(null),[d,u]=p.useState(0),f=p.useRef(!1),h=p.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${TN}\`. Expected non-empty \`string\`.`),n.jsx(AN.Provider,{scope:e,children:n.jsx(I7,{scope:e,label:s,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>u(x=>x+1),[]),onToastRemove:p.useCallback(()=>u(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};XP.displayName=TN;var JP="ToastViewport",R7=["F8"],oj="toast.viewportPause",lj="toast.viewportResume",eI=p.forwardRef((t,e)=>{const{__scopeToast:s,hotkey:r=R7,label:i="Notifications ({hotkey})",...a}=t,o=yv(JP,s),l=A7(s),c=p.useRef(null),d=p.useRef(null),u=p.useRef(null),f=p.useRef(null),h=ft(e,f,o.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const w=b=>{var N;r.length!==0&&r.every(C=>b[C]||b.code===C)&&((N=f.current)==null||N.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),p.useEffect(()=>{const w=c.current,b=f.current;if(g&&w&&b){const v=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(oj);b.dispatchEvent(T),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(lj);b.dispatchEvent(T),o.isClosePausedRef.current=!1}},C=T=>{!w.contains(T.relatedTarget)&&N()},_=()=>{w.contains(document.activeElement)||N()};return w.addEventListener("focusin",v),w.addEventListener("focusout",C),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",_),window.addEventListener("blur",v),window.addEventListener("focus",N),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",_),window.removeEventListener("blur",v),window.removeEventListener("focus",N)}}},[g,o.isClosePausedRef]);const y=p.useCallback(({tabbingDirection:w})=>{const v=l().map(N=>{const C=N.ref.current,_=[C,...W7(C)];return w==="forwards"?_:_.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return p.useEffect(()=>{const w=f.current;if(w){const b=v=>{var _,T,j;const N=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!N){const S=document.activeElement,A=v.shiftKey;if(v.target===w&&A){(_=d.current)==null||_.focus();return}const O=y({tabbingDirection:A?"backwards":"forwards"}),D=O.findIndex(M=>M===S);Z0(O.slice(D+1))?v.preventDefault():A?(T=d.current)==null||T.focus():(j=u.current)==null||j.focus()}};return w.addEventListener("keydown",b),()=>w.removeEventListener("keydown",b)}},[l,y]),n.jsxs(b7,{ref:c,role:"region","aria-label":i.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&n.jsx(cj,{ref:d,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});Z0(w)}}),n.jsx(AN.Slot,{scope:s,children:n.jsx(Je.ol,{tabIndex:-1,...a,ref:h})}),g&&n.jsx(cj,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});Z0(w)}})]})});eI.displayName=JP;var tI="ToastFocusProxy",cj=p.forwardRef((t,e)=>{const{__scopeToast:s,onFocusFromOutsideViewport:r,...i}=t,a=yv(tI,s);return n.jsx(EN,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&r()}})});cj.displayName=tI;var zm="Toast",O7="toast.swipeStart",D7="toast.swipeMove",M7="toast.swipeCancel",L7="toast.swipeEnd",sI=p.forwardRef((t,e)=>{const{forceMount:s,open:r,defaultOpen:i,onOpenChange:a,...o}=t,[l,c]=si({prop:r,defaultProp:i??!0,onChange:a,caller:zm});return n.jsx(hn,{present:s||l,children:n.jsx(U7,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Zs(t.onPause),onResume:Zs(t.onResume),onSwipeStart:Ie(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ie(t.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Ie(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ie(t.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});sI.displayName=zm;var[F7,$7]=ZP(zm,{onClose(){}}),U7=p.forwardRef((t,e)=>{const{__scopeToast:s,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:x,...g}=t,y=yv(zm,s),[w,b]=p.useState(null),v=ft(e,M=>b(M)),N=p.useRef(null),C=p.useRef(null),_=i||y.duration,T=p.useRef(0),j=p.useRef(_),S=p.useRef(0),{onToastAdd:A,onToastRemove:I}=y,P=Zs(()=>{var J;(w==null?void 0:w.contains(document.activeElement))&&((J=y.viewport)==null||J.focus()),o()}),O=p.useCallback(M=>{!M||M===1/0||(window.clearTimeout(S.current),T.current=new Date().getTime(),S.current=window.setTimeout(P,M))},[P]);p.useEffect(()=>{const M=y.viewport;if(M){const J=()=>{O(j.current),d==null||d()},X=()=>{const U=new Date().getTime()-T.current;j.current=j.current-U,window.clearTimeout(S.current),c==null||c()};return M.addEventListener(oj,X),M.addEventListener(lj,J),()=>{M.removeEventListener(oj,X),M.removeEventListener(lj,J)}}},[y.viewport,_,c,d,O]),p.useEffect(()=>{a&&!y.isClosePausedRef.current&&O(_)},[a,_,y.isClosePausedRef,O]),p.useEffect(()=>(A(),()=>I()),[A,I]);const D=p.useMemo(()=>w?cI(w):null,[w]);return y.viewport?n.jsxs(n.Fragment,{children:[D&&n.jsx(z7,{__scopeToast:s,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),n.jsx(F7,{scope:s,onClose:P,children:lu.createPortal(n.jsx(AN.ItemSlot,{scope:s,children:n.jsx(v7,{asChild:!0,onEscapeKeyDown:Ie(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||P(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Je.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":y.swipeDirection,...g,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ie(t.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ie(t.onPointerDown,M=>{M.button===0&&(N.current={x:M.clientX,y:M.clientY})}),onPointerMove:Ie(t.onPointerMove,M=>{if(!N.current)return;const J=M.clientX-N.current.x,X=M.clientY-N.current.y,U=!!C.current,$=["left","right"].includes(y.swipeDirection),L=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,te=$?L(0,J):0,F=$?0:L(0,X),z=M.pointerType==="touch"?10:2,pe={x:te,y:F},xe={originalEvent:M,delta:pe};U?(C.current=pe,zg(D7,f,xe,{discrete:!1})):kC(pe,y.swipeDirection,z)?(C.current=pe,zg(O7,u,xe,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(J)>z||Math.abs(X)>z)&&(N.current=null)}),onPointerUp:Ie(t.onPointerUp,M=>{const J=C.current,X=M.target;if(X.hasPointerCapture(M.pointerId)&&X.releasePointerCapture(M.pointerId),C.current=null,N.current=null,J){const U=M.currentTarget,$={originalEvent:M,delta:J};kC(J,y.swipeDirection,y.swipeThreshold)?zg(L7,x,$,{discrete:!0}):zg(M7,h,$,{discrete:!0}),U.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),z7=t=>{const{__scopeToast:e,children:s,...r}=t,i=yv(zm,e),[a,o]=p.useState(!1),[l,c]=p.useState(!1);return V7(()=>o(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(Nf,{asChild:!0,children:n.jsx(EN,{...r,children:a&&n.jsxs(n.Fragment,{children:[i.label," ",s]})})})},B7="ToastTitle",nI=p.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t;return n.jsx(Je.div,{...r,ref:e})});nI.displayName=B7;var q7="ToastDescription",rI=p.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t;return n.jsx(Je.div,{...r,ref:e})});rI.displayName=q7;var iI="ToastAction",aI=p.forwardRef((t,e)=>{const{altText:s,...r}=t;return s.trim()?n.jsx(lI,{altText:s,asChild:!0,children:n.jsx(PN,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${iI}\`. Expected non-empty \`string\`.`),null)});aI.displayName=iI;var oI="ToastClose",PN=p.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t,i=$7(oI,s);return n.jsx(lI,{asChild:!0,children:n.jsx(Je.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,i.onClose)})})});PN.displayName=oI;var lI=p.forwardRef((t,e)=>{const{__scopeToast:s,altText:r,...i}=t;return n.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function cI(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),H7(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...cI(r))}}),e}function zg(t,e,s,{discrete:r}){const i=s.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),r?kN(i,a):i.dispatchEvent(a)}var kC=(t,e,s=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),a=r>i;return e==="left"||e==="right"?a&&r>s:!a&&i>s};function V7(t=()=>{}){const e=Zs(t);en(()=>{let s=0,r=0;return s=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(r)}},[e])}function H7(t){return t.nodeType===t.ELEMENT_NODE}function W7(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Z0(t){const e=document.activeElement;return t.some(s=>s===e?!0:(s.focus(),document.activeElement!==e))}var K7=XP,dI=eI,uI=sI,hI=nI,fI=rI,pI=aI,mI=PN;function gI(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(s=gI(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function xI(){for(var t,e,s=0,r="",i=arguments.length;s<i;s++)(t=arguments[s])&&(e=gI(t))&&(r&&(r+=" "),r+=e);return r}const EC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,TC=xI,_f=(t,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return TC(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(d=>{const u=s==null?void 0:s[d],f=a==null?void 0:a[d];if(u===null)return null;const h=EC(u)||EC(f);return i[d][h]}),l=s&&Object.entries(s).reduce((d,u)=>{let[f,h]=u;return h===void 0||(d[f]=h),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:f,className:h,...x}=u;return Object.entries(x).every(g=>{let[y,w]=g;return Array.isArray(w)?w.includes({...a,...l}[y]):{...a,...l}[y]===w})?[...d,f,h]:d},[]);return TC(t,o,c,s==null?void 0:s.class,s==null?void 0:s.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yI=(...t)=>t.filter((e,s,r)=>!!e&&r.indexOf(e)===s).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...Y7,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:yI("lucide",i),...l},[...o.map(([d,u])=>p.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(t,e)=>{const s=p.forwardRef(({className:r,...i},a)=>p.createElement(Q7,{ref:a,iconNode:e,className:yI(`lucide-${G7(t)}`,r),...i}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=Oe("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=Oe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=Oe("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=Oe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=Oe("ArrowUpFromLine",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=Oe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=Oe("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=Oe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=Oe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=Oe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=Oe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=Oe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=Oe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=Oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=Oe("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=Oe("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Oe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Oe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Oe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Oe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=Oe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=Oe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Oe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=Oe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=Oe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=Oe("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=Oe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=Oe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Oe("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=Oe("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Oe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=Oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=Oe("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=Oe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=Oe("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=Oe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Oe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=Oe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=Oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=Oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Oe("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Oe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=Oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=Oe("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Oe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=Oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=Oe("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=Oe("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=Oe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=Oe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=Oe("ShieldBan",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=Oe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=Oe("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Oe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=Oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=Oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=Oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Oe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=Oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Oe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=Oe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),DN="-",PU=t=>{const e=RU(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(DN);return l[0]===""&&l.length!==1&&l.shift(),kI(l,e)||IU(o)},getConflictingClassGroupIds:(o,l)=>{const c=s[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},kI=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),i=r?kI(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(DN);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},RC=/^\[(.+)\]$/,IU=t=>{if(RC.test(t)){const e=RC.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},RU=t=>{const{theme:e,prefix:s}=t,r={nextPart:new Map,validators:[]};return DU(Object.entries(t.classGroups),s).forEach(([a,o])=>{mj(o,r,a,e)}),r},mj=(t,e,s,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:OC(e,i);a.classGroupId=s;return}if(typeof i=="function"){if(OU(i)){mj(i(r),e,s,r);return}e.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([a,o])=>{mj(o,OC(e,a),s,r)})})},OC=(t,e)=>{let s=t;return e.split(DN).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},OU=t=>t.isThemeGetter,DU=(t,e)=>e?t.map(([s,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[s,i]}):t,MU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const i=(a,o)=>{s.set(a,o),e++,e>t&&(e=0,r=s,s=new Map)};return{get(a){let o=s.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){s.has(a)?s.set(a,o):i(a,o)}}},EI="!",LU=t=>{const{separator:e,experimentalParseClassName:s}=t,r=e.length===1,i=e[0],a=e.length,o=l=>{const c=[];let d=0,u=0,f;for(let w=0;w<l.length;w++){let b=l[w];if(d===0){if(b===i&&(r||l.slice(w,w+a)===e)){c.push(l.slice(u,w)),u=w+a;continue}if(b==="/"){f=w;continue}}b==="["?d++:b==="]"&&d--}const h=c.length===0?l:l.substring(u),x=h.startsWith(EI),g=x?h.substring(1):h,y=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:y}};return s?l=>s({className:l,parseClassName:o}):o},FU=t=>{if(t.length<=1)return t;const e=[];let s=[];return t.forEach(r=>{r[0]==="["?(e.push(...s.sort(),r),s=[]):s.push(r)}),e.push(...s.sort()),e},$U=t=>({cache:MU(t.cacheSize),parseClassName:LU(t),...PU(t)}),UU=/\s+/,zU=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(UU);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:x}=s(d);let g=!!x,y=r(g?h.substring(0,x):h);if(!y){if(!g){l=d+(l.length>0?" "+l:l);continue}if(y=r(h),!y){l=d+(l.length>0?" "+l:l);continue}g=!1}const w=FU(u).join(":"),b=f?w+EI:w,v=b+y;if(a.includes(v))continue;a.push(v);const N=i(y,g);for(let C=0;C<N.length;++C){const _=N[C];a.push(b+_)}l=d+(l.length>0?" "+l:l)}return l};function BU(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=TI(e))&&(r&&(r+=" "),r+=s);return r}const TI=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=TI(t[r]))&&(s&&(s+=" "),s+=e);return s};function qU(t,...e){let s,r,i,a=o;function o(c){const d=e.reduce((u,f)=>f(u),t());return s=$U(d),r=s.cache.get,i=s.cache.set,a=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=zU(c,s);return i(c,u),u}return function(){return a(BU.apply(null,arguments))}}const As=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},AI=/^\[(?:([a-z-]+):)?(.+)\]$/i,VU=/^\d+\/\d+$/,HU=new Set(["px","full","screen"]),WU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,QU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fo=t=>vh(t)||HU.has(t)||VU.test(t),Il=t=>Ef(t,"length",rz),vh=t=>!!t&&!Number.isNaN(Number(t)),J0=t=>Ef(t,"number",vh),ip=t=>!!t&&Number.isInteger(Number(t)),ZU=t=>t.endsWith("%")&&vh(t.slice(0,-1)),kt=t=>AI.test(t),Rl=t=>WU.test(t),XU=new Set(["length","size","percentage"]),JU=t=>Ef(t,XU,PI),ez=t=>Ef(t,"position",PI),tz=new Set(["image","url"]),sz=t=>Ef(t,tz,az),nz=t=>Ef(t,"",iz),ap=()=>!0,Ef=(t,e,s)=>{const r=AI.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):s(r[2]):!1},rz=t=>KU.test(t)&&!GU.test(t),PI=()=>!1,iz=t=>YU.test(t),az=t=>QU.test(t),oz=()=>{const t=As("colors"),e=As("spacing"),s=As("blur"),r=As("brightness"),i=As("borderColor"),a=As("borderRadius"),o=As("borderSpacing"),l=As("borderWidth"),c=As("contrast"),d=As("grayscale"),u=As("hueRotate"),f=As("invert"),h=As("gap"),x=As("gradientColorStops"),g=As("gradientColorStopPositions"),y=As("inset"),w=As("margin"),b=As("opacity"),v=As("padding"),N=As("saturate"),C=As("scale"),_=As("sepia"),T=As("skew"),j=As("space"),S=As("translate"),A=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",kt,e],O=()=>[kt,e],D=()=>["",Fo,Il],M=()=>["auto",vh,kt],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",kt],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[vh,kt];return{cacheSize:500,separator:":",theme:{colors:[ap],spacing:[Fo,Il],blur:["none","",Rl,kt],brightness:F(),borderColor:[t],borderRadius:["none","","full",Rl,kt],borderSpacing:O(),borderWidth:D(),contrast:F(),grayscale:L(),hueRotate:F(),invert:L(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[ZU,Il],inset:P(),margin:P(),opacity:F(),padding:O(),saturate:F(),scale:F(),sepia:L(),skew:F(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",kt]}],container:["container"],columns:[{columns:[Rl]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),kt]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ip,kt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",kt]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",ip,kt]}],"grid-cols":[{"grid-cols":[ap]}],"col-start-end":[{col:["auto",{span:["full",ip,kt]},kt]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[ap]}],"row-start-end":[{row:["auto",{span:[ip,kt]},kt]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",kt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",kt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",kt,e]}],"min-w":[{"min-w":[kt,e,"min","max","fit"]}],"max-w":[{"max-w":[kt,e,"none","full","min","max","fit","prose",{screen:[Rl]},Rl]}],h:[{h:[kt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[kt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[kt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[kt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Rl,Il]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",J0]}],"font-family":[{font:[ap]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",kt]}],"line-clamp":[{"line-clamp":["none",vh,J0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fo,kt]}],"list-image":[{"list-image":["none",kt]}],"list-style-type":[{list:["none","disc","decimal",kt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fo,Il]}],"underline-offset":[{"underline-offset":["auto",Fo,kt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),ez]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",JU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sz]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:X()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[Fo,kt]}],"outline-w":[{outline:[Fo,Il]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Fo,Il]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Rl,nz]}],"shadow-color":[{shadow:[ap]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Rl,kt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[N]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",kt]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",kt]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",kt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[ip,kt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",kt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",kt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",kt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Fo,Il,J0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lz=qU(oz);function Re(...t){return lz(xI(t))}const cz=K7,II=p.forwardRef(({className:t,...e},s)=>n.jsx(dI,{ref:s,className:Re("fixed top-0 z-[100] flex max-h-screen w-full flex-col p-4 sm:right-0 md:max-w-[420px]",t),...e}));II.displayName=dI.displayName;const dz=_f("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),RI=p.forwardRef(({className:t,variant:e,...s},r)=>n.jsx(uI,{ref:r,className:Re(dz({variant:e}),t),...s}));RI.displayName=uI.displayName;const uz=p.forwardRef(({className:t,...e},s)=>n.jsx(pI,{ref:s,className:Re("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));uz.displayName=pI.displayName;const OI=p.forwardRef(({className:t,...e},s)=>n.jsx(mI,{ref:s,className:Re("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(un,{className:"h-4 w-4"})}));OI.displayName=mI.displayName;const DI=p.forwardRef(({className:t,...e},s)=>n.jsx(hI,{ref:s,className:Re("text-sm font-semibold",t),...e}));DI.displayName=hI.displayName;const MI=p.forwardRef(({className:t,...e},s)=>n.jsx(fI,{ref:s,className:Re("text-sm opacity-90",t),...e}));MI.displayName=fI.displayName;function hz(){const{toasts:t}=Et();return n.jsxs(cz,{children:[t.map(function({id:e,title:s,description:r,action:i,...a}){return n.jsxs(RI,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(DI,{children:s}),r&&n.jsx(MI,{children:r})]}),i,n.jsx(OI,{})]},e)}),n.jsx(II,{})]})}var fz=ev[" useId ".trim().toString()]||(()=>{}),pz=0;function Ti(t){const[e,s]=p.useState(fz());return en(()=>{s(r=>r??String(pz++))},[t]),e?`radix-${e}`:""}const mz=["top","right","bottom","left"],Ac=Math.min,Br=Math.max,fy=Math.round,Bg=Math.floor,io=t=>({x:t,y:t}),gz={left:"right",right:"left",bottom:"top",top:"bottom"},xz={start:"end",end:"start"};function gj(t,e,s){return Br(t,Ac(e,s))}function hl(t,e){return typeof t=="function"?t(e):t}function fl(t){return t.split("-")[0]}function Tf(t){return t.split("-")[1]}function MN(t){return t==="x"?"y":"x"}function LN(t){return t==="y"?"height":"width"}const yz=new Set(["top","bottom"]);function Za(t){return yz.has(fl(t))?"y":"x"}function FN(t){return MN(Za(t))}function vz(t,e,s){s===void 0&&(s=!1);const r=Tf(t),i=FN(t),a=LN(i);let o=i==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=py(o)),[o,py(o)]}function bz(t){const e=py(t);return[xj(t),e,xj(e)]}function xj(t){return t.replace(/start|end/g,e=>xz[e])}const DC=["left","right"],MC=["right","left"],wz=["top","bottom"],jz=["bottom","top"];function Nz(t,e,s){switch(t){case"top":case"bottom":return s?e?MC:DC:e?DC:MC;case"left":case"right":return e?wz:jz;default:return[]}}function _z(t,e,s,r){const i=Tf(t);let a=Nz(fl(t),s==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(xj)))),a}function py(t){return t.replace(/left|right|bottom|top/g,e=>gz[e])}function Sz(t){return{top:0,right:0,bottom:0,left:0,...t}}function LI(t){return typeof t!="number"?Sz(t):{top:t,right:t,bottom:t,left:t}}function my(t){const{x:e,y:s,width:r,height:i}=t;return{width:r,height:i,top:s,left:e,right:e+r,bottom:s+i,x:e,y:s}}function LC(t,e,s){let{reference:r,floating:i}=t;const a=Za(e),o=FN(e),l=LN(o),c=fl(e),d=a==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[l]/2-i[l]/2;let x;switch(c){case"top":x={x:u,y:r.y-i.height};break;case"bottom":x={x:u,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-i.width,y:f};break;default:x={x:r.x,y:r.y}}switch(Tf(e)){case"start":x[o]-=h*(s&&d?-1:1);break;case"end":x[o]+=h*(s&&d?-1:1);break}return x}const Cz=async(t,e,s)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=s,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=LC(d,r,c),h=r,x={},g=0;for(let y=0;y<l.length;y++){const{name:w,fn:b}=l[y],{x:v,y:N,data:C,reset:_}=await b({x:u,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:x,rects:d,platform:o,elements:{reference:t,floating:e}});u=v??u,f=N??f,x={...x,[w]:{...x[w],...C}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(d=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):_.rects),{x:u,y:f}=LC(d,h,c)),y=-1)}return{x:u,y:f,placement:h,strategy:i,middlewareData:x}};async function um(t,e){var s;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:x=0}=hl(e,t),g=LI(x),w=l[h?f==="floating"?"reference":"floating":f],b=my(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(w)))==null||s?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},_=my(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:N,strategy:c}):v);return{top:(b.top-_.top+g.top)/C.y,bottom:(_.bottom-b.bottom+g.bottom)/C.y,left:(b.left-_.left+g.left)/C.x,right:(_.right-b.right+g.right)/C.x}}const kz=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=hl(t,e)||{};if(d==null)return{};const f=LI(u),h={x:s,y:r},x=FN(i),g=LN(x),y=await o.getDimensions(d),w=x==="y",b=w?"top":"left",v=w?"bottom":"right",N=w?"clientHeight":"clientWidth",C=a.reference[g]+a.reference[x]-h[x]-a.floating[g],_=h[x]-a.reference[x],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let j=T?T[N]:0;(!j||!await(o.isElement==null?void 0:o.isElement(T)))&&(j=l.floating[N]||a.floating[g]);const S=C/2-_/2,A=j/2-y[g]/2-1,I=Ac(f[b],A),P=Ac(f[v],A),O=I,D=j-y[g]-P,M=j/2-y[g]/2+S,J=gj(O,M,D),X=!c.arrow&&Tf(i)!=null&&M!==J&&a.reference[g]/2-(M<O?I:P)-y[g]/2<0,U=X?M<O?M-O:M-D:0;return{[x]:h[x]+U,data:{[x]:J,centerOffset:M-J-U,...X&&{alignmentOffset:U}},reset:X}}}),Ez=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...w}=hl(t,e);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const b=fl(i),v=Za(l),N=fl(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),_=h||(N||!y?[py(l)]:bz(l)),T=g!=="none";!h&&T&&_.push(..._z(l,y,g,C));const j=[l,..._],S=await um(e,w),A=[];let I=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&A.push(S[b]),f){const M=vz(i,o,C);A.push(S[M[0]],S[M[1]])}if(I=[...I,{placement:i,overflows:A}],!A.every(M=>M<=0)){var P,O;const M=(((P=a.flip)==null?void 0:P.index)||0)+1,J=j[M];if(J&&(!(f==="alignment"?v!==Za(J):!1)||I.every($=>Za($.placement)===v?$.overflows[0]>0:!0)))return{data:{index:M,overflows:I},reset:{placement:J}};let X=(O=I.filter(U=>U.overflows[0]<=0).sort((U,$)=>U.overflows[1]-$.overflows[1])[0])==null?void 0:O.placement;if(!X)switch(x){case"bestFit":{var D;const U=(D=I.filter($=>{if(T){const L=Za($.placement);return L===v||L==="y"}return!0}).map($=>[$.placement,$.overflows.filter(L=>L>0).reduce((L,te)=>L+te,0)]).sort(($,L)=>$[1]-L[1])[0])==null?void 0:D[0];U&&(X=U);break}case"initialPlacement":X=l;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function FC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $C(t){return mz.some(e=>t[e]>=0)}const Tz=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:r="referenceHidden",...i}=hl(t,e);switch(r){case"referenceHidden":{const a=await um(e,{...i,elementContext:"reference"}),o=FC(a,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$C(o)}}}case"escaped":{const a=await um(e,{...i,altBoundary:!0}),o=FC(a,s.floating);return{data:{escapedOffsets:o,escaped:$C(o)}}}default:return{}}}}},FI=new Set(["left","top"]);async function Az(t,e){const{placement:s,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fl(s),l=Tf(s),c=Za(s)==="y",d=FI.has(o)?-1:1,u=a&&c?-1:1,f=hl(e,t);let{mainAxis:h,crossAxis:x,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(x=l==="end"?g*-1:g),c?{x:x*u,y:h*d}:{x:h*d,y:x*u}}const Pz=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,r;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await Az(e,t);return o===((s=l.offset)==null?void 0:s.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},Iz=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:b,y:v}=w;return{x:b,y:v}}},...c}=hl(t,e),d={x:s,y:r},u=await um(e,c),f=Za(fl(i)),h=MN(f);let x=d[h],g=d[f];if(a){const w=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=x+u[w],N=x-u[b];x=gj(v,x,N)}if(o){const w=f==="y"?"top":"left",b=f==="y"?"bottom":"right",v=g+u[w],N=g-u[b];g=gj(v,g,N)}const y=l.fn({...e,[h]:x,[f]:g});return{...y,data:{x:y.x-s,y:y.y-r,enabled:{[h]:a,[f]:o}}}}}},Rz=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=hl(t,e),u={x:s,y:r},f=Za(i),h=MN(f);let x=u[h],g=u[f];const y=hl(l,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const N=h==="y"?"height":"width",C=a.reference[h]-a.floating[N]+w.mainAxis,_=a.reference[h]+a.reference[N]-w.mainAxis;x<C?x=C:x>_&&(x=_)}if(d){var b,v;const N=h==="y"?"width":"height",C=FI.has(fl(i)),_=a.reference[f]-a.floating[N]+(C&&((b=o.offset)==null?void 0:b[f])||0)+(C?0:w.crossAxis),T=a.reference[f]+a.reference[N]+(C?0:((v=o.offset)==null?void 0:v[f])||0)-(C?w.crossAxis:0);g<_?g=_:g>T&&(g=T)}return{[h]:x,[f]:g}}}},Oz=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,r;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...d}=hl(t,e),u=await um(e,d),f=fl(i),h=Tf(i),x=Za(i)==="y",{width:g,height:y}=a.floating;let w,b;f==="top"||f==="bottom"?(w=f,b=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,w=h==="end"?"top":"bottom");const v=y-u.top-u.bottom,N=g-u.left-u.right,C=Ac(y-u[w],v),_=Ac(g-u[b],N),T=!e.middlewareData.shift;let j=C,S=_;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(S=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=v),T&&!h){const I=Br(u.left,0),P=Br(u.right,0),O=Br(u.top,0),D=Br(u.bottom,0);x?S=g-2*(I!==0||P!==0?I+P:Br(u.left,u.right)):j=y-2*(O!==0||D!==0?O+D:Br(u.top,u.bottom))}await c({...e,availableWidth:S,availableHeight:j});const A=await o.getDimensions(l.floating);return g!==A.width||y!==A.height?{reset:{rects:!0}}:{}}}};function jv(){return typeof window<"u"}function Af(t){return $I(t)?(t.nodeName||"").toLowerCase():"#document"}function Jr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bo(t){var e;return(e=($I(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $I(t){return jv()?t instanceof Node||t instanceof Jr(t).Node:!1}function wa(t){return jv()?t instanceof Element||t instanceof Jr(t).Element:!1}function po(t){return jv()?t instanceof HTMLElement||t instanceof Jr(t).HTMLElement:!1}function UC(t){return!jv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jr(t).ShadowRoot}const Dz=new Set(["inline","contents"]);function Bm(t){const{overflow:e,overflowX:s,overflowY:r,display:i}=ja(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+s)&&!Dz.has(i)}const Mz=new Set(["table","td","th"]);function Lz(t){return Mz.has(Af(t))}const Fz=[":popover-open",":modal"];function Nv(t){return Fz.some(e=>{try{return t.matches(e)}catch{return!1}})}const $z=["transform","translate","scale","rotate","perspective"],Uz=["transform","translate","scale","rotate","perspective","filter"],zz=["paint","layout","strict","content"];function $N(t){const e=UN(),s=wa(t)?ja(t):t;return $z.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||Uz.some(r=>(s.willChange||"").includes(r))||zz.some(r=>(s.contain||"").includes(r))}function Bz(t){let e=Pc(t);for(;po(e)&&!Jh(e);){if($N(e))return e;if(Nv(e))return null;e=Pc(e)}return null}function UN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qz=new Set(["html","body","#document"]);function Jh(t){return qz.has(Af(t))}function ja(t){return Jr(t).getComputedStyle(t)}function _v(t){return wa(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Pc(t){if(Af(t)==="html")return t;const e=t.assignedSlot||t.parentNode||UC(t)&&t.host||bo(t);return UC(e)?e.host:e}function UI(t){const e=Pc(t);return Jh(e)?t.ownerDocument?t.ownerDocument.body:t.body:po(e)&&Bm(e)?e:UI(e)}function hm(t,e,s){var r;e===void 0&&(e=[]),s===void 0&&(s=!0);const i=UI(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Jr(i);if(a){const l=yj(o);return e.concat(o,o.visualViewport||[],Bm(i)?i:[],l&&s?hm(l):[])}return e.concat(i,hm(i,[],s))}function yj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function zI(t){const e=ja(t);let s=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=po(t),a=i?t.offsetWidth:s,o=i?t.offsetHeight:r,l=fy(s)!==a||fy(r)!==o;return l&&(s=a,r=o),{width:s,height:r,$:l}}function zN(t){return wa(t)?t:t.contextElement}function bh(t){const e=zN(t);if(!po(e))return io(1);const s=e.getBoundingClientRect(),{width:r,height:i,$:a}=zI(e);let o=(a?fy(s.width):s.width)/r,l=(a?fy(s.height):s.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Vz=io(0);function BI(t){const e=Jr(t);return!UN()||!e.visualViewport?Vz:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Hz(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==Jr(t)?!1:e}function qd(t,e,s,r){e===void 0&&(e=!1),s===void 0&&(s=!1);const i=t.getBoundingClientRect(),a=zN(t);let o=io(1);e&&(r?wa(r)&&(o=bh(r)):o=bh(t));const l=Hz(a,s,r)?BI(a):io(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(a){const h=Jr(a),x=r&&wa(r)?Jr(r):r;let g=h,y=yj(g);for(;y&&r&&x!==g;){const w=bh(y),b=y.getBoundingClientRect(),v=ja(y),N=b.left+(y.clientLeft+parseFloat(v.paddingLeft))*w.x,C=b.top+(y.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,f*=w.y,c+=N,d+=C,g=Jr(y),y=yj(g)}}return my({width:u,height:f,x:c,y:d})}function Sv(t,e){const s=_v(t).scrollLeft;return e?e.left+s:qd(bo(t)).left+s}function qI(t,e){const s=t.getBoundingClientRect(),r=s.left+e.scrollLeft-Sv(t,s),i=s.top+e.scrollTop;return{x:r,y:i}}function Wz(t){let{elements:e,rect:s,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=bo(r),l=e?Nv(e.floating):!1;if(r===o||l&&a)return s;let c={scrollLeft:0,scrollTop:0},d=io(1);const u=io(0),f=po(r);if((f||!f&&!a)&&((Af(r)!=="body"||Bm(o))&&(c=_v(r)),po(r))){const x=qd(r);d=bh(r),u.x=x.x+r.clientLeft,u.y=x.y+r.clientTop}const h=o&&!f&&!a?qI(o,c):io(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:s.y*d.y-c.scrollTop*d.y+u.y+h.y}}function Kz(t){return Array.from(t.getClientRects())}function Gz(t){const e=bo(t),s=_v(t),r=t.ownerDocument.body,i=Br(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Br(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-s.scrollLeft+Sv(t);const l=-s.scrollTop;return ja(r).direction==="rtl"&&(o+=Br(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}const zC=25;function Yz(t,e){const s=Jr(t),r=bo(t),i=s.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=UN();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}const d=Sv(r);if(d<=0){const u=r.ownerDocument,f=u.body,h=getComputedStyle(f),x=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(r.clientWidth-f.clientWidth-x);g<=zC&&(a-=g)}else d<=zC&&(a+=d);return{width:a,height:o,x:l,y:c}}const Qz=new Set(["absolute","fixed"]);function Zz(t,e){const s=qd(t,!0,e==="fixed"),r=s.top+t.clientTop,i=s.left+t.clientLeft,a=po(t)?bh(t):io(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,d=r*a.y;return{width:o,height:l,x:c,y:d}}function BC(t,e,s){let r;if(e==="viewport")r=Yz(t,s);else if(e==="document")r=Gz(bo(t));else if(wa(e))r=Zz(e,s);else{const i=BI(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return my(r)}function VI(t,e){const s=Pc(t);return s===e||!wa(s)||Jh(s)?!1:ja(s).position==="fixed"||VI(s,e)}function Xz(t,e){const s=e.get(t);if(s)return s;let r=hm(t,[],!1).filter(l=>wa(l)&&Af(l)!=="body"),i=null;const a=ja(t).position==="fixed";let o=a?Pc(t):t;for(;wa(o)&&!Jh(o);){const l=ja(o),c=$N(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&Qz.has(i.position)||Bm(o)&&!c&&VI(t,o))?r=r.filter(u=>u!==o):i=l,o=Pc(o)}return e.set(t,r),r}function Jz(t){let{element:e,boundary:s,rootBoundary:r,strategy:i}=t;const o=[...s==="clippingAncestors"?Nv(e)?[]:Xz(e,this._c):[].concat(s),r],l=o[0],c=o.reduce((d,u)=>{const f=BC(e,u,i);return d.top=Br(f.top,d.top),d.right=Ac(f.right,d.right),d.bottom=Ac(f.bottom,d.bottom),d.left=Br(f.left,d.left),d},BC(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function eB(t){const{width:e,height:s}=zI(t);return{width:e,height:s}}function tB(t,e,s){const r=po(e),i=bo(e),a=s==="fixed",o=qd(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=io(0);function d(){c.x=Sv(i)}if(r||!r&&!a)if((Af(e)!=="body"||Bm(i))&&(l=_v(e)),r){const x=qd(e,!0,a,e);c.x=x.x+e.clientLeft,c.y=x.y+e.clientTop}else i&&d();a&&!r&&i&&d();const u=i&&!r&&!a?qI(i,l):io(0),f=o.left+l.scrollLeft-c.x-u.x,h=o.top+l.scrollTop-c.y-u.y;return{x:f,y:h,width:o.width,height:o.height}}function eb(t){return ja(t).position==="static"}function qC(t,e){if(!po(t)||ja(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return bo(t)===s&&(s=s.ownerDocument.body),s}function HI(t,e){const s=Jr(t);if(Nv(t))return s;if(!po(t)){let i=Pc(t);for(;i&&!Jh(i);){if(wa(i)&&!eb(i))return i;i=Pc(i)}return s}let r=qC(t,e);for(;r&&Lz(r)&&eb(r);)r=qC(r,e);return r&&Jh(r)&&eb(r)&&!$N(r)?s:r||Bz(t)||s}const sB=async function(t){const e=this.getOffsetParent||HI,s=this.getDimensions,r=await s(t.floating);return{reference:tB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function nB(t){return ja(t).direction==="rtl"}const rB={convertOffsetParentRelativeRectToViewportRelativeRect:Wz,getDocumentElement:bo,getClippingRect:Jz,getOffsetParent:HI,getElementRects:sB,getClientRects:Kz,getDimensions:eB,getScale:bh,isElement:wa,isRTL:nB};function WI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function iB(t,e){let s=null,r;const i=bo(t);function a(){var l;clearTimeout(r),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=t.getBoundingClientRect(),{left:u,top:f,width:h,height:x}=d;if(l||e(),!h||!x)return;const g=Bg(f),y=Bg(i.clientWidth-(u+h)),w=Bg(i.clientHeight-(f+x)),b=Bg(u),N={rootMargin:-g+"px "+-y+"px "+-w+"px "+-b+"px",threshold:Br(0,Ac(1,c))||1};let C=!0;function _(T){const j=T[0].intersectionRatio;if(j!==c){if(!C)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!WI(d,t.getBoundingClientRect())&&o(),C=!1}try{s=new IntersectionObserver(_,{...N,root:i.ownerDocument})}catch{s=new IntersectionObserver(_,N)}s.observe(t)}return o(!0),a}function aB(t,e,s,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=zN(t),u=i||a?[...d?hm(d):[],...hm(e)]:[];u.forEach(b=>{i&&b.addEventListener("scroll",s,{passive:!0}),a&&b.addEventListener("resize",s)});const f=d&&l?iB(d,s):null;let h=-1,x=null;o&&(x=new ResizeObserver(b=>{let[v]=b;v&&v.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var N;(N=x)==null||N.observe(e)})),s()}),d&&!c&&x.observe(d),x.observe(e));let g,y=c?qd(t):null;c&&w();function w(){const b=qd(t);y&&!WI(y,b)&&s(),y=b,g=requestAnimationFrame(w)}return s(),()=>{var b;u.forEach(v=>{i&&v.removeEventListener("scroll",s),a&&v.removeEventListener("resize",s)}),f==null||f(),(b=x)==null||b.disconnect(),x=null,c&&cancelAnimationFrame(g)}}const oB=Pz,lB=Iz,cB=Ez,dB=Oz,uB=Tz,VC=kz,hB=Rz,fB=(t,e,s)=>{const r=new Map,i={platform:rB,...s},a={...i.platform,_c:r};return Cz(t,e,{...i,platform:a})};var pB=typeof document<"u",mB=function(){},wx=pB?p.useLayoutEffect:mB;function gy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(r=s;r--!==0;)if(!gy(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),s=i.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=s;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!gy(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function KI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function HC(t,e){const s=KI(t);return Math.round(e*s)/s}function tb(t){const e=p.useRef(t);return wx(()=>{e.current=t}),e}function gB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,f]=p.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[h,x]=p.useState(r);gy(h,r)||x(r);const[g,y]=p.useState(null),[w,b]=p.useState(null),v=p.useCallback($=>{$!==T.current&&(T.current=$,y($))},[]),N=p.useCallback($=>{$!==j.current&&(j.current=$,b($))},[]),C=a||g,_=o||w,T=p.useRef(null),j=p.useRef(null),S=p.useRef(u),A=c!=null,I=tb(c),P=tb(i),O=tb(d),D=p.useCallback(()=>{if(!T.current||!j.current)return;const $={placement:e,strategy:s,middleware:h};P.current&&($.platform=P.current),fB(T.current,j.current,$).then(L=>{const te={...L,isPositioned:O.current!==!1};M.current&&!gy(S.current,te)&&(S.current=te,lu.flushSync(()=>{f(te)}))})},[h,e,s,P,O]);wx(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[d]);const M=p.useRef(!1);wx(()=>(M.current=!0,()=>{M.current=!1}),[]),wx(()=>{if(C&&(T.current=C),_&&(j.current=_),C&&_){if(I.current)return I.current(C,_,D);D()}},[C,_,D,I,A]);const J=p.useMemo(()=>({reference:T,floating:j,setReference:v,setFloating:N}),[v,N]),X=p.useMemo(()=>({reference:C,floating:_}),[C,_]),U=p.useMemo(()=>{const $={position:s,left:0,top:0};if(!X.floating)return $;const L=HC(X.floating,u.x),te=HC(X.floating,u.y);return l?{...$,transform:"translate("+L+"px, "+te+"px)",...KI(X.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:L,top:te}},[s,l,X.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:D,refs:J,elements:X,floatingStyles:U}),[u,D,J,X,U])}const xB=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:r,padding:i}=typeof t=="function"?t(s):t;return r&&e(r)?r.current!=null?VC({element:r.current,padding:i}).fn(s):{}:r?VC({element:r,padding:i}).fn(s):{}}}},yB=(t,e)=>({...oB(t),options:[t,e]}),vB=(t,e)=>({...lB(t),options:[t,e]}),bB=(t,e)=>({...hB(t),options:[t,e]}),wB=(t,e)=>({...cB(t),options:[t,e]}),jB=(t,e)=>({...dB(t),options:[t,e]}),NB=(t,e)=>({...uB(t),options:[t,e]}),_B=(t,e)=>({...xB(t),options:[t,e]});var SB="Arrow",GI=p.forwardRef((t,e)=>{const{children:s,width:r=10,height:i=5,...a}=t;return n.jsx(Je.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});GI.displayName=SB;var CB=GI;function Cv(t){const[e,s]=p.useState(void 0);return en(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;s({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),e}var BN="Popper",[YI,wo]=Cn(BN),[kB,QI]=YI(BN),ZI=t=>{const{__scopePopper:e,children:s}=t,[r,i]=p.useState(null);return n.jsx(kB,{scope:e,anchor:r,onAnchorChange:i,children:s})};ZI.displayName=BN;var XI="PopperAnchor",JI=p.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:r,...i}=t,a=QI(XI,s),o=p.useRef(null),l=ft(e,o),c=p.useRef(null);return p.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||o.current,d!==c.current&&a.onAnchorChange(c.current)}),r?null:n.jsx(Je.div,{...i,ref:l})});JI.displayName=XI;var qN="PopperContent",[EB,TB]=YI(qN),eR=p.forwardRef((t,e)=>{var K,Q,se,ye,B,ie;const{__scopePopper:s,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:g,...y}=t,w=QI(qN,s),[b,v]=p.useState(null),N=ft(e,ce=>v(ce)),[C,_]=p.useState(null),T=Cv(C),j=(T==null?void 0:T.width)??0,S=(T==null?void 0:T.height)??0,A=r+(a!=="center"?"-"+a:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(d)?d:[d],O=P.length>0,D={padding:I,boundary:P.filter(PB),altBoundary:O},{refs:M,floatingStyles:J,placement:X,isPositioned:U,middlewareData:$}=gB({strategy:"fixed",placement:A,whileElementsMounted:(...ce)=>aB(...ce,{animationFrame:x==="always"}),elements:{reference:w.anchor},middleware:[yB({mainAxis:i+S,alignmentAxis:o}),c&&vB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?bB():void 0,...D}),c&&wB({...D}),jB({...D,apply:({elements:ce,rects:oe,availableWidth:Z,availableHeight:he})=>{const{width:Ne,height:Ke}=oe.reference,$e=ce.floating.style;$e.setProperty("--radix-popper-available-width",`${Z}px`),$e.setProperty("--radix-popper-available-height",`${he}px`),$e.setProperty("--radix-popper-anchor-width",`${Ne}px`),$e.setProperty("--radix-popper-anchor-height",`${Ke}px`)}}),C&&_B({element:C,padding:l}),IB({arrowWidth:j,arrowHeight:S}),h&&NB({strategy:"referenceHidden",...D})]}),[L,te]=nR(X),F=Zs(g);en(()=>{U&&(F==null||F())},[U,F]);const z=(K=$.arrow)==null?void 0:K.x,pe=(Q=$.arrow)==null?void 0:Q.y,xe=((se=$.arrow)==null?void 0:se.centerOffset)!==0,[_e,Me]=p.useState();return en(()=>{b&&Me(window.getComputedStyle(b).zIndex)},[b]),n.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:U?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(ye=$.transformOrigin)==null?void 0:ye.x,(B=$.transformOrigin)==null?void 0:B.y].join(" "),...((ie=$.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:n.jsx(EB,{scope:s,placedSide:L,onArrowChange:_,arrowX:z,arrowY:pe,shouldHideArrow:xe,children:n.jsx(Je.div,{"data-side":L,"data-align":te,...y,ref:N,style:{...y.style,animation:U?void 0:"none"}})})})});eR.displayName=qN;var tR="PopperArrow",AB={top:"bottom",right:"left",bottom:"top",left:"right"},sR=p.forwardRef(function(e,s){const{__scopePopper:r,...i}=e,a=TB(tR,r),o=AB[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(CB,{...i,ref:s,style:{...i.style,display:"block"}})})});sR.displayName=tR;function PB(t){return t!==null}var IB=t=>({name:"transformOrigin",options:t,fn(e){var w,b,v;const{placement:s,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,u]=nR(s),f={start:"0%",center:"50%",end:"100%"}[u],h=(((b=i.arrow)==null?void 0:b.x)??0)+l/2,x=(((v=i.arrow)==null?void 0:v.y)??0)+c/2;let g="",y="";return d==="bottom"?(g=o?f:`${h}px`,y=`${-c}px`):d==="top"?(g=o?f:`${h}px`,y=`${r.floating.height+c}px`):d==="right"?(g=`${-c}px`,y=o?f:`${x}px`):d==="left"&&(g=`${r.floating.width+c}px`,y=o?f:`${x}px`),{data:{x:g,y}}}});function nR(t){const[e,s="center"]=t.split("-");return[e,s]}var kv=ZI,Pf=JI,qm=eR,Vm=sR,RB=Symbol("radix.slottable");function OB(t){const e=({children:s})=>n.jsx(n.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=RB,e}var DB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),MB="VisuallyHidden",rR=p.forwardRef((t,e)=>n.jsx(Je.span,{...t,ref:e,style:{...DB,...t.style}}));rR.displayName=MB;var LB=rR,[Ev]=Cn("Tooltip",[wo]),VN=wo(),iR="TooltipProvider",FB=700,WC="tooltip.open",[$B,aR]=Ev(iR),oR=t=>{const{__scopeTooltip:e,delayDuration:s=FB,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=t,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),n.jsx($B,{scope:e,isOpenDelayedRef:o,delayDuration:s,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};oR.displayName=iR;var lR="Tooltip",[Mhe,Tv]=Ev(lR),vj="TooltipTrigger",UB=p.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,i=Tv(vj,s),a=aR(vj,s),o=VN(s),l=p.useRef(null),c=ft(e,l,i.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),f=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(Pf,{asChild:!0,...o,children:n.jsx(Je.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:Ie(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ie(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Ie(t.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ie(t.onFocus,()=>{d.current||i.onOpen()}),onBlur:Ie(t.onBlur,i.onClose),onClick:Ie(t.onClick,i.onClose)})})});UB.displayName=vj;var zB="TooltipPortal",[Lhe,BB]=Ev(zB,{forceMount:void 0}),ef="TooltipContent",cR=p.forwardRef((t,e)=>{const s=BB(ef,t.__scopeTooltip),{forceMount:r=s.forceMount,side:i="top",...a}=t,o=Tv(ef,t.__scopeTooltip);return n.jsx(hn,{present:r||o.open,children:o.disableHoverableContent?n.jsx(dR,{side:i,...a,ref:e}):n.jsx(qB,{side:i,...a,ref:e})})}),qB=p.forwardRef((t,e)=>{const s=Tv(ef,t.__scopeTooltip),r=aR(ef,t.__scopeTooltip),i=p.useRef(null),a=ft(e,i),[o,l]=p.useState(null),{trigger:c,onClose:d}=s,u=i.current,{onPointerInTransitChange:f}=r,h=p.useCallback(()=>{l(null),f(!1)},[f]),x=p.useCallback((g,y)=>{const w=g.currentTarget,b={x:g.clientX,y:g.clientY},v=GB(b,w.getBoundingClientRect()),N=YB(b,v),C=QB(y.getBoundingClientRect()),_=XB([...N,...C]);l(_),f(!0)},[f]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&u){const g=w=>x(w,u),y=w=>x(w,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",y)}}},[c,u,x,h]),p.useEffect(()=>{if(o){const g=y=>{const w=y.target,b={x:y.clientX,y:y.clientY},v=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),N=!ZB(b,o);v?h():N&&(h(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,d,h]),n.jsx(dR,{...t,ref:a})}),[VB,HB]=Ev(lR,{isInside:!1}),WB=OB("TooltipContent"),dR=p.forwardRef((t,e)=>{const{__scopeTooltip:s,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=Tv(ef,s),d=VN(s),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(WC,u),()=>document.removeEventListener(WC,u)),[u]),p.useEffect(()=>{if(c.trigger){const f=h=>{const x=h.target;x!=null&&x.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),n.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:n.jsxs(qm,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(WB,{children:r}),n.jsx(VB,{scope:s,isInside:!0,children:n.jsx(LB,{id:c.contentId,role:"tooltip",children:i||r})})]})})});cR.displayName=ef;var uR="TooltipArrow",KB=p.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,i=VN(s);return HB(uR,s).isInside?null:n.jsx(Vm,{...i,...r,ref:e})});KB.displayName=uR;function GB(t,e){const s=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(s,r,i,a)){case a:return"left";case i:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function YB(t,e,s=5){const r=[];switch(e){case"top":r.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":r.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":r.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":r.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return r}function QB(t){const{top:e,right:s,bottom:r,left:i}=t;return[{x:i,y:e},{x:s,y:e},{x:s,y:r},{x:i,y:r}]}function ZB(t,e){const{x:s,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],d=l.x,u=l.y,f=c.x,h=c.y;u>r!=h>r&&s<(f-d)*(r-u)/(h-u)+d&&(i=!i)}return i}function XB(t){const e=t.slice();return e.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),JB(e)}function JB(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const s=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;s.length>=2;){const a=s[s.length-1],o=s[s.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))s.pop();else break}s.push(i)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var eq=oR,hR=cR;const tq=eq,sq=p.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(hR,{ref:r,sideOffset:e,className:Re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...s}));sq.displayName=hR.displayName;const nq=()=>{};var KC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},rq=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const i=t[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[s++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[s++],o=t[s++],l=t[s++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[s++],o=t[s++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},pR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,u=a>>2,f=(a&3)<<4|l>>4;let h=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(h=64)),r.push(s[u],s[f],s[h],s[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=s[t.charAt(i++)],l=i<t.length?s[t.charAt(i)]:0;++i;const d=i<t.length?s[t.charAt(i)]:64;++i;const f=i<t.length?s[t.charAt(i)]:64;if(++i,a==null||l==null||d==null||f==null)throw new iq;const h=a<<2|l>>4;if(r.push(h),d!==64){const x=l<<4&240|d>>2;if(r.push(x),f!==64){const g=d<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aq=function(t){const e=fR(t);return pR.encodeByteArray(e,!0)},xy=function(t){return aq(t).replace(/\./g,"")},mR=function(t){try{return pR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=()=>oq().__FIREBASE_DEFAULTS__,cq=()=>{if(typeof process>"u"||typeof KC>"u")return;const t=KC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mR(t[1]);return e&&JSON.parse(e)},HN=()=>{try{return nq()||lq()||cq()||dq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gR=t=>{var e,s;return(s=(e=HN())==null?void 0:e.emulatorHosts)==null?void 0:s[t]},xR=t=>{const e=gR(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},yR=()=>{var t;return(t=HN())==null?void 0:t.config},vR=t=>{var e;return(e=HN())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xy(JSON.stringify(s)),xy(JSON.stringify(o)),""].join(".")}const Rp={};function hq(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rp))Rp[e]?t.emulator.push(e):t.prod.push(e);return t}function fq(t){let e=document.getElementById(t),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),s=!0),{created:s,element:e}}let GC=!1;function KN(t,e){if(typeof window>"u"||typeof document>"u"||!uu(window.location.host)||Rp[t]===e||Rp[t]||GC)return;Rp[t]=e;function s(h){return`__firebase__banner__${h}`}const r="__firebase__banner",a=hq().prod.length>0;function o(){const h=document.getElementById(r);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,x){h.setAttribute("width","24"),h.setAttribute("id",x),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function d(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{GC=!0,o()},h}function u(h,x){h.setAttribute("id",x),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=fq(r),x=s("text"),g=document.getElementById(x)||document.createElement("span"),y=s("learnmore"),w=document.getElementById(y)||document.createElement("a"),b=s("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const N=h.element;l(N),u(w,y);const C=d();c(v,b),N.append(v,g,w,C),document.body.appendChild(N)}a?(g.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pr())}function mq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yq(){const t=pr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vq(){try{return typeof indexedDB=="object"}catch{return!1}}function bq(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq="FirebaseError";class jo extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=wq,Object.setPrototypeOf(this,jo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hm.prototype.create)}}class Hm{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?jq(a,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new jo(i,l,r)}}function jq(t,e){return t.replace(Nq,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Nq=/\{\$([^}]+)}/g;function _q(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vd(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(YC(a)&&YC(o)){if(!Vd(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function YC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sq(t,e){const s=new Cq(t,e);return s.subscribe.bind(s)}class Cq{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");kq(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=sb),i.error===void 0&&(i.error=sb),i.complete===void 0&&(i.complete=sb);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kq(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function sb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){return t&&t._delegate?t._delegate:t}class Ic{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new uq;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Aq(e))try{this.getOrInitializeService({instanceIdentifier:ad})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ad){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ad){return this.instances.has(e)}getOptions(e=ad){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(i)}return i}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tq(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ad){return this.component?this.component.multipleInstances?e:ad:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tq(t){return t===ad?void 0:t}function Aq(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Eq(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cs;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(cs||(cs={}));const Iq={debug:cs.DEBUG,verbose:cs.VERBOSE,info:cs.INFO,warn:cs.WARN,error:cs.ERROR,silent:cs.SILENT},Rq=cs.INFO,Oq={[cs.DEBUG]:"log",[cs.VERBOSE]:"log",[cs.INFO]:"info",[cs.WARN]:"warn",[cs.ERROR]:"error"},Dq=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Oq[e];if(i)console[i](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class GN{constructor(e){this.name=e,this._logLevel=Rq,this._logHandler=Dq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in cs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Iq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,cs.DEBUG,...e),this._logHandler(this,cs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,cs.VERBOSE,...e),this._logHandler(this,cs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,cs.INFO,...e),this._logHandler(this,cs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,cs.WARN,...e),this._logHandler(this,cs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,cs.ERROR,...e),this._logHandler(this,cs.ERROR,...e)}}const Mq=(t,e)=>e.some(s=>t instanceof s);let QC,ZC;function Lq(){return QC||(QC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fq(){return ZC||(ZC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wR=new WeakMap,bj=new WeakMap,jR=new WeakMap,nb=new WeakMap,YN=new WeakMap;function $q(t){const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{s(jc(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(s=>{s instanceof IDBCursor&&wR.set(s,t)}).catch(()=>{}),YN.set(e,t),e}function Uq(t){if(bj.has(t))return;const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{s(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});bj.set(t,e)}let wj={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return bj.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jR.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return jc(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zq(t){wj=t(wj)}function Bq(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(rb(this),e,...s);return jR.set(r,e.sort?e.sort():[e]),jc(r)}:Fq().includes(t)?function(...e){return t.apply(rb(this),e),jc(wR.get(this))}:function(...e){return jc(t.apply(rb(this),e))}}function qq(t){return typeof t=="function"?Bq(t):(t instanceof IDBTransaction&&Uq(t),Mq(t,Lq())?new Proxy(t,wj):t)}function jc(t){if(t instanceof IDBRequest)return $q(t);if(nb.has(t))return nb.get(t);const e=qq(t);return e!==t&&(nb.set(t,e),YN.set(e,t)),e}const rb=t=>YN.get(t);function Vq(t,e,{blocked:s,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=jc(o);return r&&o.addEventListener("upgradeneeded",c=>{r(jc(o.result),c.oldVersion,c.newVersion,jc(o.transaction),c)}),s&&o.addEventListener("blocked",c=>s(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Hq=["get","getKey","getAll","getAllKeys","count"],Wq=["put","add","delete","clear"],ib=new Map;function XC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ib.get(e))return ib.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=Wq.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Hq.includes(s)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[s](...l),i&&c.done]))[0]};return ib.set(e,a),a}zq(t=>({...t,get:(e,s,r)=>XC(e,s)||t.get(e,s,r),has:(e,s)=>!!XC(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(Gq(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function Gq(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jj="@firebase/app",JC="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=new GN("@firebase/app"),Yq="@firebase/app-compat",Qq="@firebase/analytics-compat",Zq="@firebase/analytics",Xq="@firebase/app-check-compat",Jq="@firebase/app-check",eV="@firebase/auth",tV="@firebase/auth-compat",sV="@firebase/database",nV="@firebase/data-connect",rV="@firebase/database-compat",iV="@firebase/functions",aV="@firebase/functions-compat",oV="@firebase/installations",lV="@firebase/installations-compat",cV="@firebase/messaging",dV="@firebase/messaging-compat",uV="@firebase/performance",hV="@firebase/performance-compat",fV="@firebase/remote-config",pV="@firebase/remote-config-compat",mV="@firebase/storage",gV="@firebase/storage-compat",xV="@firebase/firestore",yV="@firebase/ai",vV="@firebase/firestore-compat",bV="firebase",wV="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="[DEFAULT]",jV={[jj]:"fire-core",[Yq]:"fire-core-compat",[Zq]:"fire-analytics",[Qq]:"fire-analytics-compat",[Jq]:"fire-app-check",[Xq]:"fire-app-check-compat",[eV]:"fire-auth",[tV]:"fire-auth-compat",[sV]:"fire-rtdb",[nV]:"fire-data-connect",[rV]:"fire-rtdb-compat",[iV]:"fire-fn",[aV]:"fire-fn-compat",[oV]:"fire-iid",[lV]:"fire-iid-compat",[cV]:"fire-fcm",[dV]:"fire-fcm-compat",[uV]:"fire-perf",[hV]:"fire-perf-compat",[fV]:"fire-rc",[pV]:"fire-rc-compat",[mV]:"fire-gcs",[gV]:"fire-gcs-compat",[xV]:"fire-fst",[vV]:"fire-fst-compat",[yV]:"fire-vertex","fire-js":"fire-js",[bV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=new Map,NV=new Map,_j=new Map;function ek(t,e){try{t.container.addComponent(e)}catch(s){pl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function Hd(t){const e=t.name;if(_j.has(e))return pl.debug(`There were multiple attempts to register component ${e}.`),!1;_j.set(e,t);for(const s of yy.values())ek(s,t);for(const s of NV.values())ek(s,t);return!0}function Av(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function Vr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nc=new Hm("app","Firebase",_V);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ic("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=wV;function NR(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r={name:Nj,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Nc.create("bad-app-name",{appName:String(i)});if(s||(s=yR()),!s)throw Nc.create("no-options");const a=yy.get(i);if(a){if(Vd(s,a.options)&&Vd(r,a.config))return a;throw Nc.create("duplicate-app",{appName:i})}const o=new Pq(i);for(const c of _j.values())o.addComponent(c);const l=new SV(s,r,o);return yy.set(i,l),l}function QN(t=Nj){const e=yy.get(t);if(!e&&t===Nj&&yR())return NR();if(!e)throw Nc.create("no-app",{appName:t});return e}function ao(t,e,s){let r=jV[t]??t;s&&(r+=`-${s}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pl.warn(o.join(" "));return}Hd(new Ic(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="firebase-heartbeat-database",kV=1,fm="firebase-heartbeat-store";let ab=null;function _R(){return ab||(ab=Vq(CV,kV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fm)}catch(s){console.warn(s)}}}}).catch(t=>{throw Nc.create("idb-open",{originalErrorMessage:t.message})})),ab}async function EV(t){try{const s=(await _R()).transaction(fm),r=await s.objectStore(fm).get(SR(t));return await s.done,r}catch(e){if(e instanceof jo)pl.warn(e.message);else{const s=Nc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pl.warn(s.message)}}}async function tk(t,e){try{const r=(await _R()).transaction(fm,"readwrite");await r.objectStore(fm).put(e,SR(t)),await r.done}catch(s){if(s instanceof jo)pl.warn(s.message);else{const r=Nc.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});pl.warn(r.message)}}}function SR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=1024,AV=30;class PV{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new RV(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=sk();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>AV){const o=OV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){pl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=sk(),{heartbeatsToSend:r,unsentEntries:i}=IV(this._heartbeatsCache.heartbeats),a=xy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return pl.warn(s),""}}}function sk(){return new Date().toISOString().substring(0,10)}function IV(t,e=TV){const s=[];let r=t.slice();for(const i of t){const a=s.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),nk(s)>e){a.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),nk(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class RV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vq()?bq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await EV(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nk(t){return xy(JSON.stringify({version:2,heartbeats:t})).length}function OV(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let r=1;r<t.length;r++)t[r].date<s&&(s=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){Hd(new Ic("platform-logger",e=>new Kq(e),"PRIVATE")),Hd(new Ic("heartbeat",e=>new PV(e),"PRIVATE")),ao(jj,JC,t),ao(jj,JC,"esm2020"),ao("fire-js","")}DV("");var MV="firebase",LV="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao(MV,LV,"app");function CR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FV=CR,kR=new Hm("auth","Firebase",CR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new GN("@firebase/auth");function $V(t,...e){vy.logLevel<=cs.WARN&&vy.warn(`Auth (${hu}): ${t}`,...e)}function jx(t,...e){vy.logLevel<=cs.ERROR&&vy.error(`Auth (${hu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t,...e){throw XN(t,...e)}function xa(t,...e){return XN(t,...e)}function ZN(t,e,s){const r={...FV(),[e]:s};return new Hm("auth","Firebase",r).create(e,{appName:t.name})}function _c(t){return ZN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ER(t,e,s){const r=s;if(!(e instanceof r))throw r.name!==e.constructor.name&&mo(t,"argument-error"),ZN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function XN(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return kR.create(t,...e)}function gt(t,e,...s){if(!t)throw XN(e,...s)}function tl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jx(e),new Error(e)}function ml(t,e){t||tl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function UV(){return rk()==="http:"||rk()==="https:"}function rk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UV()||gq()||"connection"in navigator)?navigator.onLine:!0}function BV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,s){this.shortDelay=e,this.longDelay=s,ml(s>e,"Short delay should be less than long delay!"),this.isMobile=pq()||xq()}get(){return zV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t,e){ml(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HV=new Km(3e4,6e4);function e_(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function If(t,e,s,r,i={}){return AR(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Wm({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...a};return mq()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&uu(t.emulatorConfig.host)&&(d.credentials="include"),TR.fetch()(await PR(t,t.config.apiHost,s,l),d)})}async function AR(t,e,s){t._canInitEmulator=!1;const r={...qV,...e};try{const i=new KV(t),a=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw qg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qg(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qg(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qg(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ZN(t,u,d);mo(t,u)}}catch(i){if(i instanceof jo)throw i;mo(t,"network-request-failed",{message:String(i)})}}async function WV(t,e,s,r,i={}){const a=await If(t,e,s,r,i);return"mfaPendingCredential"in a&&mo(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function PR(t,e,s,r){const i=`${e}${s}?${r}`,a=t,o=a.config.emulator?JN(t.config,i):`${t.config.apiScheme}://${i}`;return VV.includes(s)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}class KV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(xa(this.auth,"network-request-failed")),HV.get())})}}function qg(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=xa(t,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e){return If(t,"POST","/v1/accounts:delete",e)}async function by(t,e){return If(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YV(t,e=!1){const s=zi(t),r=await s.getIdToken(e),i=t_(r);gt(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Op(ob(i.auth_time)),issuedAtTime:Op(ob(i.iat)),expirationTime:Op(ob(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ob(t){return Number(t)*1e3}function t_(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return jx("JWT malformed, contained fewer than 3 sections"),null;try{const i=mR(s);return i?JSON.parse(i):(jx("Failed to decode base64 JWT payload"),null)}catch(i){return jx("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ik(t){const e=t_(t);return gt(e,"internal-error"),gt(typeof e.exp<"u","internal-error"),gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pm(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof jo&&QV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Op(this.lastLoginAt),this.creationTime=Op(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wy(t){var f;const e=t.auth,s=await t.getIdToken(),r=await pm(t,by(e,{idToken:s}));gt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=(f=i.providerUserInfo)!=null&&f.length?IR(i.providerUserInfo):[],o=JV(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cj(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,u)}async function XV(t){const e=zi(t);await wy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function IR(t){return t.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eH(t,e){const s=await AR(t,{},async()=>{const r=Wm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await PR(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&uu(t.emulatorConfig.host)&&(c.credentials="include"),TR.fetch()(o,c)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function tH(t,e){return If(t,"POST","/v2/accounts:revokeToken",e_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt(typeof e.idToken<"u","internal-error"),gt(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ik(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){gt(e.length!==0,"internal-error");const s=ik(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:a}=await eH(e,s);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:a}=s,o=new wh;return r&&(gt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(gt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(gt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wh,this.toJSON())}_performRefresh(){return tl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t,e){gt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ua{constructor({uid:e,auth:s,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new ZV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cj(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await pm(this,this.stsTokenManager.getToken(this.auth,e));return gt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return YV(this,e)}reload(){return XV(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await wy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vr(this.auth.app))return Promise.reject(_c(this.auth));const e=await this.getIdToken();return await pm(this,GV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,i=s.email??void 0,a=s.phoneNumber??void 0,o=s.photoURL??void 0,l=s.tenantId??void 0,c=s._redirectEventId??void 0,d=s.createdAt??void 0,u=s.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:x,providerData:g,stsTokenManager:y}=s;gt(f&&y,e,"internal-error");const w=wh.fromJSON(this.name,y);gt(typeof f=="string",e,"internal-error"),Ol(r,e.name),Ol(i,e.name),gt(typeof h=="boolean",e,"internal-error"),gt(typeof x=="boolean",e,"internal-error"),Ol(a,e.name),Ol(o,e.name),Ol(l,e.name),Ol(c,e.name),Ol(d,e.name),Ol(u,e.name);const b=new ua({uid:f,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:w,createdAt:d,lastLoginAt:u});return g&&Array.isArray(g)&&(b.providerData=g.map(v=>({...v}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,s,r=!1){const i=new wh;i.updateFromServerResponse(s);const a=new ua({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wy(a),a}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];gt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?IR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new wh;l.updateFromIdToken(r);const c=new ua({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Cj(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Map;function sl(t){ml(t instanceof Function,"Expected a class definition");let e=ak.get(t);return e?(ml(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ak.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}RR.type="NONE";const ok=RR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e,s){return`firebase:${t}:${e}:${s}`}class jh{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Nx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Nx("persistence",i.apiKey,a),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await by(this.auth,{idToken:e}).catch(()=>{});return s?ua._fromGetAccountInfoResponse(this.auth,s,e):null}return ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new jh(sl(ok),e,r);const i=(await Promise.all(s.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||sl(ok);const o=Nx(r,e.config.apiKey,e.name);let l=null;for(const d of s)try{const u=await d._get(o);if(u){let f;if(typeof u=="string"){const h=await by(e,{idToken:u}).catch(()=>{});if(!h)break;f=await ua._fromGetAccountInfoResponse(e,h,u)}else f=ua._fromJSON(e,u);d!==a&&(l=f),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new jh(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(s.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new jh(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($R(e))return"Blackberry";if(UR(e))return"Webos";if(DR(e))return"Safari";if((e.includes("chrome/")||MR(e))&&!e.includes("edge/"))return"Chrome";if(FR(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OR(t=pr()){return/firefox\//i.test(t)}function DR(t=pr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MR(t=pr()){return/crios\//i.test(t)}function LR(t=pr()){return/iemobile/i.test(t)}function FR(t=pr()){return/android/i.test(t)}function $R(t=pr()){return/blackberry/i.test(t)}function UR(t=pr()){return/webos/i.test(t)}function s_(t=pr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sH(t=pr()){var e;return s_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function nH(){return yq()&&document.documentMode===10}function zR(t=pr()){return s_(t)||FR(t)||UR(t)||$R(t)||/windows phone/i.test(t)||LR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t,e=[]){let s;switch(t){case"Browser":s=lk(pr());break;case"Worker":s=`${lk(pr())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${hu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iH(t,e={}){return If(t,"GET","/v2/passwordPolicy",e_(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=6;class oH{constructor(e){var r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??aH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ck(this),this.idTokenSubscription=new ck(this),this.beforeStateQueue=new rH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=sl(s)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await jh.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await by(this,{idToken:e}),r=await ua._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Vr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await wy(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vr(this.app))return Promise.reject(_c(this));const s=e?zi(e):null;return s&&gt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vr(this.app)?Promise.reject(_c(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vr(this.app)?Promise.reject(_c(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iH(this),s=new oH(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hm("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await tH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&sl(e)||this._popupRedirectResolver;gt(s,this,"argument-error"),this.redirectPersistenceManager=await jh.create(this,[sl(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)==null?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((s=this.currentUser)==null?void 0:s.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const a=typeof s=="function"?s:s.next.bind(s);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof s=="function"){const c=e.addObserver(s,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(s);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var s;if(Vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getToken());return e!=null&&e.error&&$V(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rf(t){return zi(t)}class ck{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sq(s=>this.observer=s)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cH(t){n_=t}function dH(t){return n_.loadJS(t)}function uH(){return n_.gapiScript}function hH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(t,e){const s=Av(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),a=s.getOptions();if(Vd(a,e??{}))return i;mo(i,"already-initialized")}return s.initialize({options:e})}function pH(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(sl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mH(t,e,s){const r=Rf(t);gt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=qR(e),{host:o,port:l}=gH(e),c=l===null?"":`:${l}`,d={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){gt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),gt(Vd(d,r.config.emulator)&&Vd(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,uu(o)?(WN(`${a}//${o}${c}`),KN("Auth",!0)):xH()}function qR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gH(t){const e=qR(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:dk(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:dk(o)}}}function dk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xH(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return tl("not implemented")}_getIdTokenResponse(e){return tl("not implemented")}_linkToIdToken(e,s){return tl("not implemented")}_getReauthenticationResolver(e){return tl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(t,e){return WV(t,"POST","/v1/accounts:signInWithIdp",e_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="http://localhost";class gl extends VR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new gl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):mo("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=s;if(!r||!i)return null;const o=new gl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const s=this.buildRequest();return Nh(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,Nh(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,Nh(e,s)}buildRequest(){const e={requestUri:yH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Wm(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends Pv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dp extends Of{static credentialFromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;return gt("providerId"in s&&"signInMethod"in s,"argument-error"),gl._fromParams(s)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return gt(e.idToken||e.accessToken,"argument-error"),gl._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Dp.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dp.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:o,providerId:l}=e;if(!r&&!i&&!s&&!a||!l)return null;try{return new Dp(l)._credential({idToken:s,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Of{constructor(){super("facebook.com")}static credential(e){return gl._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hl.credentialFromTaggedObject(e)}static credentialFromError(e){return Hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hl.credential(e.oauthAccessToken)}catch{return null}}}Hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends Of{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return gl._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Zo.credential(s,r)}catch{return null}}}Zo.GOOGLE_SIGN_IN_METHOD="google.com";Zo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends Of{constructor(){super("github.com")}static credential(e){return gl._fromParams({providerId:Wl.PROVIDER_ID,signInMethod:Wl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wl.credentialFromTaggedObject(e)}static credentialFromError(e){return Wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wl.credential(e.oauthAccessToken)}catch{return null}}}Wl.GITHUB_SIGN_IN_METHOD="github.com";Wl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Of{constructor(){super("twitter.com")}static credential(e,s){return gl._fromParams({providerId:Kl.PROVIDER_ID,signInMethod:Kl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Kl.credentialFromTaggedObject(e)}static credentialFromError(e){return Kl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Kl.credential(s,r)}catch{return null}}}Kl.TWITTER_SIGN_IN_METHOD="twitter.com";Kl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const a=await ua._fromIdTokenResponse(e,r,i),o=uk(r);return new tf({user:a,providerId:o,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=uk(r);return new tf({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function uk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy extends jo{constructor(e,s,r,i){super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new jy(e,s,r,i)}}function HR(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?jy._fromErrorAndOperation(t,a,e,r):a})}async function vH(t,e,s=!1){const r=await pm(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return tf._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bH(t,e,s=!1){const{auth:r}=t;if(Vr(r.app))return Promise.reject(_c(r));const i="reauthenticate";try{const a=await pm(t,HR(r,i,e,t),s);gt(a.idToken,r,"internal-error");const o=t_(a.idToken);gt(o,r,"internal-error");const{sub:l}=o;return gt(t.uid===l,r,"user-mismatch"),tf._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&mo(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wH(t,e,s=!1){if(Vr(t.app))return Promise.reject(_c(t));const r="signIn",i=await HR(t,r,e),a=await tf._fromIdTokenResponse(t,r,i);return s||await t._updateCurrentUser(a.user),a}function jH(t,e,s,r){return zi(t).onIdTokenChanged(e,s,r)}function NH(t,e,s){return zi(t).beforeAuthStateChanged(e,s)}function _H(t,e,s,r){return zi(t).onAuthStateChanged(e,s,r)}function SH(t){return zi(t).signOut()}const Ny="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Ny,"1"),this.storage.removeItem(Ny),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH=1e3,kH=10;class KR extends WR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!s&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);nH()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kH):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},CH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}KR.type="LOCAL";const EH=KR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR extends WR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}GR.type="SESSION";const YR=GR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new Iv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:a}=s.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async d=>d(s.origin,a)),c=await TH(l);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Iv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const d=r_("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(h.data.response);break;default:clearTimeout(u),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:s},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(){return window}function PH(t){oo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){return typeof oo().WorkerGlobalScope<"u"&&typeof oo().importScripts=="function"}async function IH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function OH(){return QR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebaseLocalStorageDb",DH=1,_y="firebaseLocalStorage",XR="fbase_key";class Gm{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Rv(t,e){return t.transaction([_y],e?"readwrite":"readonly").objectStore(_y)}function MH(){const t=indexedDB.deleteDatabase(ZR);return new Gm(t).toPromise()}function kj(){const t=indexedDB.open(ZR,DH);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_y,{keyPath:XR})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_y)?e(r):(r.close(),await MH(),e(await kj()))})})}async function hk(t,e,s){const r=Rv(t,!0).put({[XR]:e,value:s});return new Gm(r).toPromise()}async function LH(t,e){const s=Rv(t,!1).get(e),r=await new Gm(s).toPromise();return r===void 0?null:r.value}function fk(t,e){const s=Rv(t,!0).delete(e);return new Gm(s).toPromise()}const FH=800,$H=3;class JR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kj(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>$H)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Iv._getInstance(OH()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var s,r;if(this.activeServiceWorker=await IH(),!this.activeServiceWorker)return;this.sender=new AH(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(s=e[0])!=null&&s.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kj();return await hk(e,Ny,"1"),await fk(e,Ny),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>hk(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>LH(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>fk(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Rv(i,!1).getAll();return new Gm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JR.type="LOCAL";const UH=JR;new Km(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t,e){return e?sl(e):(gt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends VR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nh(e,this._buildIdpRequest())}_linkToIdToken(e,s){return Nh(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return Nh(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function zH(t){return wH(t.auth,new a_(t),t.bypassAuthState)}function BH(t){const{auth:e,user:s}=t;return gt(s,e,"internal-error"),bH(s,new a_(t),t.bypassAuthState)}async function qH(t){const{auth:e,user:s}=t;return gt(s,e,"internal-error"),vH(s,new a_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,s,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:s,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zH;case"linkViaPopup":case"linkViaRedirect":return qH;case"reauthViaPopup":case"reauthViaRedirect":return BH;default:mo(this.auth,"internal-error")}}resolve(e){ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=new Km(2e3,1e4);async function tO(t,e,s){if(Vr(t.app))return Promise.reject(xa(t,"operation-not-supported-in-this-environment"));const r=Rf(t);ER(t,e,Pv);const i=i_(r,s);return new xd(r,"signInViaPopup",e,i).executeNotNull()}class xd extends eO{constructor(e,s,r,i,a){super(e,s,i,a),this.provider=r,this.authWindow=null,this.pollId=null,xd.currentPopupAction&&xd.currentPopupAction.cancel(),xd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){ml(this.filter.length===1,"Popup operations only handle one event");const e=r_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if((r=(s=this.authWindow)==null?void 0:s.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VH.get())};e()}}xd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HH="pendingRedirect",_x=new Map;class WH extends eO{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=_x.get(this.auth._key());if(!e){try{const r=await KH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}_x.set(this.auth._key(),e)}return this.bypassAuthState||_x.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KH(t,e){const s=nO(e),r=sO(t);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}async function GH(t,e){return sO(t)._set(nO(e),"true")}function YH(t,e){_x.set(t._key(),e)}function sO(t){return sl(t._redirectPersistence)}function nO(t){return Nx(HH,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e,s){return QH(t,e,s)}async function QH(t,e,s){if(Vr(t.app))return Promise.reject(_c(t));const r=Rf(t);ER(t,e,Pv),await r._initializationPromise;const i=i_(r,s);return await GH(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function ZH(t,e){return await Rf(t)._initializationPromise,iO(t,e,!1)}async function iO(t,e,s=!1){if(Vr(t.app))return Promise.reject(_c(t));const r=Rf(t),i=i_(r,e),o=await new WH(r,i,s).execute();return o&&!s&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH=10*60*1e3;class JH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eW(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!aO(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";s.onError(xa(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XH&&this.cachedEventUids.clear(),this.cachedEventUids.has(pk(e))}saveEventToCache(e){this.cachedEventUids.add(pk(e)),this.lastProcessedEventTime=Date.now()}}function pk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aO({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tW(t,e={}){return If(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nW=/^https?/;async function rW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tW(t);for(const s of e)try{if(iW(s))return}catch{}mo(t,"unauthorized-domain")}function iW(t){const e=Sj(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===r}if(!nW.test(s))return!1;if(sW.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW=new Km(3e4,6e4);function mk(){const t=oo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function oW(t){return new Promise((e,s)=>{var i,a,o;function r(){mk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mk(),s(xa(t,"network-request-failed"))},timeout:aW.get()})}if((a=(i=oo().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=oo().gapi)!=null&&o.load)r();else{const l=hH("iframefcb");return oo()[l]=()=>{gapi.load?r():s(xa(t,"network-request-failed"))},dH(`${uH()}?onload=${l}`).catch(c=>s(c))}}).catch(e=>{throw Sx=null,e})}let Sx=null;function lW(t){return Sx=Sx||oW(t),Sx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW=new Km(5e3,15e3),dW="__/auth/iframe",uW="emulator/auth/iframe",hW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pW(t){const e=t.config;gt(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?JN(e,uW):`https://${t.config.authDomain}/${dW}`,r={apiKey:e.apiKey,appName:t.name,v:hu},i=fW.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${s}?${Wm(r).slice(1)}`}async function mW(t){const e=await lW(t),s=oo().gapi;return gt(s,t,"internal-error"),e.open({where:document.body,url:pW(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hW,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=xa(t,"network-request-failed"),l=oo().setTimeout(()=>{a(o)},cW.get());function c(){oo().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xW=500,yW=600,vW="_blank",bW="http://localhost";class gk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wW(t,e,s,r=xW,i=yW){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...gW,width:r.toString(),height:i.toString(),top:a,left:o},d=pr().toLowerCase();s&&(l=MR(d)?vW:s),OR(d)&&(e=e||bW,c.scrollbars="yes");const u=Object.entries(c).reduce((h,[x,g])=>`${h}${x}=${g},`,"");if(sH(d)&&l!=="_self")return jW(e||"",l),new gk(null);const f=window.open(e||"",l,u);gt(f,t,"popup-blocked");try{f.focus()}catch{}return new gk(f)}function jW(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="__/auth/handler",_W="emulator/auth/handler",SW=encodeURIComponent("fac");async function xk(t,e,s,r,i,a){gt(t.config.authDomain,t,"auth-domain-config-required"),gt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:hu,eventId:i};if(e instanceof Pv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_q(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof Of){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const c=await t._getAppCheckToken(),d=c?`#${SW}=${encodeURIComponent(c)}`:"";return`${CW(t)}?${Wm(l).slice(1)}${d}`}function CW({config:t}){return t.emulator?JN(t,_W):`https://${t.authDomain}/${NW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="webStorageSupport";class kW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YR,this._completeRedirectFn=iO,this._overrideRedirectResult=YH}async _openPopup(e,s,r,i){var o;ml((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await xk(e,s,r,Sj(),i);return wW(e,a,r_())}async _openRedirect(e,s,r,i){await this._originValidation(e);const a=await xk(e,s,r,Sj(),i);return PH(a),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:a}=this.eventManagers[s];return i?Promise.resolve(i):(ml(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await mW(e),r=new JH(e);return s.register("authEvent",i=>(gt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(lb,{type:lb},i=>{var o;const a=(o=i==null?void 0:i[0])==null?void 0:o[lb];a!==void 0&&s(!!a),mo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=rW(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return zR()||DR()||s_()}}const EW=kW;var yk="@firebase/auth",vk="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PW(t){Hd(new Ic("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;gt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BR(t)},d=new lH(r,i,a,c);return pH(d,s),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Hd(new Ic("auth-internal",e=>{const s=Rf(e.getProvider("auth").getImmediate());return(r=>new TW(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(yk,vk,AW(t)),ao(yk,vk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=5*60,RW=vR("authIdTokenMaxAge")||IW;let bk=null;const OW=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>RW)return;const i=s==null?void 0:s.token;bk!==i&&(bk=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function DW(t=QN()){const e=Av(t,"auth");if(e.isInitialized())return e.getImmediate();const s=fH(t,{popupRedirectResolver:EW,persistence:[UH,EH,YR]}),r=vR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=OW(a.toString());NH(s,o,()=>o(s.currentUser)),jH(s,l=>o(l))}}const i=gR("auth");return i&&mH(s,`http://${i}`),s}function MW(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}cH({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=xa("internal-error");a.customData=i,s(a)},r.type="text/javascript",r.charset="UTF-8",MW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PW("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="firebasestorage.googleapis.com",lO="storageBucket",LW=2*60*1e3,FW=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn extends jo{constructor(e,s,r=0){super(cb(e),`Firebase Storage: ${s} (${cb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tn||(tn={}));function cb(t){return"storage/"+t}function o_(){const t="An unknown error occurred, please check the error payload for server response.";return new sn(tn.UNKNOWN,t)}function $W(t){return new sn(tn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function UW(t){return new sn(tn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new sn(tn.UNAUTHENTICATED,t)}function BW(){return new sn(tn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qW(t){return new sn(tn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function VW(){return new sn(tn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HW(){return new sn(tn.CANCELED,"User canceled the upload/download.")}function WW(t){return new sn(tn.INVALID_URL,"Invalid URL '"+t+"'.")}function KW(t){return new sn(tn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GW(){return new sn(tn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lO+"' property when initializing the app?")}function YW(){return new sn(tn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QW(){return new sn(tn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ZW(t){return new sn(tn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ej(t){return new sn(tn.INVALID_ARGUMENT,t)}function cO(){return new sn(tn.APP_DELETED,"The Firebase app was deleted.")}function XW(t){return new sn(tn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mp(t,e){return new sn(tn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function op(t){throw new sn(tn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let r;try{r=Kr.makeFromUrl(e,s)}catch{return new Kr(e,"")}if(r.path==="")return r;throw KW(e)}static makeFromUrl(e,s){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const u="v[A-Za-z0-9_]+",f=s.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",x=new RegExp(`^https?://${f}/${u}/b/${i}/o${h}`,"i"),g={bucket:1,path:3},y=s===oO?"(?:storage.googleapis.com|storage.cloud.google.com)":s,w="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${w}`,"i"),N=[{regex:l,indices:c,postModify:a},{regex:x,indices:g,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<N.length;C++){const _=N[C],T=_.regex.exec(e);if(T){const j=T[_.indices.bucket];let S=T[_.indices.path];S||(S=""),r=new Kr(j,S),_.postModify(r);break}}if(r==null)throw WW(e);return r}}class JW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eK(t,e,s){let r=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let d=!1;function u(...w){d||(d=!0,e.apply(null,w))}function f(w){i=setTimeout(()=>{i=null,t(x,c())},w)}function h(){a&&clearTimeout(a)}function x(w,...b){if(d){h();return}if(w){h(),u.call(null,w,...b);return}if(c()||o){h(),u.call(null,w,...b);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,f(N)}let g=!1;function y(w){g||(g=!0,h(),!d&&(i!==null?(w||(l=2),clearTimeout(i),f(0)):w||(l=1)))}return f(0),a=setTimeout(()=>{o=!0,y(!0)},s),y}function tK(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t){return t!==void 0}function nK(t){return typeof t=="object"&&!Array.isArray(t)}function l_(t){return typeof t=="string"||t instanceof String}function wk(t){return c_()&&t instanceof Blob}function c_(){return typeof Blob<"u"}function jk(t,e,s,r){if(r<e)throw Ej(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>s)throw Ej(`Invalid value for '${t}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e,s){let r=e;return s==null&&(r=`https://${e}`),`${s}://${r}/v0${t}`}function dO(t){const e=encodeURIComponent;let s="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);s=s+i+"&"}return s=s.slice(0,-1),s}var Id;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Id||(Id={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK(t,e){const s=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return s||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e,s,r,i,a,o,l,c,d,u,f,h=!0,x=!1){this.url_=e,this.method_=s,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=u,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,y)=>{this.resolve_=g,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Vg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Id.NO_ERROR,c=a.getStatus();if(!l||rK(c,this.additionalRetryCodes_)&&this.retry){const u=a.getErrorCode()===Id.ABORT;r(!1,new Vg(!1,null,u));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Vg(d,a))})},s=(r,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());sK(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=o_();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?cO():HW();o(c)}else{const c=VW();o(c)}};this.canceled_?s(!1,new Vg(!1,null,!0)):this.backoffId_=eK(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vg{constructor(e,s,r){this.wasSuccessCode=e,this.connection=s,this.canceled=!!r}}function aK(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oK(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lK(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cK(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dK(t,e,s,r,i,a,o=!0,l=!1){const c=dO(t.urlParams),d=t.url+c,u=Object.assign({},t.headers);return lK(u,e),aK(u,s),oK(u,a),cK(u,r),new iK(d,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hK(...t){const e=uK();if(e!==void 0){const s=new e;for(let r=0;r<t.length;r++)s.append(t[r]);return s.getBlob()}else{if(c_())return new Blob(t);throw new sn(tn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fK(t,e,s){return t.webkitSlice?t.webkitSlice(e,s):t.mozSlice?t.mozSlice(e,s):t.slice?t.slice(e,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(t){if(typeof atob>"u")throw ZW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class db{constructor(e,s){this.data=e,this.contentType=s||null}}function mK(t,e){switch(t){case Xa.RAW:return new db(uO(e));case Xa.BASE64:case Xa.BASE64URL:return new db(hO(t,e));case Xa.DATA_URL:return new db(xK(e),yK(e))}throw o_()}function uO(t){const e=[];for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(s<t.length-1&&(t.charCodeAt(s+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++s);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function gK(t){let e;try{e=decodeURIComponent(t)}catch{throw Mp(Xa.DATA_URL,"Malformed data URL.")}return uO(e)}function hO(t,e){switch(t){case Xa.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Mp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xa.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Mp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=pK(e)}catch(i){throw i.message.includes("polyfill")?i:Mp(t,"Invalid character found")}const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r}class fO{constructor(e){this.base64=!1,this.contentType=null;const s=e.match(/^data:([^,]+)?,/);if(s===null)throw Mp(Xa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=s[1]||null;r!=null&&(this.base64=vK(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function xK(t){const e=new fO(t);return e.base64?hO(Xa.BASE64,e.rest):gK(e.rest)}function yK(t){return new fO(t).contentType}function vK(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,s){let r=0,i="";wk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(s?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(s?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,s){if(wk(this.data_)){const r=this.data_,i=fK(r,e,s);return i===null?null:new Gl(i)}else{const r=new Uint8Array(this.data_.buffer,e,s-e);return new Gl(r,!0)}}static getBlob(...e){if(c_()){const s=e.map(r=>r instanceof Gl?r.data_:r);return new Gl(hK.apply(null,s))}else{const s=e.map(o=>l_(o)?mK(Xa.RAW,o).data:o.data_);let r=0;s.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return s.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new Gl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){let e;try{e=JSON.parse(t)}catch{return null}return nK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wK(t,e){const s=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?s:t+"/"+s}function mO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(t,e){return e}class sr{constructor(e,s,r,i){this.server=e,this.local=s||e,this.writable=!!r,this.xform=i||jK}}let Hg=null;function NK(t){return!l_(t)||t.length<2?t:mO(t)}function gO(){if(Hg)return Hg;const t=[];t.push(new sr("bucket")),t.push(new sr("generation")),t.push(new sr("metageneration")),t.push(new sr("name","fullPath",!0));function e(a,o){return NK(o)}const s=new sr("name");s.xform=e,t.push(s);function r(a,o){return o!==void 0?Number(o):o}const i=new sr("size");return i.xform=r,t.push(i),t.push(new sr("timeCreated")),t.push(new sr("updated")),t.push(new sr("md5Hash",null,!0)),t.push(new sr("cacheControl",null,!0)),t.push(new sr("contentDisposition",null,!0)),t.push(new sr("contentEncoding",null,!0)),t.push(new sr("contentLanguage",null,!0)),t.push(new sr("contentType",null,!0)),t.push(new sr("metadata","customMetadata",!0)),Hg=t,Hg}function _K(t,e){function s(){const r=t.bucket,i=t.fullPath,a=new Kr(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:s})}function SK(t,e,s){const r={};r.type="file";const i=s.length;for(let a=0;a<i;a++){const o=s[a];r[o.local]=o.xform(r,e[o.server])}return _K(r,t),r}function xO(t,e,s){const r=pO(e);return r===null?null:SK(t,r,s)}function CK(t,e,s,r){const i=pO(e);if(i===null||!l_(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const u=t.bucket,f=t.fullPath,h="/b/"+o(u)+"/o/"+o(f),x=d_(h,s,r),g=dO({alt:"media",token:d});return x+g})[0]}function kK(t,e){const s={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(s[a.server]=t[a.local])}return JSON.stringify(s)}class yO{constructor(e,s,r,i){this.url=e,this.method=s,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){if(!t)throw o_()}function EK(t,e){function s(r,i){const a=xO(t,i,e);return vO(a!==null),a}return s}function TK(t,e){function s(r,i){const a=xO(t,i,e);return vO(a!==null),CK(a,i,t.host,t._protocol)}return s}function bO(t){function e(s,r){let i;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?i=BW():i=zW():s.getStatus()===402?i=UW(t.bucket):s.getStatus()===403?i=qW(t.path):i=r,i.status=s.getStatus(),i.serverResponse=r.serverResponse,i}return e}function AK(t){const e=bO(t);function s(r,i){let a=e(r,i);return r.getStatus()===404&&(a=$W(t.path)),a.serverResponse=i.serverResponse,a}return s}function PK(t,e,s){const r=e.fullServerUrl(),i=d_(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new yO(i,a,TK(t,s),o);return l.errorHandler=AK(e),l}function IK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function RK(t,e,s){const r=Object.assign({},s);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=IK(null,e)),r}function OK(t,e,s,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let C=0;C<2;C++)N=N+Math.random().toString().slice(2);return N}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=RK(e,r,i),u=kK(d,s),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+c+"--",x=Gl.getBlob(f,r,h);if(x===null)throw YW();const g={name:d.fullPath},y=d_(a,t.host,t._protocol),w="POST",b=t.maxUploadRetryTime,v=new yO(y,w,EK(t,s),b);return v.urlParams=g,v.headers=o,v.body=x.uploadData(),v.errorHandler=bO(e),v}class DK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Id.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Id.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Id.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,s,r,i,a){if(this.sent_)throw op("cannot .send() more than once");if(uu(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(s,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw op("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw op("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw op("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw op("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MK extends DK{initXhr(){this.xhr_.responseType="text"}}function wO(){return new MK}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,s){this._service=e,s instanceof Kr?this._location=s:this._location=Kr.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new Wd(e,s)}get root(){const e=new Kr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mO(this._location.path)}get storage(){return this._service}get parent(){const e=bK(this._location.path);if(e===null)return null;const s=new Kr(this._location.bucket,e);return new Wd(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw XW(e)}}function LK(t,e,s){t._throwIfRoot("uploadBytes");const r=OK(t.storage,t._location,gO(),new Gl(e,!0),s);return t.storage.makeRequestWithTokens(r,wO).then(i=>({metadata:i,ref:t}))}function FK(t){t._throwIfRoot("getDownloadURL");const e=PK(t.storage,t._location,gO());return t.storage.makeRequestWithTokens(e,wO).then(s=>{if(s===null)throw QW();return s})}function $K(t,e){const s=wK(t._location.path,e),r=new Kr(t._location.bucket,s);return new Wd(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UK(t){return/^[A-Za-z]+:\/\//.test(t)}function zK(t,e){return new Wd(t,e)}function jO(t,e){if(t instanceof u_){const s=t;if(s._bucket==null)throw GW();const r=new Wd(s,s._bucket);return e!=null?jO(r,e):r}else return e!==void 0?$K(t,e):t}function BK(t,e){if(e&&UK(e)){if(t instanceof u_)return zK(t,e);throw Ej("To use ref(service, url), the first argument must be a Storage instance.")}else return jO(t,e)}function Nk(t,e){const s=e==null?void 0:e[lO];return s==null?null:Kr.makeFromBucketSpec(s,t)}function qK(t,e,s,r={}){t.host=`${e}:${s}`;const i=uu(e);i&&(WN(`https://${t.host}/b`),KN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:bR(a,t.app.options.projectId))}class u_{constructor(e,s,r,i,a,o=!1){this.app=e,this._authProvider=s,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=oO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LW,this._maxUploadRetryTime=FW,this._requests=new Set,i!=null?this._bucket=Kr.makeFromBucketSpec(i,this._host):this._bucket=Nk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kr.makeFromBucketSpec(this._url,e):this._bucket=Nk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(Vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wd(this,e)}_makeRequest(e,s,r,i,a=!0){if(this._deleted)return new JW(cO());{const o=dK(e,this._appId,r,i,s,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,s){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,r,i).getPromise()}}const _k="@firebase/storage",Sk="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="storage";function VK(t,e,s){return t=zi(t),LK(t,e,s)}function HK(t){return t=zi(t),FK(t)}function WK(t,e){return t=zi(t),BK(t,e)}function KK(t=QN(),e){t=zi(t);const r=Av(t,NO).getImmediate({identifier:e}),i=xR("storage");return i&&GK(r,...i),r}function GK(t,e,s,r={}){qK(t,e,s,r)}function YK(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new u_(s,r,i,e,hu)}function QK(){Hd(new Ic(NO,YK,"PUBLIC").setMultipleInstances(!0)),ao(_k,Sk,""),ao(_k,Sk,"esm2020")}QK();var Ck=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function A(){}A.prototype=S.prototype,j.F=S.prototype,j.prototype=new A,j.prototype.constructor=j,j.D=function(I,P,O){for(var D=Array(arguments.length-2),M=2;M<arguments.length;M++)D[M-2]=arguments[M];return S.prototype[P].apply(I,D)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,S,A){A||(A=0);const I=Array(16);if(typeof S=="string")for(var P=0;P<16;++P)I[P]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(P=0;P<16;++P)I[P]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=j.g[0],A=j.g[1],P=j.g[2];let O=j.g[3],D;D=S+(O^A&(P^O))+I[0]+3614090360&4294967295,S=A+(D<<7&4294967295|D>>>25),D=O+(P^S&(A^P))+I[1]+3905402710&4294967295,O=S+(D<<12&4294967295|D>>>20),D=P+(A^O&(S^A))+I[2]+606105819&4294967295,P=O+(D<<17&4294967295|D>>>15),D=A+(S^P&(O^S))+I[3]+3250441966&4294967295,A=P+(D<<22&4294967295|D>>>10),D=S+(O^A&(P^O))+I[4]+4118548399&4294967295,S=A+(D<<7&4294967295|D>>>25),D=O+(P^S&(A^P))+I[5]+1200080426&4294967295,O=S+(D<<12&4294967295|D>>>20),D=P+(A^O&(S^A))+I[6]+2821735955&4294967295,P=O+(D<<17&4294967295|D>>>15),D=A+(S^P&(O^S))+I[7]+4249261313&4294967295,A=P+(D<<22&4294967295|D>>>10),D=S+(O^A&(P^O))+I[8]+1770035416&4294967295,S=A+(D<<7&4294967295|D>>>25),D=O+(P^S&(A^P))+I[9]+2336552879&4294967295,O=S+(D<<12&4294967295|D>>>20),D=P+(A^O&(S^A))+I[10]+4294925233&4294967295,P=O+(D<<17&4294967295|D>>>15),D=A+(S^P&(O^S))+I[11]+2304563134&4294967295,A=P+(D<<22&4294967295|D>>>10),D=S+(O^A&(P^O))+I[12]+1804603682&4294967295,S=A+(D<<7&4294967295|D>>>25),D=O+(P^S&(A^P))+I[13]+4254626195&4294967295,O=S+(D<<12&4294967295|D>>>20),D=P+(A^O&(S^A))+I[14]+2792965006&4294967295,P=O+(D<<17&4294967295|D>>>15),D=A+(S^P&(O^S))+I[15]+1236535329&4294967295,A=P+(D<<22&4294967295|D>>>10),D=S+(P^O&(A^P))+I[1]+4129170786&4294967295,S=A+(D<<5&4294967295|D>>>27),D=O+(A^P&(S^A))+I[6]+3225465664&4294967295,O=S+(D<<9&4294967295|D>>>23),D=P+(S^A&(O^S))+I[11]+643717713&4294967295,P=O+(D<<14&4294967295|D>>>18),D=A+(O^S&(P^O))+I[0]+3921069994&4294967295,A=P+(D<<20&4294967295|D>>>12),D=S+(P^O&(A^P))+I[5]+3593408605&4294967295,S=A+(D<<5&4294967295|D>>>27),D=O+(A^P&(S^A))+I[10]+38016083&4294967295,O=S+(D<<9&4294967295|D>>>23),D=P+(S^A&(O^S))+I[15]+3634488961&4294967295,P=O+(D<<14&4294967295|D>>>18),D=A+(O^S&(P^O))+I[4]+3889429448&4294967295,A=P+(D<<20&4294967295|D>>>12),D=S+(P^O&(A^P))+I[9]+568446438&4294967295,S=A+(D<<5&4294967295|D>>>27),D=O+(A^P&(S^A))+I[14]+3275163606&4294967295,O=S+(D<<9&4294967295|D>>>23),D=P+(S^A&(O^S))+I[3]+4107603335&4294967295,P=O+(D<<14&4294967295|D>>>18),D=A+(O^S&(P^O))+I[8]+1163531501&4294967295,A=P+(D<<20&4294967295|D>>>12),D=S+(P^O&(A^P))+I[13]+2850285829&4294967295,S=A+(D<<5&4294967295|D>>>27),D=O+(A^P&(S^A))+I[2]+4243563512&4294967295,O=S+(D<<9&4294967295|D>>>23),D=P+(S^A&(O^S))+I[7]+1735328473&4294967295,P=O+(D<<14&4294967295|D>>>18),D=A+(O^S&(P^O))+I[12]+2368359562&4294967295,A=P+(D<<20&4294967295|D>>>12),D=S+(A^P^O)+I[5]+4294588738&4294967295,S=A+(D<<4&4294967295|D>>>28),D=O+(S^A^P)+I[8]+2272392833&4294967295,O=S+(D<<11&4294967295|D>>>21),D=P+(O^S^A)+I[11]+1839030562&4294967295,P=O+(D<<16&4294967295|D>>>16),D=A+(P^O^S)+I[14]+4259657740&4294967295,A=P+(D<<23&4294967295|D>>>9),D=S+(A^P^O)+I[1]+2763975236&4294967295,S=A+(D<<4&4294967295|D>>>28),D=O+(S^A^P)+I[4]+1272893353&4294967295,O=S+(D<<11&4294967295|D>>>21),D=P+(O^S^A)+I[7]+4139469664&4294967295,P=O+(D<<16&4294967295|D>>>16),D=A+(P^O^S)+I[10]+3200236656&4294967295,A=P+(D<<23&4294967295|D>>>9),D=S+(A^P^O)+I[13]+681279174&4294967295,S=A+(D<<4&4294967295|D>>>28),D=O+(S^A^P)+I[0]+3936430074&4294967295,O=S+(D<<11&4294967295|D>>>21),D=P+(O^S^A)+I[3]+3572445317&4294967295,P=O+(D<<16&4294967295|D>>>16),D=A+(P^O^S)+I[6]+76029189&4294967295,A=P+(D<<23&4294967295|D>>>9),D=S+(A^P^O)+I[9]+3654602809&4294967295,S=A+(D<<4&4294967295|D>>>28),D=O+(S^A^P)+I[12]+3873151461&4294967295,O=S+(D<<11&4294967295|D>>>21),D=P+(O^S^A)+I[15]+530742520&4294967295,P=O+(D<<16&4294967295|D>>>16),D=A+(P^O^S)+I[2]+3299628645&4294967295,A=P+(D<<23&4294967295|D>>>9),D=S+(P^(A|~O))+I[0]+4096336452&4294967295,S=A+(D<<6&4294967295|D>>>26),D=O+(A^(S|~P))+I[7]+1126891415&4294967295,O=S+(D<<10&4294967295|D>>>22),D=P+(S^(O|~A))+I[14]+2878612391&4294967295,P=O+(D<<15&4294967295|D>>>17),D=A+(O^(P|~S))+I[5]+4237533241&4294967295,A=P+(D<<21&4294967295|D>>>11),D=S+(P^(A|~O))+I[12]+1700485571&4294967295,S=A+(D<<6&4294967295|D>>>26),D=O+(A^(S|~P))+I[3]+2399980690&4294967295,O=S+(D<<10&4294967295|D>>>22),D=P+(S^(O|~A))+I[10]+4293915773&4294967295,P=O+(D<<15&4294967295|D>>>17),D=A+(O^(P|~S))+I[1]+2240044497&4294967295,A=P+(D<<21&4294967295|D>>>11),D=S+(P^(A|~O))+I[8]+1873313359&4294967295,S=A+(D<<6&4294967295|D>>>26),D=O+(A^(S|~P))+I[15]+4264355552&4294967295,O=S+(D<<10&4294967295|D>>>22),D=P+(S^(O|~A))+I[6]+2734768916&4294967295,P=O+(D<<15&4294967295|D>>>17),D=A+(O^(P|~S))+I[13]+1309151649&4294967295,A=P+(D<<21&4294967295|D>>>11),D=S+(P^(A|~O))+I[4]+4149444226&4294967295,S=A+(D<<6&4294967295|D>>>26),D=O+(A^(S|~P))+I[11]+3174756917&4294967295,O=S+(D<<10&4294967295|D>>>22),D=P+(S^(O|~A))+I[2]+718787259&4294967295,P=O+(D<<15&4294967295|D>>>17),D=A+(O^(P|~S))+I[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+P&4294967295,j.g[3]=j.g[3]+O&4294967295}r.prototype.v=function(j,S){S===void 0&&(S=j.length);const A=S-this.blockSize,I=this.C;let P=this.h,O=0;for(;O<S;){if(P==0)for(;O<=A;)i(this,j,O),O+=this.blockSize;if(typeof j=="string"){for(;O<S;)if(I[P++]=j.charCodeAt(O++),P==this.blockSize){i(this,I),P=0;break}}else for(;O<S;)if(I[P++]=j[O++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=S},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;S=this.o*8;for(var A=j.length-8;A<j.length;++A)j[A]=S&255,S/=256;for(this.v(j),j=Array(16),S=0,A=0;A<4;++A)for(let I=0;I<32;I+=8)j[S++]=this.g[A]>>>I&255;return j};function a(j,S){var A=l;return Object.prototype.hasOwnProperty.call(A,j)?A[j]:A[j]=S(j)}function o(j,S){this.h=S;const A=[];let I=!0;for(let P=j.length-1;P>=0;P--){const O=j[P]|0;I&&O==S||(A[P]=O,I=!1)}this.g=A}var l={};function c(j){return-128<=j&&j<128?a(j,function(S){return new o([S|0],S<0?-1:0)}):new o([j|0],j<0?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return f;if(j<0)return w(d(-j));const S=[];let A=1;for(let I=0;j>=A;I++)S[I]=j/A|0,A*=4294967296;return new o(S,0)}function u(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return w(u(j.substring(1),S));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=d(Math.pow(S,8));let I=f;for(let O=0;O<j.length;O+=8){var P=Math.min(8,j.length-O);const D=parseInt(j.substring(O,O+P),S);P<8?(P=d(Math.pow(S,P)),I=I.j(P).add(d(D))):(I=I.j(A),I=I.add(d(D)))}return I}var f=c(0),h=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();let j=0,S=1;for(let A=0;A<this.g.length;A++){const I=this.i(A);j+=(I>=0?I:4294967296+I)*S,S*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(g(this))return"0";if(y(this))return"-"+w(this).toString(j);const S=d(Math.pow(j,6));var A=this;let I="";for(;;){const P=C(A,S).g;A=b(A,P.j(S));let O=((A.g.length>0?A.g[0]:A.h)>>>0).toString(j);if(A=P,g(A))return O+I;for(;O.length<6;)O="0"+O;I=O+I}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function g(j){if(j.h!=0)return!1;for(let S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function y(j){return j.h==-1}t.l=function(j){return j=b(this,j),y(j)?-1:g(j)?0:1};function w(j){const S=j.g.length,A=[];for(let I=0;I<S;I++)A[I]=~j.g[I];return new o(A,~j.h).add(h)}t.abs=function(){return y(this)?w(this):this},t.add=function(j){const S=Math.max(this.g.length,j.g.length),A=[];let I=0;for(let P=0;P<=S;P++){let O=I+(this.i(P)&65535)+(j.i(P)&65535),D=(O>>>16)+(this.i(P)>>>16)+(j.i(P)>>>16);I=D>>>16,O&=65535,D&=65535,A[P]=D<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function b(j,S){return j.add(w(S))}t.j=function(j){if(g(this)||g(j))return f;if(y(this))return y(j)?w(this).j(w(j)):w(w(this).j(j));if(y(j))return w(this.j(w(j)));if(this.l(x)<0&&j.l(x)<0)return d(this.m()*j.m());const S=this.g.length+j.g.length,A=[];for(var I=0;I<2*S;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<j.g.length;P++){const O=this.i(I)>>>16,D=this.i(I)&65535,M=j.i(P)>>>16,J=j.i(P)&65535;A[2*I+2*P]+=D*J,v(A,2*I+2*P),A[2*I+2*P+1]+=O*J,v(A,2*I+2*P+1),A[2*I+2*P+1]+=D*M,v(A,2*I+2*P+1),A[2*I+2*P+2]+=O*M,v(A,2*I+2*P+2)}for(j=0;j<S;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=S;j<2*S;j++)A[j]=0;return new o(A,0)};function v(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function N(j,S){this.g=j,this.h=S}function C(j,S){if(g(S))throw Error("division by zero");if(g(j))return new N(f,f);if(y(j))return S=C(w(j),S),new N(w(S.g),w(S.h));if(y(S))return S=C(j,w(S)),new N(w(S.g),S.h);if(j.g.length>30){if(y(j)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var A=h,I=S;I.l(j)<=0;)A=_(A),I=_(I);var P=T(A,1),O=T(I,1);for(I=T(I,2),A=T(A,2);!g(I);){var D=O.add(I);D.l(j)<=0&&(P=P.add(A),O=D),I=T(I,1),A=T(A,1)}return S=b(j,P.j(S)),new N(P,S)}for(P=f;j.l(S)>=0;){for(A=Math.max(1,Math.floor(j.m()/S.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),O=d(A),D=O.j(S);y(D)||D.l(j)>0;)A-=I,O=d(A),D=O.j(S);g(O)&&(O=h),P=P.add(O),j=b(j,D)}return new N(P,j)}t.B=function(j){return C(this,j).h},t.and=function(j){const S=Math.max(this.g.length,j.g.length),A=[];for(let I=0;I<S;I++)A[I]=this.i(I)&j.i(I);return new o(A,this.h&j.h)},t.or=function(j){const S=Math.max(this.g.length,j.g.length),A=[];for(let I=0;I<S;I++)A[I]=this.i(I)|j.i(I);return new o(A,this.h|j.h)},t.xor=function(j){const S=Math.max(this.g.length,j.g.length),A=[];for(let I=0;I<S;I++)A[I]=this.i(I)^j.i(I);return new o(A,this.h^j.h)};function _(j){const S=j.g.length+1,A=[];for(let I=0;I<S;I++)A[I]=j.i(I)<<1|j.i(I-1)>>>31;return new o(A,j.h)}function T(j,S){const A=S>>5;S%=32;const I=j.g.length-A,P=[];for(let O=0;O<I;O++)P[O]=S>0?j.i(O+A)>>>S|j.i(O+A+1)<<32-S:j.i(O+A);return new o(P,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=u,h_=o}).apply(typeof Ck<"u"?Ck:typeof self<"u"?self:typeof window<"u"?window:{});var Wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function s(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wg=="object"&&Wg];for(var k=0;k<m.length;++k){var R=m[k];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=s(this);function i(m,k){if(k)e:{var R=r;m=m.split(".");for(var V=0;V<m.length-1;V++){var me=m[V];if(!(me in R))break e;R=R[me]}m=m[m.length-1],V=R[m],k=k(V),k!=V&&k!=null&&e(R,m,{configurable:!0,writable:!0,value:k})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(k){var R=[],V;for(V in k)Object.prototype.hasOwnProperty.call(k,V)&&R.push([V,k[V]]);return R}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(m){var k=typeof m;return k=="object"&&m!=null||k=="function"}function c(m,k,R){return m.call.apply(m.bind,arguments)}function d(m,k,R){return d=c,d.apply(null,arguments)}function u(m,k){var R=Array.prototype.slice.call(arguments,1);return function(){var V=R.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function f(m,k){function R(){}R.prototype=k.prototype,m.Z=k.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function(V,me,ve){for(var Be=Array(arguments.length-2),At=2;At<arguments.length;At++)Be[At-2]=arguments[At];return k.prototype[me].apply(V,Be)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function x(m){const k=m.length;if(k>0){const R=Array(k);for(let V=0;V<k;V++)R[V]=m[V];return R}return[]}function g(m,k){for(let V=1;V<arguments.length;V++){const me=arguments[V];var R=typeof me;if(R=R!="object"?R:me?Array.isArray(me)?"array":R:"null",R=="array"||R=="object"&&typeof me.length=="number"){R=m.length||0;const ve=me.length||0;m.length=R+ve;for(let Be=0;Be<ve;Be++)m[R+Be]=me[Be]}else m.push(me)}}class y{constructor(k,R){this.i=k,this.j=R,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function w(m){o.setTimeout(()=>{throw m},0)}function b(){var m=j;let k=null;return m.g&&(k=m.g,m.g=m.g.next,m.g||(m.h=null),k.next=null),k}class v{constructor(){this.h=this.g=null}add(k,R){const V=N.get();V.set(k,R),this.h?this.h.next=V:this.g=V,this.h=V}}var N=new y(()=>new C,m=>m.reset());class C{constructor(){this.next=this.g=this.h=null}set(k,R){this.h=k,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let _,T=!1,j=new v,S=()=>{const m=Promise.resolve(void 0);_=()=>{m.then(A)}};function A(){for(var m;m=b();){try{m.h.call(m.g)}catch(R){w(R)}var k=N;k.j(m),k.h<100&&(k.h++,m.next=k.g,k.g=m)}T=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,k){this.type=m,this.g=this.target=k,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,k=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};o.addEventListener("test",R,k),o.removeEventListener("test",R,k)}catch{}return m}();function D(m){return/^[\s\xa0]*$/.test(m)}function M(m,k){P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,k)}f(M,P),M.prototype.init=function(m,k){const R=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=k,k=m.relatedTarget,k||(R=="mouseover"?k=m.fromElement:R=="mouseout"&&(k=m.toElement)),this.relatedTarget=k,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&M.Z.h.call(this)},M.prototype.h=function(){M.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),X=0;function U(m,k,R,V,me){this.listener=m,this.proxy=null,this.src=k,this.type=R,this.capture=!!V,this.ha=me,this.key=++X,this.da=this.fa=!1}function $(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function L(m,k,R){for(const V in m)k.call(R,m[V],V,m)}function te(m,k){for(const R in m)k.call(void 0,m[R],R,m)}function F(m){const k={};for(const R in m)k[R]=m[R];return k}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(m,k){let R,V;for(let me=1;me<arguments.length;me++){V=arguments[me];for(R in V)m[R]=V[R];for(let ve=0;ve<z.length;ve++)R=z[ve],Object.prototype.hasOwnProperty.call(V,R)&&(m[R]=V[R])}}function xe(m){this.src=m,this.g={},this.h=0}xe.prototype.add=function(m,k,R,V,me){const ve=m.toString();m=this.g[ve],m||(m=this.g[ve]=[],this.h++);const Be=Me(m,k,V,me);return Be>-1?(k=m[Be],R||(k.fa=!1)):(k=new U(k,this.src,ve,!!V,me),k.fa=R,m.push(k)),k};function _e(m,k){const R=k.type;if(R in m.g){var V=m.g[R],me=Array.prototype.indexOf.call(V,k,void 0),ve;(ve=me>=0)&&Array.prototype.splice.call(V,me,1),ve&&($(k),m.g[R].length==0&&(delete m.g[R],m.h--))}}function Me(m,k,R,V){for(let me=0;me<m.length;++me){const ve=m[me];if(!ve.da&&ve.listener==k&&ve.capture==!!R&&ve.ha==V)return me}return-1}var K="closure_lm_"+(Math.random()*1e6|0),Q={};function se(m,k,R,V,me){if(Array.isArray(k)){for(let ve=0;ve<k.length;ve++)se(m,k[ve],R,V,me);return null}return R=Ke(R),m&&m[J]?m.J(k,R,l(V)?!!V.capture:!1,me):ye(m,k,R,!1,V,me)}function ye(m,k,R,V,me,ve){if(!k)throw Error("Invalid event type");const Be=l(me)?!!me.capture:!!me;let At=he(m);if(At||(m[K]=At=new xe(m)),R=At.add(k,R,V,Be,ve),R.proxy)return R;if(V=B(),R.proxy=V,V.src=m,V.listener=R,m.addEventListener)O||(me=Be),me===void 0&&(me=!1),m.addEventListener(k.toString(),V,me);else if(m.attachEvent)m.attachEvent(oe(k.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return R}function B(){function m(R){return k.call(m.src,m.listener,R)}const k=Z;return m}function ie(m,k,R,V,me){if(Array.isArray(k))for(var ve=0;ve<k.length;ve++)ie(m,k[ve],R,V,me);else V=l(V)?!!V.capture:!!V,R=Ke(R),m&&m[J]?(m=m.i,ve=String(k).toString(),ve in m.g&&(k=m.g[ve],R=Me(k,R,V,me),R>-1&&($(k[R]),Array.prototype.splice.call(k,R,1),k.length==0&&(delete m.g[ve],m.h--)))):m&&(m=he(m))&&(k=m.g[k.toString()],m=-1,k&&(m=Me(k,R,V,me)),(R=m>-1?k[m]:null)&&ce(R))}function ce(m){if(typeof m!="number"&&m&&!m.da){var k=m.src;if(k&&k[J])_e(k.i,m);else{var R=m.type,V=m.proxy;k.removeEventListener?k.removeEventListener(R,V,m.capture):k.detachEvent?k.detachEvent(oe(R),V):k.addListener&&k.removeListener&&k.removeListener(V),(R=he(k))?(_e(R,m),R.h==0&&(R.src=null,k[K]=null)):$(m)}}}function oe(m){return m in Q?Q[m]:Q[m]="on"+m}function Z(m,k){if(m.da)m=!0;else{k=new M(k,this);const R=m.listener,V=m.ha||m.src;m.fa&&ce(m),m=R.call(V,k)}return m}function he(m){return m=m[K],m instanceof xe?m:null}var Ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ke(m){return typeof m=="function"?m:(m[Ne]||(m[Ne]=function(k){return m.handleEvent(k)}),m[Ne])}function $e(){I.call(this),this.i=new xe(this),this.M=this,this.G=null}f($e,I),$e.prototype[J]=!0,$e.prototype.removeEventListener=function(m,k,R,V){ie(this,m,k,R,V)};function W(m,k){var R,V=m.G;if(V)for(R=[];V;V=V.G)R.push(V);if(m=m.M,V=k.type||k,typeof k=="string")k=new P(k,m);else if(k instanceof P)k.target=k.target||m;else{var me=k;k=new P(V,m),pe(k,me)}me=!0;let ve,Be;if(R)for(Be=R.length-1;Be>=0;Be--)ve=k.g=R[Be],me=ae(ve,V,!0,k)&&me;if(ve=k.g=m,me=ae(ve,V,!0,k)&&me,me=ae(ve,V,!1,k)&&me,R)for(Be=0;Be<R.length;Be++)ve=k.g=R[Be],me=ae(ve,V,!1,k)&&me}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var m=this.i;for(const k in m.g){const R=m.g[k];for(let V=0;V<R.length;V++)$(R[V]);delete m.g[k],m.h--}}this.G=null},$e.prototype.J=function(m,k,R,V){return this.i.add(String(m),k,!1,R,V)},$e.prototype.K=function(m,k,R,V){return this.i.add(String(m),k,!0,R,V)};function ae(m,k,R,V){if(k=m.i.g[String(k)],!k)return!0;k=k.concat();let me=!0;for(let ve=0;ve<k.length;++ve){const Be=k[ve];if(Be&&!Be.da&&Be.capture==R){const At=Be.listener,wn=Be.ha||Be.src;Be.fa&&_e(m.i,Be),me=At.call(wn,V)!==!1&&me}}return me&&!V.defaultPrevented}function ge(m,k){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:o.setTimeout(m,k||0)}function Ae(m){m.g=ge(()=>{m.g=null,m.i&&(m.i=!1,Ae(m))},m.l);const k=m.h;m.h=null,m.m.apply(null,k)}class Y extends I{constructor(k,R){super(),this.m=k,this.l=R,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Ae(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(m){I.call(this),this.h=m,this.g={}}f(je,I);var ze=[];function pt(m){L(m.g,function(k,R){this.g.hasOwnProperty(R)&&ce(k)},m),m.g={}}je.prototype.N=function(){je.Z.N.call(this),pt(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=o.JSON.stringify,os=o.JSON.parse,rs=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function bs(){}function kn(){}var Xe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rt(){P.call(this,"d")}f(Rt,P);function Ot(){P.call(this,"c")}f(Ot,P);var Tt={},St=null;function ts(){return St=St||new $e}Tt.Ia="serverreachability";function Es(m){P.call(this,Tt.Ia,m)}f(Es,P);function Ee(m){const k=ts();W(k,new Es(k))}Tt.STAT_EVENT="statevent";function Ct(m,k){P.call(this,Tt.STAT_EVENT,m),this.stat=k}f(Ct,P);function is(m){const k=ts();W(k,new Ct(k,m))}Tt.Ja="timingevent";function On(m,k){P.call(this,Tt.Ja,m),this.size=k}f(On,P);function nn(m,k){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},k)}function ws(){this.g=!0}ws.prototype.ua=function(){this.g=!1};function er(m,k,R,V,me,ve){m.info(function(){if(m.g)if(ve){var Be="",At=ve.split("&");for(let vs=0;vs<At.length;vs++){var wn=At[vs].split("=");if(wn.length>1){const Tn=wn[0];wn=wn[1];const Ua=Tn.split("_");Be=Ua.length>=2&&Ua[1]=="type"?Be+(Tn+"="+wn+"&"):Be+(Tn+"=redacted&")}}}else Be=null;else Be=ve;return"XMLHTTP REQ ("+V+") [attempt "+me+"]: "+k+`
`+R+`
`+Be})}function Dn(m,k,R,V,me,ve,Be){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+me+"]: "+k+`
`+R+`
`+ve+" "+Be})}function Bs(m,k,R,V){m.info(function(){return"XMLHTTP TEXT ("+k+"): "+js(m,R)+(V?" "+V:"")})}function fn(m,k){m.info(function(){return"TIMEOUT: "+k})}ws.prototype.info=function(){};function js(m,k){if(!m.g)return k;if(!k)return null;try{const ve=JSON.parse(k);if(ve){for(m=0;m<ve.length;m++)if(Array.isArray(ve[m])){var R=ve[m];if(!(R.length<2)){var V=R[1];if(Array.isArray(V)&&!(V.length<1)){var me=V[0];if(me!="noop"&&me!="stop"&&me!="close")for(let Be=1;Be<V.length;Be++)V[Be]=""}}}}return mt(ve)}catch{return k}}var tr={NO_ERROR:0,TIMEOUT:8},Ra={},Eo;function Pe(){}f(Pe,bs),Pe.prototype.g=function(){return new XMLHttpRequest},Eo=new Pe;function rt(m){return encodeURIComponent(String(m))}function lt(m){var k=1;m=m.split(":");const R=[];for(;k>0&&m.length;)R.push(m.shift()),k--;return m.length&&R.push(m.join(":")),R}function Vt(m,k,R,V){this.j=m,this.i=k,this.l=R,this.S=V||1,this.V=new je(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $t}function $t(){this.i=null,this.g="",this.h=!1}var qs={},pn={};function yr(m,k,R){m.M=1,m.A=Po(br(k)),m.u=R,m.R=!0,Ns(m,null)}function Ns(m,k){m.F=Date.now(),Sl(m),m.B=br(m.A);var R=m.B,V=m.S;Array.isArray(V)||(V=[String(V)]),Au(R.i,"t",V),m.C=0,R=m.j.L,m.h=new $t,m.g=HS(m.j,R?k:null,!m.u),m.P>0&&(m.O=new Y(d(m.Y,m,m.g),m.P)),k=m.V,R=m.g,V=m.ba;var me="readystatechange";Array.isArray(me)||(me&&(ze[0]=me.toString()),me=ze);for(let ve=0;ve<me.length;ve++){const Be=se(R,me[ve],V||k.handleEvent,!1,k.h||k);if(!Be)break;k.g[Be.key]=Be}k=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,k)):(m.v="GET",m.g.ea(m.B,m.v,null,k)),Ee(),er(m.i,m.v,m.B,m.l,m.S,m.u)}Vt.prototype.ba=function(m){m=m.target;const k=this.O;k&&ee(m)==3?k.j():this.Y(m)},Vt.prototype.Y=function(m){try{if(m==this.g)e:{const At=ee(this.g),wn=this.g.ya(),vs=this.g.ca();if(!(At<3)&&(At!=3||this.g&&(this.h.h||this.g.la()||Se(this.g)))){this.K||At!=4||wn==7||(wn==8||vs<=0?Ee(3):Ee(2)),En(this);var k=this.g.ca();this.X=k;var R=Oa(this);if(this.o=k==200,Dn(this.i,this.v,this.B,this.l,this.S,At,k),this.o){if(this.U&&!this.L){t:{if(this.g){var V,me=this.g;if((V=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(V)){var ve=V;break t}}ve=null}if(m=ve)Bs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yc(this,m);else{this.o=!1,this.m=3,is(12),Wi(this),To(this);break e}}if(this.R){m=!0;let Tn;for(;!this.K&&this.C<R.length;)if(Tn=Uf(this,R),Tn==pn){At==4&&(this.m=4,is(14),m=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==qs){this.m=4,is(15),Bs(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else Bs(this.i,this.l,Tn,null),Yc(this,Tn);if(Nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||R.length!=0||this.h.h||(this.m=1,is(16),m=!1),this.o=this.o&&m,!m)Bs(this.i,this.l,R,"[Invalid Chunked Response]"),Wi(this),To(this);else if(R.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Qi(Be),Be.P=!0,is(11))}}else Bs(this.i,this.l,R,null),Yc(this,R);At==4&&Wi(this),this.o&&!this.K&&(At==4?Jc(this.j,this):(this.o=!1,Sl(this)))}else vt(this.g),k==400&&R.indexOf("Unknown SID")>0?(this.m=3,is(12)):(this.m=0,is(13)),Wi(this),To(this)}}}catch{}finally{}};function Oa(m){if(!Nu(m))return m.g.la();const k=Se(m.g);if(k==="")return"";let R="";const V=k.length,me=ee(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Wi(m),To(m),"";m.h.i=new o.TextDecoder}for(let ve=0;ve<V;ve++)m.h.h=!0,R+=m.h.i.decode(k[ve],{stream:!(me&&ve==V-1)});return k.length=0,m.h.g+=R,m.C=0,m.h.g}function Nu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Uf(m,k){var R=m.C,V=k.indexOf(`
`,R);return V==-1?pn:(R=Number(k.substring(R,V)),isNaN(R)?qs:(V+=1,V+R>k.length?pn:(k=k.slice(V,V+R),m.C=V+R,k)))}Vt.prototype.cancel=function(){this.K=!0,Wi(this)};function Sl(m){m.T=Date.now()+m.H,_u(m,m.H)}function _u(m,k){if(m.D!=null)throw Error("WatchDog timer not null");m.D=nn(d(m.aa,m),k)}function En(m){m.D&&(o.clearTimeout(m.D),m.D=null)}Vt.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(fn(this.i,this.B),this.M!=2&&(Ee(),is(17)),Wi(this),this.m=2,To(this)):_u(this,this.T-m)};function To(m){m.j.I==0||m.K||Jc(m.j,m)}function Wi(m){En(m);var k=m.O;k&&typeof k.dispose=="function"&&k.dispose(),m.O=null,pt(m.V),m.g&&(k=m.g,m.g=null,k.abort(),k.dispose())}function Yc(m,k){try{var R=m.j;if(R.I!=0&&(R.g==m||Da(R.h,m))){if(!m.L&&Da(R.h,m)&&R.I==3){try{var V=R.Ba.g.parse(k)}catch{V=null}if(Array.isArray(V)&&V.length==3){var me=V;if(me[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)Lo(R),Ts(R);else break e;$r(R),is(18)}}else R.xa=me[1],0<R.xa-R.K&&me[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=nn(d(R.Va,R),6e3));Qc(R.h)<=1&&R.ta&&(R.ta=void 0)}else ed(R,11)}else if((m.L||R.g==m)&&Lo(R),!D(k))for(me=R.Ba.g.parse(k),k=0;k<me.length;k++){let vs=me[k];const Tn=vs[0];if(!(Tn<=R.K))if(R.K=Tn,vs=vs[1],R.I==2)if(vs[0]=="c"){R.M=vs[1],R.ba=vs[2];const Ua=vs[3];Ua!=null&&(R.ka=Ua,R.j.info("VER="+R.ka));const td=vs[4];td!=null&&(R.za=td,R.j.info("SVER="+R.za));const Tl=vs[5];Tl!=null&&typeof Tl=="number"&&Tl>0&&(V=1.5*Tl,R.O=V,R.j.info("backChannelRequestTimeoutMs_="+V)),V=R;const Al=m.g;if(Al){const bg=Al.g?Al.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bg){var ve=V.h;ve.g||bg.indexOf("spdy")==-1&&bg.indexOf("quic")==-1&&bg.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(vr(ve,ve.h),ve.h=null))}if(V.G){const b0=Al.g?Al.g.getResponseHeader("X-HTTP-Session-Id"):null;b0&&(V.wa=b0,ls(V.J,V.G,b0))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),V=R;var Be=m;if(V.na=VS(V,V.L?V.ba:null,V.W),Be.L){Cl(V.h,Be);var At=Be,wn=V.O;wn&&(At.H=wn),At.D&&(En(At),Sl(At)),V.g=Be}else Yi(V);R.i.length>0&&rn(R)}else vs[0]!="stop"&&vs[0]!="close"||ed(R,7);else R.I==3&&(vs[0]=="stop"||vs[0]=="close"?vs[0]=="stop"?ed(R,7):Mt(R):vs[0]!="noop"&&R.l&&R.l.qa(vs),R.A=0)}}Ee(4)}catch{}}var zf=class{constructor(m,k){this.g=m,this.map=k}};function Su(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ao(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Qc(m){return m.h?1:m.g?m.g.size:0}function Da(m,k){return m.h?m.h==k:m.g?m.g.has(k):!1}function vr(m,k){m.g?m.g.add(k):m.h=k}function Cl(m,k){m.h&&m.h==k?m.h=null:m.g&&m.g.has(k)&&m.g.delete(k)}Su.prototype.cancel=function(){if(this.i=Cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Cu(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let k=m.i;for(const R of m.g.values())k=k.concat(R.G);return k}return x(m.i)}var ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bf(m,k){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const V=m[R].indexOf("=");let me,ve=null;V>=0?(me=m[R].substring(0,V),ve=m[R].substring(V+1)):me=m[R],k(me,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function di(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;m instanceof di?(this.l=m.l,ui(this,m.j),this.o=m.o,this.g=m.g,Ki(this,m.u),this.h=m.h,Gi(this,Pu(m.i)),this.m=m.m):m&&(k=String(m).match(ku))?(this.l=!1,ui(this,k[1]||"",!0),this.o=Io(k[2]||""),this.g=Io(k[3]||"",!0),Ki(this,k[4]),this.h=Io(k[5]||"",!0),Gi(this,k[6]||"",!0),this.m=Io(k[7]||"")):(this.l=!1,this.i=new Mn(null,this.l))}di.prototype.toString=function(){const m=[];var k=this.j;k&&m.push(Ro(k,Eu,!0),":");var R=this.g;return(R||k=="file")&&(m.push("//"),(k=this.o)&&m.push(Ro(k,Eu,!0),"@"),m.push(rt(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(Ro(R,R.charAt(0)=="/"?Vf:Zc,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",Ro(R,Oo)),m.join("")},di.prototype.resolve=function(m){const k=br(this);let R=!!m.j;R?ui(k,m.j):R=!!m.o,R?k.o=m.o:R=!!m.g,R?k.g=m.g:R=m.u!=null;var V=m.h;if(R)Ki(k,m.u);else if(R=!!m.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var me=k.h.lastIndexOf("/");me!=-1&&(V=k.h.slice(0,me+1)+V)}if(me=V,me==".."||me==".")V="";else if(me.indexOf("./")!=-1||me.indexOf("/.")!=-1){V=me.lastIndexOf("/",0)==0,me=me.split("/");const ve=[];for(let Be=0;Be<me.length;){const At=me[Be++];At=="."?V&&Be==me.length&&ve.push(""):At==".."?((ve.length>1||ve.length==1&&ve[0]!="")&&ve.pop(),V&&Be==me.length&&ve.push("")):(ve.push(At),V=!0)}V=ve.join("/")}else V=me}return R?k.h=V:R=m.i.toString()!=="",R?Gi(k,Pu(m.i)):R=!!m.m,R&&(k.m=m.m),k};function br(m){return new di(m)}function ui(m,k,R){m.j=R?Io(k,!0):k,m.j&&(m.j=m.j.replace(/:$/,""))}function Ki(m,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);m.u=k}else m.u=null}function Gi(m,k,R){k instanceof Mn?(m.i=k,Wf(m.i,m.l)):(R||(k=Ro(k,Hf)),m.i=new Mn(k,m.l))}function ls(m,k,R){m.i.set(k,R)}function Po(m){return ls(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Io(m,k){return m?k?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ro(m,k,R){return typeof m=="string"?(m=encodeURI(m).replace(k,qf),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function qf(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Eu=/[#\/\?@]/g,Zc=/[#\?:]/g,Vf=/[#\?]/g,Hf=/[#\?@]/g,Oo=/#/g;function Mn(m,k){this.h=this.g=null,this.i=m||null,this.j=!!k}function Ln(m){m.g||(m.g=new Map,m.h=0,m.i&&Bf(m.i,function(k,R){m.add(decodeURIComponent(k.replace(/\+/g," ")),R)}))}t=Mn.prototype,t.add=function(m,k){Ln(this),this.i=null,m=Ma(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(k),this.h+=1,this};function hi(m,k){Ln(m),k=Ma(m,k),m.g.has(k)&&(m.i=null,m.h-=m.g.get(k).length,m.g.delete(k))}function Tu(m,k){return Ln(m),k=Ma(m,k),m.g.has(k)}t.forEach=function(m,k){Ln(this),this.g.forEach(function(R,V){R.forEach(function(me){m.call(k,me,V,this)},this)},this)};function Lr(m,k){Ln(m);let R=[];if(typeof k=="string")Tu(m,k)&&(R=R.concat(m.g.get(Ma(m,k))));else for(m=Array.from(m.g.values()),k=0;k<m.length;k++)R=R.concat(m[k]);return R}t.set=function(m,k){return Ln(this),this.i=null,m=Ma(this,m),Tu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[k]),this.h+=1,this},t.get=function(m,k){return m?(m=Lr(this,m),m.length>0?String(m[0]):k):k};function Au(m,k,R){hi(m,k),R.length>0&&(m.i=null,m.g.set(Ma(m,k),x(R)),m.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],k=Array.from(this.g.keys());for(let V=0;V<k.length;V++){var R=k[V];const me=rt(R);R=Lr(this,R);for(let ve=0;ve<R.length;ve++){let Be=me;R[ve]!==""&&(Be+="="+rt(R[ve])),m.push(Be)}}return this.i=m.join("&")};function Pu(m){const k=new Mn;return k.i=m.i,m.g&&(k.g=new Map(m.g),k.h=m.h),k}function Ma(m,k){return k=String(k),m.j&&(k=k.toLowerCase()),k}function Wf(m,k){k&&!m.j&&(Ln(m),m.i=null,m.g.forEach(function(R,V){const me=V.toLowerCase();V!=me&&(hi(this,V),Au(this,me,R))},m)),m.j=k}function Iu(m,k){const R=new ws;if(o.Image){const V=new Image;V.onload=u(Fr,R,"TestLoadImage: loaded",!0,k,V),V.onerror=u(Fr,R,"TestLoadImage: error",!1,k,V),V.onabort=u(Fr,R,"TestLoadImage: abort",!1,k,V),V.ontimeout=u(Fr,R,"TestLoadImage: timeout",!1,k,V),o.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else k(!1)}function Fn(m,k){const R=new ws,V=new AbortController,me=setTimeout(()=>{V.abort(),Fr(R,"TestPingServer: timeout",!1,k)},1e4);fetch(m,{signal:V.signal}).then(ve=>{clearTimeout(me),ve.ok?Fr(R,"TestPingServer: ok",!0,k):Fr(R,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(me),Fr(R,"TestPingServer: error",!1,k)})}function Fr(m,k,R,V,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),V(R)}catch{}}function Ru(){this.g=new rs}function La(m){this.i=m.Sb||null,this.h=m.ab||!1}f(La,bs),La.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(m,k){$e.call(this),this.H=m,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Fa,$e),t=Fa.prototype,t.open=function(m,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=k,this.readyState=1,$a(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(k.body=m),(this.H||o).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Do(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Do(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var k=m.value?m.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!m.done}))&&(this.response=this.responseText+=k)}m.done?Mo(this):$a(this),this.readyState==3&&Do(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Mo(this))},t.Na=function(m){this.g&&(this.response=m,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,$a(m)}t.setRequestHeader=function(m,k){this.A.append(m,k)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],k=this.h.entries();for(var R=k.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=k.next();return m.join(`\r
`)};function $a(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function kl(m){let k="";return L(m,function(R,V){k+=V,k+=":",k+=R,k+=`\r
`}),k}function El(m,k,R){e:{for(V in R){var V=!1;break e}V=!0}V||(R=kl(R),typeof m=="string"?R!=null&&rt(R):ls(m,k,R))}function ss(m){$e.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ss,$e);var Ou=/^https?$/i,Xc=["POST","PUT"];t=ss.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,k,R,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);k=k?k.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Eo.g(),this.g.onreadystatechange=h(d(this.Ca,this));try{this.B=!0,this.g.open(k,String(m),!0),this.B=!1}catch(ve){Du(this,ve);return}if(m=R||"",R=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var me in V)R.set(me,V[me]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ve of V.keys())R.set(ve,V.get(ve));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(R.keys()).find(ve=>ve.toLowerCase()=="content-type"),me=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(Xc,k,void 0)>=0)||V||me||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,Be]of R)this.g.setRequestHeader(ve,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ve){Du(this,ve)}};function Du(m,k){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=k,m.o=5,Mu(m),q(m)}function Mu(m){m.A||(m.A=!0,W(m,"complete"),W(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,W(this,"complete"),W(this,"abort"),q(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),q(this,!0)),ss.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?E(this):this.Xa())},t.Xa=function(){E(this)};function E(m){if(m.h&&typeof a<"u"){if(m.v&&ee(m)==4)setTimeout(m.Ca.bind(m),0);else if(W(m,"readystatechange"),ee(m)==4){m.h=!1;try{const ve=m.ca();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var R;if(!(R=k)){var V;if(V=ve===0){let Be=String(m.D).match(ku)[1]||null;!Be&&o.self&&o.self.location&&(Be=o.self.location.protocol.slice(0,-1)),V=!Ou.test(Be?Be.toLowerCase():"")}R=V}if(R)W(m,"complete"),W(m,"success");else{m.o=6;try{var me=ee(m)>2?m.g.statusText:""}catch{me=""}m.l=me+" ["+m.ca()+"]",Mu(m)}}finally{q(m)}}}}function q(m,k){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,k||W(m,"ready");try{R.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ee(m){return m.g?m.g.readyState:0}t.ca=function(){try{return ee(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var k=this.g.responseText;return m&&k.indexOf(m)==0&&(k=k.substring(m.length)),os(k)}};function Se(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function vt(m){const k={};m=(m.g&&ee(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(D(m[V]))continue;var R=lt(m[V]);const me=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ve=k[me]||[];k[me]=ve,ve.push(R)}te(k,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function it(m,k,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||k}function Ut(m){this.za=0,this.i=[],this.j=new ws,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=it("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=it("baseRetryDelayMs",5e3,m),this.Za=it("retryDelaySeedMs",1e4,m),this.Ta=it("forwardChannelMaxRetries",2,m),this.va=it("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Su(m&&m.concurrentRequestLimit),this.Ba=new Ru,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ut.prototype,t.ka=8,t.I=1,t.connect=function(m,k,R,V){is(0),this.W=m,this.H=k||{},R&&V!==void 0&&(this.H.OSID=R,this.H.OAID=V),this.F=this.X,this.J=VS(this,null,this.W),rn(this)};function Mt(m){if(Qt(m),m.I==3){var k=m.V++,R=br(m.J);if(ls(R,"SID",m.M),ls(R,"RID",k),ls(R,"TYPE","terminate"),Gs(m,R),k=new Vt(m,m.j,k),k.M=2,k.A=Po(br(R)),R=!1,o.navigator&&o.navigator.sendBeacon)try{R=o.navigator.sendBeacon(k.A.toString(),"")}catch{}!R&&o.Image&&(new Image().src=k.A,R=!0),R||(k.g=HS(k.j,null),k.g.ea(k.A)),k.F=Date.now(),Sl(k)}qS(m)}function Ts(m){m.g&&(Qi(m),m.g.cancel(),m.g=null)}function Qt(m){Ts(m),m.v&&(o.clearTimeout(m.v),m.v=null),Lo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function rn(m){if(!Ao(m.h)&&!m.m){m.m=!0;var k=m.Ea;_||S(),T||(_(),T=!0),j.add(k,m),m.D=0}}function Hn(m,k){return Qc(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=k.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=nn(d(m.Ea,m,k),BS(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const me=new Vt(this,this.j,m);let ve=this.o;if(this.U&&(ve?(ve=F(ve),pe(ve,this.U)):ve=this.U),this.u!==null||this.R||(me.J=ve,ve=null),this.S)e:{for(var k=0,R=0;R<this.i.length;R++){t:{var V=this.i[R];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(k+=V,k>4096){k=R;break e}if(k===4096||R===this.i.length-1){k=R+1;break e}}k=1e3}else k=1e3;k=mn(this,me,k),R=br(this.J),ls(R,"RID",m),ls(R,"CVER",22),this.G&&ls(R,"X-HTTP-Session-Id",this.G),Gs(this,R),ve&&(this.R?k="headers="+rt(kl(ve))+"&"+k:this.u&&El(R,this.u,ve)),vr(this.h,me),this.Ra&&ls(R,"TYPE","init"),this.S?(ls(R,"$req",k),ls(R,"SID","null"),me.U=!0,yr(me,R,null)):yr(me,R,k),this.I=2}}else this.I==3&&(m?Ks(this,m):this.i.length==0||Ao(this.h)||Ks(this))};function Ks(m,k){var R;k?R=k.l:R=m.V++;const V=br(m.J);ls(V,"SID",m.M),ls(V,"RID",R),ls(V,"AID",m.K),Gs(m,V),m.u&&m.o&&El(V,m.u,m.o),R=new Vt(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),k&&(m.i=k.G.concat(m.i)),k=mn(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),vr(m.h,R),yr(R,V,k)}function Gs(m,k){m.H&&L(m.H,function(R,V){ls(k,V,R)}),m.l&&L({},function(R,V){ls(k,V,R)})}function mn(m,k,R){R=Math.min(m.i.length,R);const V=m.l?d(m.l.Ka,m.l,m):null;e:{var me=m.i;let At=-1;for(;;){const wn=["count="+R];At==-1?R>0?(At=me[0].g,wn.push("ofs="+At)):At=0:wn.push("ofs="+At);let vs=!0;for(let Tn=0;Tn<R;Tn++){var ve=me[Tn].g;const Ua=me[Tn].map;if(ve-=At,ve<0)At=Math.max(0,me[Tn].g-100),vs=!1;else try{ve="req"+ve+"_"||"";try{var Be=Ua instanceof Map?Ua:Object.entries(Ua);for(const[td,Tl]of Be){let Al=Tl;l(Tl)&&(Al=mt(Tl)),wn.push(ve+td+"="+encodeURIComponent(Al))}}catch(td){throw wn.push(ve+"type="+encodeURIComponent("_badmap")),td}}catch{V&&V(Ua)}}if(vs){Be=wn.join("&");break e}}Be=void 0}return m=m.i.splice(0,R),k.G=m,Be}function Yi(m){if(!m.g&&!m.v){m.Y=1;var k=m.Da;_||S(),T||(_(),T=!0),j.add(k,m),m.A=0}}function $r(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=nn(d(m.Da,m),BS(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Kf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=nn(d(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,is(10),Ts(this),Kf(this))};function Qi(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function Kf(m){m.g=new Vt(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var k=br(m.na);ls(k,"RID","rpc"),ls(k,"SID",m.M),ls(k,"AID",m.K),ls(k,"CI",m.F?"0":"1"),!m.F&&m.ia&&ls(k,"TO",m.ia),ls(k,"TYPE","xmlhttp"),Gs(m,k),m.u&&m.o&&El(k,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=Po(br(k)),R.u=null,R.R=!0,Ns(R,m)}t.Va=function(){this.C!=null&&(this.C=null,Ts(this),$r(this),is(19))};function Lo(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function Jc(m,k){var R=null;if(m.g==k){Lo(m),Qi(m),m.g=null;var V=2}else if(Da(m.h,k))R=k.G,Cl(m.h,k),V=1;else return;if(m.I!=0){if(k.o)if(V==1){R=k.u?k.u.length:0,k=Date.now()-k.F;var me=m.D;V=ts(),W(V,new On(V,R)),rn(m)}else Yi(m);else if(me=k.m,me==3||me==0&&k.X>0||!(V==1&&Hn(m,k)||V==2&&$r(m)))switch(R&&R.length>0&&(k=m.h,k.i=k.i.concat(R)),me){case 1:ed(m,5);break;case 4:ed(m,10);break;case 3:ed(m,6);break;default:ed(m,2)}}}function BS(m,k){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*k}function ed(m,k){if(m.j.info("Error code "+k),k==2){var R=d(m.bb,m),V=m.Ua;const me=!V;V=new di(V||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ui(V,"https"),Po(V),me?Iu(V.toString(),R):Fn(V.toString(),R)}else is(2);m.I=0,m.l&&m.l.pa(k),qS(m),Qt(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),is(2)):(this.j.info("Failed to ping google.com"),is(1))};function qS(m){if(m.I=0,m.ja=[],m.l){const k=Cu(m.h);(k.length!=0||m.i.length!=0)&&(g(m.ja,k),g(m.ja,m.i),m.h.i.length=0,x(m.i),m.i.length=0),m.l.oa()}}function VS(m,k,R){var V=R instanceof di?br(R):new di(R);if(V.g!="")k&&(V.g=k+"."+V.g),Ki(V,V.u);else{var me=o.location;V=me.protocol,k=k?k+"."+me.hostname:me.hostname,me=+me.port;const ve=new di(null);V&&ui(ve,V),k&&(ve.g=k),me&&Ki(ve,me),R&&(ve.h=R),V=ve}return R=m.G,k=m.wa,R&&k&&ls(V,R,k),ls(V,"VER",m.ka),Gs(m,V),V}function HS(m,k,R){if(k&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=m.Aa&&!m.ma?new ss(new La({ab:R})):new ss(m.ma),k.Fa(m.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function WS(){}t=WS.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function fi(m,k){$e.call(this),this.g=new Ut(k),this.l=m,this.h=k&&k.messageUrlParams||null,m=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(m?m["X-WebChannel-Content-Type"]=k.messageContentType:m={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(m?m["X-WebChannel-Client-Profile"]=k.sa:m={"X-WebChannel-Client-Profile":k.sa}),this.g.U=m,(m=k&&k.Qb)&&!D(m)&&(this.g.u=m),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!D(k)&&(this.g.G=k,m=this.h,m!==null&&k in m&&(m=this.h,k in m&&delete m[k])),this.j=new Lu(this)}f(fi,$e),fi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fi.prototype.close=function(){Mt(this.g)},fi.prototype.o=function(m){var k=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=mt(m),m=R);k.i.push(new zf(k.Ya++,m)),k.I==3&&rn(k)},fi.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,fi.Z.N.call(this)};function KS(m){Rt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var k=m.__sm__;if(k){e:{for(const R in k){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,k=k!==null&&m in k?k[m]:void 0),this.data=k}else this.data=m}f(KS,Rt);function GS(){Ot.call(this),this.status=1}f(GS,Ot);function Lu(m){this.g=m}f(Lu,WS),Lu.prototype.ra=function(){W(this.g,"a")},Lu.prototype.qa=function(m){W(this.g,new KS(m))},Lu.prototype.pa=function(m){W(this.g,new GS)},Lu.prototype.oa=function(){W(this.g,"b")},fi.prototype.send=fi.prototype.o,fi.prototype.open=fi.prototype.m,fi.prototype.close=fi.prototype.close,tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,Ra.COMPLETE="complete",kn.EventType=Xe,Xe.OPEN="a",Xe.CLOSE="b",Xe.ERROR="c",Xe.MESSAGE="d",$e.prototype.listen=$e.prototype.J,ss.prototype.listenOnce=ss.prototype.K,ss.prototype.getLastError=ss.prototype.Ha,ss.prototype.getLastErrorCode=ss.prototype.ya,ss.prototype.getStatus=ss.prototype.ca,ss.prototype.getResponseJson=ss.prototype.La,ss.prototype.getResponseText=ss.prototype.la,ss.prototype.send=ss.prototype.ea,ss.prototype.setWithCredentials=ss.prototype.Fa}).apply(typeof Wg<"u"?Wg:typeof self<"u"?self:typeof window<"u"?window:{});const kk="@firebase/firestore",Ek="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}or.UNAUTHENTICATED=new or(null),or.GOOGLE_CREDENTIALS=new or("google-credentials-uid"),or.FIRST_PARTY=new or("first-party-uid"),or.MOCK_USER=new or("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new GN("@firebase/firestore");function ha(t,...e){if(sf.logLevel<=cs.DEBUG){const s=e.map(f_);sf.debug(`Firestore (${Ym}): ${t}`,...s)}}function _O(t,...e){if(sf.logLevel<=cs.ERROR){const s=e.map(f_);sf.error(`Firestore (${Ym}): ${t}`,...s)}}function ZK(t,...e){if(sf.logLevel<=cs.WARN){const s=e.map(f_);sf.warn(`Firestore (${Ym}): ${t}`,...s)}}function f_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,SO(t,r,s)}function SO(t,e,s){let r=`FIRESTORE (${Ym}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw _O(r),new Error(r)}function Lp(t,e,s,r){let i="Unexpected state";typeof s=="string"?i=s:r=s,t||SO(e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Kt extends jo{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(or.UNAUTHENTICATED))}shutdown(){}}class JK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class eG{constructor(e){this.t=e,this.currentUser=or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){Lp(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,s(c)):Promise.resolve();let a=new Fp;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Fp,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{ha("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ha("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fp)}},0),o()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(r=>this.i!==e?(ha("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lp(typeof r.accessToken=="string",31837,{l:r}),new CO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lp(e===null||typeof e=="string",2055,{h:e}),new or(e)}}class tG{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sG{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new tG(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable(()=>s(or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nG{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){Lp(this.o===void 0,3512);const r=a=>{a.error!=null&&ha("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,ha("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ha("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ha("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Tk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(Lp(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Tk(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=rG(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<s&&(r+=e.charAt(i[a]%62))}return r}}function Rc(t,e){return t<e?-1:t>e?1:0}function aG(t,e){const s=Math.min(t.length,e.length);for(let r=0;r<s;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return ub(i)===ub(a)?Rc(i,a):ub(i)?1:-1}return Rc(t.length,e.length)}const oG=55296,lG=57343;function ub(t){const e=t.charCodeAt(0);return e>=oG&&e<=lG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="__name__";class Va{constructor(e,s,r){s===void 0?s=0:s>e.length&&mm(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&mm(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Va.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Va?e.forEach(r=>{s.push(r)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const a=Va.compareSegments(e.get(i),s.get(i));if(a!==0)return a}return Rc(e.length,s.length)}static compareSegments(e,s){const r=Va.isNumericId(e),i=Va.isNumericId(s);return r&&!i?-1:!r&&i?1:r&&i?Va.extractNumericId(e).compare(Va.extractNumericId(s)):aG(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return h_.fromString(e.substring(4,e.length-2))}}class aa extends Va{construct(e,s,r){return new aa(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Kt(Wt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter(i=>i.length>0))}return new aa(s)}static emptyPath(){return new aa([])}}const cG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ud extends Va{construct(e,s,r){return new ud(e,s,r)}static isValidIdentifier(e){return cG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ud.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ak}static keyField(){return new ud([Ak])}static fromServerFormat(e){const s=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Kt(Wt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Kt(Wt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Kt(Wt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(a(),i++)}if(a(),o)throw new Kt(Wt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ud(s)}static emptyPath(){return new ud([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.path=e}static fromPath(e){return new yd(aa.fromString(e))}static fromName(e){return new yd(aa.fromString(e).popFirst(5))}static empty(){return new yd(aa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&aa.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return aa.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yd(new aa(e.slice()))}}function dG(t,e,s,r){if(e===!0&&r===!0)throw new Kt(Wt.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function uG(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function hG(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":mm(12329,{type:typeof t})}function fG(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Kt(Wt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=hG(t);throw new Kt(Wt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){const s={typeString:t};return e&&(s.value=e),s}function Qm(t,e){if(!uG(t))throw new Kt(Wt.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){s=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){s=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){s=`Expected '${r}' field to equal '${a.value}'`;break}}if(s)throw new Kt(Wt.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=-62135596800,Ik=1e6;class Ga{static now(){return Ga.fromMillis(Date.now())}static fromDate(e){return Ga.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*Ik);return new Ga(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Kt(Wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Kt(Wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Pk)throw new Kt(Wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kt(Wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ik}_compareTo(e){return this.seconds===e.seconds?Rc(this.nanoseconds,e.nanoseconds):Rc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ga._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qm(e,Ga._jsonSchema))return new Ga(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ga._jsonSchemaVersion="firestore/timestamp/1.0",Ga._jsonSchema={type:yn("string",Ga._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};function pG(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new mG("Invalid base64 string: "+a):a}}(e);return new Kd(s)}static fromUint8Array(e){const s=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Kd(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kd.EMPTY_BYTE_STRING=new Kd("");const Tj="(default)";class Sy{constructor(e,s){this.projectId=e,this.database=s||Tj}static empty(){return new Sy("","")}get isDefaultDatabase(){return this.database===Tj}isEqual(e){return e instanceof Sy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e,s=null,r=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xG(t){return new gG(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rk,Ht;(Ht=Rk||(Rk={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new h_([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG=1048576;function hb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e,s,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,s-r);i>0&&ha("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,s,r,i,a){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Fp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,a){const o=Date.now()+r,l=new p_(e,s,o,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Kt(Wt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Ok,Dk;(Dk=Ok||(Ok={})).Ma="default",Dk.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wG(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="firestore.googleapis.com",Lk=!0;class Fk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Kt(Wt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kO,this.ssl=Lk}else this.host=e.host,this.ssl=e.ssl??Lk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vG)throw new Kt(Wt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wG(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Kt(Wt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Kt(Wt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Kt(Wt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EO{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kt(Wt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Kt(Wt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XK;switch(r.type){case"firstParty":return new sG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Kt(Wt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const r=Mk.get(s);r&&(ha("ComponentProvider","Removing Datastore"),Mk.delete(s),r.terminate())}(this),Promise.resolve()}}function jG(t,e,s,r={}){var d;t=fG(t,EO);const i=uu(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${s}`;i&&(WN(`https://${l}`),KN("Firestore",!0)),a.host!==kO&&a.host!==l&&ZK("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:i,emulatorOptions:r};if(!Vd(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=or.MOCK_USER;else{u=bR(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Kt(Wt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new or(h)}t._authCredentials=new JK(new CO(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new m_(this.firestore,e,this._query)}}class Ja{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new g_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ja(this.firestore,e,this._key)}toJSON(){return{type:Ja._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(Qm(s,Ja._jsonSchema))return new Ja(e,r||null,new yd(aa.fromString(s.referencePath)))}}Ja._jsonSchemaVersion="firestore/documentReference/1.0",Ja._jsonSchema={type:yn("string",Ja._jsonSchemaVersion),referencePath:yn("string")};class g_ extends m_{constructor(e,s,r){super(e,s,xG(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ja(this.firestore,null,new yd(e))}withConverter(e){return new g_(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="AsyncQueue";class Uk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bG(this,"async_queue_retry"),this._c=()=>{const r=hb();r&&ha($k,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=hb();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=hb();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const s=new Fp;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pG(e))throw e;ha($k,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const s=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_O("INTERNAL UNHANDLED ERROR: ",zk(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const i=p_.createAndSchedule(this,e,s,r,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&mm(47125,{Pc:zk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((s,r)=>s.targetTimeMs-r.targetTimeMs);for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function zk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class NG extends EO{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new Uk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uk(e),this._firestoreClient=void 0,await e}}}function _G(t,e){const s=typeof t=="object"?t:QN(),r=typeof t=="string"?t:Tj,i=Av(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=xR("firestore");a&&jG(i,...a)}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xo(Kd.fromBase64String(e))}catch(s){throw new Kt(Wt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Xo(Kd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xo._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qm(e,Xo._jsonSchema))return Xo.fromBase64String(e.bytes)}}Xo._jsonSchemaVersion="firestore/bytes/1.0",Xo._jsonSchema={type:yn("string",Xo._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Kt(Wt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ud(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Kt(Wt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Kt(Wt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rc(this._lat,e._lat)||Rc(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rd._jsonSchemaVersion}}static fromJSON(e){if(Qm(e,Rd._jsonSchema))return new Rd(e.latitude,e.longitude)}}Rd._jsonSchemaVersion="firestore/geoPoint/1.0",Rd._jsonSchema={type:yn("string",Rd._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Od._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qm(e,Od._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(s=>typeof s=="number"))return new Od(e.vectorValues);throw new Kt(Wt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Od._jsonSchemaVersion="firestore/vectorValue/1.0",Od._jsonSchema={type:yn("string",Od._jsonSchemaVersion),vectorValues:yn("object")};const SG=new RegExp("[~\\*/\\[\\]]");function CG(t,e,s){if(e.search(SG)>=0)throw Bk(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new TO(...e.split("."))._internalPath}catch{throw Bk(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function Bk(t,e,s,r,i){let a=`Function ${e}() called with invalid data`;a+=". ";let o="";return new Kt(Wt.INVALID_ARGUMENT,a+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,s,r,i,a){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ja(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(PO("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class kG extends AO{data(){return super.data()}}function PO(t,e){return typeof e=="string"?CG(t,e):e instanceof TO?e._internalPath:e._delegate._internalPath}class Kg{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _h extends AO{constructor(e,s,r,i,a,o){super(e,s,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new Cx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(PO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Wt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=_h._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}_h._jsonSchemaVersion="firestore/documentSnapshot/1.0",_h._jsonSchema={type:yn("string",_h._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class Cx extends _h{data(e={}){return super.data(e)}}class $p{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Kg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(r=>{e.call(s,new Cx(this._firestore,this._userDataWriter,r.key,r,new Kg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Kt(Wt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Cx(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Kg(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new Cx(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Kg(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,u=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),u=o.indexOf(l.doc.key)),{type:EG(l.type),doc:c,oldIndex:d,newIndex:u}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Wt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$p._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=iG.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(s.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mm(61501,{type:t})}}$p._jsonSchemaVersion="firestore/querySnapshot/1.0",$p._jsonSchema={type:yn("string",$p._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};(function(e,s=!0){(function(i){Ym=i})(hu),Hd(new Ic("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new NG(new eG(r.getProvider("auth-internal")),new nG(o,r.getProvider("app-check-internal")),function(d,u){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Kt(Wt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sy(d.options.projectId,u)}(o,i),o);return a={useFetchStreams:s,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),ao(kk,Ek,e),ao(kk,Ek,"esm2020")})();let Gg,IO,RO,OO,gm=!1;function TG(t){if(!t||t.projectId==="your-project-id"){console.warn(" Refusing to initialize auth with placeholder/missing config");return}if(gm){console.log(" Auth already initialized, skipping re-initialization");return}console.log(" Initializing auth with config:",{projectId:t.projectId}),Gg=NR(t),IO=DW(Gg),RO=KK(Gg),OO=_G(Gg),gm=!0,console.log(" Auth initialized successfully")}const Bc=()=>{if(!gm)throw new Error("Auth service not initialized. Make sure SettingsProvider loads settings first.");return IO},DO=()=>{if(!gm)throw new Error("Auth service not initialized. Make sure SettingsProvider loads settings first.");return RO},AG=()=>{if(!gm)throw new Error("Auth service not initialized. Make sure SettingsProvider loads settings first.");return OO};new Proxy({},{get:(t,e)=>Bc()[e]});new Proxy({},{get:(t,e)=>DO()[e]});new Proxy({},{get:(t,e)=>AG()[e]});const Ov=new Zo,Dv=new Dp("apple.com");Ov.addScope("email");Ov.addScope("profile");Dv.addScope("email");Dv.addScope("name");const PG=async()=>{try{return await tO(Bc(),Ov)}catch(t){if(t.code==="auth/popup-blocked")return console.log("Popup blocked, falling back to redirect"),await IG();throw t}},IG=()=>rO(Bc(),Ov),RG=()=>ZH(Bc()),OG=()=>SH(Bc()),DG=async()=>{try{return await tO(Bc(),Dv)}catch(t){if(t.code==="auth/popup-blocked")return console.log("Popup blocked, falling back to redirect"),await MG();throw t}},MG=()=>rO(Bc(),Dv),LG=t=>_H(Bc(),t);var ns;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function s(i){throw new Error}t.assertNever=s,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(ns||(ns={}));var qk;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(qk||(qk={}));const at=ns.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bl=t=>{switch(typeof t){case"undefined":return at.undefined;case"string":return at.string;case"number":return Number.isNaN(t)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(t)?at.array:t===null?at.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?at.promise:typeof Map<"u"&&t instanceof Map?at.map:typeof Set<"u"&&t instanceof Set?at.set:typeof Date<"u"&&t instanceof Date?at.date:at.object;default:return at.unknown}},Le=ns.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(s(o));else{let l=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),r}static assert(e){if(!(e instanceof xl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ns.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];s[a]=s[a]||[],s[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}xl.create=t=>new xl(t);const Aj=(t,e)=>{let s;switch(t.code){case Le.invalid_type:t.received===at.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case Le.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,ns.jsonStringifyReplacer)}`;break;case Le.unrecognized_keys:s=`Unrecognized key(s) in object: ${ns.joinValues(t.keys,", ")}`;break;case Le.invalid_union:s="Invalid input";break;case Le.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${ns.joinValues(t.options)}`;break;case Le.invalid_enum_value:s=`Invalid enum value. Expected ${ns.joinValues(t.options)}, received '${t.received}'`;break;case Le.invalid_arguments:s="Invalid function arguments";break;case Le.invalid_return_type:s="Invalid function return type";break;case Le.invalid_date:s="Invalid date";break;case Le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:ns.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case Le.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case Le.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case Le.custom:s="Invalid input";break;case Le.invalid_intersection_types:s="Intersection results could not be merged";break;case Le.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case Le.not_finite:s="Number must be finite";break;default:s=e.defaultError,ns.assertNever(t)}return{message:s}};let FG=Aj;function $G(){return FG}const UG=t=>{const{data:e,path:s,errorMaps:r,issueData:i}=t,a=[...s,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}};function Qe(t,e){const s=$G(),r=UG({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Aj?void 0:Aj].filter(i=>!!i)});t.common.issues.push(r)}class ni{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const r=[];for(const i of s){if(i.status==="aborted")return jt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,s){const r=[];for(const i of s){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return ni.mergeObjectSync(e,r)}static mergeObjectSync(e,s){const r={};for(const i of s){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return jt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const jt=Object.freeze({status:"aborted"}),yp=t=>({status:"dirty",value:t}),Bi=t=>({status:"valid",value:t}),Vk=t=>t.status==="aborted",Hk=t=>t.status==="dirty",nf=t=>t.status==="valid",Cy=t=>typeof Promise<"u"&&t instanceof Promise;var ct;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ct||(ct={}));class Oc{constructor(e,s,r,i){this._cachedPath=[],this.parent=e,this.data=s,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Wk=(t,e)=>{if(nf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new xl(t.common.issues);return this._error=s,this._error}}};function Dt(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:r,description:i}=t;if(e&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??s??l.defaultError}},description:i}}class es{get description(){return this._def.description}_getType(e){return Bl(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:Bl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ni,ctx:{common:e.parent.common,data:e.data,parsedType:Bl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(Cy(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const r=this.safeParse(e,s);if(r.success)return r.data;throw r.error}safeParse(e,s){const r={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Wk(r,i)}"~validate"(e){var r,i;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:s});return nf(a)?{value:a.value}:{issues:s.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(a=>nf(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(e,s){const r=await this.safeParseAsync(e,s);if(r.success)return r.data;throw r.error}async safeParseAsync(e,s){const r={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Cy(i)?i:Promise.resolve(i));return Wk(r,a)}refine(e,s){const r=i=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(i):s;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:Le.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,s){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof s=="function"?s(r,i):s),!1))}_refinement(e){return new of({schema:this,typeName:Nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Sc.create(this,this._def)}nullable(){return lf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return lo.create(this)}promise(){return Ay.create(this,this._def)}or(e){return Ey.create([this,e],this._def)}and(e){return Ty.create(this,e,this._def)}transform(e){return new of({...Dt(this._def),schema:this,typeName:Nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Oj({...Dt(this._def),innerType:this,defaultValue:s,typeName:Nt.ZodDefault})}brand(){return new cY({typeName:Nt.ZodBranded,type:this,...Dt(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new Dj({...Dt(this._def),innerType:this,catchValue:s,typeName:Nt.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return x_.create(this,e)}readonly(){return Mj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zG=/^c[^\s-]{8,}$/i,BG=/^[0-9a-z]+$/,qG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HG=/^[a-z0-9_-]{21}$/i,WG=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,KG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,GG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let fb;const QG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ZG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,XG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,JG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,MO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sY=new RegExp(`^${MO}$`);function LO(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function nY(t){return new RegExp(`^${LO(t)}$`)}function rY(t){let e=`${MO}T${LO(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function iY(t,e){return!!((e==="v4"||!e)&&QG.test(t)||(e==="v6"||!e)&&XG.test(t))}function aY(t,e){if(!WG.test(t))return!1;try{const[s]=t.split(".");if(!s)return!1;const r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function oY(t,e){return!!((e==="v4"||!e)&&ZG.test(t)||(e==="v6"||!e)&&JG.test(t))}class nl extends es{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==at.string){const a=this._getOrReturnCtx(e);return Qe(a,{code:Le.invalid_type,expected:at.string,received:a.parsedType}),jt}const r=new ni;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Qe(i,{code:Le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Qe(i,{code:Le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")GG.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"email",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")fb||(fb=new RegExp(YG,"u")),fb.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"emoji",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")VG.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"uuid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")HG.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"nanoid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")zG.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"cuid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")BG.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"cuid2",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")qG.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"ulid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Qe(i,{validation:"url",code:Le.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"regex",code:Le.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?rY(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?sY.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?nY(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?KG.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"duration",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?iY(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"ip",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?aY(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"jwt",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?oY(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"cidr",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?eY.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"base64",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?tY.test(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{validation:"base64url",code:Le.invalid_string,message:a.message}),r.dirty()):ns.assertNever(a);return{status:r.value,value:e.data}}_regex(e,s,r){return this.refinement(i=>e.test(i),{validation:s,code:Le.invalid_string,...ct.errToObj(r)})}_addCheck(e){return new nl({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ct.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ct.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ct.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ct.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ct.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ct.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ct.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ct.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ct.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ct.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ct.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ct.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ct.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ct.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ct.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ct.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...ct.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...ct.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...ct.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...ct.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...ct.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...ct.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...ct.errToObj(s)})}nonempty(e){return this.min(1,ct.errToObj(e))}trim(){return new nl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}nl.create=t=>new nl({checks:[],typeName:Nt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Dt(t)});function lY(t,e){const s=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=s>r?s:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Gd extends es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==at.number){const a=this._getOrReturnCtx(e);return Qe(a,{code:Le.invalid_type,expected:at.number,received:a.parsedType}),jt}let r;const i=new ni;for(const a of this._def.checks)a.kind==="int"?ns.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?lY(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.not_finite,message:a.message}),i.dirty()):ns.assertNever(a);return{status:i.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,ct.toString(s))}gt(e,s){return this.setLimit("min",e,!1,ct.toString(s))}lte(e,s){return this.setLimit("max",e,!0,ct.toString(s))}lt(e,s){return this.setLimit("max",e,!1,ct.toString(s))}setLimit(e,s,r,i){return new Gd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:ct.toString(i)}]})}_addCheck(e){return new Gd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ct.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ct.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ct.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ct.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ct.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:ct.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:ct.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ct.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ct.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ns.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Gd.create=t=>new Gd({checks:[],typeName:Nt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Dt(t)});class Yd extends es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==at.bigint)return this._getInvalidInput(e);let r;const i=new ni;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Qe(r,{code:Le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):ns.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return Qe(s,{code:Le.invalid_type,expected:at.bigint,received:s.parsedType}),jt}gte(e,s){return this.setLimit("min",e,!0,ct.toString(s))}gt(e,s){return this.setLimit("min",e,!1,ct.toString(s))}lte(e,s){return this.setLimit("max",e,!0,ct.toString(s))}lt(e,s){return this.setLimit("max",e,!1,ct.toString(s))}setLimit(e,s,r,i){return new Yd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:ct.toString(i)}]})}_addCheck(e){return new Yd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ct.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ct.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ct.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ct.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:ct.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Yd.create=t=>new Yd({checks:[],typeName:Nt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Dt(t)});class ky extends es{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==at.boolean){const r=this._getOrReturnCtx(e);return Qe(r,{code:Le.invalid_type,expected:at.boolean,received:r.parsedType}),jt}return Bi(e.data)}}ky.create=t=>new ky({typeName:Nt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Dt(t)});class rf extends es{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==at.date){const a=this._getOrReturnCtx(e);return Qe(a,{code:Le.invalid_type,expected:at.date,received:a.parsedType}),jt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Qe(a,{code:Le.invalid_date}),jt}const r=new ni;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Le.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):ns.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rf({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:ct.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:ct.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}rf.create=t=>new rf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Nt.ZodDate,...Dt(t)});class Kk extends es{_parse(e){if(this._getType(e)!==at.symbol){const r=this._getOrReturnCtx(e);return Qe(r,{code:Le.invalid_type,expected:at.symbol,received:r.parsedType}),jt}return Bi(e.data)}}Kk.create=t=>new Kk({typeName:Nt.ZodSymbol,...Dt(t)});class Gk extends es{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return Qe(r,{code:Le.invalid_type,expected:at.undefined,received:r.parsedType}),jt}return Bi(e.data)}}Gk.create=t=>new Gk({typeName:Nt.ZodUndefined,...Dt(t)});class Yk extends es{_parse(e){if(this._getType(e)!==at.null){const r=this._getOrReturnCtx(e);return Qe(r,{code:Le.invalid_type,expected:at.null,received:r.parsedType}),jt}return Bi(e.data)}}Yk.create=t=>new Yk({typeName:Nt.ZodNull,...Dt(t)});class Pj extends es{constructor(){super(...arguments),this._any=!0}_parse(e){return Bi(e.data)}}Pj.create=t=>new Pj({typeName:Nt.ZodAny,...Dt(t)});class Qk extends es{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bi(e.data)}}Qk.create=t=>new Qk({typeName:Nt.ZodUnknown,...Dt(t)});class Dc extends es{_parse(e){const s=this._getOrReturnCtx(e);return Qe(s,{code:Le.invalid_type,expected:at.never,received:s.parsedType}),jt}}Dc.create=t=>new Dc({typeName:Nt.ZodNever,...Dt(t)});class Zk extends es{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return Qe(r,{code:Le.invalid_type,expected:at.void,received:r.parsedType}),jt}return Bi(e.data)}}Zk.create=t=>new Zk({typeName:Nt.ZodVoid,...Dt(t)});class lo extends es{_parse(e){const{ctx:s,status:r}=this._processInputParams(e),i=this._def;if(s.parsedType!==at.array)return Qe(s,{code:Le.invalid_type,expected:at.array,received:s.parsedType}),jt;if(i.exactLength!==null){const o=s.data.length>i.exactLength.value,l=s.data.length<i.exactLength.value;(o||l)&&(Qe(s,{code:o?Le.too_big:Le.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&s.data.length<i.minLength.value&&(Qe(s,{code:Le.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&s.data.length>i.maxLength.value&&(Qe(s,{code:Le.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>i.type._parseAsync(new Oc(s,o,s.path,l)))).then(o=>ni.mergeArray(r,o));const a=[...s.data].map((o,l)=>i.type._parseSync(new Oc(s,o,s.path,l)));return ni.mergeArray(r,a)}get element(){return this._def.type}min(e,s){return new lo({...this._def,minLength:{value:e,message:ct.toString(s)}})}max(e,s){return new lo({...this._def,maxLength:{value:e,message:ct.toString(s)}})}length(e,s){return new lo({...this._def,exactLength:{value:e,message:ct.toString(s)}})}nonempty(e){return this.min(1,e)}}lo.create=(t,e)=>new lo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Nt.ZodArray,...Dt(e)});function Hu(t){if(t instanceof gn){const e={};for(const s in t.shape){const r=t.shape[s];e[s]=Sc.create(Hu(r))}return new gn({...t._def,shape:()=>e})}else return t instanceof lo?new lo({...t._def,type:Hu(t.element)}):t instanceof Sc?Sc.create(Hu(t.unwrap())):t instanceof lf?lf.create(Hu(t.unwrap())):t instanceof Qd?Qd.create(t.items.map(e=>Hu(e))):t}class gn extends es{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=ns.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==at.object){const d=this._getOrReturnCtx(e);return Qe(d,{code:Le.invalid_type,expected:at.object,received:d.parsedType}),jt}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Dc&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=a[d],f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Oc(i,f,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Dc){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(d==="strict")l.length>0&&(Qe(i,{code:Le.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Oc(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const f=await u.key,h=await u.value;d.push({key:f,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>ni.mergeObjectSync(r,d)):ni.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ct.errToObj,new gn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,s,r).message)??r.defaultError;return s.code==="unrecognized_keys"?{message:ct.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new gn({...this._def,unknownKeys:"strip"})}passthrough(){return new gn({...this._def,unknownKeys:"passthrough"})}extend(e){return new gn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Nt.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new gn({...this._def,catchall:e})}pick(e){const s={};for(const r of ns.objectKeys(e))e[r]&&this.shape[r]&&(s[r]=this.shape[r]);return new gn({...this._def,shape:()=>s})}omit(e){const s={};for(const r of ns.objectKeys(this.shape))e[r]||(s[r]=this.shape[r]);return new gn({...this._def,shape:()=>s})}deepPartial(){return Hu(this)}partial(e){const s={};for(const r of ns.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?s[r]=i:s[r]=i.optional()}return new gn({...this._def,shape:()=>s})}required(e){const s={};for(const r of ns.objectKeys(this.shape))if(e&&!e[r])s[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Sc;)a=a._def.innerType;s[r]=a}return new gn({...this._def,shape:()=>s})}keyof(){return FO(ns.objectKeys(this.shape))}}gn.create=(t,e)=>new gn({shape:()=>t,unknownKeys:"strip",catchall:Dc.create(),typeName:Nt.ZodObject,...Dt(e)});gn.strictCreate=(t,e)=>new gn({shape:()=>t,unknownKeys:"strict",catchall:Dc.create(),typeName:Nt.ZodObject,...Dt(e)});gn.lazycreate=(t,e)=>new gn({shape:t,unknownKeys:"strip",catchall:Dc.create(),typeName:Nt.ZodObject,...Dt(e)});class Ey extends es{_parse(e){const{ctx:s}=this._processInputParams(e),r=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new xl(l.ctx.common.issues));return Qe(s,{code:Le.invalid_union,unionErrors:o}),jt}if(s.common.async)return Promise.all(r.map(async a=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await a._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of r){const d={...s,common:{...s.common,issues:[]},parent:null},u=c._parseSync({data:s.data,path:s.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return s.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new xl(c));return Qe(s,{code:Le.invalid_union,unionErrors:l}),jt}}get options(){return this._def.options}}Ey.create=(t,e)=>new Ey({options:t,typeName:Nt.ZodUnion,...Dt(e)});function Ij(t,e){const s=Bl(t),r=Bl(e);if(t===e)return{valid:!0,data:t};if(s===at.object&&r===at.object){const i=ns.objectKeys(e),a=ns.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=Ij(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(s===at.array&&r===at.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=Ij(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return s===at.date&&r===at.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ty extends es{_parse(e){const{status:s,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(Vk(a)||Vk(o))return jt;const l=Ij(a.value,o.value);return l.valid?((Hk(a)||Hk(o))&&s.dirty(),{status:s.value,value:l.data}):(Qe(r,{code:Le.invalid_intersection_types}),jt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ty.create=(t,e,s)=>new Ty({left:t,right:e,typeName:Nt.ZodIntersection,...Dt(s)});class Qd extends es{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.array)return Qe(r,{code:Le.invalid_type,expected:at.array,received:r.parsedType}),jt;if(r.data.length<this._def.items.length)return Qe(r,{code:Le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),jt;!this._def.rest&&r.data.length>this._def.items.length&&(Qe(r,{code:Le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Oc(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>ni.mergeArray(s,o)):ni.mergeArray(s,a)}get items(){return this._def.items}rest(e){return new Qd({...this._def,rest:e})}}Qd.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qd({items:t,typeName:Nt.ZodTuple,rest:null,...Dt(e)})};class Xk extends es{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.map)return Qe(r,{code:Le.invalid_type,expected:at.map,received:r.parsedType}),jt;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],d)=>({key:i._parse(new Oc(r,l,r.path,[d,"key"])),value:a._parse(new Oc(r,c,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return jt;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return jt;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}}}}Xk.create=(t,e,s)=>new Xk({valueType:e,keyType:t,typeName:Nt.ZodMap,...Dt(s)});class xm extends es{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.set)return Qe(r,{code:Le.invalid_type,expected:at.set,received:r.parsedType}),jt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Qe(r,{code:Le.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),s.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Qe(r,{code:Le.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),s.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return jt;u.status==="dirty"&&s.dirty(),d.add(u.value)}return{status:s.value,value:d}}const l=[...r.data.values()].map((c,d)=>a._parse(new Oc(r,c,r.path,d)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,s){return new xm({...this._def,minSize:{value:e,message:ct.toString(s)}})}max(e,s){return new xm({...this._def,maxSize:{value:e,message:ct.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}xm.create=(t,e)=>new xm({valueType:t,minSize:null,maxSize:null,typeName:Nt.ZodSet,...Dt(e)});class Rj extends es{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Rj.create=(t,e)=>new Rj({getter:t,typeName:Nt.ZodLazy,...Dt(e)});class Jk extends es{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return Qe(s,{received:s.data,code:Le.invalid_literal,expected:this._def.value}),jt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Jk.create=(t,e)=>new Jk({value:t,typeName:Nt.ZodLiteral,...Dt(e)});function FO(t,e){return new af({values:t,typeName:Nt.ZodEnum,...Dt(e)})}class af extends es{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),r=this._def.values;return Qe(s,{expected:ns.joinValues(r),received:s.parsedType,code:Le.invalid_type}),jt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),r=this._def.values;return Qe(s,{received:s.data,code:Le.invalid_enum_value,options:r}),jt}return Bi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return af.create(e,{...this._def,...s})}exclude(e,s=this._def){return af.create(this.options.filter(r=>!e.includes(r)),{...this._def,...s})}}af.create=FO;class eE extends es{_parse(e){const s=ns.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==at.string&&r.parsedType!==at.number){const i=ns.objectValues(s);return Qe(r,{expected:ns.joinValues(i),received:r.parsedType,code:Le.invalid_type}),jt}if(this._cache||(this._cache=new Set(ns.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ns.objectValues(s);return Qe(r,{received:r.data,code:Le.invalid_enum_value,options:i}),jt}return Bi(e.data)}get enum(){return this._def.values}}eE.create=(t,e)=>new eE({values:t,typeName:Nt.ZodNativeEnum,...Dt(e)});class Ay extends es{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==at.promise&&s.common.async===!1)return Qe(s,{code:Le.invalid_type,expected:at.promise,received:s.parsedType}),jt;const r=s.parsedType===at.promise?s.data:Promise.resolve(s.data);return Bi(r.then(i=>this._def.type.parseAsync(i,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Ay.create=(t,e)=>new Ay({type:t,typeName:Nt.ZodPromise,...Dt(e)});class of extends es{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Qe(r,o),o.fatal?s.abort():s.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return jt;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?jt:c.status==="dirty"||s.value==="dirty"?yp(c.value):c});{if(s.value==="aborted")return jt;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?jt:l.status==="dirty"||s.value==="dirty"?yp(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?jt:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?jt:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!nf(o))return jt;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>nf(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:s.value,value:l})):jt);ns.assertNever(i)}}of.create=(t,e,s)=>new of({schema:t,typeName:Nt.ZodEffects,effect:e,...Dt(s)});of.createWithPreprocess=(t,e,s)=>new of({schema:e,effect:{type:"preprocess",transform:t},typeName:Nt.ZodEffects,...Dt(s)});class Sc extends es{_parse(e){return this._getType(e)===at.undefined?Bi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sc.create=(t,e)=>new Sc({innerType:t,typeName:Nt.ZodOptional,...Dt(e)});class lf extends es{_parse(e){return this._getType(e)===at.null?Bi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lf.create=(t,e)=>new lf({innerType:t,typeName:Nt.ZodNullable,...Dt(e)});class Oj extends es{_parse(e){const{ctx:s}=this._processInputParams(e);let r=s.data;return s.parsedType===at.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Oj.create=(t,e)=>new Oj({innerType:t,typeName:Nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Dt(e)});class Dj extends es{_parse(e){const{ctx:s}=this._processInputParams(e),r={...s,common:{...s.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Cy(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new xl(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xl(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Dj.create=(t,e)=>new Dj({innerType:t,typeName:Nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Dt(e)});class tE extends es{_parse(e){if(this._getType(e)!==at.nan){const r=this._getOrReturnCtx(e);return Qe(r,{code:Le.invalid_type,expected:at.nan,received:r.parsedType}),jt}return{status:"valid",value:e.data}}}tE.create=t=>new tE({typeName:Nt.ZodNaN,...Dt(t)});class cY extends es{_parse(e){const{ctx:s}=this._processInputParams(e),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class x_ extends es{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?jt:a.status==="dirty"?(s.dirty(),yp(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?jt:i.status==="dirty"?(s.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,s){return new x_({in:e,out:s,typeName:Nt.ZodPipeline})}}class Mj extends es{_parse(e){const s=this._def.innerType._parse(e),r=i=>(nf(i)&&(i.value=Object.freeze(i.value)),i);return Cy(s)?s.then(i=>r(i)):r(s)}unwrap(){return this._def.innerType}}Mj.create=(t,e)=>new Mj({innerType:t,typeName:Nt.ZodReadonly,...Dt(e)});var Nt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Nt||(Nt={}));const H=nl.create,bt=Gd.create;Yd.create;const on=ky.create;rf.create;const Sh=Pj.create;Dc.create;const gs=lo.create,tt=gn.create,cc=Ey.create;Ty.create;Qd.create;const dY=Rj.create,co=af.create;Ay.create;Sc.create;lf.create;const nd={string:t=>nl.create({...t,coerce:!0}),number:t=>Gd.create({...t,coerce:!0}),boolean:t=>ky.create({...t,coerce:!0}),bigint:t=>Yd.create({...t,coerce:!0}),date:t=>rf.create({...t,coerce:!0})},uY=tt({email:H().email("Please enter a valid email address"),password:H().min(1,"Password is required")}),hY=tt({email:H().email("Please enter a valid email address"),password:H().min(6,"Password must be at least 6 characters"),firstName:H().min(1,"First name is required"),lastName:H().min(1,"Last name is required"),userName:H().min(3,"Username must be at least 3 characters").regex(/^[a-zA-Z0-9_]+$/,"Username can only contain letters, numbers, and underscores"),phone:H().optional().refine(t=>!t||t===""?!0:/^[\+]?[1-9][\d]{0,15}$|^[\+]?[(]?[0-9]{3}[)]?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4,6}$|^[\+]?[0-9]{8,15}$/.test(t.replace(/[\s\-\(\)]/g,"")),"Please enter a valid phone number"),country:H().min(1,"Country is required")});tt({email:H().optional(),firstName:H().optional(),lastName:H().optional(),type:co(["google","apple"],{errorMap:()=>({message:"Auth type must be 'google' or 'apple'"})}),profilePhoto:H().optional(),userName:H().optional(),country:H().optional(),phone:H().optional(),gender:H().optional(),uid:H().optional(),idToken:H().min(1,"Firebase ID token is required for authentication"),providerToken:H().optional(),provider:H().optional(),profilePicture:H().optional()}).refine(t=>t.type==="google"?!!t.email&&!!t.firstName:!0,{message:"Google authentication requires email and first name",path:["firstName"]});const $O=tt({firstName:H().min(1,"First name is required"),lastName:H().min(1,"Last name is required"),userName:H().min(3,"Username must be at least 3 characters").regex(/^[a-zA-Z0-9_]+$/,"Username can only contain letters, numbers, and underscores"),country:H().min(1,"Country is required"),phone:H().optional().refine(t=>!t||t===""?!0:/^[\+]?[1-9][\d]{0,15}$|^[\+]?[(]?[0-9]{3}[)]?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4,6}$|^[\+]?[0-9]{8,15}$/.test(t.replace(/[\s\-\(\)]/g,"")),"Please enter a valid phone number"),gender:H().optional()});tt({token:H().optional(),user:tt({id:H(),email:H(),name:H().optional()}).optional(),message:H().optional()});tt({success:on(),message:H().optional(),data:Sh(),accessToken:H().optional(),authtoken:H().optional(),newuser:on().optional()});tt({success:on().optional(),message:H(),error:H().optional(),details:Sh().optional()});const fY=tt({_id:H(),customer:tt({_id:H(),firstName:H(),lastName:H().optional(),userName:H().optional(),email:H(),profilePhoto:H().optional(),address:tt({_id:H(),name:H(),addrress1:H(),city:H(),state:H(),zipcode:H(),phone:H(),email:H()}).optional()}),seller:tt({_id:H(),firstName:H(),lastName:H().optional(),userName:H().optional(),email:H()}),need_label:on(),giveaway:tt({_id:H(),name:H(),description:H().optional(),quantity:bt(),images:gs(H()).optional(),category:tt({_id:H(),name:H()}).optional(),shipping_profile:tt({_id:H(),weight:bt(),name:H(),scale:H()}).optional(),height:H().optional(),width:H().optional(),length:H().optional(),status:H().optional(),participants:gs(H()).optional()}).optional(),ordertype:H().optional(),items:gs(tt({_id:H().optional(),orderId:H().optional(),productId:tt({_id:H().optional(),name:H().optional(),images:gs(H()).optional(),category:tt({_id:H().optional(),name:H().optional()}).optional()}).optional(),quantity:bt().optional(),price:bt().optional(),shipping_fee:bt().optional(),weight:H().optional(),height:H().optional(),width:H().optional(),length:H().optional(),scale:H().optional(),order_reference:H().optional(),status:H().optional()})).optional(),total:bt().optional(),servicefee:bt().optional(),service_fee:bt().optional(),stripe_fees:bt().optional(),tax:bt().optional(),shipping_fee:bt().optional(),seller_shipping_fee_pay:bt().optional(),total_shipping_cost:bt().optional(),discount:bt().optional(),invoice:bt().optional(),status:H().optional(),tracking_number:H().optional(),label:H().optional(),weight:cc([bt(),H()]).optional(),date:bt().optional(),createdAt:H().optional(),updatedAt:H().optional(),bundleId:H().optional().nullable(),tokshow:tt({_id:H(),title:H().optional(),name:H().optional()}).optional(),height:H().optional(),width:H().optional(),length:H().optional(),scale:H().optional()});tt({orders:gs(fY),limits:bt(),pages:bt(),total:bt()});tt({totalOrder:bt(),totalAmount:H(),todayOrder:gs(Sh()),totalAmountOfThisMonth:H(),totalPendingOrder:tt({total:bt(),count:bt()}).optional(),totalDeliveredOrder:bt(),orders:gs(Sh()),weeklySaleReport:gs(Sh())});const pY=tt({_id:H(),name:H(),description:H().optional(),price:bt(),quantity:bt(),images:gs(H()).optional(),category:tt({_id:H(),name:H()}).optional(),seller:tt({_id:H(),firstName:H(),lastName:H().optional(),userName:H().optional(),email:H()}),status:H().optional(),weight:cc([bt(),H()]).optional(),height:H().optional(),width:H().optional(),length:H().optional(),scale:H().optional(),shipping_profile:tt({_id:H(),weight:bt(),name:H(),scale:H()}).optional(),colors:gs(H()).optional(),sizes:gs(H()).optional(),featured:on().optional(),createdAt:H().optional(),updatedAt:H().optional()});tt({products:gs(pY),limits:bt(),pages:bt(),totalDoc:bt()});const UO=dY(()=>tt({_id:H(),name:H(),description:H().optional(),status:H().optional(),icon:H().optional(),type:H().optional(),subCategories:gs(UO).optional()}));tt({categories:gs(UO),limits:bt().optional(),pages:bt().optional(),total:bt().optional()});const mY=tt({_id:H(),name:H(),weight:bt(),scale:H(),description:H().optional()});gs(mY);const gY=co(["auction","buy_now","giveaway"]);tt({name:H().min(1,"Product name is required"),description:H().optional(),price:nd.number().optional().nullable(),quantity:nd.number({invalid_type_error:"Quantity is required"}).int().min(1,"Quantity must be at least 1"),category:H().min(1,"Category is required"),status:co(["active","inactive","out_of_stock","draft"]).optional().default("active"),listingType:gY,shippingProfile:H().nullable().optional(),images:gs(H()).optional(),weight:H().optional(),height:H().optional(),width:H().optional(),length:H().optional(),scale:H().optional(),colors:gs(H()).optional(),sizes:gs(H()).optional(),startingPrice:nd.number().optional().nullable(),duration:nd.number().int().optional().nullable(),sudden:on().optional().default(!1),list_individually:on().optional().default(!1),startTime:H().optional().nullable(),endTime:H().optional().nullable(),featured:on().optional().default(!1),acceptsOffers:on().optional().default(!1),flash_sale:on().optional().default(!1),flash_sale_discount_type:co(["percentage","fixed"]).optional().default("percentage"),flash_sale_discount_value:nd.number().optional().default(0),flash_sale_buy_limit:nd.number().int().optional().default(1),flash_sale_duration:nd.number().int().optional().default(60),flash_sale_available_full_price:on().optional().default(!1),flash_live_reserved:on().optional().default(!0),whocanenter:co(["everyone","followers"]).optional().default("everyone"),tokshow:H().optional()}).refine(t=>t.listingType==="auction"?t.startingPrice!==void 0&&t.startingPrice!==null&&t.startingPrice>0:!0,{message:"Starting price must be greater than 0",path:["startingPrice"]}).refine(t=>t.listingType==="auction"&&!t.featured?t.duration!==void 0&&t.duration!==null&&t.duration>0:!0,{message:"Duration must be selected",path:["duration"]}).refine(t=>t.listingType==="auction"&&t.featured?t.startTime!==void 0&&t.startTime!==null&&t.startTime!=="":!0,{message:"Auction start time is required for featured auctions",path:["startTime"]}).refine(t=>t.listingType==="auction"&&t.featured?t.endTime!==void 0&&t.endTime!==null&&t.endTime!=="":!0,{message:"Auction end time is required for featured auctions",path:["endTime"]}).refine(t=>t.listingType==="buy_now"?t.price!==void 0&&t.price!==null&&t.price>0:!0,{message:"Price must be greater than 0",path:["price"]}).refine(t=>t.listingType==="auction"&&!t.featured?t.tokshow!==void 0&&t.tokshow!==null&&t.tokshow!==""&&t.tokshow!=="general":!0,{message:"Live show auctions must be assigned to a show",path:["tokshow"]});tt({id:H(),customerId:H(),customerName:H(),orderIds:gs(H()),count:bt(),weight:H().optional(),dimensions:H().optional(),totalValue:bt(),status:co(["pending","labeled"]).optional().default("pending"),createdAt:H().optional()});const xY=tt({name:H().min(1,"Address name is required"),addrress1:H().min(1,"Street address is required"),addrress2:H().optional().default(""),city:H().min(1,"City is required"),state:H().min(1,"State is required"),stateCode:H().optional().default(""),cityCode:H().optional().default(""),zipcode:H().min(1,"ZIP code is required"),countryCode:H().min(1,"Country is required"),country:H().optional(),phone:H().min(1,"Phone number is required"),email:H().email("Please enter a valid email address"),userId:H().min(1,"User ID is required")});xY.partial().extend({name:H().min(1,"Address name is required").optional(),addrress1:H().min(1,"Street address is required").optional(),city:H().min(1,"City is required").optional(),state:H().min(1,"State is required").optional(),zipcode:H().min(1,"ZIP code is required").optional(),countryCode:H().min(1,"Country is required").optional(),phone:H().min(1,"Phone number is required").optional(),email:H().email("Please enter a valid email address").optional()});tt({primary:on(),userId:H().min(1,"User ID is required")});tt({weight:cc([H(),bt()]).transform(String),unit:H().optional().default("oz"),product:H(),update:on().optional().default(!0),owner:H(),customer:H(),length:cc([H(),bt()]).transform(Number),width:cc([H(),bt()]).transform(Number),height:cc([H(),bt()]).transform(Number),buying_label:on().optional().default(!0),order_id:H().optional()});tt({carrier:H(),service:H(),price:H(),deliveryTime:H(),objectId:H().min(1,"Rate ID is required")});tt({rate_id:H().min(1,"Rate ID is required"),order:cc([H(),tt({_id:H(),customer:tt({_id:H(),firstName:H(),lastName:H().optional(),email:H().email(),address:tt({name:H(),addrress1:H(),city:H(),state:H(),zipcode:H(),phone:H(),email:H().email()}).optional()}),seller:tt({_id:H(),firstName:H(),lastName:H().optional(),email:H().email()})})]),isBundle:on().optional(),shipping_fee:cc([H(),bt()]).transform(Number),servicelevel:H().min(1,"Service level is required"),carrier:H().optional(),deliveryTime:H().optional()});tt({success:on(),message:H(),data:tt({tracking_number:H(),label_url:H().optional(),label_data:H().optional(),carrier:H(),service:H(),cost:H(),delivery_time:H(),purchased_at:H()}).optional(),error:H().optional()});tt({orderIds:gs(H().min(1,"Order ID cannot be empty")).min(1,"At least one order ID is required"),service:H().min(1,"Service level is required").optional().default("Ground Advantage"),rate_id:H().min(1,"Rate ID is required")});tt({success:on(),message:H(),data:tt({tracking_number:H(),label_url:H().optional(),cost:bt(),carrier:H(),service:H(),affected_orders:gs(H()),update_results:gs(tt({orderId:H(),success:on(),error:H().optional(),data:Sh().optional()})),aggregated_weight:H().optional(),aggregated_dimensions:H().optional()}).optional(),error:H().optional()});const yY=tt({title:H().min(1,"Title is required"),subtitle:H().min(1,"Subtitle is required"),primaryButtonText:H().min(1,"Primary button text is required"),primaryButtonLink:H().min(1,"Primary button link is required"),secondaryButtonText:H().min(1,"Secondary button text is required"),heroImage:H().url("Must be a valid URL"),heroImageAlt:H().optional().default("Live shopping experience"),liveViewers:H().optional().default("12.5K watching")}),vY=tt({icon:co(["Play","Zap","Shield","Star","TrendingUp"]),title:H().min(1,"Step title is required"),description:H().min(1,"Step description is required")}),bY=tt({icon:co(["Play","Zap","Shield","Star","TrendingUp"]),title:H().min(1,"Feature title is required"),description:H().min(1,"Feature description is required")}),wY=tt({name:H().min(1,"Category name is required"),image:H().url("Must be a valid URL")}),jY=tt({name:H().min(1,"Brand name is required"),logo:H().optional()});tt({hero:yY,howItWorks:tt({title:H().min(1,"Section title is required"),subtitle:H().min(1,"Section subtitle is required"),steps:gs(vY).length(3,"Must have exactly 3 steps")}),joinFun:tt({title:H().min(1,"Section title is required"),subtitle:H().min(1,"Section subtitle is required"),image:H().url("Must be a valid URL"),imageAlt:H().optional().default("Auction excitement"),features:gs(bY).min(1,"Must have at least 1 feature"),buttonText:H().min(1,"Button text is required"),buttonLink:H().min(1,"Button link is required")}),categories:tt({title:H().min(1,"Section title is required"),subtitle:H().min(1,"Section subtitle is required"),items:gs(wY).min(1,"Must have at least 1 category"),buttonText:H().min(1,"Button text is required"),buttonLink:H().min(1,"Button link is required")}),brands:tt({title:H().min(1,"Section title is required"),subtitle:H().min(1,"Section subtitle is required"),items:gs(jY).min(1,"Must have at least 1 brand"),image:H().url("Must be a valid URL"),imageAlt:H().optional().default("Brand products"),buttonText:H().min(1,"Button text is required"),buttonLink:H().min(1,"Button link is required")}),finalCTA:tt({title:H().min(1,"CTA title is required"),subtitle:H().min(1,"CTA subtitle is required"),buttonText:H().min(1,"Button text is required"),buttonLink:H().min(1,"Button link is required")}),footer:tt({copyrightText:H().optional()})});co(["landing","faq","about","privacy","terms","contact"]);const NY=tt({question:H().min(1,"Question is required"),answer:H().min(1,"Answer is required")}),_Y=tt({title:H().min(1,"Page title is required"),subtitle:H().optional(),faqs:gs(NY).min(1,"Must have at least 1 FAQ item")}),zO=tt({title:H().min(1,"Section title is required"),content:H().min(1,"Section content is required"),order:bt().optional()}),y_=tt({title:H().min(1,"Page title is required"),subtitle:H().optional(),sections:gs(zO).min(1,"Must have at least 1 section")}),SY=tt({email:H().email("Must be a valid email").optional(),phone:H().optional(),address:H().optional()}),CY=tt({title:H().min(1,"Page title is required"),subtitle:H().optional(),description:H().optional(),contactInfo:SY,showContactForm:on().optional().default(!0),sections:gs(zO).optional()}),BO=tt({_id:H().optional(),title:H().min(1,"Title is required"),slug:H().min(1,"Slug is required"),excerpt:H().min(1,"Excerpt/description is required"),content:H().min(1,"Content is required"),category:co(["general","seller","buyer","payments","shipping","other"]).default("general"),published:on().default(!0),order:bt().default(0),createdAt:H().optional(),updatedAt:H().optional()}),kY=BO.omit({_id:!0,createdAt:!0,updatedAt:!0});BO.partial().omit({_id:!0,createdAt:!0,updatedAt:!0});const Lj={app_name:"TokshopLive",seo_title:"",support_email:"support@example.com",primary_color:"#F4D03F",secondary_color:"#1A1A1A",stripe_publishable_key:"",commission_rate:0,demoMode:!1},qO=p.createContext({settings:Lj,isLoading:!0,isFirebaseReady:!1,appName:"TokshopLive"});function sE(t){t=t.replace("#",""),t.length===8&&(t=t.substring(2));const e=parseInt(t.substring(0,2),16)/255,s=parseInt(t.substring(2,4),16)/255,r=parseInt(t.substring(4,6),16)/255,i=Math.max(e,s,r),a=Math.min(e,s,r);let o=0,l=0,c=(i+a)/2;if(i!==a){const d=i-a;switch(l=c>.5?d/(2-i-a):d/(i+a),i){case e:o=((s-r)/d+(s<r?6:0))/6;break;case s:o=((r-e)/d+2)/6;break;case r:o=((e-s)/d+4)/6;break}}return o=Math.round(o*360),l=Math.round(l*100),c=Math.round(c*100),`${o} ${l}% ${c}%`}function nE(t){t=t.replace("#",""),t.length===8&&(t=t.substring(2));const e=parseInt(t.substring(0,2),16)/255,s=parseInt(t.substring(2,4),16)/255,r=parseInt(t.substring(4,6),16)/255,i=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),a=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4),o=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);return .2126*i+.7152*a+.0722*o}function rE(t,e){console.log(" Applying theme colors:",{primaryColor:t,secondaryColor:e});const s=document.documentElement,r=sE(t),i=sE(e);console.log(" Converted to HSL:",{primaryHSL:r,secondaryHSL:i});const a=nE(t),o=a>.5;console.log(" Luminance:",{luminance:a,isLightColor:o});const l=o?"0 0% 9%":"0 0% 100%";s.style.setProperty("--primary",r),s.style.setProperty("--primary-foreground",l),s.style.setProperty("--ring",r),s.style.setProperty("--chart-1",r),s.style.setProperty("--sidebar-primary",r),s.style.setProperty("--sidebar-primary-foreground",l),s.style.setProperty("--sidebar-ring",r);const u=nE(e)>.5?"0 0% 9%":"0 0% 100%";s.style.setProperty("--secondary",i),s.style.setProperty("--secondary-foreground",u),s.style.setProperty("--accent",i),s.style.setProperty("--accent-foreground",u),s.style.setProperty("--chart-2",i),console.log(" Theme colors applied successfully")}function EY({children:t}){const[e,s]=p.useState(Lj),[r,i]=p.useState(!0),[a,o]=p.useState(!1);p.useEffect(()=>{async function c(){try{try{const d=await fetch("/themes");if(d.ok){const u=await d.json();if(console.log(" Themes fetched:",u),u.success&&u.data){const f=u.data;f.primary_color&&rE(f.primary_color,f.secondary_color||Lj.secondary_color),s(h=>({...h,app_name:f.app_name||h.app_name,demoMode:f.demoMode!==void 0?f.demoMode:h.demoMode}))}}}catch(d){console.warn("Failed to fetch public themes:",d)}try{const d=localStorage.getItem("adminAccessToken"),u=localStorage.getItem("accessToken"),f={};d?(f.Authorization=`Bearer ${d}`,f["x-admin-token"]=d):u&&(f.Authorization=`Bearer ${u}`,f["x-access-token"]=u);const h=await fetch("/api/settings",{credentials:"include",headers:f});if((h.status===401||h.status===404)&&!!(d||u)){console.log("[Settings] Token expired or user not found, logging out"),localStorage.removeItem("adminAccessToken"),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),localStorage.removeItem("adminUser"),localStorage.removeItem("userId"),window.location.pathname.includes("/login")||(window.location.href="/admin/login");return}if(h.ok){const x=await h.json();if(console.log(" Settings fetched:",x),x.success&&x.data){const g=x.data;if(s(y=>({...y,...g})),g.firebase_api_key&&g.firebase_project_id&&g.firebase_storage_bucket){const y={apiKey:g.firebase_api_key,authDomain:g.firebase_auth_domain,projectId:g.firebase_project_id,storageBucket:g.firebase_storage_bucket,appId:g.firebase_app_id};console.log(" Initializing auth with config from settings"),TG(y),o(!0)}else console.warn(" Auth config not available in settings"),o(!1)}}}catch(d){console.warn("Failed to fetch settings:",d)}}catch(d){console.error("Failed to fetch app settings:",d),console.warn(" Cannot initialize auth without settings")}finally{i(!1)}}c()},[]),p.useEffect(()=>{e.primary_color&&e.secondary_color&&rE(e.primary_color,e.secondary_color)},[e.primary_color,e.secondary_color]);const l=e.app_name||"TokshopLive";return n.jsx(qO.Provider,{value:{settings:e,isLoading:r,isFirebaseReady:a,appName:l},children:t})}function qc(){const t=p.useContext(qO);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t}const VO=p.createContext(null);function TY({children:t}){console.log("[AuthProvider] Initializing AuthProvider");const{isFirebaseReady:e}=qc(),[s,r]=p.useState(null),[i,a]=p.useState(!0),[o,l]=p.useState(!1),[c,d]=p.useState(null),[u,f]=p.useState(null),h=p.useRef(!1),x=p.useRef(!1),g=p.useRef(0),y=p.useRef(!1);console.log("[AuthProvider] Current state - isLoading:",i,"user:",s?s.id:"null","isAuthenticated:",!!s,"isFirebaseReady:",e);const w=!!s,b=async(O,D,M=!1)=>{var J,X;try{const U=await O.getIdToken(!0);let $=null;if(O.providerData&&O.providerData.length>0&&(O.providerData.some(_e=>_e.providerId==="apple.com")?$="apple":O.providerData.some(_e=>_e.providerId==="google.com")&&($="google")),!$&&(D==null?void 0:D.providerId)==="apple.com"?$="apple":!$&&(D==null?void 0:D.providerId)==="google.com"&&($="google"),!$)throw new Error("Unable to determine authentication provider");let L="",te="",F=O.email||"";if($==="apple"&&(D!=null&&D.profile)){const _e=D.profile;_e.name&&(L=_e.name.firstName||"",te=_e.name.lastName||""),_e.email&&(F=_e.email)}else($==="google"||!(D!=null&&D.profile))&&(L=((J=O.displayName)==null?void 0:J.split(" ")[0])||"",te=((X=O.displayName)==null?void 0:X.split(" ").slice(1).join(" "))||"");const z={idToken:U,uid:O.uid,email:F,firstName:L,lastName:te,type:$,profilePhoto:O.photoURL||"",userName:$==="apple"?"":F||O.uid,country:"",phone:"",gender:""},pe=await ut("POST","/api/auth/social",z),xe=await pe.json();if(!pe.ok)throw new Error(xe.error||`Authentication failed: ${pe.status}`);if(xe.success){if(!M&&xe.newuser===!0)return l(!0),d(O.email||""),f(O),xe;const _e={id:xe.data._id||xe.data.id,email:xe.data.email,firstName:xe.data.firstName,lastName:xe.data.lastName||"",profilePhoto:xe.data.profilePhoto||O.photoURL||"",userName:xe.data.userName,country:xe.data.country||"",phone:xe.data.phone||"",seller:xe.data.seller||!1,admin:xe.data.admin||!1,authProvider:$,address:xe.data.address,defaultpaymentmethod:xe.data.defaultpaymentmethod};r(_e),localStorage.setItem("userId",_e.id),localStorage.setItem("user",JSON.stringify(_e)),xe.accessToken&&localStorage.setItem("accessToken",xe.accessToken),l(!1),d(null),f(null)}else throw new Error(xe.message||"Authentication failed");return xe}catch(U){throw console.error("Authentication failed:",(U==null?void 0:U.message)||U),U}},v=async(O,D)=>await N(O,D),N=async(O,D)=>{try{a(!0);const M=uY.parse({email:O,password:D}),X=await(await ut("POST","/api/auth/login",M)).json();if(X.success){const U={id:X.data._id||X.data.id,email:X.data.email,firstName:X.data.firstName,lastName:X.data.lastName||"",profilePhoto:X.data.profilePhoto||"",userName:X.data.userName,country:X.data.country||"",phone:X.data.phone||"",seller:X.data.seller||!1,admin:X.data.admin||!1,authProvider:"email",address:X.data.address,defaultpaymentmethod:X.data.defaultpaymentmethod};r(U),localStorage.setItem("userId",U.id),localStorage.setItem("user",JSON.stringify(U)),X.accessToken&&localStorage.setItem("accessToken",X.accessToken)}else{const U=X.message||X.error||"Login failed";throw new Error(U)}}catch(M){throw console.error("Email login failed:",M),M}finally{a(!1)}},C=async(O,D,M,J,X,U,$)=>{try{a(!0);const L=hY.parse({email:O,password:D,firstName:M,lastName:J,userName:X,phone:U,country:$}),F=await(await ut("POST","/api/auth/signup",L)).json();if(F.success){const z={id:F.data._id||F.data.id,email:F.data.email,firstName:F.data.firstName,lastName:F.data.lastName||"",profilePhoto:F.data.profilePhoto||"",userName:F.data.userName,country:F.data.country||$,phone:F.data.phone||"",seller:F.data.seller||!1,admin:F.data.admin||!1,authProvider:"email",address:F.data.address,defaultpaymentmethod:F.data.defaultpaymentmethod};r(z),localStorage.setItem("userId",z.id),localStorage.setItem("user",JSON.stringify(z)),F.accessToken&&localStorage.setItem("accessToken",F.accessToken)}else{const z=F.message||F.error||"Signup failed";throw new Error(z)}}catch(L){throw console.error("Email signup failed:",L),L}finally{a(!1)}},_=async()=>{try{a(!0);const O=await PG();if(O!=null&&O.user){const D=O.user.email;if(!D)throw new Error("No email found in Google account");const J=await(await ut("GET",`/api/users/userexists/email?email=${encodeURIComponent(D)}`)).json();console.log("[loginWithGoogle] User existence check:",J),J.exists?await b(O.user,O==null?void 0:O.additionalUserInfo,!0):(l(!0),d(D),f(O.user),console.log("[loginWithGoogle] New user detected, redirecting to data collection"))}}catch(O){throw console.error("Google login failed:",O),O}finally{a(!1)}},T=async()=>{try{a(!0);const O=await DG();O!=null&&O.user&&await b(O.user,O==null?void 0:O.additionalUserInfo)}catch(O){throw console.error("Apple login failed:",O),O}finally{a(!1)}},j=async O=>{try{if(a(!0),!u)throw new Error("No pending social authentication data found");const D=$O.parse(O);let M="google";u.providerData&&u.providerData.length>0&&(u.providerData.some($=>$.providerId==="apple.com")?M="apple":u.providerData.some($=>$.providerId==="google.com")&&(M="google"));const J={email:u.email||"",firstName:D.firstName,lastName:D.lastName,userName:D.userName,type:M,profilePhoto:u.photoURL||"",country:D.country||"",phone:D.phone||"",gender:D.gender||""},U=await(await ut("POST","/api/auth/social/complete",J)).json();if(U.success){const $={id:U.data._id||U.data.id,email:U.data.email,firstName:U.data.firstName,lastName:U.data.lastName||"",profilePhoto:U.data.profilePhoto||u.photoURL||"",userName:U.data.userName,country:U.data.country||"",phone:U.data.phone||"",seller:U.data.seller||!1,admin:U.data.admin||!1,authProvider:M,address:U.data.address,defaultpaymentmethod:U.data.defaultpaymentmethod};r($),localStorage.setItem("userId",$.id),localStorage.setItem("user",JSON.stringify($)),U.accessToken&&localStorage.setItem("accessToken",U.accessToken),l(!1),d(null),f(null)}else throw new Error(U.error||"Failed to complete social authentication")}catch(D){throw console.error("Social auth completion failed:",D),D}finally{a(!1)}},S=async()=>{try{await ut("POST","/api/auth/logout",{}),await OG(),r(null),localStorage.removeItem("userId"),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),l(!1),d(null),f(null)}catch(O){console.error("Logout failed:",O),r(null),localStorage.removeItem("userId"),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),l(!1),d(null),f(null)}},A=async()=>{try{if(console.log("[checkAuth] Starting auth check..."),e)try{const D=RG(),M=new Promise(X=>setTimeout(()=>X(null),2e3)),J=await Promise.race([D,M]);if(J!=null&&J.user&&!h.current){h.current=!0;try{await b(J.user,J==null?void 0:J.additionalUserInfo)}finally{h.current=!1}return}}catch(D){console.log("[checkAuth] Firebase redirect handling skipped:",D)}else console.log("[checkAuth] Skipping Firebase redirect - Firebase not ready");const O=localStorage.getItem("user");if(console.log("[checkAuth] localStorage user:",O?"EXISTS":"NONE"),O)try{const D=JSON.parse(O);console.log("[checkAuth] Setting user from localStorage:",D.id),r(D),ut("GET","/api/auth/session").then(M=>M.json()).then(M=>{M.success||console.log("Session validation failed but keeping localStorage user")}).catch(M=>{console.log("Session validation error but keeping localStorage user:",M)})}catch(D){console.error("Failed to parse stored user data:",D),localStorage.removeItem("userId"),localStorage.removeItem("user"),r(null)}else r(null)}catch(O){console.error("Auth check failed:",O);const D=localStorage.getItem("user");if(D)try{const M=JSON.parse(D);r(M)}catch{localStorage.removeItem("userId"),localStorage.removeItem("user"),r(null)}else r(null)}finally{console.log("[checkAuth] Auth check complete, setting hasCheckedAuth = true, isLoading = false"),x.current=!0,a(!1)}},I=async()=>{try{if(!(s!=null&&s.id)){console.log("[refreshUserData] No user logged in");return}if(y.current){console.log("[refreshUserData] Already refreshing, skipping...");return}const O=Date.now();if(O-g.current<2e3){console.log("[refreshUserData] Refreshed recently, skipping...");return}y.current=!0,g.current=O,console.log("[refreshUserData] Fetching latest user data for:",s.id);const M=await(await ut("GET",`/api/address/default/address/${s.id}`)).json(),J=(M==null?void 0:M.address)||null,U=await(await ut("GET",`/api/users/paymentmethod/${s.id}`)).json(),$=(U==null?void 0:U.data)||null,L={...s,address:J||s.address,defaultpaymentmethod:$||s.defaultpaymentmethod};r(L),localStorage.setItem("user",JSON.stringify(L)),console.log("[refreshUserData] User data updated:",{hasAddress:!!L.address,hasPayment:!!L.defaultpaymentmethod})}catch(O){console.error("[refreshUserData] Failed to refresh user data:",O)}finally{y.current=!1}};p.useEffect(()=>{if(!e){console.log("[AuthProvider] Auth not configured yet - admin can still access panel to configure it"),x.current||A();return}console.log("[AuthProvider] Auth ready, setting up auth listener");const O=LG(async D=>{console.log("[Auth Listener] Auth state changed, user:",D?"EXISTS":"NONE","hasCheckedAuth:",x.current),D||r(null),x.current?(console.log("[Auth Listener] Setting isLoading = false"),a(!1)):console.log("[Auth Listener] Waiting for checkAuth to complete...")});return A(),()=>O()},[e]);const P={user:s,isLoading:i,isAuthenticated:w,pendingSocialAuth:o,pendingSocialAuthEmail:c,pendingSocialAuthData:u,login:v,emailLogin:N,emailSignup:C,loginWithGoogle:_,loginWithApple:T,completeSocialAuth:j,logout:S,checkAuth:A,refreshUserData:I};return n.jsx(VO.Provider,{value:P,children:t})}function qi(){const t=p.useContext(VO);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}var Zm=t=>t.type==="checkbox",vd=t=>t instanceof Date,Nr=t=>t==null;const HO=t=>typeof t=="object";var vn=t=>!Nr(t)&&!Array.isArray(t)&&HO(t)&&!vd(t),WO=t=>vn(t)&&t.target?Zm(t.target)?t.target.checked:t.target.value:t,AY=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,KO=(t,e)=>t.has(AY(e)),PY=t=>{const e=t.constructor&&t.constructor.prototype;return vn(e)&&e.hasOwnProperty("isPrototypeOf")},v_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Is(t){let e;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(v_&&(t instanceof Blob||r))&&(s||vn(t)))if(e=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!PY(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Is(t[i]));else return t;return e}var Mv=t=>/^\w*$/.test(t),Ss=t=>t===void 0,Lv=t=>Array.isArray(t)?t.filter(Boolean):[],b_=t=>Lv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ue=(t,e,s)=>{if(!e||!vn(t))return s;const r=(Mv(e)?[e]:b_(e)).reduce((i,a)=>Nr(i)?i:i[a],t);return Ss(r)||r===t?Ss(t[e])?s:t[e]:r},zr=t=>typeof t=="boolean",as=(t,e,s)=>{let r=-1;const i=Mv(e)?[e]:b_(e),a=i.length,o=a-1;for(;++r<a;){const l=i[r];let c=s;if(r!==o){const d=t[l];c=vn(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const Py={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ni={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$o={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},w_=qe.createContext(null);w_.displayName="HookFormContext";const Xm=()=>qe.useContext(w_),IY=t=>{const{children:e,...s}=t;return qe.createElement(w_.Provider,{value:s},e)};var GO=(t,e,s,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Ni.all&&(e._proxyFormState[o]=!r||Ni.all),s&&(s[o]=!0),t[o]}});return i};const Fv=typeof window<"u"?qe.useLayoutEffect:qe.useEffect;function RY(t){const e=Xm(),{control:s=e.control,disabled:r,name:i,exact:a}=t||{},[o,l]=qe.useState(s._formState),c=qe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Fv(()=>s._subscribe({name:i,formState:c.current,exact:a,callback:d=>{!r&&l({...s._formState,...d})}}),[i,r,a]),qe.useEffect(()=>{c.current.isValid&&s._setValid(!0)},[s]),qe.useMemo(()=>GO(o,s,c.current,!1),[o,s])}var Hr=t=>typeof t=="string",Fj=(t,e,s,r,i)=>Hr(t)?(r&&e.watch.add(t),Ue(s,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Ue(s,a))):(r&&(e.watchAll=!0),s),$j=t=>Nr(t)||!HO(t);function la(t,e,s=new WeakSet){if($j(t)||$j(e))return t===e;if(vd(t)&&vd(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(s.has(t)||s.has(e))return!0;s.add(t),s.add(e);for(const a of r){const o=t[a];if(!i.includes(a))return!1;if(a!=="ref"){const l=e[a];if(vd(o)&&vd(l)||vn(o)&&vn(l)||Array.isArray(o)&&Array.isArray(l)?!la(o,l,s):o!==l)return!1}}return!0}function OY(t){const e=Xm(),{control:s=e.control,name:r,defaultValue:i,disabled:a,exact:o,compute:l}=t||{},c=qe.useRef(i),d=qe.useRef(l),u=qe.useRef(void 0),f=qe.useRef(s),h=qe.useRef(r);d.current=l;const[x,g]=qe.useState(()=>{const C=s._getWatch(r,c.current);return d.current?d.current(C):C}),y=qe.useCallback(C=>{const _=Fj(r,s._names,C||s._formValues,!1,c.current);return d.current?d.current(_):_},[s._formValues,s._names,r]),w=qe.useCallback(C=>{if(!a){const _=Fj(r,s._names,C||s._formValues,!1,c.current);if(d.current){const T=d.current(_);la(T,u.current)||(g(T),u.current=T)}else g(_)}},[s._formValues,s._names,a,r]);Fv(()=>((f.current!==s||!la(h.current,r))&&(f.current=s,h.current=r,w()),s._subscribe({name:r,formState:{values:!0},exact:o,callback:C=>{w(C.values)}})),[s,o,r,w]),qe.useEffect(()=>s._removeUnmounted());const b=f.current!==s,v=h.current,N=qe.useMemo(()=>{if(a)return null;const C=!b&&!la(v,r);return b||C?y():null},[a,b,r,v,y]);return N!==null?N:x}function DY(t){const e=Xm(),{name:s,disabled:r,control:i=e.control,shouldUnregister:a,defaultValue:o}=t,l=KO(i._names.array,s),c=qe.useMemo(()=>Ue(i._formValues,s,Ue(i._defaultValues,s,o)),[i,s,o]),d=OY({control:i,name:s,defaultValue:c,exact:!0}),u=RY({control:i,name:s,exact:!0}),f=qe.useRef(t),h=qe.useRef(void 0),x=qe.useRef(i.register(s,{...t.rules,value:d,...zr(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=qe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ue(u.errors,s)},isDirty:{enumerable:!0,get:()=>!!Ue(u.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Ue(u.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Ue(u.validatingFields,s)},error:{enumerable:!0,get:()=>Ue(u.errors,s)}}),[u,s]),y=qe.useCallback(N=>x.current.onChange({target:{value:WO(N),name:s},type:Py.CHANGE}),[s]),w=qe.useCallback(()=>x.current.onBlur({target:{value:Ue(i._formValues,s),name:s},type:Py.BLUR}),[s,i._formValues]),b=qe.useCallback(N=>{const C=Ue(i._fields,s);C&&N&&(C._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:_=>N.setCustomValidity(_),reportValidity:()=>N.reportValidity()})},[i._fields,s]),v=qe.useMemo(()=>({name:s,value:d,...zr(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:y,onBlur:w,ref:b}),[s,r,u.disabled,y,w,b,d]);return qe.useEffect(()=>{const N=i._options.shouldUnregister||a,C=h.current;C&&C!==s&&!l&&i.unregister(C),i.register(s,{...f.current.rules,...zr(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(T,j)=>{const S=Ue(i._fields,T);S&&S._f&&(S._f.mount=j)};if(_(s,!0),N){const T=Is(Ue(i._options.defaultValues,s,f.current.defaultValue));as(i._defaultValues,s,T),Ss(Ue(i._formValues,s))&&as(i._formValues,s,T)}return!l&&i.register(s),h.current=s,()=>{(l?N&&!i._state.action:N)?i.unregister(s):_(s,!1)}},[s,i,l,a]),qe.useEffect(()=>{i._setDisabledField({disabled:r,name:s})},[r,s,i]),qe.useMemo(()=>({field:v,formState:u,fieldState:g}),[v,u,g])}const MY=t=>t.render(DY(t));var YO=(t,e,s,r,i)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:i||!0}}:{},kr=t=>Array.isArray(t)?t:[t],iE=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}};function QO(t,e){const s={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],a=e[r];if(i&&vn(i)&&a){const o=QO(i,a);vn(o)&&(s[r]=o)}else t[r]&&(s[r]=a)}return s}var Yn=t=>vn(t)&&!Object.keys(t).length,j_=t=>t.type==="file",ca=t=>typeof t=="function",Iy=t=>{if(!v_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ZO=t=>t.type==="select-multiple",N_=t=>t.type==="radio",LY=t=>N_(t)||Zm(t),pb=t=>Iy(t)&&t.isConnected;function FY(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=Ss(t)?r++:t[e[r++]];return t}function $Y(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ss(t[e]))return!1;return!0}function an(t,e){const s=Array.isArray(e)?e:Mv(e)?[e]:b_(e),r=s.length===1?t:FY(t,s),i=s.length-1,a=s[i];return r&&delete r[a],i!==0&&(vn(r)&&Yn(r)||Array.isArray(r)&&$Y(r))&&an(t,s.slice(0,-1)),t}var UY=t=>{for(const e in t)if(ca(t[e]))return!0;return!1};function XO(t){return Array.isArray(t)||vn(t)&&!UY(t)}function Uj(t,e={}){for(const s in t)XO(t[s])?(e[s]=Array.isArray(t[s])?[]:{},Uj(t[s],e[s])):Ss(t[s])||(e[s]=!0);return e}function Wu(t,e,s){s||(s=Uj(e));for(const r in t)XO(t[r])?Ss(e)||$j(s[r])?s[r]=Uj(t[r],Array.isArray(t[r])?[]:{}):Wu(t[r],Nr(e)?{}:e[r],s[r]):s[r]=!la(t[r],e[r]);return s}const aE={value:!1,isValid:!1},oE={value:!0,isValid:!0};var JO=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ss(t[0].attributes.value)?Ss(t[0].value)||t[0].value===""?oE:{value:t[0].value,isValid:!0}:oE:aE}return aE},e5=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>Ss(t)?t:e?t===""?NaN:t&&+t:s&&Hr(t)?new Date(t):r?r(t):t;const lE={isValid:!1,value:null};var t5=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,lE):lE;function cE(t){const e=t.ref;return j_(e)?e.files:N_(e)?t5(t.refs).value:ZO(e)?[...e.selectedOptions].map(({value:s})=>s):Zm(e)?JO(t.refs).value:e5(Ss(e.value)?t.ref.value:e.value,t)}var zY=(t,e,s,r)=>{const i={};for(const a of t){const o=Ue(e,a);o&&as(i,a,o._f)}return{criteriaMode:s,names:[...t],fields:i,shouldUseNativeValidation:r}},Ry=t=>t instanceof RegExp,lp=t=>Ss(t)?t:Ry(t)?t.source:vn(t)?Ry(t.value)?t.value.source:t.value:t,uh=t=>({isOnSubmit:!t||t===Ni.onSubmit,isOnBlur:t===Ni.onBlur,isOnChange:t===Ni.onChange,isOnAll:t===Ni.all,isOnTouch:t===Ni.onTouched});const dE="AsyncFunction";var BY=t=>!!t&&!!t.validate&&!!(ca(t.validate)&&t.validate.constructor.name===dE||vn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===dE)),qY=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),zj=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ch=(t,e,s,r)=>{for(const i of s||Object.keys(t)){const a=Ue(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ch(l,e))break}else if(vn(l)&&Ch(l,e))break}}};function uE(t,e,s){const r=Ue(t,s);if(r||Mv(s))return{error:r,name:s};const i=s.split(".");for(;i.length;){const a=i.join("."),o=Ue(e,a),l=Ue(t,a);if(o&&!Array.isArray(o)&&s!==a)return{name:s};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};i.pop()}return{name:s}}var VY=(t,e,s,r)=>{s(t);const{name:i,...a}=t;return Yn(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Ni.all))},HY=(t,e,s)=>!t||!e||t===e||kr(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r))),WY=(t,e,s,r,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(e||t):(s?r.isOnBlur:i.isOnBlur)?!t:(s?r.isOnChange:i.isOnChange)?t:!0,KY=(t,e)=>!Lv(Ue(t,e)).length&&an(t,e),s5=(t,e,s)=>{const r=kr(Ue(t,s));return as(r,"root",e[s]),as(t,s,r),t};function hE(t,e,s="validate"){if(Hr(t)||Array.isArray(t)&&t.every(Hr)||zr(t)&&!t)return{type:s,message:Hr(t)?t:"",ref:e}}var $u=t=>vn(t)&&!Ry(t)?t:{value:t,message:""},Bj=async(t,e,s,r,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:f,max:h,pattern:x,validate:g,name:y,valueAsNumber:w,mount:b}=t._f,v=Ue(s,y);if(!b||e.has(y))return{};const N=l?l[0]:o,C=O=>{i&&N.reportValidity&&(N.setCustomValidity(zr(O)?"":O||""),N.reportValidity())},_={},T=N_(o),j=Zm(o),S=T||j,A=(w||j_(o))&&Ss(o.value)&&Ss(v)||Iy(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,I=YO.bind(null,y,r,_),P=(O,D,M,J=$o.maxLength,X=$o.minLength)=>{const U=O?D:M;_[y]={type:O?J:X,message:U,ref:o,...I(O?J:X,U)}};if(a?!Array.isArray(v)||!v.length:c&&(!S&&(A||Nr(v))||zr(v)&&!v||j&&!JO(l).isValid||T&&!t5(l).isValid)){const{value:O,message:D}=Hr(c)?{value:!!c,message:c}:$u(c);if(O&&(_[y]={type:$o.required,message:D,ref:N,...I($o.required,D)},!r))return C(D),_}if(!A&&(!Nr(f)||!Nr(h))){let O,D;const M=$u(h),J=$u(f);if(!Nr(v)&&!isNaN(v)){const X=o.valueAsNumber||v&&+v;Nr(M.value)||(O=X>M.value),Nr(J.value)||(D=X<J.value)}else{const X=o.valueAsDate||new Date(v),U=te=>new Date(new Date().toDateString()+" "+te),$=o.type=="time",L=o.type=="week";Hr(M.value)&&v&&(O=$?U(v)>U(M.value):L?v>M.value:X>new Date(M.value)),Hr(J.value)&&v&&(D=$?U(v)<U(J.value):L?v<J.value:X<new Date(J.value))}if((O||D)&&(P(!!O,M.message,J.message,$o.max,$o.min),!r))return C(_[y].message),_}if((d||u)&&!A&&(Hr(v)||a&&Array.isArray(v))){const O=$u(d),D=$u(u),M=!Nr(O.value)&&v.length>+O.value,J=!Nr(D.value)&&v.length<+D.value;if((M||J)&&(P(M,O.message,D.message),!r))return C(_[y].message),_}if(x&&!A&&Hr(v)){const{value:O,message:D}=$u(x);if(Ry(O)&&!v.match(O)&&(_[y]={type:$o.pattern,message:D,ref:o,...I($o.pattern,D)},!r))return C(D),_}if(g){if(ca(g)){const O=await g(v,s),D=hE(O,N);if(D&&(_[y]={...D,...I($o.validate,D.message)},!r))return C(D.message),_}else if(vn(g)){let O={};for(const D in g){if(!Yn(O)&&!r)break;const M=hE(await g[D](v,s),N,D);M&&(O={...M,...I(D,M.message)},C(M.message),r&&(_[y]=O))}if(!Yn(O)&&(_[y]={ref:N,...O},!r))return _}}return C(!0),_};const GY={mode:Ni.onSubmit,reValidateMode:Ni.onChange,shouldFocusError:!0};function YY(t={}){let e={...GY,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:ca(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=vn(e.defaultValues)||vn(e.values)?Is(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Is(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const h={array:iE(),state:iE()},x=e.criteriaMode===Ni.all,g=W=>ae=>{clearTimeout(d),d=setTimeout(W,ae)},y=async W=>{if(!e.disabled&&(u.isValid||f.isValid||W)){const ae=e.resolver?Yn((await j()).errors):await A(r,!0);ae!==s.isValid&&h.state.next({isValid:ae})}},w=(W,ae)=>{!e.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((W||Array.from(l.mount)).forEach(ge=>{ge&&(ae?as(s.validatingFields,ge,ae):an(s.validatingFields,ge))}),h.state.next({validatingFields:s.validatingFields,isValidating:!Yn(s.validatingFields)}))},b=(W,ae=[],ge,Ae,Y=!0,je=!0)=>{if(Ae&&ge&&!e.disabled){if(o.action=!0,je&&Array.isArray(Ue(r,W))){const ze=ge(Ue(r,W),Ae.argA,Ae.argB);Y&&as(r,W,ze)}if(je&&Array.isArray(Ue(s.errors,W))){const ze=ge(Ue(s.errors,W),Ae.argA,Ae.argB);Y&&as(s.errors,W,ze),KY(s.errors,W)}if((u.touchedFields||f.touchedFields)&&je&&Array.isArray(Ue(s.touchedFields,W))){const ze=ge(Ue(s.touchedFields,W),Ae.argA,Ae.argB);Y&&as(s.touchedFields,W,ze)}(u.dirtyFields||f.dirtyFields)&&(s.dirtyFields=Wu(i,a)),h.state.next({name:W,isDirty:P(W,ae),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else as(a,W,ae)},v=(W,ae)=>{as(s.errors,W,ae),h.state.next({errors:s.errors})},N=W=>{s.errors=W,h.state.next({errors:s.errors,isValid:!1})},C=(W,ae,ge,Ae)=>{const Y=Ue(r,W);if(Y){const je=Ue(a,W,Ss(ge)?Ue(i,W):ge);Ss(je)||Ae&&Ae.defaultChecked||ae?as(a,W,ae?je:cE(Y._f)):M(W,je),o.mount&&y()}},_=(W,ae,ge,Ae,Y)=>{let je=!1,ze=!1;const pt={name:W};if(!e.disabled){if(!ge||Ae){(u.isDirty||f.isDirty)&&(ze=s.isDirty,s.isDirty=pt.isDirty=P(),je=ze!==pt.isDirty);const mt=la(Ue(i,W),ae);ze=!!Ue(s.dirtyFields,W),mt?an(s.dirtyFields,W):as(s.dirtyFields,W,!0),pt.dirtyFields=s.dirtyFields,je=je||(u.dirtyFields||f.dirtyFields)&&ze!==!mt}if(ge){const mt=Ue(s.touchedFields,W);mt||(as(s.touchedFields,W,ge),pt.touchedFields=s.touchedFields,je=je||(u.touchedFields||f.touchedFields)&&mt!==ge)}je&&Y&&h.state.next(pt)}return je?pt:{}},T=(W,ae,ge,Ae)=>{const Y=Ue(s.errors,W),je=(u.isValid||f.isValid)&&zr(ae)&&s.isValid!==ae;if(e.delayError&&ge?(c=g(()=>v(W,ge)),c(e.delayError)):(clearTimeout(d),c=null,ge?as(s.errors,W,ge):an(s.errors,W)),(ge?!la(Y,ge):Y)||!Yn(Ae)||je){const ze={...Ae,...je&&zr(ae)?{isValid:ae}:{},errors:s.errors,name:W};s={...s,...ze},h.state.next(ze)}},j=async W=>{w(W,!0);const ae=await e.resolver(a,e.context,zY(W||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(W),ae},S=async W=>{const{errors:ae}=await j(W);if(W)for(const ge of W){const Ae=Ue(ae,ge);Ae?as(s.errors,ge,Ae):an(s.errors,ge)}else s.errors=ae;return ae},A=async(W,ae,ge={valid:!0})=>{for(const Ae in W){const Y=W[Ae];if(Y){const{_f:je,...ze}=Y;if(je){const pt=l.array.has(je.name),mt=Y._f&&BY(Y._f);mt&&u.validatingFields&&w([je.name],!0);const os=await Bj(Y,l.disabled,a,x,e.shouldUseNativeValidation&&!ae,pt);if(mt&&u.validatingFields&&w([je.name]),os[je.name]&&(ge.valid=!1,ae))break;!ae&&(Ue(os,je.name)?pt?s5(s.errors,os,je.name):as(s.errors,je.name,os[je.name]):an(s.errors,je.name))}!Yn(ze)&&await A(ze,ae,ge)}}return ge.valid},I=()=>{for(const W of l.unMount){const ae=Ue(r,W);ae&&(ae._f.refs?ae._f.refs.every(ge=>!pb(ge)):!pb(ae._f.ref))&&K(W)}l.unMount=new Set},P=(W,ae)=>!e.disabled&&(W&&ae&&as(a,W,ae),!la(te(),i)),O=(W,ae,ge)=>Fj(W,l,{...o.mount?a:Ss(ae)?i:Hr(W)?{[W]:ae}:ae},ge,ae),D=W=>Lv(Ue(o.mount?a:i,W,e.shouldUnregister?Ue(i,W,[]):[])),M=(W,ae,ge={})=>{const Ae=Ue(r,W);let Y=ae;if(Ae){const je=Ae._f;je&&(!je.disabled&&as(a,W,e5(ae,je)),Y=Iy(je.ref)&&Nr(ae)?"":ae,ZO(je.ref)?[...je.ref.options].forEach(ze=>ze.selected=Y.includes(ze.value)):je.refs?Zm(je.ref)?je.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Y)?ze.checked=!!Y.find(pt=>pt===ze.value):ze.checked=Y===ze.value||!!Y)}):je.refs.forEach(ze=>ze.checked=ze.value===Y):j_(je.ref)?je.ref.value="":(je.ref.value=Y,je.ref.type||h.state.next({name:W,values:Is(a)})))}(ge.shouldDirty||ge.shouldTouch)&&_(W,Y,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&L(W)},J=(W,ae,ge)=>{for(const Ae in ae){if(!ae.hasOwnProperty(Ae))return;const Y=ae[Ae],je=W+"."+Ae,ze=Ue(r,je);(l.array.has(W)||vn(Y)||ze&&!ze._f)&&!vd(Y)?J(je,Y,ge):M(je,Y,ge)}},X=(W,ae,ge={})=>{const Ae=Ue(r,W),Y=l.array.has(W),je=Is(ae);as(a,W,je),Y?(h.array.next({name:W,values:Is(a)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&ge.shouldDirty&&h.state.next({name:W,dirtyFields:Wu(i,a),isDirty:P(W,je)})):Ae&&!Ae._f&&!Nr(je)?J(W,je,ge):M(W,je,ge),zj(W,l)&&h.state.next({...s,name:W}),h.state.next({name:o.mount?W:void 0,values:Is(a)})},U=async W=>{o.mount=!0;const ae=W.target;let ge=ae.name,Ae=!0;const Y=Ue(r,ge),je=mt=>{Ae=Number.isNaN(mt)||vd(mt)&&isNaN(mt.getTime())||la(mt,Ue(a,ge,mt))},ze=uh(e.mode),pt=uh(e.reValidateMode);if(Y){let mt,os;const rs=ae.type?cE(Y._f):WO(W),bs=W.type===Py.BLUR||W.type===Py.FOCUS_OUT,kn=!qY(Y._f)&&!e.resolver&&!Ue(s.errors,ge)&&!Y._f.deps||WY(bs,Ue(s.touchedFields,ge),s.isSubmitted,pt,ze),Xe=zj(ge,l,bs);as(a,ge,rs),bs?(!ae||!ae.readOnly)&&(Y._f.onBlur&&Y._f.onBlur(W),c&&c(0)):Y._f.onChange&&Y._f.onChange(W);const Rt=_(ge,rs,bs),Ot=!Yn(Rt)||Xe;if(!bs&&h.state.next({name:ge,type:W.type,values:Is(a)}),kn)return(u.isValid||f.isValid)&&(e.mode==="onBlur"?bs&&y():bs||y()),Ot&&h.state.next({name:ge,...Xe?{}:Rt});if(!bs&&Xe&&h.state.next({...s}),e.resolver){const{errors:Tt}=await j([ge]);if(je(rs),Ae){const St=uE(s.errors,r,ge),ts=uE(Tt,r,St.name||ge);mt=ts.error,ge=ts.name,os=Yn(Tt)}}else w([ge],!0),mt=(await Bj(Y,l.disabled,a,x,e.shouldUseNativeValidation))[ge],w([ge]),je(rs),Ae&&(mt?os=!1:(u.isValid||f.isValid)&&(os=await A(r,!0)));Ae&&(Y._f.deps&&(!Array.isArray(Y._f.deps)||Y._f.deps.length>0)&&L(Y._f.deps),T(ge,os,mt,Rt))}},$=(W,ae)=>{if(Ue(s.errors,ae)&&W.focus)return W.focus(),1},L=async(W,ae={})=>{let ge,Ae;const Y=kr(W);if(e.resolver){const je=await S(Ss(W)?W:Y);ge=Yn(je),Ae=W?!Y.some(ze=>Ue(je,ze)):ge}else W?(Ae=(await Promise.all(Y.map(async je=>{const ze=Ue(r,je);return await A(ze&&ze._f?{[je]:ze}:ze)}))).every(Boolean),!(!Ae&&!s.isValid)&&y()):Ae=ge=await A(r);return h.state.next({...!Hr(W)||(u.isValid||f.isValid)&&ge!==s.isValid?{}:{name:W},...e.resolver||!W?{isValid:ge}:{},errors:s.errors}),ae.shouldFocus&&!Ae&&Ch(r,$,W?Y:l.mount),Ae},te=(W,ae)=>{let ge={...o.mount?a:i};return ae&&(ge=QO(ae.dirtyFields?s.dirtyFields:s.touchedFields,ge)),Ss(W)?ge:Hr(W)?Ue(ge,W):W.map(Ae=>Ue(ge,Ae))},F=(W,ae)=>({invalid:!!Ue((ae||s).errors,W),isDirty:!!Ue((ae||s).dirtyFields,W),error:Ue((ae||s).errors,W),isValidating:!!Ue(s.validatingFields,W),isTouched:!!Ue((ae||s).touchedFields,W)}),z=W=>{W&&kr(W).forEach(ae=>an(s.errors,ae)),h.state.next({errors:W?s.errors:{}})},pe=(W,ae,ge)=>{const Ae=(Ue(r,W,{_f:{}})._f||{}).ref,Y=Ue(s.errors,W)||{},{ref:je,message:ze,type:pt,...mt}=Y;as(s.errors,W,{...mt,...ae,ref:Ae}),h.state.next({name:W,errors:s.errors,isValid:!1}),ge&&ge.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},xe=(W,ae)=>ca(W)?h.state.subscribe({next:ge=>"values"in ge&&W(O(void 0,ae),ge)}):O(W,ae,!0),_e=W=>h.state.subscribe({next:ae=>{HY(W.name,ae.name,W.exact)&&VY(ae,W.formState||u,Ne,W.reRenderRoot)&&W.callback({values:{...a},...s,...ae,defaultValues:i})}}).unsubscribe,Me=W=>(o.mount=!0,f={...f,...W.formState},_e({...W,formState:f})),K=(W,ae={})=>{for(const ge of W?kr(W):l.mount)l.mount.delete(ge),l.array.delete(ge),ae.keepValue||(an(r,ge),an(a,ge)),!ae.keepError&&an(s.errors,ge),!ae.keepDirty&&an(s.dirtyFields,ge),!ae.keepTouched&&an(s.touchedFields,ge),!ae.keepIsValidating&&an(s.validatingFields,ge),!e.shouldUnregister&&!ae.keepDefaultValue&&an(i,ge);h.state.next({values:Is(a)}),h.state.next({...s,...ae.keepDirty?{isDirty:P()}:{}}),!ae.keepIsValid&&y()},Q=({disabled:W,name:ae})=>{(zr(W)&&o.mount||W||l.disabled.has(ae))&&(W?l.disabled.add(ae):l.disabled.delete(ae))},se=(W,ae={})=>{let ge=Ue(r,W);const Ae=zr(ae.disabled)||zr(e.disabled);return as(r,W,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:W}},name:W,mount:!0,...ae}}),l.mount.add(W),ge?Q({disabled:zr(ae.disabled)?ae.disabled:e.disabled,name:W}):C(W,!0,ae.value),{...Ae?{disabled:ae.disabled||e.disabled}:{},...e.progressive?{required:!!ae.required,min:lp(ae.min),max:lp(ae.max),minLength:lp(ae.minLength),maxLength:lp(ae.maxLength),pattern:lp(ae.pattern)}:{},name:W,onChange:U,onBlur:U,ref:Y=>{if(Y){se(W,ae),ge=Ue(r,W);const je=Ss(Y.value)&&Y.querySelectorAll&&Y.querySelectorAll("input,select,textarea")[0]||Y,ze=LY(je),pt=ge._f.refs||[];if(ze?pt.find(mt=>mt===je):je===ge._f.ref)return;as(r,W,{_f:{...ge._f,...ze?{refs:[...pt.filter(pb),je,...Array.isArray(Ue(i,W))?[{}]:[]],ref:{type:je.type,name:W}}:{ref:je}}}),C(W,!1,void 0,je)}else ge=Ue(r,W,{}),ge._f&&(ge._f.mount=!1),(e.shouldUnregister||ae.shouldUnregister)&&!(KO(l.array,W)&&o.action)&&l.unMount.add(W)}}},ye=()=>e.shouldFocusError&&Ch(r,$,l.mount),B=W=>{zr(W)&&(h.state.next({disabled:W}),Ch(r,(ae,ge)=>{const Ae=Ue(r,ge);Ae&&(ae.disabled=Ae._f.disabled||W,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Y=>{Y.disabled=Ae._f.disabled||W}))},0,!1))},ie=(W,ae)=>async ge=>{let Ae;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let Y=Is(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:je,values:ze}=await j();s.errors=je,Y=Is(ze)}else await A(r);if(l.disabled.size)for(const je of l.disabled)an(Y,je);if(an(s.errors,"root"),Yn(s.errors)){h.state.next({errors:{}});try{await W(Y,ge)}catch(je){Ae=je}}else ae&&await ae({...s.errors},ge),ye(),setTimeout(ye);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yn(s.errors)&&!Ae,submitCount:s.submitCount+1,errors:s.errors}),Ae)throw Ae},ce=(W,ae={})=>{Ue(r,W)&&(Ss(ae.defaultValue)?X(W,Is(Ue(i,W))):(X(W,ae.defaultValue),as(i,W,Is(ae.defaultValue))),ae.keepTouched||an(s.touchedFields,W),ae.keepDirty||(an(s.dirtyFields,W),s.isDirty=ae.defaultValue?P(W,Is(Ue(i,W))):P()),ae.keepError||(an(s.errors,W),u.isValid&&y()),h.state.next({...s}))},oe=(W,ae={})=>{const ge=W?Is(W):i,Ae=Is(ge),Y=Yn(W),je=Y?i:Ae;if(ae.keepDefaultValues||(i=ge),!ae.keepValues){if(ae.keepDirtyValues){const ze=new Set([...l.mount,...Object.keys(Wu(i,a))]);for(const pt of Array.from(ze))Ue(s.dirtyFields,pt)?as(je,pt,Ue(a,pt)):X(pt,Ue(je,pt))}else{if(v_&&Ss(W))for(const ze of l.mount){const pt=Ue(r,ze);if(pt&&pt._f){const mt=Array.isArray(pt._f.refs)?pt._f.refs[0]:pt._f.ref;if(Iy(mt)){const os=mt.closest("form");if(os){os.reset();break}}}}if(ae.keepFieldsRef)for(const ze of l.mount)X(ze,Ue(je,ze));else r={}}a=e.shouldUnregister?ae.keepDefaultValues?Is(i):{}:Is(je),h.array.next({values:{...je}}),h.state.next({values:{...je}})}l={mount:ae.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues||!e.shouldUnregister&&!Yn(je),o.watch=!!e.shouldUnregister,h.state.next({submitCount:ae.keepSubmitCount?s.submitCount:0,isDirty:Y?!1:ae.keepDirty?s.isDirty:!!(ae.keepDefaultValues&&!la(W,i)),isSubmitted:ae.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Y?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?Wu(i,a):s.dirtyFields:ae.keepDefaultValues&&W?Wu(i,W):ae.keepDirty?s.dirtyFields:{},touchedFields:ae.keepTouched?s.touchedFields:{},errors:ae.keepErrors?s.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Z=(W,ae)=>oe(ca(W)?W(a):W,ae),he=(W,ae={})=>{const ge=Ue(r,W),Ae=ge&&ge._f;if(Ae){const Y=Ae.refs?Ae.refs[0]:Ae.ref;Y.focus&&(Y.focus(),ae.shouldSelect&&ca(Y.select)&&Y.select())}},Ne=W=>{s={...s,...W}},$e={control:{register:se,unregister:K,getFieldState:F,handleSubmit:ie,setError:pe,_subscribe:_e,_runSchema:j,_focusError:ye,_getWatch:O,_getDirty:P,_setValid:y,_setFieldArray:b,_setDisabledField:Q,_setErrors:N,_getFieldArray:D,_reset:oe,_resetDefaultValues:()=>ca(e.defaultValues)&&e.defaultValues().then(W=>{Z(W,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:B,_subjects:h,_proxyFormState:u,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(W){o=W},get _defaultValues(){return i},get _names(){return l},set _names(W){l=W},get _formState(){return s},get _options(){return e},set _options(W){e={...e,...W}}},subscribe:Me,trigger:L,register:se,handleSubmit:ie,watch:xe,setValue:X,getValues:te,reset:Z,resetField:ce,clearErrors:z,unregister:K,setError:pe,setFocus:he,getFieldState:F};return{...$e,formControl:$e}}var Dl=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const s=(Math.random()*16+t)%16|0;return(e=="x"?s:s&3|8).toString(16)})},mb=(t,e,s={})=>s.shouldFocus||Ss(s.shouldFocus)?s.focusName||`${t}.${Ss(s.focusIndex)?e:s.focusIndex}.`:"",gb=(t,e)=>[...t,...kr(e)],xb=t=>Array.isArray(t)?t.map(()=>{}):void 0;function yb(t,e,s){return[...t.slice(0,e),...kr(s),...t.slice(e)]}var vb=(t,e,s)=>Array.isArray(t)?(Ss(t[s])&&(t[s]=void 0),t.splice(s,0,t.splice(e,1)[0]),t):[],bb=(t,e)=>[...kr(e),...kr(t)];function QY(t,e){let s=0;const r=[...t];for(const i of e)r.splice(i-s,1),s++;return Lv(r).length?r:[]}var wb=(t,e)=>Ss(e)?[]:QY(t,kr(e).sort((s,r)=>s-r)),jb=(t,e,s)=>{[t[e],t[s]]=[t[s],t[e]]},fE=(t,e,s)=>(t[e]=s,t);function Jm(t){const e=Xm(),{control:s=e.control,name:r,keyName:i="id",shouldUnregister:a,rules:o}=t,[l,c]=qe.useState(s._getFieldArray(r)),d=qe.useRef(s._getFieldArray(r).map(Dl)),u=qe.useRef(!1);s._names.array.add(r),qe.useMemo(()=>o&&l.length>=0&&s.register(r,o),[s,r,l.length,o]),Fv(()=>s._subjects.array.subscribe({next:({values:C,name:_})=>{if(_===r||!_){const T=Ue(C,r);Array.isArray(T)&&(c(T),d.current=T.map(Dl))}}}).unsubscribe,[s,r]);const f=qe.useCallback(C=>{u.current=!0,s._setFieldArray(r,C)},[s,r]),h=(C,_)=>{const T=kr(Is(C)),j=gb(s._getFieldArray(r),T);s._names.focus=mb(r,j.length-1,_),d.current=gb(d.current,T.map(Dl)),f(j),c(j),s._setFieldArray(r,j,gb,{argA:xb(C)})},x=(C,_)=>{const T=kr(Is(C)),j=bb(s._getFieldArray(r),T);s._names.focus=mb(r,0,_),d.current=bb(d.current,T.map(Dl)),f(j),c(j),s._setFieldArray(r,j,bb,{argA:xb(C)})},g=C=>{const _=wb(s._getFieldArray(r),C);d.current=wb(d.current,C),f(_),c(_),!Array.isArray(Ue(s._fields,r))&&as(s._fields,r,void 0),s._setFieldArray(r,_,wb,{argA:C})},y=(C,_,T)=>{const j=kr(Is(_)),S=yb(s._getFieldArray(r),C,j);s._names.focus=mb(r,C,T),d.current=yb(d.current,C,j.map(Dl)),f(S),c(S),s._setFieldArray(r,S,yb,{argA:C,argB:xb(_)})},w=(C,_)=>{const T=s._getFieldArray(r);jb(T,C,_),jb(d.current,C,_),f(T),c(T),s._setFieldArray(r,T,jb,{argA:C,argB:_},!1)},b=(C,_)=>{const T=s._getFieldArray(r);vb(T,C,_),vb(d.current,C,_),f(T),c(T),s._setFieldArray(r,T,vb,{argA:C,argB:_},!1)},v=(C,_)=>{const T=Is(_),j=fE(s._getFieldArray(r),C,T);d.current=[...j].map((S,A)=>!S||A===C?Dl():d.current[A]),f(j),c([...j]),s._setFieldArray(r,j,fE,{argA:C,argB:T},!0,!1)},N=C=>{const _=kr(Is(C));d.current=_.map(Dl),f([..._]),c([..._]),s._setFieldArray(r,[..._],T=>T,{},!0,!1)};return qe.useEffect(()=>{if(s._state.action=!1,zj(r,s._names)&&s._subjects.state.next({...s._formState}),u.current&&(!uh(s._options.mode).isOnSubmit||s._formState.isSubmitted)&&!uh(s._options.reValidateMode).isOnSubmit)if(s._options.resolver)s._runSchema([r]).then(C=>{const _=Ue(C.errors,r),T=Ue(s._formState.errors,r);(T?!_&&T.type||_&&(T.type!==_.type||T.message!==_.message):_&&_.type)&&(_?as(s._formState.errors,r,_):an(s._formState.errors,r),s._subjects.state.next({errors:s._formState.errors}))});else{const C=Ue(s._fields,r);C&&C._f&&!(uh(s._options.reValidateMode).isOnSubmit&&uh(s._options.mode).isOnSubmit)&&Bj(C,s._names.disabled,s._formValues,s._options.criteriaMode===Ni.all,s._options.shouldUseNativeValidation,!0).then(_=>!Yn(_)&&s._subjects.state.next({errors:s5(s._formState.errors,_,r)}))}s._subjects.state.next({name:r,values:Is(s._formValues)}),s._names.focus&&Ch(s._fields,(C,_)=>{if(s._names.focus&&_.startsWith(s._names.focus)&&C.focus)return C.focus(),1}),s._names.focus="",s._setValid(),u.current=!1},[l,r,s]),qe.useEffect(()=>(!Ue(s._formValues,r)&&s._setFieldArray(r),()=>{const C=(_,T)=>{const j=Ue(s._fields,_);j&&j._f&&(j._f.mount=T)};s._options.shouldUnregister||a?s.unregister(r):C(r,!1)}),[r,s,i,a]),{swap:qe.useCallback(w,[f,r,s]),move:qe.useCallback(b,[f,r,s]),prepend:qe.useCallback(x,[f,r,s]),append:qe.useCallback(h,[f,r,s]),remove:qe.useCallback(g,[f,r,s]),insert:qe.useCallback(y,[f,r,s]),update:qe.useCallback(v,[f,r,s]),replace:qe.useCallback(N,[f,r,s]),fields:qe.useMemo(()=>l.map((C,_)=>({...C,[i]:d.current[_]||Dl()})),[l,i])}}function fu(t={}){const e=qe.useRef(void 0),s=qe.useRef(void 0),[r,i]=qe.useState({isDirty:!1,isValidating:!1,isLoading:ca(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ca(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!ca(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=YY(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,Fv(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),qe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),qe.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),qe.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),qe.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),qe.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),qe.useEffect(()=>{t.values&&!la(t.values,s.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),s.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),qe.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=GO(r,a),e.current}const pE=(t,e,s)=>{if(t&&"reportValidity"in t){const r=Ue(s,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},n5=(t,e)=>{for(const s in e.fields){const r=e.fields[s];r&&r.ref&&"reportValidity"in r.ref?pE(r.ref,s,t):r.refs&&r.refs.forEach(i=>pE(i,s,t))}},ZY=(t,e)=>{e.shouldUseNativeValidation&&n5(t,e);const s={};for(const r in t){const i=Ue(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(XY(e.names||Object.keys(t),r)){const o=Object.assign({},Ue(s,r));as(o,"root",a),as(s,r,o)}else as(s,r,a)}return s},XY=(t,e)=>t.some(s=>s.startsWith(e+"."));var JY=function(t,e){for(var s={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!s[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];s[o]={message:l.message,type:l.code}}else s[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return t.push(f)})}),e){var c=s[o].types,d=c&&c[r.code];s[o]=YO(o,e,s,i,d?[].concat(d,r.message):r.message)}t.shift()}return s},pu=function(t,e,s){return s===void 0&&(s={}),function(r,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return a.shouldUseNativeValidation&&n5({},a),{errors:{},values:s.raw?r:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:ZY(JY(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}};const de=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:Re("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));de.displayName="Card";const be=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:Re("flex flex-col space-y-1.5 p-6",t),...e}));be.displayName="CardHeader";const we=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:Re("text-2xl font-semibold leading-none tracking-tight",t),...e}));we.displayName="CardTitle";const Fe=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:Re("text-sm text-muted-foreground",t),...e}));Fe.displayName="CardDescription";const ue=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:Re("p-6 pt-0",t),...e}));ue.displayName="CardContent";const __=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:Re("flex items-center p-6 pt-0",t),...e}));__.displayName="CardFooter";var eQ=Symbol.for("react.lazy"),Oy=ev[" use ".trim().toString()];function tQ(t){return typeof t=="object"&&t!==null&&"then"in t}function r5(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===eQ&&"_payload"in t&&tQ(t._payload)}function eg(t){const e=sQ(t),s=p.forwardRef((r,i)=>{let{children:a,...o}=r;r5(a)&&typeof Oy=="function"&&(a=Oy(a._payload));const l=p.Children.toArray(a),c=l.find(rQ);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(e,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}var i5=eg("Slot");function sQ(t){const e=p.forwardRef((s,r)=>{let{children:i,...a}=s;if(r5(i)&&typeof Oy=="function"&&(i=Oy(i._payload)),p.isValidElement(i)){const o=aQ(i),l=iQ(a,i.props);return i.type!==p.Fragment&&(l.ref=r?vo(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nQ=Symbol("radix.slottable");function rQ(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nQ}function iQ(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function aQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}const ym=_f("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=p.forwardRef(({className:t,variant:e,size:s,asChild:r=!1,...i},a)=>{const o=r?i5:"button";return n.jsx(o,{className:Re(ym({variant:e,size:s,className:t})),ref:a,...i})});G.displayName="Button";const le=p.forwardRef(({className:t,type:e,...s},r)=>n.jsx("input",{type:e,className:Re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s}));le.displayName="Input";var oQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lQ=oQ.reduce((t,e)=>{const s=eg(`Primitive.${e}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),cQ="Label",a5=p.forwardRef((t,e)=>n.jsx(lQ.label,{...t,ref:e,onMouseDown:s=>{var i;s.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));a5.displayName=cQ;var o5=a5;const dQ=_f("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),re=p.forwardRef(({className:t,...e},s)=>n.jsx(o5,{ref:s,className:Re(dQ(),t),...e}));re.displayName=o5.displayName;const uQ=IY,l5=p.createContext({}),Uu=({...t})=>n.jsx(l5.Provider,{value:{name:t.name},children:n.jsx(MY,{...t})}),$v=()=>{const t=p.useContext(l5),e=p.useContext(c5),{getFieldState:s,formState:r}=Xm(),i=s(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},c5=p.createContext({}),od=p.forwardRef(({className:t,...e},s)=>{const r=p.useId();return n.jsx(c5.Provider,{value:{id:r},children:n.jsx("div",{ref:s,className:Re("space-y-2",t),...e})})});od.displayName="FormItem";const hQ=p.forwardRef(({className:t,...e},s)=>{const{error:r,formItemId:i}=$v();return n.jsx(re,{ref:s,className:Re(r&&"text-destructive",t),htmlFor:i,...e})});hQ.displayName="FormLabel";const ld=p.forwardRef(({...t},e)=>{const{error:s,formItemId:r,formDescriptionId:i,formMessageId:a}=$v();return n.jsx(i5,{ref:e,id:r,"aria-describedby":s?`${i} ${a}`:`${i}`,"aria-invalid":!!s,...t})});ld.displayName="FormControl";const fQ=p.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:r}=$v();return n.jsx("p",{ref:s,id:r,className:Re("text-sm text-muted-foreground",t),...e})});fQ.displayName="FormDescription";const cd=p.forwardRef(({className:t,children:e,...s},r)=>{const{error:i,formMessageId:a}=$v(),o=i?String((i==null?void 0:i.message)??""):e;return o?n.jsx("p",{ref:r,id:a,className:Re("text-sm font-medium text-destructive",t),...s,children:o}):null});cd.displayName="FormMessage";function qj(t,[e,s]){return Math.min(s,Math.max(e,t))}var pQ=p.createContext(void 0);function Df(t){const e=p.useContext(pQ);return t||e||"ltr"}var Nb=0;function Uv(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??mE()),document.body.insertAdjacentElement("beforeend",t[1]??mE()),Nb++,()=>{Nb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Nb--}},[])}function mE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var _b="focusScope.autoFocusOnMount",Sb="focusScope.autoFocusOnUnmount",gE={bubbles:!1,cancelable:!0},mQ="FocusScope",tg=p.forwardRef((t,e)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=p.useState(null),d=Zs(i),u=Zs(a),f=p.useRef(null),h=ft(e,y=>c(y)),x=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(N){if(x.paused||!l)return;const C=N.target;l.contains(C)?f.current=C:Fl(f.current,{select:!0})},w=function(N){if(x.paused||!l)return;const C=N.relatedTarget;C!==null&&(l.contains(C)||Fl(f.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const _ of N)_.removedNodes.length>0&&Fl(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const v=new MutationObserver(b);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,x.paused]),p.useEffect(()=>{if(l){yE.add(x);const y=document.activeElement;if(!l.contains(y)){const b=new CustomEvent(_b,gE);l.addEventListener(_b,d),l.dispatchEvent(b),b.defaultPrevented||(gQ(wQ(d5(l)),{select:!0}),document.activeElement===y&&Fl(l))}return()=>{l.removeEventListener(_b,d),setTimeout(()=>{const b=new CustomEvent(Sb,gE);l.addEventListener(Sb,u),l.dispatchEvent(b),b.defaultPrevented||Fl(y??document.body,{select:!0}),l.removeEventListener(Sb,u),yE.remove(x)},0)}}},[l,d,u,x]);const g=p.useCallback(y=>{if(!s&&!r||x.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(w&&b){const v=y.currentTarget,[N,C]=xQ(v);N&&C?!y.shiftKey&&b===C?(y.preventDefault(),s&&Fl(N,{select:!0})):y.shiftKey&&b===N&&(y.preventDefault(),s&&Fl(C,{select:!0})):b===v&&y.preventDefault()}},[s,r,x.paused]);return n.jsx(Je.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});tg.displayName=mQ;function gQ(t,{select:e=!1}={}){const s=document.activeElement;for(const r of t)if(Fl(r,{select:e}),document.activeElement!==s)return}function xQ(t){const e=d5(t),s=xE(e,t),r=xE(e.reverse(),t);return[s,r]}function d5(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function xE(t,e){for(const s of t)if(!yQ(s,{upTo:e}))return s}function yQ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function vQ(t){return t instanceof HTMLInputElement&&"select"in t}function Fl(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&vQ(t)&&e&&t.select()}}var yE=bQ();function bQ(){let t=[];return{add(e){const s=t[0];e!==s&&(s==null||s.pause()),t=vE(t,e),t.unshift(e)},remove(e){var s;t=vE(t,e),(s=t[0])==null||s.resume()}}}function vE(t,e){const s=[...t],r=s.indexOf(e);return r!==-1&&s.splice(r,1),s}function wQ(t){return t.filter(e=>e.tagName!=="A")}function jQ(t){const e=NQ(t),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),c=l.find(SQ);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(e,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}function NQ(t){const e=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=kQ(i),l=CQ(a,i.props);return i.type!==p.Fragment&&(l.ref=r?vo(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var _Q=Symbol("radix.slottable");function SQ(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===_Q}function CQ(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function kQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function zv(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var u5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),EQ="VisuallyHidden",TQ=p.forwardRef((t,e)=>n.jsx(Je.span,{...t,ref:e,style:{...u5,...t.style}}));TQ.displayName=EQ;var AQ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zu=new WeakMap,Yg=new WeakMap,Qg={},Cb=0,h5=function(t){return t&&(t.host||h5(t.parentNode))},PQ=function(t,e){return e.map(function(s){if(t.contains(s))return s;var r=h5(s);return r&&t.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},IQ=function(t,e,s,r){var i=PQ(e,Array.isArray(t)?t:[t]);Qg[s]||(Qg[s]=new WeakMap);var a=Qg[s],o=[],l=new Set,c=new Set(i),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};i.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))u(h);else try{var x=h.getAttribute(r),g=x!==null&&x!=="false",y=(zu.get(h)||0)+1,w=(a.get(h)||0)+1;zu.set(h,y),a.set(h,w),o.push(h),y===1&&g&&Yg.set(h,!0),w===1&&h.setAttribute(s,"true"),g||h.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return u(e),l.clear(),Cb++,function(){o.forEach(function(f){var h=zu.get(f)-1,x=a.get(f)-1;zu.set(f,h),a.set(f,x),h||(Yg.has(f)||f.removeAttribute(r),Yg.delete(f)),x||f.removeAttribute(s)}),Cb--,Cb||(zu=new WeakMap,zu=new WeakMap,Yg=new WeakMap,Qg={})}},Bv=function(t,e,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=AQ(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),IQ(r,i,s,"aria-hidden")):function(){return null}},Qa=function(){return Qa=Object.assign||function(e){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Qa.apply(this,arguments)};function f5(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function RQ(t,e,s){if(s||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var kx="right-scroll-bar-position",Ex="width-before-scroll-bar",OQ="with-scroll-bars-hidden",DQ="--removed-body-scroll-bar-size";function kb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function MQ(t,e){var s=p.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(r){var i=s.value;i!==r&&(s.value=r,s.callback(r,i))}}}})[0];return s.callback=e,s.facade}var LQ=typeof window<"u"?p.useLayoutEffect:p.useEffect,bE=new WeakMap;function FQ(t,e){var s=MQ(null,function(r){return t.forEach(function(i){return kb(i,r)})});return LQ(function(){var r=bE.get(s);if(r){var i=new Set(r),a=new Set(t),o=s.current;i.forEach(function(l){a.has(l)||kb(l,null)}),a.forEach(function(l){i.has(l)||kb(l,o)})}bE.set(s,t)},[t]),s}function $Q(t){return t}function UQ(t,e){e===void 0&&(e=$Q);var s=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(a){var o=e(a,r);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;s.length;){var o=s;s=[],o.forEach(a)}s={push:function(l){return a(l)},filter:function(){return s}}},assignMedium:function(a){r=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(a),o=s}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),s}}}};return i}function zQ(t){t===void 0&&(t={});var e=UQ(null);return e.options=Qa({async:!0,ssr:!1},t),e}var p5=function(t){var e=t.sideCar,s=f5(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Qa({},s))};p5.isSideCarExport=!0;function BQ(t,e){return t.useMedium(e),p5}var m5=zQ(),Eb=function(){},qv=p.forwardRef(function(t,e){var s=p.useRef(null),r=p.useState({onScrollCapture:Eb,onWheelCapture:Eb,onTouchMoveCapture:Eb}),i=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,f=t.shards,h=t.sideCar,x=t.noRelative,g=t.noIsolation,y=t.inert,w=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,N=t.gapMode,C=f5(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,T=FQ([s,e]),j=Qa(Qa({},C),i);return p.createElement(p.Fragment,null,u&&p.createElement(_,{sideCar:m5,removeScrollBar:d,shards:f,noRelative:x,noIsolation:g,inert:y,setCallbacks:a,allowPinchZoom:!!w,lockRef:s,gapMode:N}),o?p.cloneElement(p.Children.only(l),Qa(Qa({},j),{ref:T})):p.createElement(v,Qa({},j,{className:c,ref:T}),l))});qv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qv.classNames={fullWidth:Ex,zeroRight:kx};var qQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VQ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=qQ();return e&&t.setAttribute("nonce",e),t}function HQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function WQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var KQ=function(){var t=0,e=null;return{add:function(s){t==0&&(e=VQ())&&(HQ(e,s),WQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},GQ=function(){var t=KQ();return function(e,s){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},g5=function(){var t=GQ(),e=function(s){var r=s.styles,i=s.dynamic;return t(r,i),null};return e},YQ={left:0,top:0,right:0,gap:0},Tb=function(t){return parseInt(t||"",10)||0},QQ=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Tb(s),Tb(r),Tb(i)]},ZQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return YQ;var e=QQ(t),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-s+e[2]-e[0])}},XQ=g5(),kh="data-scroll-locked",JQ=function(t,e,s,r){var i=t.left,a=t.top,o=t.right,l=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(OQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(kh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kx,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ex,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(kx," .").concat(kx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ex," .").concat(Ex,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kh,`] {
    `).concat(DQ,": ").concat(l,`px;
  }
`)},wE=function(){var t=parseInt(document.body.getAttribute(kh)||"0",10);return isFinite(t)?t:0},eZ=function(){p.useEffect(function(){return document.body.setAttribute(kh,(wE()+1).toString()),function(){var t=wE()-1;t<=0?document.body.removeAttribute(kh):document.body.setAttribute(kh,t.toString())}},[])},tZ=function(t){var e=t.noRelative,s=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;eZ();var a=p.useMemo(function(){return ZQ(i)},[i]);return p.createElement(XQ,{styles:JQ(a,!e,i,s?"":"!important")})},Vj=!1;if(typeof window<"u")try{var Zg=Object.defineProperty({},"passive",{get:function(){return Vj=!0,!0}});window.addEventListener("test",Zg,Zg),window.removeEventListener("test",Zg,Zg)}catch{Vj=!1}var Bu=Vj?{passive:!1}:!1,sZ=function(t){return t.tagName==="TEXTAREA"},x5=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!sZ(t)&&s[e]==="visible")},nZ=function(t){return x5(t,"overflowY")},rZ=function(t){return x5(t,"overflowX")},jE=function(t,e){var s=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=y5(t,r);if(i){var a=v5(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},iZ=function(t){var e=t.scrollTop,s=t.scrollHeight,r=t.clientHeight;return[e,s,r]},aZ=function(t){var e=t.scrollLeft,s=t.scrollWidth,r=t.clientWidth;return[e,s,r]},y5=function(t,e){return t==="v"?nZ(e):rZ(e)},v5=function(t,e){return t==="v"?iZ(e):aZ(e)},oZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},lZ=function(t,e,s,r,i){var a=oZ(t,window.getComputedStyle(e).direction),o=a*r,l=s.target,c=e.contains(l),d=!1,u=o>0,f=0,h=0;do{if(!l)break;var x=v5(t,l),g=x[0],y=x[1],w=x[2],b=y-w-a*g;(g||b)&&y5(t,l)&&(f+=b,h+=g);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&Math.abs(f)<1||!u&&Math.abs(h)<1)&&(d=!0),d},Xg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},NE=function(t){return[t.deltaX,t.deltaY]},_E=function(t){return t&&"current"in t?t.current:t},cZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},dZ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},uZ=0,qu=[];function hZ(t){var e=p.useRef([]),s=p.useRef([0,0]),r=p.useRef(),i=p.useState(uZ++)[0],a=p.useState(g5)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=RQ([t.lockRef.current],(t.shards||[]).map(_E),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=Xg(y),v=s.current,N="deltaX"in y?y.deltaX:v[0]-b[0],C="deltaY"in y?y.deltaY:v[1]-b[1],_,T=y.target,j=Math.abs(N)>Math.abs(C)?"h":"v";if("touches"in y&&j==="h"&&T.type==="range")return!1;var S=jE(j,T);if(!S)return!0;if(S?_=j:(_=j==="v"?"h":"v",S=jE(j,T)),!S)return!1;if(!r.current&&"changedTouches"in y&&(N||C)&&(r.current=_),!_)return!0;var A=r.current||_;return lZ(A,w,y,A==="h"?N:C)},[]),c=p.useCallback(function(y){var w=y;if(!(!qu.length||qu[qu.length-1]!==a)){var b="deltaY"in w?NE(w):Xg(w),v=e.current.filter(function(_){return _.name===w.type&&(_.target===w.target||w.target===_.shadowParent)&&cZ(_.delta,b)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var N=(o.current.shards||[]).map(_E).filter(Boolean).filter(function(_){return _.contains(w.target)}),C=N.length>0?l(w,N[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),d=p.useCallback(function(y,w,b,v){var N={name:y,delta:w,target:b,should:v,shadowParent:fZ(b)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(C){return C!==N})},1)},[]),u=p.useCallback(function(y){s.current=Xg(y),r.current=void 0},[]),f=p.useCallback(function(y){d(y.type,NE(y),y.target,l(y,t.lockRef.current))},[]),h=p.useCallback(function(y){d(y.type,Xg(y),y.target,l(y,t.lockRef.current))},[]);p.useEffect(function(){return qu.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Bu),document.addEventListener("touchmove",c,Bu),document.addEventListener("touchstart",u,Bu),function(){qu=qu.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Bu),document.removeEventListener("touchmove",c,Bu),document.removeEventListener("touchstart",u,Bu)}},[]);var x=t.removeScrollBar,g=t.inert;return p.createElement(p.Fragment,null,g?p.createElement(a,{styles:dZ(i)}):null,x?p.createElement(tZ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function fZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pZ=BQ(m5,hZ);var sg=p.forwardRef(function(t,e){return p.createElement(qv,Qa({},t,{ref:e,sideCar:pZ}))});sg.classNames=qv.classNames;var mZ=[" ","Enter","ArrowUp","ArrowDown"],gZ=[" ","Enter"],Zd="Select",[Vv,Hv,xZ]=xv(Zd),[Mf]=Cn(Zd,[xZ,wo]),Wv=wo(),[yZ,Vc]=Mf(Zd),[vZ,bZ]=Mf(Zd),b5=t=>{const{__scopeSelect:e,children:s,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:h,required:x,form:g}=t,y=Wv(e),[w,b]=p.useState(null),[v,N]=p.useState(null),[C,_]=p.useState(!1),T=Df(d),[j,S]=si({prop:r,defaultProp:i??!1,onChange:a,caller:Zd}),[A,I]=si({prop:o,defaultProp:l,onChange:c,caller:Zd}),P=p.useRef(null),O=w?g||!!w.closest("form"):!0,[D,M]=p.useState(new Set),J=Array.from(D).map(X=>X.props.value).join(";");return n.jsx(kv,{...y,children:n.jsxs(yZ,{required:x,scope:e,trigger:w,onTriggerChange:b,valueNode:v,onValueNodeChange:N,valueNodeHasChildren:C,onValueNodeHasChildrenChange:_,contentId:Ti(),value:A,onValueChange:I,open:j,onOpenChange:S,dir:T,triggerPointerDownPosRef:P,disabled:h,children:[n.jsx(Vv.Provider,{scope:e,children:n.jsx(vZ,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(X=>{M(U=>new Set(U).add(X))},[]),onNativeOptionRemove:p.useCallback(X=>{M(U=>{const $=new Set(U);return $.delete(X),$})},[]),children:s})}),O?n.jsxs(V5,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:f,value:A,onChange:X=>I(X.target.value),disabled:h,form:g,children:[A===void 0?n.jsx("option",{value:""}):null,Array.from(D)]},J):null]})})};b5.displayName=Zd;var w5="SelectTrigger",j5=p.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:r=!1,...i}=t,a=Wv(s),o=Vc(w5,s),l=o.disabled||r,c=ft(e,o.onTriggerChange),d=Hv(s),u=p.useRef("touch"),[f,h,x]=W5(y=>{const w=d().filter(N=>!N.disabled),b=w.find(N=>N.value===o.value),v=K5(w,y,b);v!==void 0&&o.onValueChange(v.value)}),g=y=>{l||(o.onOpenChange(!0),x()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return n.jsx(Pf,{asChild:!0,...a,children:n.jsx(Je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":H5(o.value)?"":void 0,...i,ref:c,onClick:Ie(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&g(y)}),onPointerDown:Ie(i.onPointerDown,y=>{u.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(g(y),y.preventDefault())}),onKeyDown:Ie(i.onKeyDown,y=>{const w=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(w&&y.key===" ")&&mZ.includes(y.key)&&(g(),y.preventDefault())})})})});j5.displayName=w5;var N5="SelectValue",_5=p.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:i,children:a,placeholder:o="",...l}=t,c=Vc(N5,s),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,f=ft(e,c.onValueNodeChange);return en(()=>{d(u)},[d,u]),n.jsx(Je.span,{...l,ref:f,style:{pointerEvents:"none"},children:H5(c.value)?n.jsx(n.Fragment,{children:o}):a})});_5.displayName=N5;var wZ="SelectIcon",S5=p.forwardRef((t,e)=>{const{__scopeSelect:s,children:r,...i}=t;return n.jsx(Je.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});S5.displayName=wZ;var jZ="SelectPortal",C5=t=>n.jsx(Nf,{asChild:!0,...t});C5.displayName=jZ;var Xd="SelectContent",k5=p.forwardRef((t,e)=>{const s=Vc(Xd,t.__scopeSelect),[r,i]=p.useState();if(en(()=>{i(new DocumentFragment)},[]),!s.open){const a=r;return a?lu.createPortal(n.jsx(E5,{scope:t.__scopeSelect,children:n.jsx(Vv.Slot,{scope:t.__scopeSelect,children:n.jsx("div",{children:t.children})})}),a):null}return n.jsx(T5,{...t,ref:e})});k5.displayName=Xd;var Ji=10,[E5,Hc]=Mf(Xd),NZ="SelectContentImpl",_Z=jQ("SelectContent.RemoveScroll"),T5=p.forwardRef((t,e)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:x,sticky:g,hideWhenDetached:y,avoidCollisions:w,...b}=t,v=Vc(Xd,s),[N,C]=p.useState(null),[_,T]=p.useState(null),j=ft(e,K=>C(K)),[S,A]=p.useState(null),[I,P]=p.useState(null),O=Hv(s),[D,M]=p.useState(!1),J=p.useRef(!1);p.useEffect(()=>{if(N)return Bv(N)},[N]),Uv();const X=p.useCallback(K=>{const[Q,...se]=O().map(ie=>ie.ref.current),[ye]=se.slice(-1),B=document.activeElement;for(const ie of K)if(ie===B||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===Q&&_&&(_.scrollTop=0),ie===ye&&_&&(_.scrollTop=_.scrollHeight),ie==null||ie.focus(),document.activeElement!==B))return},[O,_]),U=p.useCallback(()=>X([S,N]),[X,S,N]);p.useEffect(()=>{D&&U()},[D,U]);const{onOpenChange:$,triggerPointerDownPosRef:L}=v;p.useEffect(()=>{if(N){let K={x:0,y:0};const Q=ye=>{var B,ie;K={x:Math.abs(Math.round(ye.pageX)-(((B=L.current)==null?void 0:B.x)??0)),y:Math.abs(Math.round(ye.pageY)-(((ie=L.current)==null?void 0:ie.y)??0))}},se=ye=>{K.x<=10&&K.y<=10?ye.preventDefault():N.contains(ye.target)||$(!1),document.removeEventListener("pointermove",Q),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",se,{capture:!0})}}},[N,$,L]),p.useEffect(()=>{const K=()=>$(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[$]);const[te,F]=W5(K=>{const Q=O().filter(B=>!B.disabled),se=Q.find(B=>B.ref.current===document.activeElement),ye=K5(Q,K,se);ye&&setTimeout(()=>ye.ref.current.focus())}),z=p.useCallback((K,Q,se)=>{const ye=!J.current&&!se;(v.value!==void 0&&v.value===Q||ye)&&(A(K),ye&&(J.current=!0))},[v.value]),pe=p.useCallback(()=>N==null?void 0:N.focus(),[N]),xe=p.useCallback((K,Q,se)=>{const ye=!J.current&&!se;(v.value!==void 0&&v.value===Q||ye)&&P(K)},[v.value]),_e=r==="popper"?Hj:A5,Me=_e===Hj?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:x,sticky:g,hideWhenDetached:y,avoidCollisions:w}:{};return n.jsx(E5,{scope:s,content:N,viewport:_,onViewportChange:T,itemRefCallback:z,selectedItem:S,onItemLeave:pe,itemTextRefCallback:xe,focusSelectedItem:U,selectedItemText:I,position:r,isPositioned:D,searchRef:te,children:n.jsx(sg,{as:_Z,allowPinchZoom:!0,children:n.jsx(tg,{asChild:!0,trapped:v.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:Ie(i,K=>{var Q;(Q=v.trigger)==null||Q.focus({preventScroll:!0}),K.preventDefault()}),children:n.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:n.jsx(_e,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:K=>K.preventDefault(),...b,...Me,onPlaced:()=>M(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Ie(b.onKeyDown,K=>{const Q=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!Q&&K.key.length===1&&F(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let ye=O().filter(B=>!B.disabled).map(B=>B.ref.current);if(["ArrowUp","End"].includes(K.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const B=K.target,ie=ye.indexOf(B);ye=ye.slice(ie+1)}setTimeout(()=>X(ye)),K.preventDefault()}})})})})})})});T5.displayName=NZ;var SZ="SelectItemAlignedPosition",A5=p.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:r,...i}=t,a=Vc(Xd,s),o=Hc(Xd,s),[l,c]=p.useState(null),[d,u]=p.useState(null),f=ft(e,j=>u(j)),h=Hv(s),x=p.useRef(!1),g=p.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:b,focusSelectedItem:v}=o,N=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&y&&w&&b){const j=a.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),I=b.getBoundingClientRect();if(a.dir!=="rtl"){const B=I.left-S.left,ie=A.left-B,ce=j.left-ie,oe=j.width+ce,Z=Math.max(oe,S.width),he=window.innerWidth-Ji,Ne=qj(ie,[Ji,Math.max(Ji,he-Z)]);l.style.minWidth=oe+"px",l.style.left=Ne+"px"}else{const B=S.right-I.right,ie=window.innerWidth-A.right-B,ce=window.innerWidth-j.right-ie,oe=j.width+ce,Z=Math.max(oe,S.width),he=window.innerWidth-Ji,Ne=qj(ie,[Ji,Math.max(Ji,he-Z)]);l.style.minWidth=oe+"px",l.style.right=Ne+"px"}const P=h(),O=window.innerHeight-Ji*2,D=y.scrollHeight,M=window.getComputedStyle(d),J=parseInt(M.borderTopWidth,10),X=parseInt(M.paddingTop,10),U=parseInt(M.borderBottomWidth,10),$=parseInt(M.paddingBottom,10),L=J+X+D+$+U,te=Math.min(w.offsetHeight*5,L),F=window.getComputedStyle(y),z=parseInt(F.paddingTop,10),pe=parseInt(F.paddingBottom,10),xe=j.top+j.height/2-Ji,_e=O-xe,Me=w.offsetHeight/2,K=w.offsetTop+Me,Q=J+X+K,se=L-Q;if(Q<=xe){const B=P.length>0&&w===P[P.length-1].ref.current;l.style.bottom="0px";const ie=d.clientHeight-y.offsetTop-y.offsetHeight,ce=Math.max(_e,Me+(B?pe:0)+ie+U),oe=Q+ce;l.style.height=oe+"px"}else{const B=P.length>0&&w===P[0].ref.current;l.style.top="0px";const ce=Math.max(xe,J+y.offsetTop+(B?z:0)+Me)+se;l.style.height=ce+"px",y.scrollTop=Q-xe+y.offsetTop}l.style.margin=`${Ji}px 0`,l.style.minHeight=te+"px",l.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[h,a.trigger,a.valueNode,l,d,y,w,b,a.dir,r]);en(()=>N(),[N]);const[C,_]=p.useState();en(()=>{d&&_(window.getComputedStyle(d).zIndex)},[d]);const T=p.useCallback(j=>{j&&g.current===!0&&(N(),v==null||v(),g.current=!1)},[N,v]);return n.jsx(kZ,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:T,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:n.jsx(Je.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});A5.displayName=SZ;var CZ="SelectPopperPosition",Hj=p.forwardRef((t,e)=>{const{__scopeSelect:s,align:r="start",collisionPadding:i=Ji,...a}=t,o=Wv(s);return n.jsx(qm,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hj.displayName=CZ;var[kZ,S_]=Mf(Xd,{}),Wj="SelectViewport",P5=p.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:r,...i}=t,a=Hc(Wj,s),o=S_(Wj,s),l=ft(e,a.onViewportChange),c=p.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n.jsx(Vv.Slot,{scope:s,children:n.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ie(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const x=Math.abs(c.current-u.scrollTop);if(x>0){const g=window.innerHeight-Ji*2,y=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),b=Math.max(y,w);if(b<g){const v=b+x,N=Math.min(g,v),C=v-N;f.style.height=N+"px",f.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});P5.displayName=Wj;var I5="SelectGroup",[EZ,TZ]=Mf(I5),AZ=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,i=Ti();return n.jsx(EZ,{scope:s,id:i,children:n.jsx(Je.div,{role:"group","aria-labelledby":i,...r,ref:e})})});AZ.displayName=I5;var R5="SelectLabel",O5=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,i=TZ(R5,s);return n.jsx(Je.div,{id:i.id,...r,ref:e})});O5.displayName=R5;var Dy="SelectItem",[PZ,D5]=Mf(Dy),M5=p.forwardRef((t,e)=>{const{__scopeSelect:s,value:r,disabled:i=!1,textValue:a,...o}=t,l=Vc(Dy,s),c=Hc(Dy,s),d=l.value===r,[u,f]=p.useState(a??""),[h,x]=p.useState(!1),g=ft(e,v=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,v,r,i)}),y=Ti(),w=p.useRef("touch"),b=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(PZ,{scope:s,value:r,disabled:i,textId:y,isSelected:d,onItemTextChange:p.useCallback(v=>{f(N=>N||((v==null?void 0:v.textContent)??"").trim())},[]),children:n.jsx(Vv.ItemSlot,{scope:s,value:r,disabled:i,textValue:u,children:n.jsx(Je.div,{role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:g,onFocus:Ie(o.onFocus,()=>x(!0)),onBlur:Ie(o.onBlur,()=>x(!1)),onClick:Ie(o.onClick,()=>{w.current!=="mouse"&&b()}),onPointerUp:Ie(o.onPointerUp,()=>{w.current==="mouse"&&b()}),onPointerDown:Ie(o.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:Ie(o.onPointerMove,v=>{var N;w.current=v.pointerType,i?(N=c.onItemLeave)==null||N.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(o.onPointerLeave,v=>{var N;v.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Ie(o.onKeyDown,v=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&v.key===" "||(gZ.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})})})})});M5.displayName=Dy;var vp="SelectItemText",L5=p.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:i,...a}=t,o=Vc(vp,s),l=Hc(vp,s),c=D5(vp,s),d=bZ(vp,s),[u,f]=p.useState(null),h=ft(e,b=>f(b),c.onItemTextChange,b=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,b,c.value,c.disabled)}),x=u==null?void 0:u.textContent,g=p.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=d;return en(()=>(y(g),()=>w(g)),[y,w,g]),n.jsxs(n.Fragment,{children:[n.jsx(Je.span,{id:c.textId,...a,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?lu.createPortal(a.children,o.valueNode):null]})});L5.displayName=vp;var F5="SelectItemIndicator",$5=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return D5(F5,s).isSelected?n.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});$5.displayName=F5;var Kj="SelectScrollUpButton",U5=p.forwardRef((t,e)=>{const s=Hc(Kj,t.__scopeSelect),r=S_(Kj,t.__scopeSelect),[i,a]=p.useState(!1),o=ft(e,r.onScrollButtonChange);return en(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),i?n.jsx(B5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});U5.displayName=Kj;var Gj="SelectScrollDownButton",z5=p.forwardRef((t,e)=>{const s=Hc(Gj,t.__scopeSelect),r=S_(Gj,t.__scopeSelect),[i,a]=p.useState(!1),o=ft(e,r.onScrollButtonChange);return en(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),i?n.jsx(B5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});z5.displayName=Gj;var B5=p.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:r,...i}=t,a=Hc("SelectScrollButton",s),o=p.useRef(null),l=Hv(s),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),en(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),n.jsx(Je.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ie(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ie(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ie(i.onPointerLeave,()=>{c()})})}),IZ="SelectSeparator",q5=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return n.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});q5.displayName=IZ;var Yj="SelectArrow",RZ=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,i=Wv(s),a=Vc(Yj,s),o=Hc(Yj,s);return a.open&&o.position==="popper"?n.jsx(Vm,{...i,...r,ref:e}):null});RZ.displayName=Yj;var OZ="SelectBubbleInput",V5=p.forwardRef(({__scopeSelect:t,value:e,...s},r)=>{const i=p.useRef(null),a=ft(r,i),o=zv(e);return p.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&u){const f=new Event("change",{bubbles:!0});u.call(l,e),l.dispatchEvent(f)}},[o,e]),n.jsx(Je.select,{...s,style:{...u5,...s.style},ref:a,defaultValue:e})});V5.displayName=OZ;function H5(t){return t===""||t===void 0}function W5(t){const e=Zs(t),s=p.useRef(""),r=p.useRef(0),i=p.useCallback(o=>{const l=s.current+o;e(l),function c(d){s.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,i,a]}function K5(t,e,s){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let o=DZ(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==s?c:void 0}function DZ(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var MZ=b5,G5=j5,LZ=_5,FZ=S5,$Z=C5,Y5=k5,UZ=P5,Q5=O5,Z5=M5,zZ=L5,BZ=$5,X5=U5,J5=z5,e3=q5;const Gt=MZ,Yt=LZ,Bt=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(G5,{ref:r,className:Re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,n.jsx(FZ,{asChild:!0,children:n.jsx(Sf,{className:"h-4 w-4 opacity-50"})})]}));Bt.displayName=G5.displayName;const t3=p.forwardRef(({className:t,...e},s)=>n.jsx(X5,{ref:s,className:Re("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(rU,{className:"h-4 w-4"})}));t3.displayName=X5.displayName;const s3=p.forwardRef(({className:t,...e},s)=>n.jsx(J5,{ref:s,className:Re("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(Sf,{className:"h-4 w-4"})}));s3.displayName=J5.displayName;const qt=p.forwardRef(({className:t,children:e,position:s="popper",...r},i)=>n.jsx($Z,{children:n.jsxs(Y5,{ref:i,className:Re("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[n.jsx(t3,{}),n.jsx(UZ,{className:Re("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),n.jsx(s3,{})]})}));qt.displayName=Y5.displayName;const qZ=p.forwardRef(({className:t,...e},s)=>n.jsx(Q5,{ref:s,className:Re("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));qZ.displayName=Q5.displayName;const fe=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(Z5,{ref:r,className:Re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(BZ,{children:n.jsx(IN,{className:"h-4 w-4"})})}),n.jsx(zZ,{children:e})]}));fe.displayName=Z5.displayName;const VZ=p.forwardRef(({className:t,...e},s)=>n.jsx(e3,{ref:s,className:Re("-mx-1 my-1 h-px bg-muted",t),...e}));VZ.displayName=e3.displayName;const HZ=_f("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Xs=p.forwardRef(({className:t,variant:e,...s},r)=>n.jsx("div",{ref:r,role:"alert",className:Re(HZ({variant:e}),t),...s}));Xs.displayName="Alert";const n3=p.forwardRef(({className:t,...e},s)=>n.jsx("h5",{ref:s,className:Re("mb-1 font-medium leading-none tracking-tight",t),...e}));n3.displayName="AlertTitle";const Js=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:Re("text-sm [&_p]:leading-relaxed",t),...e}));Js.displayName="AlertDescription";function WZ({userEmail:t,socialAuthData:e,onComplete:s,isLoading:r=!1}){var f,h;const[i,a]=p.useState(""),{toast:o}=Et(),l=((f=e.displayName)==null?void 0:f.split(" ")[0])||"",c=((h=e.displayName)==null?void 0:h.split(" ").slice(1).join(" "))||"",d=fu({resolver:pu($O),defaultValues:{firstName:l,lastName:c,userName:"",country:"",phone:"",gender:""}}),u=async x=>{try{a(""),await s(x),o({title:"Account setup complete!",description:"Welcome to your account."})}catch(g){console.error("Social auth completion failed:",g);const y=(g==null?void 0:g.message)||"Failed to complete account setup. Please try again.";a(y),o({variant:"destructive",title:"Setup failed",description:y})}};return n.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-primary/5 pointer-events-none"}),n.jsxs("div",{className:"relative z-10 w-full max-w-2xl px-4 sm:px-6 md:px-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-4 rounded-2xl bg-primary/10 overflow-hidden",children:[e.photoURL?n.jsx("img",{src:e.photoURL,alt:"Profile",className:"w-full h-full object-cover",onError:x=>{var y;const g=x.target;g.style.display="none",(y=g.nextElementSibling)==null||y.classList.remove("hidden")}}):null,n.jsx(bI,{className:`h-8 w-8 text-primary ${e.photoURL?"hidden":""}`})]}),n.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Complete Your Profile"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Just a few more details to finish setting up your account"}),n.jsxs("p",{className:"text-xs text-muted-foreground/70",children:["Signed in as: ",t]})]}),n.jsxs(de,{className:"shadow-2xl border border-border/50 bg-card/80 backdrop-blur-sm","data-testid":"card-social-auth-complete",children:[n.jsx(be,{className:"pb-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Setup your profile"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Choose your unique username to complete your account"})]})}),n.jsxs(ue,{className:"space-y-6 pb-8",children:[i&&n.jsx(Xs,{variant:"destructive",className:"mb-4","data-testid":"alert-submit-error",children:n.jsx(Js,{children:i})}),n.jsx(uQ,{...d,children:n.jsxs("form",{onSubmit:d.handleSubmit(u),className:"space-y-6","data-testid":"form-social-auth-complete",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(Uu,{control:d.control,name:"firstName",render:({field:x})=>n.jsxs(od,{children:[n.jsx(ld,{children:n.jsxs("div",{className:"relative",children:[n.jsx(fo,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{...x,placeholder:"First Name",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground h-12",disabled:r,"data-testid":"input-firstName"})]})}),n.jsx(cd,{})]})}),n.jsx(Uu,{control:d.control,name:"lastName",render:({field:x})=>n.jsxs(od,{children:[n.jsx(ld,{children:n.jsxs("div",{className:"relative",children:[n.jsx(fo,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{...x,placeholder:"Last Name",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground h-12",disabled:r,"data-testid":"input-lastName"})]})}),n.jsx(cd,{})]})})]}),n.jsx(Uu,{control:d.control,name:"userName",render:({field:x})=>n.jsxs(od,{children:[n.jsx(ld,{children:n.jsxs("div",{className:"relative",children:[n.jsx(eU,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{...x,placeholder:"Choose your unique username",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground h-12",disabled:r,"data-testid":"input-userName"})]})}),n.jsx(cd,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(Uu,{control:d.control,name:"country",render:({field:x})=>n.jsxs(od,{children:[n.jsxs(Gt,{name:x.name,onValueChange:x.onChange,value:x.value,disabled:r,children:[n.jsx(ld,{children:n.jsx(Bt,{className:"h-12 bg-input border-border text-foreground","data-testid":"select-country",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(dU,{className:"h-4 w-4 text-muted-foreground mr-3"}),n.jsx(Yt,{placeholder:"Select Country"})]})})}),n.jsxs(qt,{className:"max-h-60",children:[n.jsx(fe,{value:"Afghanistan",children:"Afghanistan"}),n.jsx(fe,{value:"Albania",children:"Albania"}),n.jsx(fe,{value:"Algeria",children:"Algeria"}),n.jsx(fe,{value:"Argentina",children:"Argentina"}),n.jsx(fe,{value:"Australia",children:"Australia"}),n.jsx(fe,{value:"Austria",children:"Austria"}),n.jsx(fe,{value:"Bangladesh",children:"Bangladesh"}),n.jsx(fe,{value:"Belgium",children:"Belgium"}),n.jsx(fe,{value:"Brazil",children:"Brazil"}),n.jsx(fe,{value:"Canada",children:"Canada"}),n.jsx(fe,{value:"Chile",children:"Chile"}),n.jsx(fe,{value:"China",children:"China"}),n.jsx(fe,{value:"Colombia",children:"Colombia"}),n.jsx(fe,{value:"Denmark",children:"Denmark"}),n.jsx(fe,{value:"Egypt",children:"Egypt"}),n.jsx(fe,{value:"Ethiopia",children:"Ethiopia"}),n.jsx(fe,{value:"Finland",children:"Finland"}),n.jsx(fe,{value:"France",children:"France"}),n.jsx(fe,{value:"Germany",children:"Germany"}),n.jsx(fe,{value:"Ghana",children:"Ghana"}),n.jsx(fe,{value:"Greece",children:"Greece"}),n.jsx(fe,{value:"India",children:"India"}),n.jsx(fe,{value:"Indonesia",children:"Indonesia"}),n.jsx(fe,{value:"Iran",children:"Iran"}),n.jsx(fe,{value:"Iraq",children:"Iraq"}),n.jsx(fe,{value:"Ireland",children:"Ireland"}),n.jsx(fe,{value:"Israel",children:"Israel"}),n.jsx(fe,{value:"Italy",children:"Italy"}),n.jsx(fe,{value:"Japan",children:"Japan"}),n.jsx(fe,{value:"Jordan",children:"Jordan"}),n.jsx(fe,{value:"Kenya",children:"Kenya"}),n.jsx(fe,{value:"Malaysia",children:"Malaysia"}),n.jsx(fe,{value:"Mexico",children:"Mexico"}),n.jsx(fe,{value:"Morocco",children:"Morocco"}),n.jsx(fe,{value:"Netherlands",children:"Netherlands"}),n.jsx(fe,{value:"New Zealand",children:"New Zealand"}),n.jsx(fe,{value:"Nigeria",children:"Nigeria"}),n.jsx(fe,{value:"Norway",children:"Norway"}),n.jsx(fe,{value:"Pakistan",children:"Pakistan"}),n.jsx(fe,{value:"Philippines",children:"Philippines"}),n.jsx(fe,{value:"Poland",children:"Poland"}),n.jsx(fe,{value:"Portugal",children:"Portugal"}),n.jsx(fe,{value:"Russia",children:"Russia"}),n.jsx(fe,{value:"Saudi Arabia",children:"Saudi Arabia"}),n.jsx(fe,{value:"Singapore",children:"Singapore"}),n.jsx(fe,{value:"South Africa",children:"South Africa"}),n.jsx(fe,{value:"South Korea",children:"South Korea"}),n.jsx(fe,{value:"Spain",children:"Spain"}),n.jsx(fe,{value:"Sweden",children:"Sweden"}),n.jsx(fe,{value:"Switzerland",children:"Switzerland"}),n.jsx(fe,{value:"Thailand",children:"Thailand"}),n.jsx(fe,{value:"Turkey",children:"Turkey"}),n.jsx(fe,{value:"Ukraine",children:"Ukraine"}),n.jsx(fe,{value:"United Arab Emirates",children:"United Arab Emirates"}),n.jsx(fe,{value:"United Kingdom",children:"United Kingdom"}),n.jsx(fe,{value:"United States",children:"United States"}),n.jsx(fe,{value:"Venezuela",children:"Venezuela"}),n.jsx(fe,{value:"Vietnam",children:"Vietnam"})]})]}),n.jsx(cd,{})]})}),n.jsx(Uu,{control:d.control,name:"phone",render:({field:x})=>n.jsxs(od,{children:[n.jsx(ld,{children:n.jsxs("div",{className:"relative",children:[n.jsx(wU,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{...x,placeholder:"Phone Number (optional)",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground h-12",disabled:r,"data-testid":"input-phone",type:"tel"})]})}),n.jsx(cd,{})]})})]}),n.jsx(Uu,{control:d.control,name:"gender",render:({field:x})=>n.jsxs(od,{children:[n.jsxs(Gt,{onValueChange:x.onChange,defaultValue:x.value,disabled:r,children:[n.jsx(ld,{children:n.jsx(Bt,{className:"h-12 bg-input border-border text-foreground","data-testid":"select-gender",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"h-4 w-4 text-muted-foreground mr-3"}),n.jsx(Yt,{placeholder:"Select Gender (optional)"})]})})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"male",children:"Male"}),n.jsx(fe,{value:"female",children:"Female"}),n.jsx(fe,{value:"other",children:"Other"}),n.jsx(fe,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),n.jsx(cd,{})]})}),n.jsx(G,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white font-medium h-12 text-lg",disabled:r,"data-testid":"button-complete-setup",children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-current border-t-transparent mr-3"}),"Setting up your account..."]}):"Complete Setup"})]})})]})]})]})]})}function Ab(){const[,t]=Ds(),{user:e,checkAuth:s,logout:r}=qi(),{settings:i}=qc(),{toast:a}=Et(),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,f]=p.useState(!1),[h,x]=p.useState(!1);p.useEffect(()=>{i.demoMode&&(l("admin@gmail.com"),d("123456"))},[i.demoMode]),p.useEffect(()=>{e!=null&&e.admin&&t("/admin")},[e==null?void 0:e.admin,t]);const g=async()=>{x(!0);try{await r(),a({title:"Logged Out",description:"You can now login as an admin"}),await s()}catch(w){a({title:"Logout Failed",description:w.message||"Failed to logout",variant:"destructive"})}finally{x(!1)}};if(e&&!e.admin)return n.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-primary/5 pointer-events-none"}),n.jsxs("div",{className:"relative z-10 w-full max-w-md px-4 sm:px-6 md:px-8",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(hj,{className:"h-8 w-8 text-primary","data-testid":"icon-admin-shield"}),n.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-primary",children:"Admin Portal"})]})})}),n.jsxs(de,{className:"shadow-2xl border border-border/50 bg-card/80 backdrop-blur-sm",children:[n.jsx(be,{className:"pb-4",children:n.jsx("div",{className:"text-center mb-4",children:n.jsx(we,{className:"text-xl font-semibold text-foreground",children:"Already Logged In"})})}),n.jsxs(ue,{className:"space-y-6",children:[n.jsxs("div",{className:"text-center space-y-3",children:[n.jsxs("p",{className:"text-muted-foreground",children:["You are currently logged in as ",n.jsx("span",{className:"font-medium text-foreground",children:e.email})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"To access the admin portal, please logout from your current account first."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(G,{onClick:g,className:"w-full",disabled:h,"data-testid":"button-logout-to-admin",children:h?n.jsxs(n.Fragment,{children:[n.jsx(dn,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging out..."]}):"Logout to Continue"}),n.jsx(G,{onClick:()=>t("/"),variant:"outline",className:"w-full",disabled:h,"data-testid":"button-back-dashboard",children:"Back to Dashboard"})]})]})]})]})]});const y=async w=>{w.preventDefault(),f(!0);try{const b=await fetch("/api/admin/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:c}),credentials:"include"}),v=await b.json();if(!b.ok||!v.success)throw new Error(v.message||v.error||"Admin login failed");if(!v.data)throw new Error("Invalid response: missing user data");const N=v.data._id||v.data.id;if(!N)throw new Error("Invalid response: missing user ID");localStorage.setItem("userId",N),localStorage.setItem("user",JSON.stringify({id:N,email:v.data.email||o,firstName:v.data.firstName||"",lastName:v.data.lastName||"",profilePhoto:v.data.profilePhoto||"",userName:v.data.userName||v.data.email||o,country:v.data.country||"",phone:v.data.phone||"",seller:v.data.seller||!1,admin:!0,authProvider:"email"})),v.accessToken&&localStorage.setItem("adminAccessToken",v.accessToken),await s(),await We.invalidateQueries(),a({title:"Admin Login Successful",description:"Welcome to the admin dashboard"}),t("/admin")}catch(b){a({title:"Login Failed",description:b.message||"Invalid credentials",variant:"destructive"})}finally{f(!1)}};return n.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-primary/5 pointer-events-none"}),n.jsxs("div",{className:"relative z-10 w-full max-w-md px-4 sm:px-6 md:px-8",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(hj,{className:"h-8 w-8 text-primary","data-testid":"icon-admin-shield"}),n.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-primary",children:"Admin Portal"})]})})}),n.jsxs(de,{className:"shadow-2xl border border-border/50 bg-card/80 backdrop-blur-sm relative",children:[u&&n.jsxs("div",{className:"absolute inset-0 bg-card/95 backdrop-blur-sm z-10 flex flex-col items-center justify-center rounded-lg","data-testid":"loading-overlay",children:[n.jsx(dn,{className:"h-8 w-8 animate-spin text-primary mb-4"}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-lg font-medium text-foreground",children:"Signing you in..."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifying admin credentials"})]})]}),n.jsx(be,{className:"pb-4",children:n.jsx("div",{className:"text-center mb-4",children:n.jsx(we,{className:"text-xl font-semibold text-foreground",children:"Admin Login"})})}),n.jsx(ue,{children:n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(du,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{id:"email",type:"email",placeholder:"Admin Email Address",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground",value:o,onChange:w=>l(w.target.value),required:!0,disabled:u,"data-testid":"input-admin-email"})]})}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(dy,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{id:"password",type:"password",placeholder:"Password",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground",value:c,onChange:w=>d(w.target.value),required:!0,disabled:u,"data-testid":"input-admin-password"})]})}),n.jsx(G,{type:"submit",className:"w-full",disabled:u,"data-testid":"button-admin-login",children:u?"Signing in...":"Sign In as Admin"}),i.demoMode&&n.jsx("div",{className:"mt-4 p-3 bg-primary/10 border border-primary/20 rounded-md","data-testid":"demo-credentials",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(wc,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Demo Mode Enabled"}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-0.5",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Email:"})," admin@gmail.com"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Password:"})," 123456"]})]})]})]})})]})})]})]})]})}function KZ(){var l;const[,t]=Ds(),{toast:e}=Et(),{settings:s}=qc(),[r,i]=p.useState({email:"",password:"",confirmPassword:"",username:"admin",full_name:"Admin"}),a=st({mutationFn:async c=>{const d=await fetch("/api/admin/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),credentials:"include"});if(!d.ok){const u=await d.json().catch(()=>({error:"Failed to create admin"}));throw new Error(u.error||u.message||"Failed to create admin")}return d.json()},onSuccess:async c=>{console.log("Admin created successfully:",c),e({title:"Admin account created!",description:"Verifying setup..."}),await new Promise(d=>setTimeout(d,1e3));try{const u=await(await fetch("/api/admin/exists",{credentials:"include"})).json();u.success&&u.exists?(e({title:"Setup complete!",description:"Redirecting to login page..."}),await new Promise(f=>setTimeout(f,800)),t("/admin/login")):(e({title:"Admin created",description:"Please try logging in.",variant:"default"}),await new Promise(f=>setTimeout(f,500)),t("/admin/login"))}catch(d){console.error("Error checking admin existence:",d),await new Promise(u=>setTimeout(u,500)),t("/admin/login")}},onError:c=>{e({title:"Setup failed",description:c.message||"Failed to create admin account. Please try again.",variant:"destructive"})}}),o=c=>{if(c.preventDefault(),!r.email||!r.password){e({title:"Missing fields",description:"Email and password are required.",variant:"destructive"});return}if(r.password!==r.confirmPassword){e({title:"Passwords don't match",description:"Please make sure your passwords match.",variant:"destructive"});return}if(r.password.length<6){e({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}a.mutate({email:r.email,password:r.password,username:r.username,full_name:r.full_name,role:"admin"})};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:n.jsx("div",{className:"w-full max-w-2xl",children:n.jsxs(de,{children:[n.jsxs(be,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:n.jsx(hj,{className:"h-12 w-12 text-primary"})})}),n.jsx(we,{className:"text-2xl",children:"Admin Setup"}),n.jsx(Fe,{className:"text-center max-w-md mx-auto mt-2",children:"This is a one-time setup. Create your first administrator account to access the platform."})]}),n.jsx(ue,{children:n.jsxs("form",{onSubmit:o,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"full_name",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(fo,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{id:"full_name",type:"text",value:r.full_name,onChange:c=>i({...r,full_name:c.target.value}),placeholder:"Admin",className:"pl-10","data-testid":"input-setup-fullname"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"username",children:"Username"}),n.jsxs("div",{className:"relative",children:[n.jsx(fo,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{id:"username",type:"text",value:r.username,onChange:c=>i({...r,username:c.target.value}),placeholder:"admin",className:"pl-10","data-testid":"input-setup-username"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{htmlFor:"email",children:["Email Address ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(du,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{id:"email",type:"email",value:r.email,onChange:c=>i({...r,email:c.target.value}),placeholder:"admin@example.com",className:"pl-10",required:!0,"data-testid":"input-setup-email"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{htmlFor:"password",children:["Password ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(dy,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{id:"password",type:"password",value:r.password,onChange:c=>i({...r,password:c.target.value}),placeholder:"Min 6 characters",className:"pl-10",required:!0,minLength:6,"data-testid":"input-setup-password"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{htmlFor:"confirmPassword",children:["Confirm Password ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(dy,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(le,{id:"confirmPassword",type:"password",value:r.confirmPassword,onChange:c=>i({...r,confirmPassword:c.target.value}),placeholder:"Confirm password",className:"pl-10",required:!0,minLength:6,"data-testid":"input-setup-confirm-password"})]})]})]}),a.isError&&n.jsxs(Xs,{variant:"destructive",children:[n.jsx(qr,{className:"h-4 w-4"}),n.jsx(Js,{children:((l=a.error)==null?void 0:l.message)||"Failed to create admin account. Please try again."})]}),n.jsx(G,{type:"submit",className:"w-full",disabled:a.isPending,"data-testid":"button-setup-submit",children:a.isPending?"Creating Account...":"Create Admin Account"})]})})]})})})}var Kv="Collapsible",[GZ]=Cn(Kv),[YZ,C_]=GZ(Kv),r3=p.forwardRef((t,e)=>{const{__scopeCollapsible:s,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[c,d]=si({prop:r,defaultProp:i??!1,onChange:o,caller:Kv});return n.jsx(YZ,{scope:s,disabled:a,contentId:Ti(),open:c,onOpenToggle:p.useCallback(()=>d(u=>!u),[d]),children:n.jsx(Je.div,{"data-state":E_(c),"data-disabled":a?"":void 0,...l,ref:e})})});r3.displayName=Kv;var i3="CollapsibleTrigger",a3=p.forwardRef((t,e)=>{const{__scopeCollapsible:s,...r}=t,i=C_(i3,s);return n.jsx(Je.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":E_(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Ie(t.onClick,i.onOpenToggle)})});a3.displayName=i3;var k_="CollapsibleContent",o3=p.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=C_(k_,t.__scopeCollapsible);return n.jsx(hn,{present:s||i.open,children:({present:a})=>n.jsx(QZ,{...r,ref:e,present:a})})});o3.displayName=k_;var QZ=p.forwardRef((t,e)=>{const{__scopeCollapsible:s,present:r,children:i,...a}=t,o=C_(k_,s),[l,c]=p.useState(r),d=p.useRef(null),u=ft(e,d),f=p.useRef(0),h=f.current,x=p.useRef(0),g=x.current,y=o.open||l,w=p.useRef(y),b=p.useRef(void 0);return p.useEffect(()=>{const v=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(v)},[]),en(()=>{const v=d.current;if(v){b.current=b.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const N=v.getBoundingClientRect();f.current=N.height,x.current=N.width,w.current||(v.style.transitionDuration=b.current.transitionDuration,v.style.animationName=b.current.animationName),c(r)}},[o.open,r]),n.jsx(Je.div,{"data-state":E_(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...a,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:y&&i})});function E_(t){return t?"open":"closed"}var ZZ=r3;const XZ=ZZ,JZ=a3,eX=o3,SE=[{section:"Overview",items:[{id:"dashboard",name:"Dashboard",href:"/admin",icon:mU}]},{section:"User Management",items:[{id:"users",name:"Users",href:"/admin/users",icon:Xr},{id:"pending-approvals",name:"Pending Approvals",href:"/admin/pending-approvals",icon:Cr},{id:"reported-cases",name:"Reported Cases",href:"/admin/reported-cases",icon:dj}]},{section:"Commerce",items:[{id:"inventory",name:"Inventory",href:"/admin/inventory",icon:hs},{id:"orders",name:"Orders",href:"/admin/orders",icon:cr},{id:"disputes",name:"Disputes",href:"/admin/disputes",icon:yh},{id:"transactions",name:"Transactions",href:"/admin/transactions",icon:gd},{id:"payouts",name:"Payouts",href:"/admin/payouts",icon:oy}]},{section:"Platform",items:[{id:"revenue",name:"Revenue",href:"/admin/application-fees",icon:oU},{id:"categories",name:"Categories",href:"/admin/categories",icon:cU},{id:"shows",name:"Shows",href:"/admin/shows",icon:dr},{id:"giveaways",name:"Giveaways",href:"/admin/giveaways",icon:ji},{id:"shipping-profiles",name:"Shipping Profiles",href:"/admin/shipping-profiles",icon:Ri},{id:"shipments",name:"Shipments",href:"/admin/shipments",icon:hs},{id:"referral-logs",name:"Referral Logs",href:"/admin/referral-logs",icon:Xr},{id:"address",name:"Business Address",href:"/admin/address",icon:vv},{id:"emails",name:"Emails",icon:du,children:[{id:"emails-templates",name:"Templates",href:"/admin/email-templates",icon:Bd},{id:"emails-bulk",name:"Bulk Emails",href:"/admin/email-bulk",icon:hy},{id:"emails-settings",name:"Settings",href:"/admin/email-settings",icon:dm}]}]},{section:"Pages",items:[{id:"landing-page",name:"Landing Page",href:"/admin/pages/landing",icon:uU},{id:"general",name:"General",href:"/admin/pages/general",icon:ly},{id:"faq",name:"FAQ",href:"/admin/pages/faq",icon:vI},{id:"about",name:"About Us",href:"/admin/pages/about",icon:wc},{id:"privacy",name:"Privacy Policy",href:"/admin/pages/privacy",icon:_I},{id:"terms",name:"Terms of Service",href:"/admin/pages/terms",icon:lU},{id:"contact",name:"Contact Us",href:"/admin/pages/contact",icon:vU}]},{section:"Account",items:[{id:"profile",name:"Profile",href:"/admin/profile",icon:bI},{id:"settings",name:"Settings",href:"/admin/settings",icon:dm}]}],T_=(t,e)=>{if(t.href){if(e===t.href)return!0;const[s,r]=t.href.split("?");if(e.startsWith(s)&&r&&e.includes(`?${r}`))return!0}return t.children?t.children.some(s=>T_(s,e)):!1},tX=t=>{const e={},s=window.location.pathname+window.location.search,r=i=>{i.children&&T_(i,s)&&(e[i.id]=!0,i.children.forEach(r))};return t.forEach(i=>{i.items.forEach(r)}),e};function sX({isOpen:t,onClose:e}){const[s,r]=Ds(),[i,a]=p.useState({}),{data:o}=Ve({queryKey:["/api/settings"]}),l=(o==null?void 0:o.data)||o;l!=null&&l.app_name,p.useEffect(()=>{const u=tX(SE);a(u)},[s]);const c=u=>{a(f=>({...f,[u]:!f[u]}))},d=(u,f=0)=>{const h=u.icon,x=window.location.pathname+window.location.search,g=u.href?x===u.href:!1,y=u.children&&u.children.length>0,w=i[u.id]||!1,b=T_(u,x);return y?n.jsxs(XZ,{open:w,onOpenChange:()=>c(u.id),children:[n.jsx(JZ,{asChild:!0,children:n.jsxs(G,{variant:b?"secondary":"ghost",className:Re("w-full justify-start",b&&"bg-primary/10 text-primary hover:bg-primary/20 hover:text-primary",f>0&&"pl-8"),"data-testid":`nav-${u.id}`,children:[n.jsx(h,{className:"h-4 w-4 mr-3"}),n.jsx("span",{className:"flex-1 text-left",children:u.name}),n.jsx(Sf,{className:Re("h-4 w-4 transition-transform duration-200",w&&"transform rotate-180")})]})}),n.jsx(eX,{children:n.jsx("div",{className:"space-y-1 mt-1",children:u.children.map(v=>d(v,f+1))})})]},u.id):n.jsxs(G,{variant:g?"secondary":"ghost",className:Re("w-full justify-start",g&&"bg-primary/10 text-primary hover:bg-primary/20 hover:text-primary",f>0&&"pl-8",f>1&&"pl-12"),onClick:()=>{r(u.href),e()},"data-testid":`nav-${u.id}`,children:[n.jsx(h,{className:"h-4 w-4 mr-3"}),u.name]},u.id)};return n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:e,"data-testid":"sidebar-overlay"}),n.jsxs("div",{className:Re("flex flex-col w-64 bg-card border-r border-border h-full transition-transform duration-300 ease-in-out","lg:relative lg:translate-x-0","fixed inset-y-0 left-0 z-50",t?"translate-x-0":"-translate-x-full"),children:[n.jsx("div",{className:"lg:hidden flex justify-end p-3 border-b border-border",children:n.jsx(G,{variant:"ghost",size:"sm",onClick:e,"data-testid":"button-close-sidebar",children:n.jsx(un,{className:"h-5 w-5"})})}),n.jsx("nav",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:SE.map((u,f)=>n.jsxs("div",{children:[n.jsx("h3",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:u.section}),n.jsx("div",{className:"space-y-1",children:u.items.map(h=>d(h))})]},f))})]})]})}const nX=_f("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ye({className:t,variant:e,...s}){return n.jsx("div",{className:Re(nX({variant:e}),t),...s})}function rX(t,e=[]){let s=[];function r(a,o){const l=p.createContext(o);l.displayName=a+"Context";const c=s.length;s=[...s,o];const d=f=>{var b;const{scope:h,children:x,...g}=f,y=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,w=p.useMemo(()=>g,Object.values(g));return n.jsx(y.Provider,{value:w,children:x})};d.displayName=a+"Provider";function u(f,h){var y;const x=((y=h==null?void 0:h[t])==null?void 0:y[c])||l,g=p.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=s.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,iX(i,...e)]}function iX(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}var aX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],A_=aX.reduce((t,e)=>{const s=eg(`Primitive.${e}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function oX(){return SP.useSyncExternalStore(lX,()=>!0,()=>!1)}function lX(){return()=>{}}var P_="Avatar",[cX]=rX(P_),[dX,l3]=cX(P_),c3=p.forwardRef((t,e)=>{const{__scopeAvatar:s,...r}=t,[i,a]=p.useState("idle");return n.jsx(dX,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:n.jsx(A_.span,{...r,ref:e})})});c3.displayName=P_;var d3="AvatarImage",u3=p.forwardRef((t,e)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=l3(d3,s),l=uX(r,a),c=Zs(d=>{i(d),o.onImageLoadingStatusChange(d)});return en(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?n.jsx(A_.img,{...a,ref:e,src:r}):null});u3.displayName=d3;var h3="AvatarFallback",f3=p.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:r,...i}=t,a=l3(h3,s),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?n.jsx(A_.span,{...i,ref:e}):null});f3.displayName=h3;function CE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function uX(t,{referrerPolicy:e,crossOrigin:s}){const r=oX(),i=p.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=p.useState(()=>CE(a,t));return en(()=>{l(CE(a,t))},[a,t]),en(()=>{const c=f=>()=>{l(f)};if(!a)return;const d=c("loaded"),u=c("error");return a.addEventListener("load",d),a.addEventListener("error",u),e&&(a.referrerPolicy=e),typeof s=="string"&&(a.crossOrigin=s),()=>{a.removeEventListener("load",d),a.removeEventListener("error",u)}},[a,s,e]),o}var p3=c3,m3=u3,g3=f3;const Or=p.forwardRef(({className:t,...e},s)=>n.jsx(p3,{ref:s,className:Re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Or.displayName=p3.displayName;const Dr=p.forwardRef(({className:t,...e},s)=>n.jsx(m3,{ref:s,className:Re("aspect-square h-full w-full",t),...e}));Dr.displayName=m3.displayName;const Mr=p.forwardRef(({className:t,...e},s)=>n.jsx(g3,{ref:s,className:Re("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Mr.displayName=g3.displayName;var Pb="rovingFocusGroup.onEntryFocus",hX={bubbles:!1,cancelable:!0},ng="RovingFocusGroup",[Qj,x3,fX]=xv(ng),[pX,Lf]=Cn(ng,[fX]),[mX,gX]=pX(ng),y3=p.forwardRef((t,e)=>n.jsx(Qj.Provider,{scope:t.__scopeRovingFocusGroup,children:n.jsx(Qj.Slot,{scope:t.__scopeRovingFocusGroup,children:n.jsx(xX,{...t,ref:e})})}));y3.displayName=ng;var xX=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=t,h=p.useRef(null),x=ft(e,h),g=Df(a),[y,w]=si({prop:o,defaultProp:l??null,onChange:c,caller:ng}),[b,v]=p.useState(!1),N=Zs(d),C=x3(s),_=p.useRef(!1),[T,j]=p.useState(0);return p.useEffect(()=>{const S=h.current;if(S)return S.addEventListener(Pb,N),()=>S.removeEventListener(Pb,N)},[N]),n.jsx(mX,{scope:s,orientation:r,dir:g,loop:i,currentTabStopId:y,onItemFocus:p.useCallback(S=>w(S),[w]),onItemShiftTab:p.useCallback(()=>v(!0),[]),onFocusableItemAdd:p.useCallback(()=>j(S=>S+1),[]),onFocusableItemRemove:p.useCallback(()=>j(S=>S-1),[]),children:n.jsx(Je.div,{tabIndex:b||T===0?-1:0,"data-orientation":r,...f,ref:x,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{_.current=!0}),onFocus:Ie(t.onFocus,S=>{const A=!_.current;if(S.target===S.currentTarget&&A&&!b){const I=new CustomEvent(Pb,hX);if(S.currentTarget.dispatchEvent(I),!I.defaultPrevented){const P=C().filter(X=>X.focusable),O=P.find(X=>X.active),D=P.find(X=>X.id===y),J=[O,D,...P].filter(Boolean).map(X=>X.ref.current);w3(J,u)}}_.current=!1}),onBlur:Ie(t.onBlur,()=>v(!1))})})}),v3="RovingFocusGroupItem",b3=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...l}=t,c=Ti(),d=a||c,u=gX(v3,s),f=u.currentTabStopId===d,h=x3(s),{onFocusableItemAdd:x,onFocusableItemRemove:g,currentTabStopId:y}=u;return p.useEffect(()=>{if(r)return x(),()=>g()},[r,x,g]),n.jsx(Qj.ItemSlot,{scope:s,id:d,focusable:r,active:i,children:n.jsx(Je.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...l,ref:e,onMouseDown:Ie(t.onMouseDown,w=>{r?u.onItemFocus(d):w.preventDefault()}),onFocus:Ie(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:Ie(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const b=bX(w,u.orientation,u.dir);if(b!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let N=h().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")N.reverse();else if(b==="prev"||b==="next"){b==="prev"&&N.reverse();const C=N.indexOf(w.currentTarget);N=u.loop?wX(N,C+1):N.slice(C+1)}setTimeout(()=>w3(N))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:y!=null}):o})})});b3.displayName=v3;var yX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function bX(t,e,s){const r=vX(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return yX[r]}function w3(t,e=!1){const s=document.activeElement;for(const r of t)if(r===s||(r.focus({preventScroll:e}),document.activeElement!==s))return}function wX(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var I_=y3,R_=b3;function jX(t){const e=NX(t),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),c=l.find(SX);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(e,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}function NX(t){const e=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=kX(i),l=CX(a,i.props);return i.type!==p.Fragment&&(l.ref=r?vo(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var _X=Symbol("radix.slottable");function SX(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===_X}function CX(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function kX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Zj=["Enter"," "],EX=["ArrowDown","PageUp","Home"],j3=["ArrowUp","PageDown","End"],TX=[...EX,...j3],AX={ltr:[...Zj,"ArrowRight"],rtl:[...Zj,"ArrowLeft"]},PX={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rg="Menu",[vm,IX,RX]=xv(rg),[mu,N3]=Cn(rg,[RX,wo,Lf]),Gv=wo(),_3=Lf(),[OX,gu]=mu(rg),[DX,ig]=mu(rg),S3=t=>{const{__scopeMenu:e,open:s=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,l=Gv(e),[c,d]=p.useState(null),u=p.useRef(!1),f=Zs(a),h=Df(i);return p.useEffect(()=>{const x=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),n.jsx(kv,{...l,children:n.jsx(OX,{scope:e,open:s,onOpenChange:f,content:c,onContentChange:d,children:n.jsx(DX,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};S3.displayName=rg;var MX="MenuAnchor",O_=p.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t,i=Gv(s);return n.jsx(Pf,{...i,...r,ref:e})});O_.displayName=MX;var D_="MenuPortal",[LX,C3]=mu(D_,{forceMount:void 0}),k3=t=>{const{__scopeMenu:e,forceMount:s,children:r,container:i}=t,a=gu(D_,e);return n.jsx(LX,{scope:e,forceMount:s,children:n.jsx(hn,{present:s||a.open,children:n.jsx(Nf,{asChild:!0,container:i,children:r})})})};k3.displayName=D_;var Ai="MenuContent",[FX,M_]=mu(Ai),E3=p.forwardRef((t,e)=>{const s=C3(Ai,t.__scopeMenu),{forceMount:r=s.forceMount,...i}=t,a=gu(Ai,t.__scopeMenu),o=ig(Ai,t.__scopeMenu);return n.jsx(vm.Provider,{scope:t.__scopeMenu,children:n.jsx(hn,{present:r||a.open,children:n.jsx(vm.Slot,{scope:t.__scopeMenu,children:o.modal?n.jsx($X,{...i,ref:e}):n.jsx(UX,{...i,ref:e})})})})}),$X=p.forwardRef((t,e)=>{const s=gu(Ai,t.__scopeMenu),r=p.useRef(null),i=ft(e,r);return p.useEffect(()=>{const a=r.current;if(a)return Bv(a)},[]),n.jsx(L_,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:Ie(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),UX=p.forwardRef((t,e)=>{const s=gu(Ai,t.__scopeMenu);return n.jsx(L_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),zX=jX("MenuContent.ScrollLock"),L_=p.forwardRef((t,e)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:x,disableOutsideScroll:g,...y}=t,w=gu(Ai,s),b=ig(Ai,s),v=Gv(s),N=_3(s),C=IX(s),[_,T]=p.useState(null),j=p.useRef(null),S=ft(e,j,w.onContentChange),A=p.useRef(0),I=p.useRef(""),P=p.useRef(0),O=p.useRef(null),D=p.useRef("right"),M=p.useRef(0),J=g?sg:p.Fragment,X=g?{as:zX,allowPinchZoom:!0}:void 0,U=L=>{var K,Q;const te=I.current+L,F=C().filter(se=>!se.disabled),z=document.activeElement,pe=(K=F.find(se=>se.ref.current===z))==null?void 0:K.textValue,xe=F.map(se=>se.textValue),_e=JX(xe,te,pe),Me=(Q=F.find(se=>se.textValue===_e))==null?void 0:Q.ref.current;(function se(ye){I.current=ye,window.clearTimeout(A.current),ye!==""&&(A.current=window.setTimeout(()=>se(""),1e3))})(te),Me&&setTimeout(()=>Me.focus())};p.useEffect(()=>()=>window.clearTimeout(A.current),[]),Uv();const $=p.useCallback(L=>{var F,z;return D.current===((F=O.current)==null?void 0:F.side)&&tJ(L,(z=O.current)==null?void 0:z.area)},[]);return n.jsx(FX,{scope:s,searchRef:I,onItemEnter:p.useCallback(L=>{$(L)&&L.preventDefault()},[$]),onItemLeave:p.useCallback(L=>{var te;$(L)||((te=j.current)==null||te.focus(),T(null))},[$]),onTriggerLeave:p.useCallback(L=>{$(L)&&L.preventDefault()},[$]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback(L=>{O.current=L},[]),children:n.jsx(J,{...X,children:n.jsx(tg,{asChild:!0,trapped:i,onMountAutoFocus:Ie(a,L=>{var te;L.preventDefault(),(te=j.current)==null||te.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(zc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:x,children:n.jsx(I_,{asChild:!0,...N,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:T,onEntryFocus:Ie(c,L=>{b.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(qm,{role:"menu","aria-orientation":"vertical","data-state":V3(w.open),"data-radix-menu-content":"",dir:b.dir,...v,...y,ref:S,style:{outline:"none",...y.style},onKeyDown:Ie(y.onKeyDown,L=>{const F=L.target.closest("[data-radix-menu-content]")===L.currentTarget,z=L.ctrlKey||L.altKey||L.metaKey,pe=L.key.length===1;F&&(L.key==="Tab"&&L.preventDefault(),!z&&pe&&U(L.key));const xe=j.current;if(L.target!==xe||!TX.includes(L.key))return;L.preventDefault();const Me=C().filter(K=>!K.disabled).map(K=>K.ref.current);j3.includes(L.key)&&Me.reverse(),ZX(Me)}),onBlur:Ie(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(A.current),I.current="")}),onPointerMove:Ie(t.onPointerMove,bm(L=>{const te=L.target,F=M.current!==L.clientX;if(L.currentTarget.contains(te)&&F){const z=L.clientX>M.current?"right":"left";D.current=z,M.current=L.clientX}}))})})})})})})});E3.displayName=Ai;var BX="MenuGroup",F_=p.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t;return n.jsx(Je.div,{role:"group",...r,ref:e})});F_.displayName=BX;var qX="MenuLabel",T3=p.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t;return n.jsx(Je.div,{...r,ref:e})});T3.displayName=qX;var My="MenuItem",kE="menu.itemSelect",Yv=p.forwardRef((t,e)=>{const{disabled:s=!1,onSelect:r,...i}=t,a=p.useRef(null),o=ig(My,t.__scopeMenu),l=M_(My,t.__scopeMenu),c=ft(e,a),d=p.useRef(!1),u=()=>{const f=a.current;if(!s&&f){const h=new CustomEvent(kE,{bubbles:!0,cancelable:!0});f.addEventListener(kE,x=>r==null?void 0:r(x),{once:!0}),kN(f,h),h.defaultPrevented?d.current=!1:o.onClose()}};return n.jsx(A3,{...i,ref:c,disabled:s,onClick:Ie(t.onClick,u),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),d.current=!0},onPointerUp:Ie(t.onPointerUp,f=>{var h;d.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:Ie(t.onKeyDown,f=>{const h=l.searchRef.current!=="";s||h&&f.key===" "||Zj.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Yv.displayName=My;var A3=p.forwardRef((t,e)=>{const{__scopeMenu:s,disabled:r=!1,textValue:i,...a}=t,o=M_(My,s),l=_3(s),c=p.useRef(null),d=ft(e,c),[u,f]=p.useState(!1),[h,x]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&x((g.textContent??"").trim())},[a.children]),n.jsx(vm.ItemSlot,{scope:s,disabled:r,textValue:i??h,children:n.jsx(R_,{asChild:!0,...l,focusable:!r,children:n.jsx(Je.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:Ie(t.onPointerMove,bm(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(t.onPointerLeave,bm(g=>o.onItemLeave(g))),onFocus:Ie(t.onFocus,()=>f(!0)),onBlur:Ie(t.onBlur,()=>f(!1))})})})}),VX="MenuCheckboxItem",P3=p.forwardRef((t,e)=>{const{checked:s=!1,onCheckedChange:r,...i}=t;return n.jsx(M3,{scope:t.__scopeMenu,checked:s,children:n.jsx(Yv,{role:"menuitemcheckbox","aria-checked":Ly(s)?"mixed":s,...i,ref:e,"data-state":U_(s),onSelect:Ie(i.onSelect,()=>r==null?void 0:r(Ly(s)?!0:!s),{checkForDefaultPrevented:!1})})})});P3.displayName=VX;var I3="MenuRadioGroup",[HX,WX]=mu(I3,{value:void 0,onValueChange:()=>{}}),R3=p.forwardRef((t,e)=>{const{value:s,onValueChange:r,...i}=t,a=Zs(r);return n.jsx(HX,{scope:t.__scopeMenu,value:s,onValueChange:a,children:n.jsx(F_,{...i,ref:e})})});R3.displayName=I3;var O3="MenuRadioItem",D3=p.forwardRef((t,e)=>{const{value:s,...r}=t,i=WX(O3,t.__scopeMenu),a=s===i.value;return n.jsx(M3,{scope:t.__scopeMenu,checked:a,children:n.jsx(Yv,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":U_(a),onSelect:Ie(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,s)},{checkForDefaultPrevented:!1})})})});D3.displayName=O3;var $_="MenuItemIndicator",[M3,KX]=mu($_,{checked:!1}),L3=p.forwardRef((t,e)=>{const{__scopeMenu:s,forceMount:r,...i}=t,a=KX($_,s);return n.jsx(hn,{present:r||Ly(a.checked)||a.checked===!0,children:n.jsx(Je.span,{...i,ref:e,"data-state":U_(a.checked)})})});L3.displayName=$_;var GX="MenuSeparator",F3=p.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t;return n.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});F3.displayName=GX;var YX="MenuArrow",$3=p.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t,i=Gv(s);return n.jsx(Vm,{...i,...r,ref:e})});$3.displayName=YX;var QX="MenuSub",[Fhe,U3]=mu(QX),bp="MenuSubTrigger",z3=p.forwardRef((t,e)=>{const s=gu(bp,t.__scopeMenu),r=ig(bp,t.__scopeMenu),i=U3(bp,t.__scopeMenu),a=M_(bp,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:t.__scopeMenu},u=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),n.jsx(O_,{asChild:!0,...d,children:n.jsx(A3,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":i.contentId,"data-state":V3(s.open),...t,ref:vo(e,i.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:Ie(t.onPointerMove,bm(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!s.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),u()},100))})),onPointerLeave:Ie(t.onPointerLeave,bm(f=>{var x,g;u();const h=(x=s.content)==null?void 0:x.getBoundingClientRect();if(h){const y=(g=s.content)==null?void 0:g.dataset.side,w=y==="right",b=w?-5:5,v=h[w?"left":"right"],N=h[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:v,y:h.top},{x:N,y:h.top},{x:N,y:h.bottom},{x:v,y:h.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(t.onKeyDown,f=>{var x;const h=a.searchRef.current!=="";t.disabled||h&&f.key===" "||AX[r.dir].includes(f.key)&&(s.onOpenChange(!0),(x=s.content)==null||x.focus(),f.preventDefault())})})})});z3.displayName=bp;var B3="MenuSubContent",q3=p.forwardRef((t,e)=>{const s=C3(Ai,t.__scopeMenu),{forceMount:r=s.forceMount,...i}=t,a=gu(Ai,t.__scopeMenu),o=ig(Ai,t.__scopeMenu),l=U3(B3,t.__scopeMenu),c=p.useRef(null),d=ft(e,c);return n.jsx(vm.Provider,{scope:t.__scopeMenu,children:n.jsx(hn,{present:r||a.open,children:n.jsx(vm.Slot,{scope:t.__scopeMenu,children:n.jsx(L_,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ie(t.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ie(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Ie(t.onKeyDown,u=>{var x;const f=u.currentTarget.contains(u.target),h=PX[o.dir].includes(u.key);f&&h&&(a.onOpenChange(!1),(x=l.trigger)==null||x.focus(),u.preventDefault())})})})})})});q3.displayName=B3;function V3(t){return t?"open":"closed"}function Ly(t){return t==="indeterminate"}function U_(t){return Ly(t)?"indeterminate":t?"checked":"unchecked"}function ZX(t){const e=document.activeElement;for(const s of t)if(s===e||(s.focus(),document.activeElement!==e))return}function XX(t,e){return t.map((s,r)=>t[(e+r)%t.length])}function JX(t,e,s){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let o=XX(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==s?c:void 0}function eJ(t,e){const{x:s,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],d=l.x,u=l.y,f=c.x,h=c.y;u>r!=h>r&&s<(f-d)*(r-u)/(h-u)+d&&(i=!i)}return i}function tJ(t,e){if(!e)return!1;const s={x:t.clientX,y:t.clientY};return eJ(s,e)}function bm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var sJ=S3,nJ=O_,rJ=k3,iJ=E3,aJ=F_,oJ=T3,lJ=Yv,cJ=P3,dJ=R3,uJ=D3,hJ=L3,fJ=F3,pJ=$3,mJ=z3,gJ=q3,Qv="DropdownMenu",[xJ]=Cn(Qv,[N3]),xr=N3(),[yJ,H3]=xJ(Qv),W3=t=>{const{__scopeDropdownMenu:e,children:s,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=xr(e),d=p.useRef(null),[u,f]=si({prop:i,defaultProp:a??!1,onChange:o,caller:Qv});return n.jsx(yJ,{scope:e,triggerId:Ti(),triggerRef:d,contentId:Ti(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(h=>!h),[f]),modal:l,children:n.jsx(sJ,{...c,open:u,onOpenChange:f,dir:r,modal:l,children:s})})};W3.displayName=Qv;var K3="DropdownMenuTrigger",G3=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...i}=t,a=H3(K3,s),o=xr(s);return n.jsx(nJ,{asChild:!0,...o,children:n.jsx(Je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:vo(e,a.triggerRef),onPointerDown:Ie(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Ie(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});G3.displayName=K3;var vJ="DropdownMenuPortal",Y3=t=>{const{__scopeDropdownMenu:e,...s}=t,r=xr(e);return n.jsx(rJ,{...r,...s})};Y3.displayName=vJ;var Q3="DropdownMenuContent",Z3=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=H3(Q3,s),a=xr(s),o=p.useRef(!1);return n.jsx(iJ,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:Ie(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ie(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Z3.displayName=Q3;var bJ="DropdownMenuGroup",wJ=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(aJ,{...i,...r,ref:e})});wJ.displayName=bJ;var jJ="DropdownMenuLabel",X3=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(oJ,{...i,...r,ref:e})});X3.displayName=jJ;var NJ="DropdownMenuItem",J3=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(lJ,{...i,...r,ref:e})});J3.displayName=NJ;var _J="DropdownMenuCheckboxItem",eD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(cJ,{...i,...r,ref:e})});eD.displayName=_J;var SJ="DropdownMenuRadioGroup",CJ=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(dJ,{...i,...r,ref:e})});CJ.displayName=SJ;var kJ="DropdownMenuRadioItem",tD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(uJ,{...i,...r,ref:e})});tD.displayName=kJ;var EJ="DropdownMenuItemIndicator",sD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(hJ,{...i,...r,ref:e})});sD.displayName=EJ;var TJ="DropdownMenuSeparator",nD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(fJ,{...i,...r,ref:e})});nD.displayName=TJ;var AJ="DropdownMenuArrow",PJ=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(pJ,{...i,...r,ref:e})});PJ.displayName=AJ;var IJ="DropdownMenuSubTrigger",rD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(mJ,{...i,...r,ref:e})});rD.displayName=IJ;var RJ="DropdownMenuSubContent",iD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=xr(s);return n.jsx(gJ,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iD.displayName=RJ;var OJ=W3,DJ=G3,MJ=Y3,aD=Z3,oD=X3,lD=J3,cD=eD,dD=tD,uD=sD,hD=nD,fD=rD,pD=iD;const No=OJ,_o=DJ,LJ=p.forwardRef(({className:t,inset:e,children:s,...r},i)=>n.jsxs(fD,{ref:i,className:Re("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[s,n.jsx(Vn,{className:"ml-auto"})]}));LJ.displayName=fD.displayName;const FJ=p.forwardRef(({className:t,...e},s)=>n.jsx(pD,{ref:s,className:Re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));FJ.displayName=pD.displayName;const Ea=p.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(MJ,{children:n.jsx(aD,{ref:r,sideOffset:e,className:Re("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s})}));Ea.displayName=aD.displayName;const Zt=p.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(lD,{ref:r,className:Re("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...s}));Zt.displayName=lD.displayName;const $J=p.forwardRef(({className:t,children:e,checked:s,...r},i)=>n.jsxs(cD,{ref:i,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(uD,{children:n.jsx(IN,{className:"h-4 w-4"})})}),e]}));$J.displayName=cD.displayName;const UJ=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(dD,{ref:r,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(uD,{children:n.jsx(jI,{className:"h-2 w-2 fill-current"})})}),e]}));UJ.displayName=dD.displayName;const mD=p.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(oD,{ref:r,className:Re("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));mD.displayName=oD.displayName;const Na=p.forwardRef(({className:t,...e},s)=>n.jsx(hD,{ref:s,className:Re("-mx-1 my-1 h-px bg-muted",t),...e}));Na.displayName=hD.displayName;function Ze({children:t}){const{user:e,logout:s}=qi(),{settings:r}=qc(),[,i]=Ds(),[a,o]=p.useState(!1),l=async()=>{await s(),i("/admin/login")},c=()=>e!=null&&e.firstName&&(e!=null&&e.lastName)?`${e.firstName[0]}${e.lastName[0]}`.toUpperCase():e!=null&&e.firstName?e.firstName[0].toUpperCase():e!=null&&e.email?e.email[0].toUpperCase():"A";return n.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[n.jsxs("div",{className:"bg-card border-b border-border px-3 sm:px-6 py-3 flex justify-between items-center h-14 z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>o(!0),className:"lg:hidden h-9 w-9 p-0","data-testid":"button-mobile-menu",children:n.jsx(yU,{className:"h-5 w-5"})}),n.jsx(Gn,{href:"/admin","data-testid":"link-admin-home",children:n.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("div",{className:"h-7 w-7 bg-primary rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:r.app_name.charAt(0).toUpperCase()})}),n.jsxs("div",{className:"hidden sm:flex flex-col",children:[n.jsx("span",{className:"text-base font-bold text-foreground leading-tight",children:r.app_name}),n.jsx("span",{className:"text-xs text-muted-foreground -mt-0.5",children:"Admin Panel"})]})]})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-right hidden md:block mr-2",children:[n.jsx("p",{className:"text-sm font-medium text-foreground","data-testid":"text-admin-email",children:e==null?void 0:e.email}),n.jsx(Ye,{variant:"secondary",className:"mt-0.5 text-xs",children:"Admin"})]}),e&&n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,"data-testid":"button-profile-dropdown",children:n.jsxs(Or,{className:"h-9 w-9 cursor-pointer hover-elevate",children:[n.jsx(Dr,{src:e.profilePhoto,alt:`${e.firstName||e.email}`}),n.jsx(Mr,{className:"bg-primary text-primary-foreground text-sm font-bold",children:c()})]})}),n.jsxs(Ea,{align:"end",className:"w-56",children:[n.jsx(mD,{children:"My Account"}),n.jsx(Na,{}),n.jsx(Zt,{asChild:!0,children:n.jsxs(Gn,{href:"/admin/profile",className:"cursor-pointer","data-testid":"dropdown-profile",children:[n.jsx(fo,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Profile"})]})}),n.jsx(Zt,{asChild:!0,children:n.jsxs(Gn,{href:"/admin/settings",className:"cursor-pointer","data-testid":"dropdown-settings",children:[n.jsx(dm,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Settings"})]})}),n.jsx(Na,{}),n.jsxs(Zt,{onClick:l,className:"cursor-pointer text-destructive focus:text-destructive","data-testid":"dropdown-logout",children:[n.jsx(gU,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Logout"})]})]})]})]})]}),n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsx(sX,{isOpen:a,onClose:()=>o(!1)}),n.jsx("div",{className:"flex-1 overflow-auto",children:t})]})]})}function Jt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ri(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function lr(t,e){const s=Jt(t);return isNaN(e)?ri(t,NaN):(e&&s.setDate(s.getDate()+e),s)}function _a(t,e){const s=Jt(t);if(isNaN(e))return ri(t,NaN);if(!e)return s;const r=s.getDate(),i=ri(t,s.getTime());i.setMonth(s.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(s.setFullYear(i.getFullYear(),i.getMonth(),r),s)}const z_=6048e5,zJ=864e5;let BJ={};function ag(){return BJ}function go(t,e){var l,c,d,u;const s=ag(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=Jt(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Jd(t){return go(t,{weekStartsOn:1})}function gD(t){const e=Jt(t),s=e.getFullYear(),r=ri(t,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=Jd(r),a=ri(t,0);a.setFullYear(s,0,4),a.setHours(0,0,0,0);const o=Jd(a);return e.getTime()>=i.getTime()?s+1:e.getTime()>=o.getTime()?s:s-1}function cf(t){const e=Jt(t);return e.setHours(0,0,0,0),e}function Fy(t){const e=Jt(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function eo(t,e){const s=cf(t),r=cf(e),i=+s-Fy(s),a=+r-Fy(r);return Math.round((i-a)/zJ)}function qJ(t){const e=gD(t),s=ri(t,0);return s.setFullYear(e,0,4),s.setHours(0,0,0,0),Jd(s)}function Xj(t,e){const s=e*7;return lr(t,s)}function VJ(t,e){return _a(t,e*12)}function HJ(t){let e;return t.forEach(function(s){const r=Jt(s);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function WJ(t){let e;return t.forEach(s=>{const r=Jt(s);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Er(t,e){const s=cf(t),r=cf(e);return+s==+r}function B_(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function KJ(t){if(!B_(t)&&typeof t!="number")return!1;const e=Jt(t);return!isNaN(Number(e))}function wm(t,e){const s=Jt(t),r=Jt(e),i=s.getFullYear()-r.getFullYear(),a=s.getMonth()-r.getMonth();return i*12+a}function GJ(t,e,s){const r=go(t,s),i=go(e,s),a=+r-Fy(r),o=+i-Fy(i);return Math.round((a-o)/z_)}function q_(t){const e=Jt(t),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(23,59,59,999),e}function Ir(t){const e=Jt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function xD(t){const e=Jt(t),s=ri(t,0);return s.setFullYear(e.getFullYear(),0,1),s.setHours(0,0,0,0),s}function V_(t,e){var l,c,d,u;const s=ag(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=Jt(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function yD(t){return V_(t,{weekStartsOn:1})}const YJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},QJ=(t,e,s)=>{let r;const i=YJ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function Ib(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const ZJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},XJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eee={date:Ib({formats:ZJ,defaultWidth:"full"}),time:Ib({formats:XJ,defaultWidth:"full"}),dateTime:Ib({formats:JJ,defaultWidth:"full"})},tee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},see=(t,e,s,r)=>tee[t];function cp(t){return(e,s)=>{const r=s!=null&&s.context?String(s.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=s!=null&&s.width?String(s.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=s!=null&&s.width?String(s.width):t.defaultWidth;i=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const nee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ree={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},iee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cee=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},dee={ordinalNumber:cee,era:cp({values:nee,defaultWidth:"wide"}),quarter:cp({values:ree,defaultWidth:"wide",argumentCallback:t=>t-1}),month:cp({values:iee,defaultWidth:"wide"}),day:cp({values:aee,defaultWidth:"wide"}),dayPeriod:cp({values:oee,defaultWidth:"wide",formattingValues:lee,defaultFormattingWidth:"wide"})};function dp(t){return(e,s={})=>{const r=s.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?hee(l,f=>f.test(o)):uee(l,f=>f.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function uee(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function hee(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function fee(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=s.valueCallback?s.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const pee=/^(\d+)(th|st|nd|rd)?/i,mee=/\d+/i,gee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xee={any:[/^b/i,/^(a|c)/i]},yee={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vee={any:[/1/i,/2/i,/3/i,/4/i]},bee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_ee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},See={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cee={ordinalNumber:fee({matchPattern:pee,parsePattern:mee,valueCallback:t=>parseInt(t,10)}),era:dp({matchPatterns:gee,defaultMatchWidth:"wide",parsePatterns:xee,defaultParseWidth:"any"}),quarter:dp({matchPatterns:yee,defaultMatchWidth:"wide",parsePatterns:vee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:dp({matchPatterns:bee,defaultMatchWidth:"wide",parsePatterns:wee,defaultParseWidth:"any"}),day:dp({matchPatterns:jee,defaultMatchWidth:"wide",parsePatterns:Nee,defaultParseWidth:"any"}),dayPeriod:dp({matchPatterns:_ee,defaultMatchWidth:"any",parsePatterns:See,defaultParseWidth:"any"})},vD={code:"en-US",formatDistance:QJ,formatLong:eee,formatRelative:see,localize:dee,match:Cee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kee(t){const e=Jt(t);return eo(e,xD(e))+1}function bD(t){const e=Jt(t),s=+Jd(e)-+qJ(e);return Math.round(s/z_)+1}function wD(t,e){var u,f,h,x;const s=Jt(t),r=s.getFullYear(),i=ag(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(h=i.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,o=ri(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=go(o,e),c=ri(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=go(c,e);return s.getTime()>=l.getTime()?r+1:s.getTime()>=d.getTime()?r:r-1}function Eee(t,e){var l,c,d,u;const s=ag(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??s.firstWeekContainsDate??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=wD(t,e),a=ri(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),go(a,e)}function jD(t,e){const s=Jt(t),r=+go(s,e)-+Eee(s,e);return Math.round(r/z_)+1}function us(t,e){const s=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return s+r}const Ml={y(t,e){const s=t.getFullYear(),r=s>0?s:1-s;return us(e==="yy"?r%100:r,e.length)},M(t,e){const s=t.getMonth();return e==="M"?String(s+1):us(s+1,2)},d(t,e){return us(t.getDate(),e.length)},a(t,e){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,e){return us(t.getHours()%12||12,e.length)},H(t,e){return us(t.getHours(),e.length)},m(t,e){return us(t.getMinutes(),e.length)},s(t,e){return us(t.getSeconds(),e.length)},S(t,e){const s=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,s-3));return us(i,e.length)}},Vu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},EE={G:function(t,e,s){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,e,s){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return Ml.y(t,e)},Y:function(t,e,s,r){const i=wD(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return us(o,2)}return e==="Yo"?s.ordinalNumber(a,{unit:"year"}):us(a,e.length)},R:function(t,e){const s=gD(t);return us(s,e.length)},u:function(t,e){const s=t.getFullYear();return us(s,e.length)},Q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return us(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return us(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,s){const r=t.getMonth();switch(e){case"M":case"MM":return Ml.M(t,e);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,s){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return us(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,s,r){const i=jD(t,r);return e==="wo"?s.ordinalNumber(i,{unit:"week"}):us(i,e.length)},I:function(t,e,s){const r=bD(t);return e==="Io"?s.ordinalNumber(r,{unit:"week"}):us(r,e.length)},d:function(t,e,s){return e==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Ml.d(t,e)},D:function(t,e,s){const r=kee(t);return e==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):us(r,e.length)},E:function(t,e,s){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,s,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return us(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,s,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return us(a,e.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,s){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return us(i,e.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,s){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,s){const r=t.getHours();let i;switch(r===12?i=Vu.noon:r===0?i=Vu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,s){const r=t.getHours();let i;switch(r>=17?i=Vu.evening:r>=12?i=Vu.afternoon:r>=4?i=Vu.morning:i=Vu.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,s){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Ml.h(t,e)},H:function(t,e,s){return e==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Ml.H(t,e)},K:function(t,e,s){const r=t.getHours()%12;return e==="Ko"?s.ordinalNumber(r,{unit:"hour"}):us(r,e.length)},k:function(t,e,s){let r=t.getHours();return r===0&&(r=24),e==="ko"?s.ordinalNumber(r,{unit:"hour"}):us(r,e.length)},m:function(t,e,s){return e==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ml.m(t,e)},s:function(t,e,s){return e==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Ml.s(t,e)},S:function(t,e){return Ml.S(t,e)},X:function(t,e,s){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return AE(r);case"XXXX":case"XX":return dd(r);case"XXXXX":case"XXX":default:return dd(r,":")}},x:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"x":return AE(r);case"xxxx":case"xx":return dd(r);case"xxxxx":case"xxx":default:return dd(r,":")}},O:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+TE(r,":");case"OOOO":default:return"GMT"+dd(r,":")}},z:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+TE(r,":");case"zzzz":default:return"GMT"+dd(r,":")}},t:function(t,e,s){const r=Math.trunc(t.getTime()/1e3);return us(r,e.length)},T:function(t,e,s){const r=t.getTime();return us(r,e.length)}};function TE(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?s+String(i):s+String(i)+e+us(a,2)}function AE(t,e){return t%60===0?(t>0?"-":"+")+us(Math.abs(t)/60,2):dd(t,e)}function dd(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),i=us(Math.trunc(r/60),2),a=us(r%60,2);return s+i+e+a}const PE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ND=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Tee=(t,e)=>{const s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return PE(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",PE(r,e)).replace("{{time}}",ND(i,e))},Aee={p:ND,P:Tee},Pee=/^D+$/,Iee=/^Y+$/,Ree=["D","DD","YY","YYYY"];function Oee(t){return Pee.test(t)}function Dee(t){return Iee.test(t)}function Mee(t,e,s){const r=Lee(t,e,s);if(console.warn(r),Ree.includes(t))throw new RangeError(r)}function Lee(t,e,s){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Fee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$ee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Uee=/^'([^]*?)'?$/,zee=/''/g,Bee=/[a-zA-Z]/;function It(t,e,s){var u,f,h,x,g,y,w,b;const r=ag(),i=(s==null?void 0:s.locale)??r.locale??vD,a=(s==null?void 0:s.firstWeekContainsDate)??((f=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(h=r.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,o=(s==null?void 0:s.weekStartsOn)??((y=(g=s==null?void 0:s.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((b=(w=r.locale)==null?void 0:w.options)==null?void 0:b.weekStartsOn)??0,l=Jt(t);if(!KJ(l))throw new RangeError("Invalid time value");let c=e.match($ee).map(v=>{const N=v[0];if(N==="p"||N==="P"){const C=Aee[N];return C(v,i.formatLong)}return v}).join("").match(Fee).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const N=v[0];if(N==="'")return{isToken:!1,value:qee(v)};if(EE[N])return{isToken:!0,value:v};if(N.match(Bee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const N=v.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&Dee(N)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&Oee(N))&&Mee(N,e,String(t));const C=EE[N[0]];return C(l,N,i.localize,d)}).join("")}function qee(t){const e=t.match(Uee);return e?e[1].replace(zee,"'"):t}function Vee(t){const e=Jt(t),s=e.getFullYear(),r=e.getMonth(),i=ri(t,0);return i.setFullYear(s,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Hee(t){return Math.trunc(+Jt(t)/1e3)}function Wee(t){const e=Jt(t),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(0,0,0,0),e}function Kee(t,e){return GJ(Wee(t),Ir(t),e)+1}function Jj(t,e){const s=Jt(t),r=Jt(e);return s.getTime()>r.getTime()}function _D(t,e){const s=Jt(t),r=Jt(e);return+s<+r}function H_(t,e){const s=Jt(t),r=Jt(e);return s.getFullYear()===r.getFullYear()&&s.getMonth()===r.getMonth()}function Gee(t,e){const s=Jt(t),r=Jt(e);return s.getFullYear()===r.getFullYear()}function Rb(t,e){return lr(t,-e)}function Ob(t,e){const s=Jt(t),r=s.getFullYear(),i=s.getDate(),a=ri(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=Vee(a);return s.setMonth(e,Math.min(i,o)),s}function IE(t,e){const s=Jt(t);return isNaN(+s)?ri(t,NaN):(s.setFullYear(e),s)}function RE(){var _,T;const[,t]=Ds(),{user:e}=qi(),{settings:s}=qc(),r=s.currency||"$";p.useEffect(()=>{e!=null&&e.admin||t("/")},[e==null?void 0:e.admin,t]);const{data:i}=Ve({queryKey:["/api/admin/users/stats/all"],queryFn:async()=>{const j=await fetch("/api/admin/users/stats/all",{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch user stats");return await j.json()}}),{data:a}=Ve({queryKey:["/api/admin/rooms/stats/all"],queryFn:async()=>{const j=await fetch("/api/admin/rooms/stats/all",{credentials:"include"});return j.ok?await j.json():{success:!1,data:{total:0,live:0,upcoming:0}}}}),{data:o}=Ve({queryKey:["/api/admin/orders/stats/all"],queryFn:async()=>{const j=await fetch("/api/admin/orders/stats/all",{credentials:"include"});return j.ok?await j.json():{success:!1,data:{}}}}),{data:l}=Ve({queryKey:["/api/admin/users","dashboard"],queryFn:async()=>{const j=await fetch("/api/admin/users?limit=5",{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch users");return await j.json()}}),{data:c}=Ve({queryKey:["/api/admin/disputes","dashboard"],queryFn:async()=>{const j=await fetch("/api/admin/disputes?page=1&limit=5",{credentials:"include"});return j.ok?await j.json():{success:!1,data:{disputes:[]}}}}),{data:d}=Ve({queryKey:["/api/orders/items/all?limit=5"]}),u=(i==null?void 0:i.data)||{},f=((_=l==null?void 0:l.data)==null?void 0:_.users)||[],h=((T=c==null?void 0:c.data)==null?void 0:T.disputes)||(c==null?void 0:c.data)||[],x=(d==null?void 0:d.items)||[],g=(o==null?void 0:o.data)||{},y=(a==null?void 0:a.data)||{},w=y.recentshows||y.recentShows||[],b=Object.fromEntries(Object.entries(y).filter(([j,S])=>typeof S=="number"||typeof S=="string")),v=j=>j.replace(/([A-Z])/g," $1").replace(/^./,S=>S.toUpperCase()).replace(/_/g," ").trim(),N=j=>{const S=j.toLowerCase();return S.includes("live")?{icon:dr,color:"text-red-500",valueColor:"text-red-600"}:S.includes("upcoming")||S.includes("pending")||S.includes("scheduled")?{icon:Cr,color:"text-blue-500",valueColor:"text-blue-600"}:S.includes("active")||S.includes("approved")?{icon:lc,color:"text-green-500",valueColor:"text-green-600"}:S.includes("blocked")||S.includes("banned")?{icon:lm,color:"text-red-500",valueColor:"text-red-600"}:S.includes("order")?{icon:cr,color:"text-muted-foreground",valueColor:""}:S.includes("revenue")||S.includes("amount")?{icon:zn,color:"text-green-500",valueColor:"text-green-600"}:S.includes("user")||S.includes("customer")||S.includes("seller")?{icon:Xr,color:"text-muted-foreground",valueColor:""}:S.includes("show")||S.includes("room")?{icon:dr,color:"text-muted-foreground",valueColor:""}:S.includes("dispute")?{icon:qr,color:"text-orange-500",valueColor:"text-orange-600"}:{icon:wv,color:"text-muted-foreground",valueColor:""}},C=(j,S)=>{const A=j.toLowerCase(),I=Number(S);return A.includes("revenue")||A.includes("amount")||A.includes("price")||A.includes("value")?`${r}${I.toFixed(2)}`:String(S??0)};return n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's an overview of your platform."})]}),Object.keys(u).length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(Xr,{className:"h-5 w-5"}),"User Statistics"]}),n.jsx(Gn,{href:"/admin/users",children:n.jsxs(G,{variant:"ghost",size:"sm",children:["View All ",n.jsx(sd,{className:"h-4 w-4 ml-1"})]})})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(u).map(([j,S])=>{const{icon:A,color:I,valueColor:P}=N(j);return n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:v(j)}),n.jsx(A,{className:`h-4 w-4 ${I}`})]}),n.jsx(ue,{children:n.jsx("div",{className:`text-2xl font-bold ${P}`,children:C(j,S)})})]},j)})})]}),Object.keys(b).length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(dr,{className:"h-5 w-5"}),"Show Statistics"]}),n.jsx(Gn,{href:"/admin/shows",children:n.jsxs(G,{variant:"ghost",size:"sm",children:["View All ",n.jsx(sd,{className:"h-4 w-4 ml-1"})]})})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(b).map(([j,S])=>{const{icon:A,color:I,valueColor:P}=N(j);return n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:v(j)}),j.toLowerCase()==="live"?n.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full animate-pulse"}):n.jsx(A,{className:`h-4 w-4 ${I}`})]}),n.jsx(ue,{children:n.jsx("div",{className:`text-2xl font-bold ${P}`,children:C(j,S)})})]},j)})})]}),Object.keys(g).length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(cr,{className:"h-5 w-5"}),"Order Statistics"]}),n.jsx(Gn,{href:"/admin/orders",children:n.jsxs(G,{variant:"ghost",size:"sm",children:["View All ",n.jsx(sd,{className:"h-4 w-4 ml-1"})]})})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(g).map(([j,S])=>{const{icon:A,color:I,valueColor:P}=N(j);return n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:v(j)}),n.jsx(A,{className:`h-4 w-4 ${I}`})]}),n.jsx(ue,{children:n.jsx("div",{className:`text-2xl font-bold ${P}`,children:C(j,S)})})]},j)})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{className:"text-base",children:"Recent Users"}),n.jsx(Fe,{children:"Latest registered users"})]}),n.jsx(Gn,{href:"/admin/users",children:n.jsxs(G,{variant:"ghost",size:"sm",children:["View All ",n.jsx(sd,{className:"h-4 w-4 ml-1"})]})})]})}),n.jsx(ue,{children:f.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No users found"}):n.jsx("div",{className:"space-y-3",children:f.slice(0,5).map(j=>{var S,A;return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Or,{className:"h-8 w-8",children:[n.jsx(Dr,{src:j.profilePhoto}),n.jsxs(Mr,{children:[(S=j.firstName)==null?void 0:S[0],(A=j.lastName)==null?void 0:A[0]]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium",children:[j.firstName," ",j.lastName]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:j.email})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ye,{variant:j.seller?"default":"secondary",className:"text-xs",children:j.seller?"Seller":"Customer"}),n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t(`/admin/users/${j._id||j.id}`),children:n.jsx(cn,{className:"h-4 w-4"})})]})]},j._id||j.id)})})})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{className:"text-base",children:"Recent Shows"}),n.jsx(Fe,{children:"Latest live shows"})]}),n.jsx(Gn,{href:"/admin/shows",children:n.jsxs(G,{variant:"ghost",size:"sm",children:["View All ",n.jsx(sd,{className:"h-4 w-4 ml-1"})]})})]})}),n.jsx(ue,{children:w.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No shows found"}):n.jsx("div",{className:"space-y-3",children:w.slice(0,5).map(j=>{var S,A,I,P;return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 bg-muted rounded flex items-center justify-center",children:n.jsx(dr,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium line-clamp-1",children:j.title||j.name||"Untitled Show"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[((S=j.owner)==null?void 0:S.userName)||((A=j.owner)==null?void 0:A.firstName)||((I=j.hostId)==null?void 0:I.userName)||((P=j.host)==null?void 0:P.userName)||"Unknown Host",j.date&&`  ${It(new Date(j.date),"MMM d, yyyy h:mm a")}`]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ye,{variant:j.status==="live"?"destructive":j.status==="upcoming"?"default":"secondary",className:"text-xs",children:j.status||(j.active?"Live":"Ended")}),n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t(`/admin/shows/${j._id||j.id}`),children:n.jsx(cn,{className:"h-4 w-4"})})]})]},j._id||j.id)})})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{className:"text-base",children:"Recent Orders"}),n.jsx(Fe,{children:"Latest customer orders"})]}),n.jsx(Gn,{href:"/admin/orders",children:n.jsxs(G,{variant:"ghost",size:"sm",children:["View All ",n.jsx(sd,{className:"h-4 w-4 ml-1"})]})})]})}),n.jsx(ue,{children:x.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No orders found"}):n.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(j=>{var S,A,I,P,O,D,M,J;return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[(A=(S=j.productId)==null?void 0:S.images)!=null&&A[0]?n.jsx("img",{src:j.productId.images[0],alt:((I=j.productId)==null?void 0:I.name)||"Product",className:"h-10 w-10 rounded object-cover"}):n.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded flex items-center justify-center",children:n.jsx(cr,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium line-clamp-1",children:j.order_reference||((P=j._id)==null?void 0:P.slice(-8))||"Order"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[((O=j.customer)==null?void 0:O.userName)||((D=j.customer)==null?void 0:D.firstName)||"Buyer","  ",((M=j.seller)==null?void 0:M.userName)||((J=j.seller)==null?void 0:J.firstName)||"Seller",j.quantity&&`  Qty: ${j.quantity}`]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ye,{variant:j.status==="completed"||j.status==="delivered"?"default":j.status==="pending"?"secondary":"outline",className:"text-xs",children:(j.status||"Pending").replace(/_/g," ")}),n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{var X;return t(`/admin/orders/${((X=j.orderId)==null?void 0:X._id)||j.orderId}`)},children:n.jsx(cn,{className:"h-4 w-4"})})]})]},j._id||j.id)})})})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{className:"text-base",children:"Open Disputes"}),n.jsx(Fe,{children:"Disputes needing attention"})]}),n.jsx(Gn,{href:"/admin/disputes",children:n.jsxs(G,{variant:"ghost",size:"sm",children:["View All ",n.jsx(sd,{className:"h-4 w-4 ml-1"})]})})]})}),n.jsx(ue,{children:(Array.isArray(h)?h:[]).length===0?n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No disputes found"}):n.jsx("div",{className:"space-y-3",children:(Array.isArray(h)?h:[]).slice(0,5).map(j=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 bg-orange-100 rounded flex items-center justify-center",children:n.jsx(qr,{className:"h-5 w-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium line-clamp-1",children:j.reason||j.title||"Dispute"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:j.createdAt?It(new Date(j.createdAt),"MMM d, yyyy"):"N/A"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ye,{variant:j.status==="open"||j.status==="pending"?"destructive":"secondary",className:"text-xs",children:j.status||"Open"}),n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t(`/admin/disputes/${j._id||j.id}`),children:n.jsx(cn,{className:"h-4 w-4"})})]})]},j._id||j.id))})})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{className:"text-base",children:"Quick Actions"}),n.jsx(Fe,{children:"Common administrative tasks"})]}),n.jsx(ue,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(Gn,{href:"/admin/users",children:n.jsxs(G,{variant:"outline",className:"w-full h-auto py-4 flex flex-col gap-2",children:[n.jsx(Xr,{className:"h-6 w-6"}),n.jsx("span",{children:"Manage Users"})]})}),n.jsx(Gn,{href:"/admin/pending-approvals",children:n.jsxs(G,{variant:"outline",className:"w-full h-auto py-4 flex flex-col gap-2",children:[n.jsx(Cr,{className:"h-6 w-6"}),n.jsx("span",{children:"Pending Approvals"})]})}),n.jsx(Gn,{href:"/admin/orders",children:n.jsxs(G,{variant:"outline",className:"w-full h-auto py-4 flex flex-col gap-2",children:[n.jsx(cr,{className:"h-6 w-6"}),n.jsx("span",{children:"View Orders"})]})}),n.jsx(Gn,{href:"/admin/disputes",children:n.jsxs(G,{variant:"outline",className:"w-full h-auto py-4 flex flex-col gap-2",children:[n.jsx(qr,{className:"h-6 w-6"}),n.jsx("span",{children:"Resolve Disputes"})]})})]})})]})]})})}const Fs=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:s,className:Re("w-full caption-bottom text-sm",t),...e})}));Fs.displayName="Table";const $s=p.forwardRef(({className:t,...e},s)=>n.jsx("thead",{ref:s,className:Re("[&_tr]:border-b",t),...e}));$s.displayName="TableHeader";const Us=p.forwardRef(({className:t,...e},s)=>n.jsx("tbody",{ref:s,className:Re("[&_tr:last-child]:border-0",t),...e}));Us.displayName="TableBody";const Yee=p.forwardRef(({className:t,...e},s)=>n.jsx("tfoot",{ref:s,className:Re("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));Yee.displayName="TableFooter";const yt=p.forwardRef(({className:t,...e},s)=>n.jsx("tr",{ref:s,className:Re("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));yt.displayName="TableRow";const Ce=p.forwardRef(({className:t,...e},s)=>n.jsx("th",{ref:s,className:Re("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Ce.displayName="TableHead";const ke=p.forwardRef(({className:t,...e},s)=>n.jsx("td",{ref:s,className:Re("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ke.displayName="TableCell";const Qee=p.forwardRef(({className:t,...e},s)=>n.jsx("caption",{ref:s,className:Re("mt-4 text-sm text-muted-foreground",t),...e}));Qee.displayName="TableCaption";function Zee(t){const e=Xee(t),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),c=l.find(ete);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(e,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}function Xee(t){const e=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=ste(i),l=tte(a,i.props);return i.type!==p.Fragment&&(l.ref=r?vo(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Jee=Symbol("radix.slottable");function ete(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Jee}function tte(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function ste(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Zv="Dialog",[SD,CD]=Cn(Zv),[nte,Ta]=SD(Zv),kD=t=>{const{__scopeDialog:e,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[d,u]=si({prop:r,defaultProp:i??!1,onChange:a,caller:Zv});return n.jsx(nte,{scope:e,triggerRef:l,contentRef:c,contentId:Ti(),titleId:Ti(),descriptionId:Ti(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),modal:o,children:s})};kD.displayName=Zv;var ED="DialogTrigger",TD=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Ta(ED,s),a=ft(e,i.triggerRef);return n.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":G_(i.open),...r,ref:a,onClick:Ie(t.onClick,i.onOpenToggle)})});TD.displayName=ED;var W_="DialogPortal",[rte,AD]=SD(W_,{forceMount:void 0}),PD=t=>{const{__scopeDialog:e,forceMount:s,children:r,container:i}=t,a=Ta(W_,e);return n.jsx(rte,{scope:e,forceMount:s,children:p.Children.map(r,o=>n.jsx(hn,{present:s||a.open,children:n.jsx(Nf,{asChild:!0,container:i,children:o})}))})};PD.displayName=W_;var $y="DialogOverlay",ID=p.forwardRef((t,e)=>{const s=AD($y,t.__scopeDialog),{forceMount:r=s.forceMount,...i}=t,a=Ta($y,t.__scopeDialog);return a.modal?n.jsx(hn,{present:r||a.open,children:n.jsx(ate,{...i,ref:e})}):null});ID.displayName=$y;var ite=Zee("DialogOverlay.RemoveScroll"),ate=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Ta($y,s);return n.jsx(sg,{as:ite,allowPinchZoom:!0,shards:[i.contentRef],children:n.jsx(Je.div,{"data-state":G_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),eu="DialogContent",RD=p.forwardRef((t,e)=>{const s=AD(eu,t.__scopeDialog),{forceMount:r=s.forceMount,...i}=t,a=Ta(eu,t.__scopeDialog);return n.jsx(hn,{present:r||a.open,children:a.modal?n.jsx(ote,{...i,ref:e}):n.jsx(lte,{...i,ref:e})})});RD.displayName=eu;var ote=p.forwardRef((t,e)=>{const s=Ta(eu,t.__scopeDialog),r=p.useRef(null),i=ft(e,s.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return Bv(a)},[]),n.jsx(OD,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Ie(t.onFocusOutside,a=>a.preventDefault())})}),lte=p.forwardRef((t,e)=>{const s=Ta(eu,t.__scopeDialog),r=p.useRef(!1),i=p.useRef(!1);return n.jsx(OD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=s.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),OD=p.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=Ta(eu,s),c=p.useRef(null),d=ft(e,c);return Uv(),n.jsxs(n.Fragment,{children:[n.jsx(tg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(zc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":G_(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(dte,{titleId:l.titleId}),n.jsx(hte,{contentRef:c,descriptionId:l.descriptionId})]})]})}),K_="DialogTitle",DD=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Ta(K_,s);return n.jsx(Je.h2,{id:i.titleId,...r,ref:e})});DD.displayName=K_;var MD="DialogDescription",LD=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Ta(MD,s);return n.jsx(Je.p,{id:i.descriptionId,...r,ref:e})});LD.displayName=MD;var FD="DialogClose",$D=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Ta(FD,s);return n.jsx(Je.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});$D.displayName=FD;function G_(t){return t?"open":"closed"}var UD="DialogTitleWarning",[cte,zD]=X9(UD,{contentName:eu,titleName:K_,docsSlug:"dialog"}),dte=({titleId:t})=>{const e=zD(UD),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},ute="DialogDescriptionWarning",hte=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zD(ute).contentName}}.`;return p.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Y_=kD,BD=TD,Q_=PD,og=ID,lg=RD,cg=DD,dg=LD,Xv=$D;const ys=Y_,df=BD,fte=Q_,qD=p.forwardRef(({className:t,...e},s)=>n.jsx(og,{ref:s,className:Re("fixed inset-0 z-[9998] bg-black/40 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));qD.displayName=og.displayName;const fs=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(fte,{children:[n.jsx(qD,{}),n.jsxs(lg,{ref:r,className:Re("fixed left-[50%] top-[50%] z-[9999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,n.jsxs(Xv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(un,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fs.displayName=lg.displayName;const ps=({className:t,...e})=>n.jsx("div",{className:Re("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ps.displayName="DialogHeader";const ei=({className:t,...e})=>n.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ei.displayName="DialogFooter";const ms=p.forwardRef(({className:t,...e},s)=>n.jsx(cg,{ref:s,className:Re("text-lg font-semibold leading-none tracking-tight",t),...e}));ms.displayName=cg.displayName;const Ls=p.forwardRef(({className:t,...e},s)=>n.jsx(dg,{ref:s,className:Re("text-sm text-muted-foreground",t),...e}));Ls.displayName=dg.displayName;var xt=function(){return xt=Object.assign||function(e){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},xt.apply(this,arguments)};function pte(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function VD(t,e,s){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function ug(t){return t.mode==="multiple"}function hg(t){return t.mode==="range"}function Jv(t){return t.mode==="single"}var mte={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function gte(t,e){return It(t,"LLLL y",e)}function xte(t,e){return It(t,"d",e)}function yte(t,e){return It(t,"LLLL",e)}function vte(t){return"".concat(t)}function bte(t,e){return It(t,"cccccc",e)}function wte(t,e){return It(t,"yyyy",e)}var jte=Object.freeze({__proto__:null,formatCaption:gte,formatDay:xte,formatMonthCaption:yte,formatWeekNumber:vte,formatWeekdayName:bte,formatYearCaption:wte}),Nte=function(t,e,s){return It(t,"do MMMM (EEEE)",s)},_te=function(){return"Month: "},Ste=function(){return"Go to next month"},Cte=function(){return"Go to previous month"},kte=function(t,e){return It(t,"cccc",e)},Ete=function(t){return"Week n. ".concat(t)},Tte=function(){return"Year: "},Ate=Object.freeze({__proto__:null,labelDay:Nte,labelMonthDropdown:_te,labelNext:Ste,labelPrevious:Cte,labelWeekNumber:Ete,labelWeekday:kte,labelYearDropdown:Tte});function Pte(){var t="buttons",e=mte,s=vD,r={},i={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:jte,labels:Ate,locale:s,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Ite(t){var e=t.fromYear,s=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Ir(r):e&&(a=new Date(e,0,1)),i?o=q_(i):s&&(o=new Date(s,11,31)),{fromDate:a?cf(a):void 0,toDate:o?cf(o):void 0}}var HD=p.createContext(void 0);function Rte(t){var e,s=t.initialProps,r=Pte(),i=Ite(s),a=i.fromDate,o=i.toDate,l=(e=s.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(Jv(s)||ug(s)||hg(s))&&(c=s.onSelect);var d=xt(xt(xt({},r),s),{captionLayout:l,classNames:xt(xt({},r.classNames),s.classNames),components:xt({},s.components),formatters:xt(xt({},r.formatters),s.formatters),fromDate:a,labels:xt(xt({},r.labels),s.labels),mode:s.mode||r.mode,modifiers:xt(xt({},r.modifiers),s.modifiers),modifiersClassNames:xt(xt({},r.modifiersClassNames),s.modifiersClassNames),onSelect:c,styles:xt(xt({},r.styles),s.styles),toDate:o});return n.jsx(HD.Provider,{value:d,children:t.children})}function ks(){var t=p.useContext(HD);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function WD(t){var e=ks(),s=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return n.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:s})})}function Ote(t){return n.jsx("svg",xt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:n.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function KD(t){var e,s,r=t.onChange,i=t.value,a=t.children,o=t.caption,l=t.className,c=t.style,d=ks(),u=(s=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&s!==void 0?s:Ote;return n.jsxs("div",{className:l,style:c,children:[n.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),n.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:i,onChange:r,children:a}),n.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,n.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function Dte(t){var e,s=ks(),r=s.fromDate,i=s.toDate,a=s.styles,o=s.locale,l=s.formatters.formatMonthCaption,c=s.classNames,d=s.components,u=s.labels.labelMonthDropdown;if(!r)return n.jsx(n.Fragment,{});if(!i)return n.jsx(n.Fragment,{});var f=[];if(Gee(r,i))for(var h=Ir(r),x=r.getMonth();x<=i.getMonth();x++)f.push(Ob(h,x));else for(var h=Ir(new Date),x=0;x<=11;x++)f.push(Ob(h,x));var g=function(w){var b=Number(w.target.value),v=Ob(Ir(t.displayMonth),b);t.onChange(v)},y=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:KD;return n.jsx(y,{name:"months","aria-label":u(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:f.map(function(w){return n.jsx("option",{value:w.getMonth(),children:l(w,{locale:o})},w.getMonth())})})}function Mte(t){var e,s=t.displayMonth,r=ks(),i=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,c=r.classNames,d=r.components,u=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!i)return n.jsx(n.Fragment,{});if(!a)return n.jsx(n.Fragment,{});for(var x=i.getFullYear(),g=a.getFullYear(),y=x;y<=g;y++)h.push(IE(xD(new Date),y));var w=function(v){var N=IE(Ir(s),Number(v.target.value));t.onChange(N)},b=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:KD;return n.jsx(b,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:w,value:s.getFullYear(),caption:u(s,{locale:o}),children:h.map(function(v){return n.jsx("option",{value:v.getFullYear(),children:u(v,{locale:o})},v.getFullYear())})})}function Lte(t,e){var s=p.useState(t),r=s[0],i=s[1],a=e===void 0?r:e;return[a,i]}function Fte(t){var e=t.month,s=t.defaultMonth,r=t.today,i=e||s||r||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&wm(a,i)<0){var d=-1*(c-1);i=_a(a,d)}return o&&wm(i,o)<0&&(i=o),Ir(i)}function $te(){var t=ks(),e=Fte(t),s=Lte(e,t.month),r=s[0],i=s[1],a=function(o){var l;if(!t.disableNavigation){var c=Ir(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[r,a]}function Ute(t,e){for(var s=e.reverseMonths,r=e.numberOfMonths,i=Ir(t),a=Ir(_a(i,r)),o=wm(a,i),l=[],c=0;c<o;c++){var d=_a(i,c);l.push(d)}return s&&(l=l.reverse()),l}function zte(t,e){if(!e.disableNavigation){var s=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=Ir(t);if(!s)return _a(l,o);var c=wm(s,t);if(!(c<a))return _a(l,o)}}function Bte(t,e){if(!e.disableNavigation){var s=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=Ir(t);if(!s)return _a(l,-o);var c=wm(l,s);if(!(c<=0))return _a(l,-o)}}var GD=p.createContext(void 0);function qte(t){var e=ks(),s=$te(),r=s[0],i=s[1],a=Ute(r,e),o=zte(r,e),l=Bte(r,e),c=function(f){return a.some(function(h){return H_(f,h)})},d=function(f,h){c(f)||(h&&_D(f,h)?i(_a(f,1+e.numberOfMonths*-1)):i(f))},u={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return n.jsx(GD.Provider,{value:u,children:t.children})}function fg(){var t=p.useContext(GD);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function OE(t){var e,s=ks(),r=s.classNames,i=s.styles,a=s.components,o=fg().goToMonth,l=function(u){o(_a(u,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:WD,d=n.jsx(c,{id:t.id,displayMonth:t.displayMonth});return n.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[n.jsx("div",{className:r.vhidden,children:d}),n.jsx(Dte,{onChange:l,displayMonth:t.displayMonth}),n.jsx(Mte,{onChange:l,displayMonth:t.displayMonth})]})}function Vte(t){return n.jsx("svg",xt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:n.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Hte(t){return n.jsx("svg",xt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:n.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Uy=p.forwardRef(function(t,e){var s=ks(),r=s.classNames,i=s.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),l=xt(xt({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),n.jsx("button",xt({},t,{ref:e,type:"button",className:o,style:l}))});function Wte(t){var e,s,r=ks(),i=r.dir,a=r.locale,o=r.classNames,l=r.styles,c=r.labels,d=c.labelPrevious,u=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return n.jsx(n.Fragment,{});var h=d(t.previousMonth,{locale:a}),x=[o.nav_button,o.nav_button_previous].join(" "),g=u(t.nextMonth,{locale:a}),y=[o.nav_button,o.nav_button_next].join(" "),w=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:Hte,b=(s=f==null?void 0:f.IconLeft)!==null&&s!==void 0?s:Vte;return n.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&n.jsx(Uy,{name:"previous-month","aria-label":h,className:x,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?n.jsx(w,{className:o.nav_icon,style:l.nav_icon}):n.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&n.jsx(Uy,{name:"next-month","aria-label":g,className:y,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?n.jsx(b,{className:o.nav_icon,style:l.nav_icon}):n.jsx(w,{className:o.nav_icon,style:l.nav_icon})})]})}function DE(t){var e=ks().numberOfMonths,s=fg(),r=s.previousMonth,i=s.nextMonth,a=s.goToMonth,o=s.displayMonths,l=o.findIndex(function(g){return H_(t.displayMonth,g)}),c=l===0,d=l===o.length-1,u=e>1&&(c||!d),f=e>1&&(d||!c),h=function(){r&&a(r)},x=function(){i&&a(i)};return n.jsx(Wte,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:h,onNextClick:x})}function Kte(t){var e,s=ks(),r=s.classNames,i=s.disableNavigation,a=s.styles,o=s.captionLayout,l=s.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:WD,d;return i?d=n.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=n.jsx(OE,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=n.jsxs(n.Fragment,{children:[n.jsx(OE,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),n.jsx(DE,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=n.jsxs(n.Fragment,{children:[n.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),n.jsx(DE,{displayMonth:t.displayMonth,id:t.id})]}),n.jsx("div",{className:r.caption,style:a.caption,children:d})}function Gte(t){var e=ks(),s=e.footer,r=e.styles,i=e.classNames.tfoot;return s?n.jsx("tfoot",{className:i,style:r.tfoot,children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:s})})}):n.jsx(n.Fragment,{})}function Yte(t,e,s){for(var r=s?Jd(new Date):go(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=lr(r,a);i.push(o)}return i}function Qte(){var t=ks(),e=t.classNames,s=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=Yte(i,a,o);return n.jsxs("tr",{style:s.head_row,className:e.head_row,children:[r&&n.jsx("td",{style:s.head_cell,className:e.head_cell}),d.map(function(u,f){return n.jsx("th",{scope:"col",className:e.head_cell,style:s.head_cell,"aria-label":c(u,{locale:i}),children:l(u,{locale:i})},f)})]})}function Zte(){var t,e=ks(),s=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:Qte;return n.jsx("thead",{style:r.head,className:s.head,children:n.jsx(a,{})})}function Xte(t){var e=ks(),s=e.locale,r=e.formatters.formatDay;return n.jsx(n.Fragment,{children:r(t.date,{locale:s})})}var Z_=p.createContext(void 0);function Jte(t){if(!ug(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return n.jsx(Z_.Provider,{value:e,children:t.children})}return n.jsx(ese,{initialProps:t.initialProps,children:t.children})}function ese(t){var e=t.initialProps,s=t.children,r=e.selected,i=e.min,a=e.max,o=function(d,u,f){var h,x;(h=e.onDayClick)===null||h===void 0||h.call(e,d,u,f);var g=!!(u.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var y=!!(!u.selected&&a&&(r==null?void 0:r.length)===a);if(!y){var w=r?VD([],r):[];if(u.selected){var b=w.findIndex(function(v){return Er(d,v)});w.splice(b,1)}else w.push(d);(x=e.onSelect)===null||x===void 0||x.call(e,w,d,u,f)}}},l={disabled:[]};r&&l.disabled.push(function(d){var u=a&&r.length>a-1,f=r.some(function(h){return Er(h,d)});return!!(u&&!f)});var c={selected:r,onDayClick:o,modifiers:l};return n.jsx(Z_.Provider,{value:c,children:s})}function X_(){var t=p.useContext(Z_);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function tse(t,e){var s=e||{},r=s.from,i=s.to;return r&&i?Er(i,t)&&Er(r,t)?void 0:Er(i,t)?{from:i,to:void 0}:Er(r,t)?void 0:Jj(r,t)?{from:t,to:i}:{from:r,to:t}:i?Jj(t,i)?{from:i,to:t}:{from:t,to:i}:r?_D(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var J_=p.createContext(void 0);function sse(t){if(!hg(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return n.jsx(J_.Provider,{value:e,children:t.children})}return n.jsx(nse,{initialProps:t.initialProps,children:t.children})}function nse(t){var e=t.initialProps,s=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,l=e.min,c=e.max,d=function(x,g,y){var w,b;(w=e.onDayClick)===null||w===void 0||w.call(e,x,g,y);var v=tse(x,r);(b=e.onSelect)===null||b===void 0||b.call(e,v,x,g,y)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(u.range_start=[a],o?(u.range_end=[o],Er(a,o)||(u.range_middle=[{after:a,before:o}])):u.range_end=[a]):o&&(u.range_start=[o],u.range_end=[o]),l&&(a&&!o&&u.disabled.push({after:Rb(a,l-1),before:lr(a,l-1)}),a&&o&&u.disabled.push({after:a,before:lr(a,l-1)}),!a&&o&&u.disabled.push({after:Rb(o,l-1),before:lr(o,l-1)})),c){if(a&&!o&&(u.disabled.push({before:lr(a,-c+1)}),u.disabled.push({after:lr(a,c-1)})),a&&o){var f=eo(o,a)+1,h=c-f;u.disabled.push({before:Rb(a,h)}),u.disabled.push({after:lr(o,h)})}!a&&o&&(u.disabled.push({before:lr(o,-c+1)}),u.disabled.push({after:lr(o,c-1)}))}return n.jsx(J_.Provider,{value:{selected:r,onDayClick:d,modifiers:u},children:s})}function eS(){var t=p.useContext(J_);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Tx(t){return Array.isArray(t)?VD([],t):t!==void 0?[t]:[]}function rse(t){var e={};return Object.entries(t).forEach(function(s){var r=s[0],i=s[1];e[r]=Tx(i)}),e}var Sa;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Sa||(Sa={}));var ise=Sa.Selected,Uo=Sa.Disabled,ase=Sa.Hidden,ose=Sa.Today,Db=Sa.RangeEnd,Mb=Sa.RangeMiddle,Lb=Sa.RangeStart,lse=Sa.Outside;function cse(t,e,s){var r,i=(r={},r[ise]=Tx(t.selected),r[Uo]=Tx(t.disabled),r[ase]=Tx(t.hidden),r[ose]=[t.today],r[Db]=[],r[Mb]=[],r[Lb]=[],r[lse]=[],r);return t.fromDate&&i[Uo].push({before:t.fromDate}),t.toDate&&i[Uo].push({after:t.toDate}),ug(t)?i[Uo]=i[Uo].concat(e.modifiers[Uo]):hg(t)&&(i[Uo]=i[Uo].concat(s.modifiers[Uo]),i[Lb]=s.modifiers[Lb],i[Mb]=s.modifiers[Mb],i[Db]=s.modifiers[Db]),i}var YD=p.createContext(void 0);function dse(t){var e=ks(),s=X_(),r=eS(),i=cse(e,s,r),a=rse(e.modifiers),o=xt(xt({},i),a);return n.jsx(YD.Provider,{value:o,children:t.children})}function QD(){var t=p.useContext(YD);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function use(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function hse(t){return!!(t&&typeof t=="object"&&"from"in t)}function fse(t){return!!(t&&typeof t=="object"&&"after"in t)}function pse(t){return!!(t&&typeof t=="object"&&"before"in t)}function mse(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function gse(t,e){var s,r=e.from,i=e.to;if(r&&i){var a=eo(i,r)<0;a&&(s=[i,r],r=s[0],i=s[1]);var o=eo(t,r)>=0&&eo(i,t)>=0;return o}return i?Er(i,t):r?Er(r,t):!1}function xse(t){return B_(t)}function yse(t){return Array.isArray(t)&&t.every(B_)}function vse(t,e){return e.some(function(s){if(typeof s=="boolean")return s;if(xse(s))return Er(t,s);if(yse(s))return s.includes(t);if(hse(s))return gse(t,s);if(mse(s))return s.dayOfWeek.includes(t.getDay());if(use(s)){var r=eo(s.before,t),i=eo(s.after,t),a=r>0,o=i<0,l=Jj(s.before,s.after);return l?o&&a:a||o}return fse(s)?eo(t,s.after)>0:pse(s)?eo(s.before,t)>0:typeof s=="function"?s(t):!1})}function tS(t,e,s){var r=Object.keys(e).reduce(function(a,o){var l=e[o];return vse(t,l)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),s&&!H_(t,s)&&(i.outside=!0),i}function bse(t,e){for(var s=Ir(t[0]),r=q_(t[t.length-1]),i,a,o=s;o<=r;){var l=tS(o,e),c=!l.disabled&&!l.hidden;if(!c){o=lr(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=lr(o,1)}return a||i}var wse=365;function ZD(t,e){var s=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,d=i.fromDate,u=i.toDate,f=i.locale,h={day:lr,week:Xj,month:_a,year:VJ,startOfWeek:function(w){return i.ISOWeek?Jd(w):go(w,{locale:f,weekStartsOn:c})},endOfWeek:function(w){return i.ISOWeek?yD(w):V_(w,{locale:f,weekStartsOn:c})}},x=h[s](t,r==="after"?1:-1);r==="before"&&d?x=HJ([d,x]):r==="after"&&u&&(x=WJ([u,x]));var g=!0;if(a){var y=tS(x,a);g=!y.disabled&&!y.hidden}return g?x:l.count>wse?l.lastFocused:ZD(x,{moveBy:s,direction:r,context:i,modifiers:a,retry:xt(xt({},l),{count:l.count+1})})}var XD=p.createContext(void 0);function jse(t){var e=fg(),s=QD(),r=p.useState(),i=r[0],a=r[1],o=p.useState(),l=o[0],c=o[1],d=bse(e.displayMonths,s),u=i??(l&&e.isDateDisplayed(l))?l:d,f=function(){c(i),a(void 0)},h=function(w){a(w)},x=ks(),g=function(w,b){if(i){var v=ZD(i,{moveBy:w,direction:b,context:x,modifiers:s});Er(i,v)||(e.goToDate(v,i),h(v))}},y={focusedDay:i,focusTarget:u,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return n.jsx(XD.Provider,{value:y,children:t.children})}function sS(){var t=p.useContext(XD);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Nse(t,e){var s=QD(),r=tS(t,s,e);return r}var nS=p.createContext(void 0);function _se(t){if(!Jv(t.initialProps)){var e={selected:void 0};return n.jsx(nS.Provider,{value:e,children:t.children})}return n.jsx(Sse,{initialProps:t.initialProps,children:t.children})}function Sse(t){var e=t.initialProps,s=t.children,r=function(a,o,l){var c,d,u;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,l),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,a,o,l);return}(u=e.onSelect)===null||u===void 0||u.call(e,a,a,o,l)},i={selected:e.selected,onDayClick:r};return n.jsx(nS.Provider,{value:i,children:s})}function JD(){var t=p.useContext(nS);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Cse(t,e){var s=ks(),r=JD(),i=X_(),a=eS(),o=sS(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,u=o.focusWeekBefore,f=o.blur,h=o.focus,x=o.focusMonthBefore,g=o.focusMonthAfter,y=o.focusYearBefore,w=o.focusYearAfter,b=o.focusStartOfWeek,v=o.focusEndOfWeek,N=function(U){var $,L,te,F;Jv(s)?($=r.onDayClick)===null||$===void 0||$.call(r,t,e,U):ug(s)?(L=i.onDayClick)===null||L===void 0||L.call(i,t,e,U):hg(s)?(te=a.onDayClick)===null||te===void 0||te.call(a,t,e,U):(F=s.onDayClick)===null||F===void 0||F.call(s,t,e,U)},C=function(U){var $;h(t),($=s.onDayFocus)===null||$===void 0||$.call(s,t,e,U)},_=function(U){var $;f(),($=s.onDayBlur)===null||$===void 0||$.call(s,t,e,U)},T=function(U){var $;($=s.onDayMouseEnter)===null||$===void 0||$.call(s,t,e,U)},j=function(U){var $;($=s.onDayMouseLeave)===null||$===void 0||$.call(s,t,e,U)},S=function(U){var $;($=s.onDayPointerEnter)===null||$===void 0||$.call(s,t,e,U)},A=function(U){var $;($=s.onDayPointerLeave)===null||$===void 0||$.call(s,t,e,U)},I=function(U){var $;($=s.onDayTouchCancel)===null||$===void 0||$.call(s,t,e,U)},P=function(U){var $;($=s.onDayTouchEnd)===null||$===void 0||$.call(s,t,e,U)},O=function(U){var $;($=s.onDayTouchMove)===null||$===void 0||$.call(s,t,e,U)},D=function(U){var $;($=s.onDayTouchStart)===null||$===void 0||$.call(s,t,e,U)},M=function(U){var $;($=s.onDayKeyUp)===null||$===void 0||$.call(s,t,e,U)},J=function(U){var $;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),s.dir==="rtl"?l():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),s.dir==="rtl"?c():l();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),d();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),u();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?y():x();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?w():g();break;case"Home":U.preventDefault(),U.stopPropagation(),b();break;case"End":U.preventDefault(),U.stopPropagation(),v();break}($=s.onDayKeyDown)===null||$===void 0||$.call(s,t,e,U)},X={onClick:N,onFocus:C,onBlur:_,onKeyDown:J,onKeyUp:M,onMouseEnter:T,onMouseLeave:j,onPointerEnter:S,onPointerLeave:A,onTouchCancel:I,onTouchEnd:P,onTouchMove:O,onTouchStart:D};return X}function kse(){var t=ks(),e=JD(),s=X_(),r=eS(),i=Jv(t)?e.selected:ug(t)?s.selected:hg(t)?r.selected:void 0;return i}function Ese(t){return Object.values(Sa).includes(t)}function Tse(t,e){var s=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)s.push(i);else if(Ese(r)){var a=t.classNames["day_".concat(r)];a&&s.push(a)}}),s}function Ase(t,e){var s=xt({},t.styles.day);return Object.keys(e).forEach(function(r){var i;s=xt(xt({},s),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),s}function Pse(t,e,s){var r,i,a,o=ks(),l=sS(),c=Nse(t,e),d=Cse(t,c),u=kse(),f=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var T;c.outside||l.focusedDay&&f&&Er(l.focusedDay,t)&&((T=s.current)===null||T===void 0||T.focus())},[l.focusedDay,t,s,f,c.outside]);var h=Tse(o,c).join(" "),x=Ase(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:Xte,w=n.jsx(y,{date:t,displayMonth:e,activeModifiers:c}),b={style:x,className:h,children:w,role:"gridcell"},v=l.focusTarget&&Er(l.focusTarget,t)&&!c.outside,N=l.focusedDay&&Er(l.focusedDay,t),C=xt(xt(xt({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=N||v?0:-1,r)),d),_={isButton:f,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:C,divProps:b};return _}function Ise(t){var e=p.useRef(null),s=Pse(t.date,t.displayMonth,e);return s.isHidden?n.jsx("div",{role:"gridcell"}):s.isButton?n.jsx(Uy,xt({name:"day",ref:e},s.buttonProps)):n.jsx("div",xt({},s.divProps))}function Rse(t){var e=t.number,s=t.dates,r=ks(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,u=d(Number(e),{locale:l});if(!i)return n.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:u});var f=c(Number(e),{locale:l}),h=function(x){i(e,s,x)};return n.jsx(Uy,{name:"week-number","aria-label":f,className:o.weeknumber,style:a.weeknumber,onClick:h,children:u})}function Ose(t){var e,s,r=ks(),i=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Ise,d=(s=l==null?void 0:l.WeekNumber)!==null&&s!==void 0?s:Rse,u;return o&&(u=n.jsx("td",{className:a.cell,style:i.cell,children:n.jsx(d,{number:t.weekNumber,dates:t.dates})})),n.jsxs("tr",{className:a.row,style:i.row,children:[u,t.dates.map(function(f){return n.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:n.jsx(c,{displayMonth:t.displayMonth,date:f})},Hee(f))})]})}function ME(t,e,s){for(var r=s!=null&&s.ISOWeek?yD(e):V_(e,s),i=s!=null&&s.ISOWeek?Jd(t):go(t,s),a=eo(r,i),o=[],l=0;l<=a;l++)o.push(lr(i,l));var c=o.reduce(function(d,u){var f=s!=null&&s.ISOWeek?bD(u):jD(u,s),h=d.find(function(x){return x.weekNumber===f});return h?(h.dates.push(u),d):(d.push({weekNumber:f,dates:[u]}),d)},[]);return c}function Dse(t,e){var s=ME(Ir(t),q_(t),e);if(e!=null&&e.useFixedWeeks){var r=Kee(t,e);if(r<6){var i=s[s.length-1],a=i.dates[i.dates.length-1],o=Xj(a,6-r),l=ME(Xj(a,1),o,e);s.push.apply(s,l)}}return s}function Mse(t){var e,s,r,i=ks(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,d=i.fixedWeeks,u=i.components,f=i.weekStartsOn,h=i.firstWeekContainsDate,x=i.ISOWeek,g=Dse(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:x,locale:a,weekStartsOn:f,firstWeekContainsDate:h}),y=(e=u==null?void 0:u.Head)!==null&&e!==void 0?e:Zte,w=(s=u==null?void 0:u.Row)!==null&&s!==void 0?s:Ose,b=(r=u==null?void 0:u.Footer)!==null&&r!==void 0?r:Gte;return n.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&n.jsx(y,{}),n.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(v){return n.jsx(w,{displayMonth:t.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),n.jsx(b,{displayMonth:t.displayMonth})]})}function Lse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Fse=Lse()?p.useLayoutEffect:p.useEffect,Fb=!1,$se=0;function LE(){return"react-day-picker-".concat(++$se)}function Use(t){var e,s=t??(Fb?LE():null),r=p.useState(s),i=r[0],a=r[1];return Fse(function(){i===null&&a(LE())},[]),p.useEffect(function(){Fb===!1&&(Fb=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function zse(t){var e,s,r=ks(),i=r.dir,a=r.classNames,o=r.styles,l=r.components,c=fg().displayMonths,d=Use(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],h=o.month,x=t.displayIndex===0,g=t.displayIndex===c.length-1,y=!x&&!g;i==="rtl"&&(e=[x,g],g=e[0],x=e[1]),x&&(f.push(a.caption_start),h=xt(xt({},h),o.caption_start)),g&&(f.push(a.caption_end),h=xt(xt({},h),o.caption_end)),y&&(f.push(a.caption_between),h=xt(xt({},h),o.caption_between));var w=(s=l==null?void 0:l.Caption)!==null&&s!==void 0?s:Kte;return n.jsxs("div",{className:f.join(" "),style:h,children:[n.jsx(w,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),n.jsx(Mse,{id:u,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function Bse(t){var e=ks(),s=e.classNames,r=e.styles;return n.jsx("div",{className:s.months,style:r.months,children:t.children})}function qse(t){var e,s,r=t.initialProps,i=ks(),a=sS(),o=fg(),l=p.useState(!1),c=l[0],d=l[1];p.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),d(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var u=[i.classNames.root,i.className];i.numberOfMonths>1&&u.push(i.classNames.multiple_months),i.showWeekNumber&&u.push(i.classNames.with_weeknumber);var f=xt(xt({},i.styles.root),i.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,y){var w;return xt(xt({},g),(w={},w[y]=r[y],w))},{}),x=(s=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&s!==void 0?s:Bse;return n.jsx("div",xt({className:u.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:n.jsx(x,{children:o.displayMonths.map(function(g,y){return n.jsx(zse,{displayIndex:y,displayMonth:g},y)})})}))}function Vse(t){var e=t.children,s=pte(t,["children"]);return n.jsx(Rte,{initialProps:s,children:n.jsx(qte,{children:n.jsx(_se,{initialProps:s,children:n.jsx(Jte,{initialProps:s,children:n.jsx(sse,{initialProps:s,children:n.jsx(dse,{children:n.jsx(jse,{children:e})})})})})})})}function Hse(t){return n.jsx(Vse,xt({},t,{children:n.jsx(qse,{initialProps:t})}))}function fa({className:t,classNames:e,showOutsideDays:s=!0,...r}){return n.jsx(Hse,{showOutsideDays:s,className:Re("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Re(ym({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Re(ym({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:i,...a})=>n.jsx(oi,{className:Re("h-4 w-4",i),...a}),IconRight:({className:i,...a})=>n.jsx(Vn,{className:Re("h-4 w-4",i),...a})},...r})}fa.displayName="Calendar";function Wse(t){const e=Kse(t),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),c=l.find(Yse);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(e,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}function Kse(t){const e=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=Zse(i),l=Qse(a,i.props);return i.type!==p.Fragment&&(l.ref=r?vo(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Gse=Symbol("radix.slottable");function Yse(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Gse}function Qse(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function Zse(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var e0="Popover",[eM]=Cn(e0,[wo]),pg=wo(),[Xse,Wc]=eM(e0),tM=t=>{const{__scopePopover:e,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,l=pg(e),c=p.useRef(null),[d,u]=p.useState(!1),[f,h]=si({prop:r,defaultProp:i??!1,onChange:a,caller:e0});return n.jsx(kv,{...l,children:n.jsx(Xse,{scope:e,contentId:Ti(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:o,children:s})})};tM.displayName=e0;var sM="PopoverAnchor",Jse=p.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=Wc(sM,s),a=pg(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return p.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(Pf,{...a,...r,ref:e})});Jse.displayName=sM;var nM="PopoverTrigger",rM=p.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=Wc(nM,s),a=pg(s),o=ft(e,i.triggerRef),l=n.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":cM(i.open),...r,ref:o,onClick:Ie(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:n.jsx(Pf,{asChild:!0,...a,children:l})});rM.displayName=nM;var rS="PopoverPortal",[ene,tne]=eM(rS,{forceMount:void 0}),iM=t=>{const{__scopePopover:e,forceMount:s,children:r,container:i}=t,a=Wc(rS,e);return n.jsx(ene,{scope:e,forceMount:s,children:n.jsx(hn,{present:s||a.open,children:n.jsx(Nf,{asChild:!0,container:i,children:r})})})};iM.displayName=rS;var uf="PopoverContent",aM=p.forwardRef((t,e)=>{const s=tne(uf,t.__scopePopover),{forceMount:r=s.forceMount,...i}=t,a=Wc(uf,t.__scopePopover);return n.jsx(hn,{present:r||a.open,children:a.modal?n.jsx(nne,{...i,ref:e}):n.jsx(rne,{...i,ref:e})})});aM.displayName=uf;var sne=Wse("PopoverContent.RemoveScroll"),nne=p.forwardRef((t,e)=>{const s=Wc(uf,t.__scopePopover),r=p.useRef(null),i=ft(e,r),a=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return Bv(o)},[]),n.jsx(sg,{as:sne,allowPinchZoom:!0,children:n.jsx(oM,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=s.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Ie(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),rne=p.forwardRef((t,e)=>{const s=Wc(uf,t.__scopePopover),r=p.useRef(!1),i=p.useRef(!1);return n.jsx(oM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=s.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),oM=p.forwardRef((t,e)=>{const{__scopePopover:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...f}=t,h=Wc(uf,s),x=pg(s);return Uv(),n.jsx(tg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(zc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:n.jsx(qm,{"data-state":cM(h.open),role:"dialog",id:h.contentId,...x,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),lM="PopoverClose",ine=p.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=Wc(lM,s);return n.jsx(Je.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});ine.displayName=lM;var ane="PopoverArrow",one=p.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=pg(s);return n.jsx(Vm,{...i,...r,ref:e})});one.displayName=ane;function cM(t){return t?"open":"closed"}var lne=tM,cne=rM,dne=iM,dM=aM;const to=lne,so=cne,pa=p.forwardRef(({className:t,align:e="center",sideOffset:s=4,...r},i)=>n.jsx(dne,{children:n.jsx(dM,{ref:i,align:e,sideOffset:s,className:Re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));pa.displayName=dM.displayName;function une(){var F;const[,t]=Ds(),{user:e}=qi(),{toast:s}=Et(),[r,i]=p.useState(""),[a,o]=p.useState(1),[l]=p.useState(20),[c,d]=p.useState(!1),[u,f]=p.useState(null),[h,x]=p.useState(void 0),[g,y]=p.useState("all"),[w,b]=p.useState("all"),[v,N]=p.useState(!1),[C,_]=p.useState(null);p.useEffect(()=>{e!=null&&e.admin||t("/")},[e==null?void 0:e.admin,t]);const{data:T,isLoading:j}=Ve({queryKey:["/api/admin/users",a,l,r,w],queryFn:async()=>{const z=new URLSearchParams;z.set("page",String(a)),z.set("limit",String(l)),r&&z.set("title",r),w!=="all"&&z.set("type",w);const pe=`/api/admin/users?${z.toString()}`;return await(await ut("GET",pe)).json()}}),{data:S}=Ve({queryKey:["/api/admin/users/stats/all"],queryFn:async()=>{const z=await fetch("/api/admin/users/stats/all",{credentials:"include"});if(!z.ok)throw new Error("Failed to fetch user stats");return await z.json()}}),A=S==null?void 0:S.data,P=(((F=T==null?void 0:T.data)==null?void 0:F.users)||[]).filter(z=>g==="all"?!0:g==="suspended"?z.suspended===!0:g==="blocked"?z.system_blocked===!0:!0),O=T!=null&&T.data?{currentPage:a,totalPages:T.data.pages,totalItems:T.data.totalDoc,hasNextPage:a<T.data.pages,hasPrevPage:a>1}:void 0,D=st({mutationFn:async({userId:z,blocked:pe})=>ut("PATCH",`/api/admin/users/${z}/block`,{blocked:pe}),onSuccess:(z,pe)=>{We.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"Success",description:`User ${pe.blocked?"blocked":"unblocked"} successfully`})},onError:(z,pe)=>{s({title:"Error",description:z.message||`Failed to ${pe.blocked?"block":"unblock"} user`,variant:"destructive"})}}),M=st({mutationFn:async({userId:z,suspended:pe,suspend_end:xe})=>ut("PATCH",`/api/admin/users/${z}/suspend`,{suspended:pe,suspend_end:xe}),onSuccess:(z,pe)=>{We.invalidateQueries({queryKey:["/api/admin/users"]}),d(!1),f(null),x(void 0),s({title:"Success",description:pe.suspended?"User suspended successfully":"User unsuspended successfully"})},onError:(z,pe)=>{s({title:"Error",description:z.message||`Failed to ${pe.suspended?"suspend":"unsuspend"} user`,variant:"destructive"})}}),J=z=>{f(z),x(void 0),d(!0)},X=()=>{!u||!h||M.mutate({userId:u._id||u.id,suspended:!0,suspend_end:h.toISOString()})},U=z=>{M.mutate({userId:z._id||z.id,suspended:!1,suspend_end:new Date().toISOString()})},$=st({mutationFn:async z=>ut("DELETE",`/api/admin/users/${z}`),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/users"]}),N(!1),_(null),s({title:"Success",description:"User deleted successfully"})},onError:z=>{s({title:"Error",description:z.message||"Failed to delete user",variant:"destructive"})}}),L=z=>{_(z),N(!0)},te=()=>{C&&$.mutate(C._id||C.id)};return p.useEffect(()=>{o(1)},[r]),n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Total Users"}),n.jsx(Xr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-users",children:(A==null?void 0:A.totalUsers)??(O==null?void 0:O.totalItems)??P.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All registered"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Customers"}),n.jsx(Xr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-customers-count",children:(A==null?void 0:A.totalCustomers)??"-"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total customers"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Active Sellers"}),n.jsx(lc,{className:"h-4 w-4 text-green-500"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-active-sellers",children:(A==null?void 0:A.activeSellers)??"-"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Approved sellers"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Pending Sellers"}),n.jsx(Cr,{className:"h-4 w-4 text-orange-500"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"text-pending-sellers",children:(A==null?void 0:A.pendingSellers)??"-"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Blocked Users"}),n.jsx(lm,{className:"h-4 w-4 text-red-500"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"text-blocked-users",children:(A==null?void 0:A.blockedUsers)??"-"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Blocked accounts"})]})]})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(we,{children:"All Users"}),n.jsx(Fe,{children:"View and manage all registered users"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[n.jsxs(Gt,{value:w,onValueChange:b,children:[n.jsxs(Bt,{className:"w-full sm:w-[140px]",children:[n.jsx(Xr,{className:"h-4 w-4 mr-2"}),n.jsx(Yt,{placeholder:"Type"})]}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Types"}),n.jsx(fe,{value:"seller",children:"Sellers"}),n.jsx(fe,{value:"customer",children:"Customers"})]})]}),n.jsxs(Gt,{value:g,onValueChange:y,children:[n.jsxs(Bt,{className:"w-full sm:w-[140px]",children:[n.jsx(kf,{className:"h-4 w-4 mr-2"}),n.jsx(Yt,{placeholder:"Status"})]}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Status"}),n.jsx(fe,{value:"suspended",children:"Suspended"}),n.jsx(fe,{value:"blocked",children:"Blocked"})]})]}),n.jsxs("div",{className:"relative w-full sm:w-64",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search users...",value:r,onChange:z=>i(z.target.value),className:"pl-10","data-testid":"input-search-users"})]})]})]})}),n.jsx(ue,{children:j?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading users..."})]}):P.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"No users found"})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{className:"min-w-[200px]",children:"User"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Email"}),n.jsx(Ce,{className:"hidden lg:table-cell",children:"Username"}),n.jsx(Ce,{className:"hidden xl:table-cell",children:"Country"}),n.jsx(Ce,{className:"hidden lg:table-cell",children:"Joined"}),n.jsx(Ce,{children:"Type"}),n.jsx(Ce,{className:"hidden sm:table-cell",children:"Status"}),n.jsx(Ce,{className:"text-right",children:"Wallet"}),n.jsx(Ce,{className:"text-right hidden sm:table-cell",children:"Pending"}),n.jsx(Ce,{className:"text-right",children:"Actions"})]})}),n.jsx(Us,{children:P.map(z=>{var pe,xe;return n.jsxs(yt,{"data-testid":`row-user-${z._id||z.id}`,children:[n.jsx(ke,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs(Or,{className:"h-8 w-8 flex-shrink-0",children:[n.jsx(Dr,{src:z.profilePhoto}),n.jsxs(Mr,{children:[(pe=z.firstName)==null?void 0:pe[0],(xe=z.lastName)==null?void 0:xe[0]]})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"font-medium truncate",children:[z.firstName," ",z.lastName]}),n.jsx("div",{className:"text-sm text-muted-foreground md:hidden truncate",children:z.email}),n.jsx("div",{className:"text-sm text-muted-foreground hidden md:block",children:z.phone||"No phone"})]})]})}),n.jsx(ke,{className:"hidden md:table-cell","data-testid":`text-email-${z._id||z.id}`,children:n.jsx("div",{className:"max-w-[200px] truncate",children:z.email})}),n.jsx(ke,{className:"hidden lg:table-cell","data-testid":`text-username-${z._id||z.id}`,children:z.userName||"N/A"}),n.jsx(ke,{className:"hidden xl:table-cell",children:z.country||"N/A"}),n.jsx(ke,{className:"hidden lg:table-cell text-sm text-muted-foreground",children:z.createdAt||z.created_at?new Date(z.createdAt||z.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}),n.jsx(ke,{children:n.jsx(Ye,{variant:z.seller?"default":"secondary",children:z.seller?"Seller":"Customer"})}),n.jsx(ke,{className:"hidden sm:table-cell",children:n.jsxs("div",{className:"flex flex-col items-start gap-1",children:[n.jsx(Ye,{variant:z.suspended?"outline":z.system_blocked?"destructive":"secondary","data-testid":`badge-status-${z._id||z.id}`,className:z.suspended?"border-orange-500 text-orange-600":"",children:z.suspended?n.jsxs(n.Fragment,{children:[n.jsx(Cr,{className:"h-3 w-3 mr-1"}),"Suspended"]}):z.system_blocked?n.jsxs(n.Fragment,{children:[n.jsx(CU,{className:"h-3 w-3 mr-1"}),"Blocked"]}):n.jsxs(n.Fragment,{children:[n.jsx(lc,{className:"h-3 w-3 mr-1"}),"Active"]})}),z.suspended&&z.suspend_end&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.max(0,Math.ceil((new Date(z.suspend_end).getTime()-new Date().getTime())/(1e3*60*60*24)))," days left"]})]})}),n.jsx(ke,{className:"text-right","data-testid":`text-wallet-${z._id||z.id}`,children:n.jsxs("div",{className:"flex items-center justify-end gap-1 font-medium",children:[n.jsx(pj,{className:"h-3 w-3 text-muted-foreground"}),n.jsxs("span",{children:["$",(z.wallet||0).toFixed(2)]})]})}),n.jsx(ke,{className:"text-right hidden sm:table-cell","data-testid":`text-wallet-pending-${z._id||z.id}`,children:n.jsxs("span",{className:"text-muted-foreground",children:["$",(z.walletPending||0).toFixed(2)]})}),n.jsx(ke,{className:"text-right",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm","data-testid":`button-actions-${z._id||z.id}`,children:n.jsx(Cf,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:()=>t(`/admin/users/${z._id||z.id}`),"data-testid":`menu-view-user-${z._id||z.id}`,children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"View Details"]}),z.seller&&n.jsxs(Zt,{onClick:()=>t(`/admin/users/${z._id||z.id}/shipments`),"data-testid":`menu-view-shipments-${z._id||z.id}`,children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"View Shipments"]}),n.jsx(Na,{}),z.suspended?n.jsxs(Zt,{onClick:()=>U(z),disabled:M.isPending,"data-testid":`menu-unsuspend-user-${z._id||z.id}`,children:[n.jsx(lc,{className:"h-4 w-4 mr-2"}),"Unsuspend User"]}):n.jsxs(Zt,{onClick:()=>J(z),"data-testid":`menu-suspend-user-${z._id||z.id}`,children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Suspend User"]}),n.jsx(Zt,{onClick:()=>{D.mutate({userId:z._id||z.id,blocked:!z.system_blocked})},disabled:D.isPending,"data-testid":`menu-block-user-${z._id||z.id}`,className:z.system_blocked?"":"text-destructive focus:text-destructive",children:z.system_blocked?n.jsxs(n.Fragment,{children:[n.jsx(lc,{className:"h-4 w-4 mr-2"}),"Unblock User"]}):n.jsxs(n.Fragment,{children:[n.jsx(lm,{className:"h-4 w-4 mr-2"}),"Block User"]})}),n.jsx(Na,{}),n.jsxs(Zt,{onClick:()=>L(z),disabled:$.isPending,"data-testid":`menu-delete-user-${z._id||z.id}`,className:"text-destructive focus:text-destructive",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})})]},z._id||z.id)})})]})}),O&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:[n.jsxs("span",{className:"hidden sm:inline",children:["Page ",O.currentPage," of ",O.totalPages," (",O.totalItems," total users)"]}),n.jsxs("span",{className:"sm:hidden",children:[O.currentPage," / ",O.totalPages]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>o(a-1),disabled:!O.hasPrevPage,"data-testid":"button-prev-page",children:[n.jsx(oi,{className:"h-4 w-4 sm:mr-1"}),n.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>o(a+1),disabled:!O.hasNextPage,"data-testid":"button-next-page",children:[n.jsx("span",{className:"hidden sm:inline",children:"Next"}),n.jsx(Vn,{className:"h-4 w-4 sm:ml-1"})]})]})]})]})})]})]}),n.jsx(ys,{open:c,onOpenChange:d,children:n.jsxs(fs,{className:"sm:max-w-md",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Suspend User"}),n.jsxs(Ls,{children:["Schedule a suspension period for ",u==null?void 0:u.firstName," ",u==null?void 0:u.lastName,". The user will be blocked during this time period."]})]}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Suspension End Date"}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),h?It(h,"PPP"):"Select end date"]})}),n.jsx(pa,{className:"w-auto p-0 z-[9999]",align:"start",children:n.jsx(fa,{mode:"single",selected:h,onSelect:x,disabled:z=>z<new Date,initialFocus:!0})})]})]})}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),n.jsx(G,{onClick:X,disabled:!h||M.isPending,children:M.isPending?n.jsxs(n.Fragment,{children:[n.jsx(dn,{className:"h-4 w-4 mr-2 animate-spin"}),"Suspending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Suspend User"]})})]})]})}),n.jsx(ys,{open:v,onOpenChange:N,children:n.jsxs(fs,{className:"sm:max-w-md",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Delete User"}),n.jsxs(Ls,{children:["Are you sure you want to permanently delete ",C==null?void 0:C.firstName," ",C==null?void 0:C.lastName,"? This action cannot be undone and will remove all associated data."]})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),n.jsx(G,{variant:"destructive",onClick:te,disabled:$.isPending,"data-testid":"button-confirm-delete-user",children:$.isPending?n.jsxs(n.Fragment,{children:[n.jsx(dn,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Delete User"]})})]})]})})]})}function hne(){var g;const[,t]=Ds(),{user:e}=qi(),{toast:s}=Et(),[r,i]=p.useState(""),[a,o]=p.useState(1),[l]=p.useState(20);p.useEffect(()=>{e!=null&&e.admin||t("/")},[e==null?void 0:e.admin,t]);const{data:c,isLoading:d}=Ve({queryKey:["/api/admin/users","pending",a,l,r],queryFn:async()=>{const y=new URLSearchParams;y.set("page",String(a)),y.set("limit",String(l)),y.set("status","pending"),r&&y.set("title",r);const w=`/api/admin/users?${y.toString()}`;return await(await ut("GET",w)).json()}}),u=((g=c==null?void 0:c.data)==null?void 0:g.users)||[],f=c!=null&&c.data?{currentPage:a,totalPages:c.data.pages,totalItems:c.data.totalDoc,hasNextPage:a<c.data.pages,hasPrevPage:a>1}:void 0,h=st({mutationFn:async({userId:y,email:w})=>ut("PATCH",`/api/admin/users/${y}/approve-seller`,{email:w}),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"Success",description:"User approved as seller successfully"})},onError:y=>{s({title:"Error",description:y.message||"Failed to approve user",variant:"destructive"})}}),x=st({mutationFn:async({userId:y})=>ut("PATCH",`/api/admin/users/${y}/approve-seller`,{action:"reject"}),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"Success",description:"User seller application rejected"})},onError:y=>{s({title:"Error",description:y.message||"Failed to reject application",variant:"destructive"})}});return p.useEffect(()=>{o(1)},[r]),n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Pending Approvals"}),n.jsx(Cr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-pending-count",children:(f==null?void 0:f.totalItems)||u.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Users awaiting seller approval"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"On This Page"}),n.jsx(CI,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-page-count",children:u.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Applications to review"})]})]})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(we,{children:"Pending Seller Approvals"}),n.jsx(Fe,{children:"Review and approve users who have applied to become sellers"})]}),n.jsxs("div",{className:"relative w-full sm:w-64",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search users...",value:r,onChange:y=>i(y.target.value),className:"pl-10","data-testid":"input-search-pending"})]})]})}),n.jsx(ue,{children:d?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading pending approvals..."})]}):u.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Cr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No pending approvals"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"All seller applications have been reviewed"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{className:"min-w-[200px]",children:"User"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Email"}),n.jsx(Ce,{className:"hidden lg:table-cell",children:"Username"}),n.jsx(Ce,{className:"hidden xl:table-cell",children:"Country"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{className:"text-right",children:"Actions"})]})}),n.jsx(Us,{children:u.map(y=>{var w,b;return n.jsxs(yt,{"data-testid":`row-pending-user-${y._id||y.id}`,children:[n.jsx(ke,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs(Or,{className:"h-8 w-8 flex-shrink-0",children:[n.jsx(Dr,{src:y.profilePhoto}),n.jsxs(Mr,{children:[(w=y.firstName)==null?void 0:w[0],(b=y.lastName)==null?void 0:b[0]]})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"font-medium truncate",children:[y.firstName," ",y.lastName]}),n.jsx("div",{className:"text-sm text-muted-foreground md:hidden truncate",children:y.email}),n.jsx("div",{className:"text-sm text-muted-foreground hidden md:block",children:y.phone||"No phone"})]})]})}),n.jsx(ke,{className:"hidden md:table-cell","data-testid":`text-email-${y._id||y.id}`,children:n.jsx("div",{className:"max-w-[200px] truncate",children:y.email})}),n.jsx(ke,{className:"hidden lg:table-cell","data-testid":`text-username-${y._id||y.id}`,children:y.userName||"N/A"}),n.jsx(ke,{className:"hidden xl:table-cell",children:y.country||"N/A"}),n.jsx(ke,{children:n.jsxs(Ye,{variant:"outline",className:"text-amber-600 border-amber-600",children:[n.jsx(Cr,{className:"h-3 w-3 mr-1"}),"Pending"]})}),n.jsx(ke,{className:"text-right",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm","data-testid":`button-actions-${y._id||y.id}`,children:n.jsx(Cf,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:()=>t(`/admin/users/${y._id||y.id}`),"data-testid":`menu-view-user-${y._id||y.id}`,children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"View Details"]}),n.jsx(Na,{}),n.jsxs(Zt,{onClick:()=>{h.mutate({userId:y._id||y.id,email:y.email})},disabled:h.isPending,"data-testid":`menu-approve-user-${y._id||y.id}`,className:"text-green-600 focus:text-green-600",children:[n.jsx(lc,{className:"h-4 w-4 mr-2"}),"Approve Seller"]}),n.jsxs(Zt,{onClick:()=>{x.mutate({userId:y._id||y.id})},disabled:x.isPending,"data-testid":`menu-reject-user-${y._id||y.id}`,className:"text-destructive focus:text-destructive",children:[n.jsx(wI,{className:"h-4 w-4 mr-2"}),"Reject Application"]})]})]})})]},y._id||y.id)})})]})}),f&&f.totalPages>1&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:[n.jsxs("span",{className:"hidden sm:inline",children:["Page ",f.currentPage," of ",f.totalPages," (",f.totalItems," pending)"]}),n.jsxs("span",{className:"sm:hidden",children:[f.currentPage," / ",f.totalPages]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>o(a-1),disabled:!f.hasPrevPage,"data-testid":"button-prev-page",children:[n.jsx(oi,{className:"h-4 w-4 sm:mr-1"}),n.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>o(a+1),disabled:!f.hasNextPage,"data-testid":"button-next-page",children:[n.jsx("span",{className:"hidden sm:inline",children:"Next"}),n.jsx(Vn,{className:"h-4 w-4 sm:ml-1"})]})]})]})]})})]})]})})}var t0="Tabs",[fne]=Cn(t0,[Lf]),uM=Lf(),[pne,iS]=fne(t0),hM=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=Df(l),[f,h]=si({prop:r,onChange:i,defaultProp:a??"",caller:t0});return n.jsx(pne,{scope:s,baseId:Ti(),value:f,onValueChange:h,orientation:o,dir:u,activationMode:c,children:n.jsx(Je.div,{dir:u,"data-orientation":o,...d,ref:e})})});hM.displayName=t0;var fM="TabsList",pM=p.forwardRef((t,e)=>{const{__scopeTabs:s,loop:r=!0,...i}=t,a=iS(fM,s),o=uM(s);return n.jsx(I_,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:n.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});pM.displayName=fM;var mM="TabsTrigger",gM=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,disabled:i=!1,...a}=t,o=iS(mM,s),l=uM(s),c=vM(o.baseId,r),d=bM(o.baseId,r),u=r===o.value;return n.jsx(R_,{asChild:!0,...l,focusable:!i,active:u,children:n.jsx(Je.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:Ie(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Ie(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Ie(t.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!i&&f&&o.onValueChange(r)})})})});gM.displayName=mM;var xM="TabsContent",yM=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,forceMount:i,children:a,...o}=t,l=iS(xM,s),c=vM(l.baseId,r),d=bM(l.baseId,r),u=r===l.value,f=p.useRef(u);return p.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),n.jsx(hn,{present:i||u,children:({present:h})=>n.jsx(Je.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&a})})});yM.displayName=xM;function vM(t,e){return`${t}-trigger-${e}`}function bM(t,e){return`${t}-content-${e}`}var mne=hM,wM=pM,jM=gM,NM=yM;const Vi=mne,li=p.forwardRef(({className:t,...e},s)=>n.jsx(wM,{ref:s,className:Re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));li.displayName=wM.displayName;const _t=p.forwardRef(({className:t,...e},s)=>n.jsx(jM,{ref:s,className:Re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));_t.displayName=jM.displayName;const Ft=p.forwardRef(({className:t,...e},s)=>n.jsx(NM,{ref:s,className:Re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ft.displayName=NM.displayName;var s0="Switch",[gne]=Cn(s0),[xne,yne]=gne(s0),_M=p.forwardRef((t,e)=>{const{__scopeSwitch:s,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=t,[h,x]=p.useState(null),g=ft(e,N=>x(N)),y=p.useRef(!1),w=h?u||!!h.closest("form"):!0,[b,v]=si({prop:i,defaultProp:a??!1,onChange:d,caller:s0});return n.jsxs(xne,{scope:s,checked:b,disabled:l,children:[n.jsx(Je.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":EM(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:Ie(t.onClick,N=>{v(C=>!C),w&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),w&&n.jsx(kM,{control:h,bubbles:!y.current,name:r,value:c,checked:b,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});_M.displayName=s0;var SM="SwitchThumb",CM=p.forwardRef((t,e)=>{const{__scopeSwitch:s,...r}=t,i=yne(SM,s);return n.jsx(Je.span,{"data-state":EM(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});CM.displayName=SM;var vne="SwitchBubbleInput",kM=p.forwardRef(({__scopeSwitch:t,control:e,checked:s,bubbles:r=!0,...i},a)=>{const o=p.useRef(null),l=ft(o,a),c=zv(s),d=Cv(e);return p.useEffect(()=>{const u=o.current;if(!u)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==s&&x){const g=new Event("click",{bubbles:r});x.call(u,s),u.dispatchEvent(g)}},[c,s,r]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});kM.displayName=vne;function EM(t){return t?"checked":"unchecked"}var TM=_M,bne=CM;const il=p.forwardRef(({className:t,...e},s)=>n.jsx(TM,{className:Re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:s,children:n.jsx(bne,{className:Re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));il.displayName=TM.displayName;function wne(){var Q,se,ye;const[,t]=Ds(),[,e]=Uc("/admin/users/:userId"),{user:s}=qi(),{settings:r}=qc(),{toast:i}=Et(),a=e==null?void 0:e.userId,[o,l]=p.useState("addresses"),[c,d]=p.useState("all"),[u,f]=p.useState("all"),[h,x]=p.useState(1),[g,y]=p.useState("");p.useEffect(()=>{s!=null&&s.admin||t("/")},[s==null?void 0:s.admin,t]);const w=st({mutationFn:async B=>await ut("PATCH",`/api/admin/users/${a}/approve-seller`,{email:B}),onSuccess:()=>{We.invalidateQueries({queryKey:[`/api/admin/users/${a}`]}),i({title:"Success",description:"User approved as seller successfully"})},onError:B=>{i({title:"Error",description:B.message||"Failed to approve seller",variant:"destructive"})}}),b=st({mutationFn:async B=>await ut("PATCH",`/api/admin/users/${a}`,B),onSuccess:()=>{We.invalidateQueries({queryKey:[`/api/admin/users/${a}`]}),i({title:"Success",description:"User updated successfully"})},onError:B=>{i({title:"Error",description:B.message||"Failed to update user",variant:"destructive"})}}),v=st({mutationFn:async()=>await(await ut("POST","/api/admin/impersonate/user",{userId:a})).json(),onSuccess:B=>{if(B.success&&B.accessToken){const ie=(r==null?void 0:r.website_url)||window.location.origin.replace("admin","marketplace"),ce=new URL(ie);ce.pathname="/",ce.searchParams.set("impersonate","true"),ce.searchParams.set("token",B.accessToken),ce.searchParams.set("authtoken",B.authtoken||""),ce.searchParams.set("user",encodeURIComponent(JSON.stringify(B.data))),window.open(ce.toString(),"_blank"),i({title:"Opening Marketplace",description:`Opening marketplace as ${($==null?void 0:$.userName)||($==null?void 0:$.email)}`})}else i({title:"Error",description:"Failed to get impersonation tokens",variant:"destructive"})},onError:B=>{i({title:"Error",description:B.message||"Failed to impersonate user",variant:"destructive"})}}),N=B=>{if(B){const ie=($==null?void 0:$.email)||"";w.mutate(ie)}else b.mutate({seller:!1})},{data:C,isLoading:_}=Ve({queryKey:[`/api/admin/users/${a}`],enabled:!!a,refetchOnMount:"always",staleTime:0}),{data:T,isLoading:j}=Ve({queryKey:[`/api/address/all/${a}`],enabled:!!a}),{data:S,isLoading:A}=Ve({queryKey:[`/api/shipping/profiles/user/${a}`],enabled:!!a}),{data:I,isLoading:P}=Ve({queryKey:[`/users/paymentmethod/${a}`],queryFn:async()=>{const B=await fetch(`/users/paymentmethod/${a}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch payment methods");return await B.json()},enabled:!!a&&o==="payment-methods"}),{data:O,isLoading:D}=Ve({queryKey:[`/api/admin/users/${a}/shows`],queryFn:async()=>await(await ut("GET",`/api/admin/users/${a}/shows?limit=100`)).json(),enabled:!!a&&o==="shows-shipments"}),{data:M,isLoading:J}=Ve({queryKey:[`/api/admin/users/${a}/shipping-metrics`,c],queryFn:async()=>{const B=new URLSearchParams;c&&c!=="all"&&(c==="marketplace"?B.set("marketplace","true"):B.set("tokshow",c));const ie=B.toString()?`?${B.toString()}`:"";return await(await ut("GET",`/api/admin/users/${a}/shipping-metrics${ie}`)).json()},enabled:!!a&&o==="shows-shipments"}),{data:X,isLoading:U}=Ve({queryKey:[`/api/admin/users/${a}/seller-orders`,c,u,h,g],queryFn:async()=>{const B=new URLSearchParams;return c&&c!=="all"&&(c==="marketplace"?B.set("marketplace","true"):B.set("tokshow",c)),u&&u!=="all"&&B.set("status",u),g.trim()&&B.set("search",g.trim()),B.set("page",String(h)),B.set("limit","20"),await(await ut("GET",`/api/admin/users/${a}/seller-orders?${B.toString()}`)).json()},enabled:!!a&&o==="shows-shipments"}),$=C==null?void 0:C.data,L=(T==null?void 0:T.data)||T||[],te=(S==null?void 0:S.data)||S||[],F=(I==null?void 0:I.data)||I||[],z=(O==null?void 0:O.data)||[],pe=M||null,xe=(X==null?void 0:X.orders)||((Q=X==null?void 0:X.data)==null?void 0:Q.orders)||(X==null?void 0:X.data)||[],_e=(X==null?void 0:X.total)||(X==null?void 0:X.totalDoc)||0,Me=(X==null?void 0:X.totalPages)||Math.ceil(_e/20)||1,K=B=>{switch(B==null?void 0:B.toLowerCase()){case"delivered":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"processing":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"unfulfilled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return _?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading user details..."})]})})}):$?n.jsx(Ze,{children:n.jsxs("div",{className:"p-8",children:[n.jsx("div",{className:"mb-6",children:n.jsxs(G,{variant:"ghost",onClick:()=>t("/admin"),"data-testid":"button-back-to-admin",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Users"]})}),n.jsxs(de,{className:"mb-8",children:[n.jsxs(be,{children:[n.jsx(we,{children:"User Profile"}),n.jsx(Fe,{children:"Complete user information"})]}),n.jsxs(ue,{children:[n.jsxs("div",{className:"flex items-start space-x-6",children:[n.jsxs(Or,{className:"h-20 w-20",children:[n.jsx(Dr,{src:$.profilePhoto}),n.jsxs(Mr,{className:"text-2xl",children:[(se=$.firstName)==null?void 0:se[0],(ye=$.lastName)==null?void 0:ye[0]]})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Full Name"}),n.jsxs("p",{className:"font-medium","data-testid":"text-user-name",children:[$.firstName," ",$.lastName]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium","data-testid":"text-user-email",children:$.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Username"}),n.jsx("p",{className:"font-medium","data-testid":"text-user-username",children:$.userName||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Country"}),n.jsx("p",{className:"font-medium",children:$.country||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium",children:$.phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Default Payment Method"}),n.jsx("p",{className:"font-medium","data-testid":"text-default-payment-method",children:typeof $.defaultpaymentmethod=="object"&&$.defaultpaymentmethod?`${($.defaultpaymentmethod.type||"Card").replace(/_/g," ")} ending in ${$.defaultpaymentmethod.last4||"****"}`:$.defaultpaymentmethod?String($.defaultpaymentmethod).replace(/_/g," "):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Account Type"}),n.jsx(Ye,{variant:$.seller?"default":"secondary",children:$.seller?"Seller":"Customer"})]})]})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t",children:[n.jsx("h3",{className:"text-sm font-semibold mb-4",children:"Admin Controls"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(re,{htmlFor:"seller-toggle",className:"text-base",children:"Seller Account"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow this user to sell products on the platform"})]}),n.jsx(il,{id:"seller-toggle",checked:$.seller,onCheckedChange:N,disabled:w.isPending||b.isPending,"data-testid":"switch-seller-status"})]}),$.seller&&n.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(re,{className:"text-base",children:"View as Seller"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Open the marketplace as this seller in a new tab"})]}),n.jsx(G,{variant:"outline",onClick:()=>v.mutate(),disabled:v.isPending,"data-testid":"button-impersonate-user",children:v.isPending?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent mr-2"}),"Opening..."]}):n.jsxs(n.Fragment,{children:[n.jsx(NI,{className:"h-4 w-4 mr-2"}),"Open as Seller"]})})]})]})]})]})]}),n.jsxs(Vi,{defaultValue:"addresses",className:"w-full",onValueChange:B=>{l(B),x(1)},children:[n.jsx("div",{className:"w-full overflow-x-auto pb-2",children:n.jsxs(li,{className:`inline-flex w-full min-w-max sm:w-full sm:min-w-0 sm:grid ${$!=null&&$.seller?"sm:grid-cols-4":"sm:grid-cols-2"}`,children:[n.jsxs(_t,{value:"addresses","data-testid":"tab-addresses",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(vv,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Addresses (",L.length,")"]}),($==null?void 0:$.seller)&&n.jsxs(_t,{value:"shipping","data-testid":"tab-shipping",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Shipping Profiles (",te.length,")"]}),n.jsxs(_t,{value:"payment-methods","data-testid":"tab-payment-methods",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(gd,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Payment Methods"]}),($==null?void 0:$.seller)&&n.jsxs(_t,{value:"shows-shipments","data-testid":"tab-shows-shipments",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(dr,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Shows & Shipments"]})]})}),n.jsx(Ft,{value:"addresses",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"User Addresses"}),n.jsx(Fe,{children:"All saved addresses for this user"})]}),n.jsx(ue,{children:j?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading addresses..."})]}):L.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No addresses found"}):n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsx(yt,{children:L.length>0&&Object.keys(L[0]).filter(B=>!["_id","__v","userId","user","createdAt","updatedAt","cityCode","stateCode","countryCode","street"].includes(B)).map(B=>n.jsx(Ce,{className:"capitalize whitespace-nowrap",children:B.replace(/([A-Z])/g," $1").replace(/_/g," ").trim()},B))})}),n.jsx(Us,{children:L.map((B,ie)=>n.jsx(yt,{"data-testid":`address-${ie}`,children:Object.entries(B).filter(([ce])=>!["_id","__v","userId","user","createdAt","updatedAt","cityCode","stateCode","countryCode","street"].includes(ce)).map(([ce,oe])=>n.jsx(ke,{className:"whitespace-nowrap",children:oe==null?n.jsx("span",{className:"text-muted-foreground",children:"N/A"}):typeof oe=="boolean"?n.jsx(Ye,{variant:oe?"default":"secondary",children:oe?"Yes":"No"}):typeof oe=="object"?n.jsx("span",{className:"text-xs font-mono max-w-[200px] truncate block",title:JSON.stringify(oe),children:JSON.stringify(oe)}):String(oe)},ce))},B._id||ie))})]})})})]})}),n.jsx(Ft,{value:"shipping",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Shipping Profiles"}),n.jsx(Fe,{children:"User's shipping configurations"})]}),n.jsx(ue,{children:A?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading shipping profiles..."})]}):te.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No shipping profiles found"}):n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsx(yt,{children:te.length>0&&Object.keys(te[0]).filter(B=>!["_id","__v","userId","user","taxCode","createdAt","updatedAt"].includes(B)).map(B=>n.jsx(Ce,{className:"capitalize whitespace-nowrap",children:B.replace(/([A-Z])/g," $1").replace(/_/g," ").trim()},B))})}),n.jsx(Us,{children:te.map((B,ie)=>n.jsx(yt,{"data-testid":`shipping-profile-${ie}`,children:Object.entries(B).filter(([ce])=>!["_id","__v","userId","user","taxCode","createdAt","updatedAt"].includes(ce)).map(([ce,oe])=>n.jsx(ke,{className:"whitespace-nowrap",children:oe==null?n.jsx("span",{className:"text-muted-foreground",children:"N/A"}):typeof oe=="boolean"?n.jsx(Ye,{variant:oe?"default":"secondary",children:oe?"Yes":"No"}):typeof oe=="object"?n.jsx("span",{className:"text-xs font-mono max-w-[200px] truncate block",title:JSON.stringify(oe),children:JSON.stringify(oe)}):String(oe)},ce))},B._id||ie))})]})})})]})}),n.jsx(Ft,{value:"payment-methods",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Payment Methods"}),n.jsx(Fe,{children:"All saved payment methods for this user"})]}),n.jsx(ue,{children:P?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading payment methods..."})]}):!Array.isArray(F)||F.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No payment methods found"}):n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[F.length>0&&Object.keys(F[0]).filter(B=>!["_id","__v","cardid","cardId","customerid","customerId","token","paymentMethodId","walletType","userid","userId","type"].includes(B)).map(B=>n.jsx(Ce,{className:"capitalize whitespace-nowrap",children:B.replace(/([A-Z])/g," $1").replace(/_/g," ").trim()},B)),n.jsx(Ce,{className:"whitespace-nowrap",children:"Actions"})]})}),n.jsx(Us,{children:F.map((B,ie)=>n.jsxs(yt,{"data-testid":`payment-method-${B._id||B.id||ie}`,children:[Object.entries(B).filter(([ce])=>!["_id","__v","cardid","cardId","customerid","customerId","token","paymentMethodId","walletType","userid","userId"].includes(ce)).map(([ce,oe])=>n.jsx(ke,{className:"whitespace-nowrap",children:oe==null?n.jsx("span",{className:"text-muted-foreground",children:"N/A"}):typeof oe=="boolean"?n.jsx(Ye,{variant:oe?"default":"secondary",children:oe?"Yes":"No"}):typeof oe=="object"?n.jsx("span",{className:"text-xs font-mono max-w-[200px] truncate block",title:JSON.stringify(oe),children:JSON.stringify(oe)}):ce.toLowerCase().includes("date")||ce==="createdAt"||ce==="updatedAt"?new Date(oe).toLocaleDateString():ce==="created"&&typeof oe=="number"?new Date(oe*1e3).toLocaleDateString():String(oe)},ce)),n.jsx(ke,{className:"whitespace-nowrap",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm",children:n.jsx(ON,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsx(Zt,{onClick:async()=>{const ce=B.primary===!0;try{const oe=await fetch(`/users/paymentmethod/${B._id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({primary:!ce})});if(oe.ok)We.invalidateQueries({queryKey:[`/users/paymentmethod/${a}`]}),i({title:"Success",description:ce?"Removed from default":"Payment method set as default"});else{const Z=await oe.json();i({title:"Error",description:Z.error||"Failed to update default",variant:"destructive"})}}catch(oe){i({title:"Error",description:oe.message||"Failed to update default",variant:"destructive"})}},children:B.primary===!0?"Remove Default":"Make Default"}),n.jsx(Zt,{onClick:async()=>{const ce=B.status==="blocked";try{const oe=await fetch(`/users/paymentmethod/${B._id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:ce?"active":"blocked"})});if(oe.ok)We.invalidateQueries({queryKey:[`/users/paymentmethod/${a}`]}),i({title:"Success",description:`Payment method ${ce?"activated":"deactivated"}`});else{const Z=await oe.json();i({title:"Error",description:Z.error||"Failed to update status",variant:"destructive"})}}catch(oe){i({title:"Error",description:oe.message||"Failed to update status",variant:"destructive"})}},children:B.status==="blocked"?"Activate":"Deactivate"}),n.jsx(Zt,{className:"text-destructive",onClick:async()=>{if(confirm("Are you sure you want to delete this payment method?"))try{const ce=await fetch(`/users/paymentmethod/${B._id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(ce.ok)We.invalidateQueries({queryKey:[`/users/paymentmethod/${a}`]}),i({title:"Success",description:"Payment method deleted"});else{const oe=await ce.json();i({title:"Error",description:oe.error||"Failed to delete",variant:"destructive"})}}catch(ce){i({title:"Error",description:ce.message||"Failed to delete",variant:"destructive"})}},children:"Delete"})]})]})})]},B._id||B.id||B.paymentMethodId||ie))})]})})})]})}),($==null?void 0:$.seller)&&n.jsx(Ft,{value:"shows-shipments",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("div",{className:"flex-1",children:n.jsxs(Gt,{value:c,onValueChange:B=>{d(B),x(1)},children:[n.jsxs(Bt,{"data-testid":"select-show-filter",children:[n.jsx(dr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.jsx(Yt,{placeholder:"All Shows"})]}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Shows"}),n.jsx(fe,{value:"marketplace",children:"Marketplace (No Show)"}),D?n.jsx(fe,{value:"_loading",disabled:!0,children:"Loading shows..."}):z.map(B=>n.jsxs(fe,{value:B._id||B.id,children:[B.title||B.name||"Untitled Show","  ",B.createdAt?new Date(B.createdAt).toLocaleDateString():""]},B._id||B.id))]})]})}),n.jsxs(Gt,{value:u,onValueChange:B=>{f(B),x(1)},children:[n.jsx(Bt,{className:"w-full sm:w-[180px]","data-testid":"select-status-filter",children:n.jsx(Yt,{placeholder:"All Statuses"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Statuses"}),n.jsx(fe,{value:"unfulfilled",children:"Unfulfilled"}),n.jsx(fe,{value:"processing",children:"Processing"}),n.jsx(fe,{value:"ready_to_ship",children:"Ready to Ship"}),n.jsx(fe,{value:"shipped",children:"Shipped"}),n.jsx(fe,{value:"delivered",children:"Delivered"}),n.jsx(fe,{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"relative w-full sm:w-64",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search orders...",value:g,onChange:B=>{y(B.target.value),x(1)},className:"pl-10","data-testid":"input-order-search"})]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:J?Array.from({length:6}).map((B,ie)=>n.jsx(de,{children:n.jsxs(ue,{className:"pt-6",children:[n.jsx("div",{className:"h-8 bg-muted animate-pulse rounded"}),n.jsx("div",{className:"h-4 bg-muted animate-pulse rounded mt-2 w-2/3"})]})},ie)):n.jsxs(n.Fragment,{children:[n.jsx(de,{children:n.jsxs(ue,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(zn,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Sold"})]}),n.jsxs("p",{className:"text-2xl font-bold","data-testid":"metric-total-sold",children:["$",(pe==null?void 0:pe.totalSold)||"0"]})]})}),n.jsx(de,{children:n.jsxs(ue,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(zn,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Earned"})]}),n.jsxs("p",{className:"text-2xl font-bold","data-testid":"metric-total-earned",children:["$",(pe==null?void 0:pe.totalEarned)||"0"]})]})}),n.jsx(de,{children:n.jsxs(ue,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ri,{className:"h-4 w-4 text-orange-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Shipping Spend"})]}),n.jsxs("p",{className:"text-2xl font-bold","data-testid":"metric-shipping-spend",children:["$",(pe==null?void 0:pe.totalShippingSpend)||"0"]})]})}),n.jsx(de,{children:n.jsxs(ue,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(hs,{className:"h-4 w-4 text-purple-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Items Sold"})]}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"metric-items-sold",children:(pe==null?void 0:pe.itemsSold)||0})]})}),n.jsx(de,{children:n.jsxs(ue,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Pd,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Delivered"})]}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"metric-delivered",children:(pe==null?void 0:pe.totalDelivered)||0})]})}),n.jsx(de,{children:n.jsxs(ue,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Cr,{className:"h-4 w-4 text-yellow-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Pending"})]}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"metric-pending",children:(pe==null?void 0:pe.pendingDelivery)||0})]})})]})}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Orders"}),n.jsx(Fe,{children:_e>0?`${_e} orders found`:"Order list for this seller"})]}),n.jsx(ue,{children:U?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading orders..."})]}):!Array.isArray(xe)||xe.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(kU,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No orders found"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Customer"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Order ID"}),n.jsx(Ce,{className:"hidden lg:table-cell",children:"Show"}),n.jsx(Ce,{className:"hidden sm:table-cell",children:"Date"}),n.jsx(Ce,{children:"Items"}),n.jsx(Ce,{className:"text-right",children:"Total"}),n.jsx(Ce,{children:"Status"})]})}),n.jsx(Us,{children:xe.map(B=>{var Ne,Ke,$e;const ie=B._id||B.id,ce=B.buyer||B.user||{},oe=ce.firstName?`${ce.firstName} ${ce.lastName||""}`.trim():ce.userName||ce.email||"Unknown",Z=B.items||B.products||[],he=((Ne=B.room)==null?void 0:Ne.title)||((Ke=B.show)==null?void 0:Ke.title)||(($e=B.tokshow)==null?void 0:$e.title)||null;return n.jsxs(yt,{"data-testid":`row-order-${ie}`,children:[n.jsx(ke,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Or,{className:"h-7 w-7 flex-shrink-0",children:[n.jsx(Dr,{src:ce.profilePhoto}),n.jsx(Mr,{className:"text-xs",children:oe==null?void 0:oe[0]})]}),n.jsx("span",{className:"font-medium text-sm truncate max-w-[120px]",children:oe})]})}),n.jsx(ke,{className:"hidden md:table-cell text-xs text-muted-foreground font-mono",children:String(ie).slice(-8).toUpperCase()}),n.jsx(ke,{className:"hidden lg:table-cell text-sm",children:he?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(dr,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"truncate max-w-[120px]",children:he})]}):n.jsx("span",{className:"text-muted-foreground text-xs",children:"Marketplace"})}),n.jsx(ke,{className:"hidden sm:table-cell text-sm text-muted-foreground",children:B.createdAt?new Date(B.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}),n.jsx(ke,{children:n.jsxs("div",{className:"flex flex-col gap-1",children:[Z.slice(0,2).map((W,ae)=>{var ge,Ae,Y,je,ze;return n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[(((Ae=(ge=W.product)==null?void 0:ge.photos)==null?void 0:Ae[0])||W.photo||W.image)&&n.jsx("img",{src:((je=(Y=W.product)==null?void 0:Y.photos)==null?void 0:je[0])||W.photo||W.image,className:"h-5 w-5 rounded object-cover flex-shrink-0",alt:""}),n.jsx("span",{className:"truncate max-w-[80px]",children:((ze=W.product)==null?void 0:ze.title)||W.title||W.name||"Item"}),W.quantity>1&&n.jsxs("span",{className:"text-muted-foreground",children:["x",W.quantity]})]},ae)}),Z.length>2&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",Z.length-2," more"]})]})}),n.jsxs(ke,{className:"text-right font-medium",children:["$",(B.total||B.totalAmount||0).toFixed(2)]}),n.jsx(ke,{children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${K(B.status)}`,children:B.status||"Unknown"})})]},ie)})})]})}),Me>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",h," of ",Me," (",_e," orders)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>x(B=>Math.max(1,B-1)),disabled:h<=1,"data-testid":"button-orders-prev",children:n.jsx(oi,{className:"h-4 w-4"})}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>x(B=>Math.min(Me,B+1)),disabled:h>=Me,"data-testid":"button-orders-next",children:n.jsx(Vn,{className:"h-4 w-4"})})]})]})]})})]})]})})]})]})}):n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"User not found"}),n.jsx(G,{onClick:()=>t("/admin"),className:"mt-4",children:"Back to Dashboard"})]})})})}function jne(){var g,y,w,b,v,N,C,_,T,j;const[,t]=Ds(),[,e]=Uc("/admin/users/:userId/details/:itemType/:itemId"),{userId:s,itemType:r,itemId:i}=e||{},a=()=>{switch(r){case"addresses":return[`/api/address/all/${s}`];case"shipping-profiles":return[`/api/shipping/profiles/${s}`];case"inventory":return["/api/products",s];case"orders":return["/api/orders",s];default:return[`/api/admin/users/${s}/${r}`]}},{data:o,isLoading:l}=Ve({queryKey:a(),enabled:!!s&&!!r}),u=(o?o.products?o.products:o.orders?o.orders:Array.isArray(o)?o:Array.isArray(o.data)?o.data:[]:[]).find(S=>(S._id||S.id)===i);if(l)return n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading details..."})]})})});if(!u)return n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Item not found"}),n.jsx(G,{onClick:()=>t(`/admin/users/${s}`),className:"mt-4",children:"Back to User"})]})})});const f=()=>{switch(r){case"addresses":return vv;case"orders":return cr;case"shipping-profiles":return Ri;case"inventory":return hs;default:return hs}},h=()=>{switch(r){case"addresses":return"Address Details";case"orders":return`Order #${u.invoice||u._id}`;case"shipping-profiles":return"Shipping Profile Details";case"inventory":return"Inventory Item Details";default:return"Item Details"}},x=f();return n.jsx(Ze,{children:n.jsxs("div",{className:"p-8",children:[n.jsx("div",{className:"mb-6",children:n.jsxs(G,{variant:"ghost",onClick:()=>t(`/admin/users/${s}`),"data-testid":"button-back-to-user",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to User"]})}),n.jsxs(Vi,{defaultValue:"overview",className:"w-full",children:[n.jsxs(li,{children:[n.jsx(_t,{value:"overview","data-testid":"tab-overview",children:"Overview"}),n.jsx(_t,{value:"details","data-testid":"tab-details",children:"Details"}),r==="orders"&&n.jsx(_t,{value:"items","data-testid":"tab-items",children:"Items"}),r==="inventory"&&n.jsx(_t,{value:"reviews","data-testid":"tab-reviews",children:"Reviews"})]}),n.jsx(Ft,{value:"overview",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(x,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:h()}),n.jsx(Fe,{children:"Basic information"})]})]})}),n.jsxs(ue,{children:[r==="addresses"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Full Name"}),n.jsx("p",{className:"font-medium text-lg",children:u.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium text-lg",children:u.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium text-lg",children:u.phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),n.jsx(Ye,{children:u.isDefault?"Default":"Secondary"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Address"}),n.jsxs("p",{className:"font-medium",children:[u.address,", ",u.city,", ",u.region,", ",u.country]})]})]}),r==="orders"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Date"}),n.jsx("p",{className:"font-medium",children:u.createdAt?new Date(u.createdAt).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),n.jsx(Ye,{children:u.status||"pending"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),n.jsxs("p",{className:"font-medium text-2xl",children:["$",((u.total||0)+(u.servicefee||0)+(u.tax||0)+(u.shipping_fee||0)).toFixed(2)]})]})]}),r==="shipping-profiles"&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(u).map(([S,A])=>S==="_id"||S==="__v"||S==="userId"||S==="user"||S==="taxCode"?null:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:S.replace(/([A-Z])/g," $1").trim()}),n.jsx("p",{className:"font-medium text-lg break-words",children:typeof A=="object"&&A!==null?JSON.stringify(A):String(A||"N/A")})]},S))}),r==="inventory"&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(u).map(([S,A])=>S==="_id"||S==="__v"||S==="userId"||S==="orderId"||S==="ownerId"||S==="favorite"||S==="deleted"||S==="reviews"||S==="favorited"||S==="discountedPrice"||S==="colors"||S==="tokshow"||S==="tiktokshow"?null:S==="images"&&Array.isArray(A)&&A.length>0?n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize mb-2",children:"Images"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((I,P)=>n.jsx("img",{src:I,alt:`Product ${P+1}`,className:"h-24 w-24 rounded object-cover border"},P))})]},S):S==="featured"?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Featured"}),n.jsx(Ye,{variant:A?"default":"secondary",children:A?"Yes":"No"})]},S):S==="listing_type"?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Listing Type"}),n.jsx("p",{className:"font-medium text-lg",children:String(A||"N/A").replace(/_/g," ")})]},S):S==="sizes"&&Array.isArray(A)?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Sizes"}),n.jsx("p",{className:"font-medium text-lg",children:A.join(", ")||"N/A"})]},S):S==="category"&&typeof A=="object"&&A!==null?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Category"}),n.jsx("p",{className:"font-medium text-lg",children:A.name||"N/A"})]},S):(S==="shippingProfile"||S==="shipping_profile")&&typeof A=="object"&&A!==null?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Shipping Profile"}),n.jsx("p",{className:"font-medium text-lg",children:A.name||"N/A"})]},S):n.jsxs("div",{className:S==="description"?"md:col-span-2":"",children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:S.replace(/([A-Z])/g," $1").trim()}),n.jsx("p",{className:"font-medium text-lg break-words",children:typeof A=="object"&&A!==null?JSON.stringify(A):String(A||"N/A")})]},S))})]})]})}),n.jsx(Ft,{value:"details",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Complete Details"}),n.jsx(Fe,{children:"All available information"})]}),n.jsxs(ue,{children:[r==="addresses"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Full Name"}),n.jsx("p",{className:"font-medium text-lg",children:u.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium text-lg",children:u.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone Number"}),n.jsx("p",{className:"font-medium text-lg",children:u.phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Address Type"}),n.jsx("p",{className:"font-medium text-lg",children:u.isDefault?"Default":"Secondary"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Street Address"}),n.jsx("p",{className:"font-medium text-lg",children:u.address})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"City"}),n.jsx("p",{className:"font-medium text-lg",children:u.city})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Region/State"}),n.jsx("p",{className:"font-medium text-lg",children:u.region})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Postal Code"}),n.jsx("p",{className:"font-medium text-lg",children:u.postalCode||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Country"}),n.jsx("p",{className:"font-medium text-lg",children:u.country})]})]}),r==="orders"&&n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice Number"}),n.jsx("p",{className:"font-medium",children:u.invoice||u._id})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Date"}),n.jsx("p",{className:"font-medium",children:u.createdAt?new Date(u.createdAt).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),n.jsx(Ye,{children:u.status||"pending"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),n.jsxs("p",{className:"font-medium text-xl",children:["$",((u.total||0)+(u.servicefee||0)+(u.tax||0)+(u.shipping_fee||0)).toFixed(2)]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"font-medium",children:u.notes||"No notes"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Customer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),n.jsx("p",{className:"font-medium",children:`${((g=u.customer)==null?void 0:g.firstName)||""} ${((y=u.customer)==null?void 0:y.lastName)||""}`.trim()||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium",children:((w=u.customer)==null?void 0:w.email)||"N/A"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Shipping Address"}),n.jsx("p",{className:"font-medium",children:(b=u.customer)!=null&&b.address?`${u.customer.address.addrress1}, ${u.customer.address.city}, ${u.customer.address.state} ${u.customer.address.zipcode}`:"N/A"})]}),((N=(v=u.customer)==null?void 0:v.address)==null?void 0:N.phone)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium",children:u.customer.address.phone})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Seller Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),n.jsx("p",{className:"font-medium",children:`${((C=u.seller)==null?void 0:C.firstName)||""} ${((_=u.seller)==null?void 0:_.lastName)||""}`.trim()||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium",children:((T=u.seller)==null?void 0:T.email)||"N/A"})]}),((j=u.seller)==null?void 0:j.userName)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Username"}),n.jsx("p",{className:"font-medium",children:u.seller.userName})]})]})]})]}),r==="shipping-profiles"&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(u).map(([S,A])=>S==="_id"||S==="__v"||S==="userId"||S==="user"||S==="taxCode"?null:n.jsxs("div",{className:S==="description"?"md:col-span-2":"",children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:S.replace(/([A-Z])/g," $1").trim()}),n.jsx("p",{className:"font-medium text-lg break-words",children:typeof A=="object"&&A!==null?JSON.stringify(A):String(A||"N/A")})]},S))}),r==="inventory"&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(u).map(([S,A])=>S==="_id"||S==="__v"||S==="userId"||S==="orderId"||S==="ownerId"||S==="favorite"||S==="deleted"||S==="reviews"||S==="favorited"||S==="discountedPrice"||S==="colors"||S==="tokshow"||S==="tiktokshow"?null:S==="images"&&Array.isArray(A)&&A.length>0?n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize mb-2",children:"Images"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((I,P)=>n.jsx("img",{src:I,alt:`Product ${P+1}`,className:"h-24 w-24 rounded object-cover border"},P))})]},S):S==="featured"?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Featured"}),n.jsx(Ye,{variant:A?"default":"secondary",children:A?"Yes":"No"})]},S):S==="listing_type"?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Listing Type"}),n.jsx("p",{className:"font-medium text-lg",children:String(A||"N/A").replace(/_/g," ")})]},S):S==="sizes"&&Array.isArray(A)?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Sizes"}),n.jsx("p",{className:"font-medium text-lg",children:A.join(", ")||"N/A"})]},S):S==="category"&&typeof A=="object"&&A!==null?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Category"}),n.jsx("p",{className:"font-medium text-lg",children:A.name||"N/A"})]},S):(S==="shippingProfile"||S==="shipping_profile")&&typeof A=="object"&&A!==null?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:"Shipping Profile"}),n.jsx("p",{className:"font-medium text-lg",children:A.name||"N/A"})]},S):n.jsxs("div",{className:S==="description"?"md:col-span-2":"",children:[n.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:S.replace(/([A-Z])/g," $1").trim()}),n.jsx("p",{className:"font-medium text-lg break-words",children:typeof A=="object"&&A!==null?JSON.stringify(A):String(A||"N/A")})]},S))})]})]})}),r==="orders"&&n.jsx(Ft,{value:"items",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(hs,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:"Order Items"}),n.jsx(Fe,{children:"Products in this order"})]})]})}),n.jsx(ue,{children:!u.items||u.items.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No items in this order"}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Product"}),n.jsx(Ce,{children:"Quantity"}),n.jsx(Ce,{children:"Price"}),n.jsx(Ce,{className:"text-right",children:"Total"})]})}),n.jsx(Us,{children:u.items.map((S,A)=>{var I;return n.jsxs(yt,{children:[n.jsx(ke,{className:"font-medium",children:((I=S.productId)==null?void 0:I.name)||"N/A"}),n.jsx(ke,{children:S.quantity||1}),n.jsxs(ke,{children:["$",S.price||0]}),n.jsxs(ke,{className:"text-right",children:["$",(S.quantity||1)*(S.price||0)]})]},S._id||A)})})]})})})]})}),r==="inventory"&&n.jsx(Ft,{value:"reviews",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(hs,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:"Product Reviews"}),n.jsx(Fe,{children:"Customer reviews for this product"})]})]})}),n.jsx(ue,{children:!u.reviews||u.reviews.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No reviews yet"}):n.jsx("div",{className:"space-y-4",children:u.reviews.map((S,A)=>{var I;return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:S.userName||((I=S.user)==null?void 0:I.name)||"Anonymous"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:S.createdAt?new Date(S.createdAt).toLocaleDateString():"N/A"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-lg font-semibold",children:S.rating||"N/A"}),n.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/ 5"})]})]}),n.jsx("p",{className:"text-sm",children:S.comment||S.review||"No comment"})]},S._id||A)})})})]})})]})]})})}const FE={unfulfilled:"bg-yellow-100 text-yellow-800",processing:"bg-yellow-100 text-yellow-800",progressing:"bg-yellow-100 text-yellow-800",ready_to_ship:"bg-green-100 text-green-800",shipped:"bg-blue-100 text-blue-800",shipping:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800",payment_failed:"bg-red-100 text-red-800",pending_cancellation:"bg-orange-100 text-orange-800",pickup:"bg-purple-100 text-purple-800"};function $E(t){return t.replaceAll("_"," ").replace(/^\w/,e=>e.toUpperCase())}function Nne(){var Me;const[,t]=Ds(),[,e]=Uc("/admin/users/:userId/shipments"),{user:s}=qi(),{toast:r}=Et(),i=e==null?void 0:e.userId,[a,o]=p.useState("all"),[l,c]=p.useState("all"),[d,u]=p.useState(""),[f,h]=p.useState(""),[x,g]=p.useState(void 0),[y,w]=p.useState(void 0),[b,v]=p.useState(1),[N,C]=p.useState([]),_=p.useRef(null);p.useEffect(()=>{s!=null&&s.admin||t("/")},[s==null?void 0:s.admin,t]),p.useEffect(()=>(_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{h(d),v(1)},500),()=>{_.current&&clearTimeout(_.current)}),[d]);const{data:T}=Ve({queryKey:[`/api/admin/users/${i}`],queryFn:async()=>(await ut("GET",`/api/admin/users/${i}`)).json(),enabled:!!i}),{data:j,isLoading:S}=Ve({queryKey:[`/api/admin/users/${i}/shows`],queryFn:async()=>(await ut("GET",`/api/admin/users/${i}/shows?limit=200`)).json(),enabled:!!i}),{data:A,isLoading:I}=Ve({queryKey:[`/api/admin/users/${i}/shipping-metrics`,a,x==null?void 0:x.toISOString(),y==null?void 0:y.toISOString()],queryFn:async()=>{const K=new URLSearchParams;a!=="all"&&(a==="marketplace"?K.set("marketplace","true"):K.set("tokshow",a)),x&&K.set("startDate",It(x,"yyyy-MM-dd")),y&&K.set("endDate",It(y,"yyyy-MM-dd"));const Q=K.toString()?`?${K.toString()}`:"";return(await ut("GET",`/api/admin/users/${i}/shipping-metrics${Q}`)).json()},enabled:!!i}),{data:P,isLoading:O}=Ve({queryKey:[`/api/admin/users/${i}/seller-orders`,a,l,f,b,x==null?void 0:x.toISOString(),y==null?void 0:y.toISOString()],queryFn:async()=>{const K=new URLSearchParams;return a!=="all"&&(a==="marketplace"?K.set("marketplace","true"):K.set("tokshow",a)),l!=="all"&&K.set("status",l),f.trim()&&K.set("search",f.trim()),x&&K.set("startDate",It(x,"yyyy-MM-dd")),y&&K.set("endDate",It(y,"yyyy-MM-dd")),K.set("page",String(b)),K.set("limit","20"),(await ut("GET",`/api/admin/users/${i}/seller-orders?${K.toString()}`)).json()},enabled:!!i}),D=T==null?void 0:T.data,M=D?`${D.firstName||""} ${D.lastName||""}`.trim()||D.userName||D.email:"Seller",J=(j==null?void 0:j.data)||[],X=A||null,U=(P==null?void 0:P.orders)||((Me=P==null?void 0:P.data)==null?void 0:Me.orders)||(P==null?void 0:P.data)||[],$=(P==null?void 0:P.total)||(P==null?void 0:P.totalDoc)||0,L=(P==null?void 0:P.totalPages)||Math.ceil($/20)||1,te=a!=="all"||l!=="all"||x||y,F=()=>{o("all"),c("all"),u(""),h(""),g(void 0),w(void 0),v(1)},z=K=>{C(Q=>Q.includes(K)?Q.filter(se=>se!==K):[...Q,K])},pe=K=>{var se;let Q=0;return((se=K.items)==null?void 0:se.length)>0&&(Q=K.items.reduce((ye,B)=>ye+(B.quantity||1)*(B.price||0),0)),(Q+(K.tax||0)+(K.shipping_fee||0)).toFixed(2)},xe=K=>{var ye;if(K.weight)return`${K.weight}${K.scale||"oz"}`;let Q=0,se="oz";return((ye=K.items)==null?void 0:ye.length)>0&&K.items.forEach(B=>{B.weight&&(Q+=Number(B.weight)*(B.quantity||1),se=B.scale||"oz")}),Q>0?`${Q}${se}`:"-"},_e=K=>{const Q=K.customer;return Q?typeof Q=="object"?Q.userName||`${Q.firstName||""} ${Q.lastName||""}`.trim()||Q.email||"Unknown":String(Q):"Unknown"};return n.jsx(Ze,{children:n.jsx("div",{className:"py-6",children:n.jsxs("div",{className:"px-4 sm:px-6 md:px-8",children:[n.jsx("div",{className:"mb-4",children:n.jsxs(G,{variant:"ghost",onClick:()=>t(`/admin/users/${i}`),"data-testid":"button-back-to-seller",className:"px-0",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to ",M]})}),n.jsxs("div",{className:"mb-6 sm:mb-8 flex items-start gap-4",children:[D&&n.jsxs(Or,{className:"h-12 w-12 flex-shrink-0",children:[n.jsx(Dr,{src:D.profilePhoto}),n.jsx(Mr,{children:M==null?void 0:M[0]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground","data-testid":"text-shipments-title",children:"Shipments"}),n.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[M,"  View shipments by live show or marketplace"]}),n.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:It(new Date,"MM/dd/yyyy 'at' h:mm a")})]})]})]}),te&&n.jsx("div",{className:"mb-6 sm:mb-8",children:n.jsxs("div",{className:"w-full grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4",children:[n.jsx(de,{className:"border-2 border-accent bg-accent/10",children:n.jsxs(ue,{className:"p-3 sm:p-4 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-foreground","data-testid":"metric-total-sold",children:I?"...":`$${(X==null?void 0:X.totalSold)||"0"}`}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Sold"})]})}),n.jsx(de,{className:"border border-border",children:n.jsxs(ue,{className:"p-3 sm:p-4 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-foreground","data-testid":"metric-total-earned",children:I?"...":`$${(X==null?void 0:X.totalEarned)||"0"}`}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Earned (Paid Out)"})]})}),n.jsx(de,{className:"border border-border",children:n.jsxs(ue,{className:"p-3 sm:p-4 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-foreground","data-testid":"metric-shipping-spend",children:I?"...":`$${(X==null?void 0:X.totalShippingSpend)||"0"}`}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Shipping Spend"})]})}),n.jsx(de,{className:"border border-border",children:n.jsxs(ue,{className:"p-3 sm:p-4 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-foreground","data-testid":"metric-items-sold",children:I?"...":(X==null?void 0:X.itemsSold)||0}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Items sold"})]})}),n.jsx(de,{className:"border border-border",children:n.jsxs(ue,{className:"p-3 sm:p-4 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-foreground","data-testid":"metric-total-delivered",children:I?"...":(X==null?void 0:X.totalDelivered)||0}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Delivered"})]})}),n.jsx(de,{className:"border border-border",children:n.jsxs(ue,{className:"p-3 sm:p-4 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-foreground","data-testid":"metric-pending-delivery",children:I?"...":(X==null?void 0:X.pendingDelivery)||0}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending Delivery"})]})})]})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"relative mb-4",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{type:"text",placeholder:"Search shipments by product name, customer, order reference...",value:d,onChange:K=>u(K.target.value),className:"pl-10 w-full","data-testid":"input-search-shipments"})]}),n.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[n.jsx("div",{className:"w-full sm:w-auto sm:min-w-64 sm:max-w-md",children:n.jsxs(Gt,{value:a,onValueChange:K=>{o(K),v(1)},children:[n.jsxs(Bt,{"data-testid":"select-show",children:[n.jsx(dr,{className:"h-4 w-4 mr-2 text-muted-foreground flex-shrink-0"}),n.jsx(Yt,{placeholder:"Filter by show..."})]}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Shows & Marketplace"}),n.jsx(fe,{value:"marketplace",children:"Marketplace"}),S?n.jsx(fe,{value:"_loading",disabled:!0,children:"Loading shows..."}):J.map(K=>{const Q=K.date||K.startDate||K.createdAt,se=Q?`  ${It(new Date(Q),"d MMM  HH:mm")}`:"",ye=K.title||`Show #${(K._id||K.id).slice(-8)}`;return n.jsxs(fe,{value:K._id||K.id,children:[n.jsx("span",{className:"font-medium",children:ye}),se&&n.jsx("span",{className:"text-xs text-muted-foreground",children:se})]},K._id||K.id)})]})]})}),n.jsx("div",{className:"w-full sm:w-64",children:n.jsxs(Gt,{value:l,onValueChange:K=>{c(K),v(1)},children:[n.jsx(Bt,{"data-testid":"select-status",children:n.jsx(Yt,{placeholder:"Filter by status..."})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All"}),n.jsx(fe,{value:"unfulfilled",children:"Unfulfilled"}),n.jsx(fe,{value:"processing",children:"Need Label"}),n.jsx(fe,{value:"ready_to_ship",children:"Ready to Ship"}),n.jsx(fe,{value:"shipped",children:"Shipped"}),n.jsx(fe,{value:"delivered",children:"Delivered"}),n.jsx(fe,{value:"cancelled",children:"Cancelled"})]})]})}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:"w-full sm:w-[150px] justify-start text-left font-normal","data-testid":"button-date-from",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),x?It(x,"MMM d, yyyy"):"From date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:x,onSelect:K=>{g(K),v(1)},initialFocus:!0})})]}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:"w-full sm:w-[150px] justify-start text-left font-normal","data-testid":"button-date-to",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),y?It(y,"MMM d, yyyy"):"To date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:y,onSelect:K=>{w(K),v(1)},initialFocus:!0})})]}),n.jsxs(G,{variant:"outline",onClick:F,"data-testid":"button-reset-filters",className:"w-full sm:w-auto",children:[n.jsx(un,{size:16,className:"mr-1"}),"Reset Filters"]})]})]}),n.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:O?"Loading...":`${$} shipment${$!==1?"s":""}`}),n.jsx("div",{className:"overflow-x-auto rounded-md border border-border bg-card",children:n.jsxs("table",{className:"min-w-full divide-y divide-border",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap w-8"}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Customer"}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Date"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Items"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Total"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Dimensions"}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Status"}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap hidden lg:table-cell",children:"Show"})]})}),n.jsx("tbody",{className:"bg-card divide-y divide-border",children:O?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading shipments..."})]})})}):U.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:8,className:"px-4 py-12 text-center",children:[n.jsx(Ip,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No shipments found"}),n.jsx("p",{className:"text-muted-foreground",children:l!=="all"||a!=="all"||f?"Try adjusting your filters or search":"No orders found for this seller"})]})}):U.map(K=>{var ie,ce,oe,Z,he;const Q=K._id||K.id,se=N.includes(Q),ye=K.items||[],B=((ie=K.room)==null?void 0:ie.title)||((ce=K.tokshow)==null?void 0:ce.title)||((oe=K.show)==null?void 0:oe.title)||null;return n.jsxs(n.Fragment,{children:[n.jsxs("tr",{"data-testid":`row-shipment-${Q}`,className:"cursor-pointer hover:bg-muted/50",onClick:()=>z(Q),children:[n.jsx("td",{className:"px-3 py-3",children:n.jsx(G,{variant:"ghost",size:"sm",className:"p-1 h-5 w-5","data-testid":`button-expand-${Q}`,children:se?n.jsx(Sf,{size:12}):n.jsx(Vn,{size:12})})}),n.jsx("td",{className:"px-3 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[typeof K.customer=="object"&&((Z=K.customer)==null?void 0:Z.profilePhoto)&&n.jsxs(Or,{className:"h-6 w-6 flex-shrink-0",children:[n.jsx(Dr,{src:K.customer.profilePhoto}),n.jsx(Mr,{className:"text-xs",children:(he=_e(K))==null?void 0:he[0]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:_e(K)}),K.order_reference&&n.jsx("div",{className:"text-xs text-muted-foreground",children:K.order_reference})]})]})}),n.jsx("td",{className:"px-3 py-3 text-sm text-muted-foreground whitespace-nowrap",children:K.createdAt?It(new Date(K.createdAt),"MMM dd, yyyy"):""}),n.jsx("td",{className:"px-3 py-3 text-center text-sm text-foreground font-medium",children:ye.length||1}),n.jsxs("td",{className:"px-3 py-3 text-center text-sm text-muted-foreground",children:["$",pe(K)]}),n.jsxs("td",{className:"px-3 py-3 text-center text-xs text-muted-foreground",children:[n.jsx("div",{children:xe(K)}),K.length&&K.width&&K.height?n.jsxs("div",{children:[K.height,"",K.width,"",K.length,'"']}):null]}),n.jsxs("td",{className:"px-3 py-3",children:[n.jsx(Ye,{className:`${FE[K.status]||"bg-gray-100 text-gray-800"} text-xs border-0`,"data-testid":`shipment-status-${Q}`,children:K.status?$E(K.status):"Unknown"}),K.tracking_number&&n.jsx("div",{className:"text-xs text-primary font-mono mt-1 cursor-pointer hover:bg-primary/10 px-1 py-0.5 rounded transition-colors",onClick:Ne=>{Ne.stopPropagation(),navigator.clipboard.writeText(K.tracking_number),r({title:"Copied!",description:"Tracking number copied to clipboard"})},title:"Click to copy tracking number","data-testid":`tracking-number-${Q}`,children:K.tracking_number})]}),n.jsx("td",{className:"px-3 py-3 hidden lg:table-cell",children:B?n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground max-w-[140px]",children:[n.jsx(dr,{className:"h-3 w-3 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:B})]}):n.jsx("span",{className:"text-xs text-muted-foreground",children:"Marketplace"})})]},Q),se&&n.jsx("tr",{className:"bg-muted/30",children:n.jsx("td",{colSpan:8,className:"px-6 py-4",children:ye.length===0?n.jsx("p",{className:"text-sm text-muted-foreground",children:"No item details available"}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase mb-2",children:"Order Items"}),ye.map((Ne,Ke)=>{var ge;const $e=Ne.product||Ne.productId||{},W=$e.title||Ne.title||Ne.name||`Item ${Ke+1}`,ae=((ge=$e.photos)==null?void 0:ge[0])||Ne.photo||Ne.image||$e.photo;return n.jsxs("div",{className:"flex items-center gap-3",children:[ae?n.jsx("img",{src:ae,alt:W,className:"h-10 w-10 object-cover rounded border flex-shrink-0"}):n.jsx("div",{className:"h-10 w-10 rounded border bg-muted flex items-center justify-center flex-shrink-0",children:n.jsx(Ip,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:W}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Qty: ",Ne.quantity||1,"  $",(Ne.price||0).toFixed(2)," each",Ne.weight?`  ${Ne.weight}${Ne.scale||"oz"}`:""]})]}),n.jsx(Ye,{className:`${FE[Ne.status]||"bg-gray-100 text-gray-800"} text-xs border-0 flex-shrink-0`,children:Ne.status?$E(Ne.status):""})]},Ke)}),K.address&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[n.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase mb-1",children:"Ship to"}),n.jsx("p",{className:"text-sm text-foreground",children:[K.address.line1||K.address.street,K.address.city,K.address.state,K.address.zip||K.address.postalCode,K.address.country].filter(Boolean).join(", ")})]})]})})},`${Q}-expanded`)]})})})]})}),L>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",b," of ",L," (",$," total)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>v(K=>Math.max(1,K-1)),disabled:b<=1,"data-testid":"button-prev-page",children:"Previous"}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>v(K=>Math.min(L,K+1)),disabled:b>=L,"data-testid":"button-next-page",children:"Next"})]})]})]})})})}var n0="Checkbox",[_ne]=Cn(n0),[Sne,aS]=_ne(n0);function Cne(t){const{__scopeCheckbox:e,checked:s,children:r,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:f}=t,[h,x]=si({prop:s,defaultProp:i??!1,onChange:c,caller:n0}),[g,y]=p.useState(null),[w,b]=p.useState(null),v=p.useRef(!1),N=g?!!o||!!g.closest("form"):!0,C={checked:h,disabled:a,setChecked:x,control:g,setControl:y,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:v,required:d,defaultChecked:Cc(i)?!1:i,isFormControl:N,bubbleInput:w,setBubbleInput:b};return n.jsx(Sne,{scope:e,...C,children:kne(f)?f(C):r})}var AM="CheckboxTrigger",PM=p.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:s,...r},i)=>{const{control:a,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:g}=aS(AM,t),y=ft(i,u),w=p.useRef(c);return p.useEffect(()=>{const b=a==null?void 0:a.form;if(b){const v=()=>f(w.current);return b.addEventListener("reset",v),()=>b.removeEventListener("reset",v)}},[a,f]),n.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":Cc(c)?"mixed":c,"aria-required":d,"data-state":MM(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:y,onKeyDown:Ie(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Ie(s,b=>{f(v=>Cc(v)?!0:!v),g&&x&&(h.current=b.isPropagationStopped(),h.current||b.stopPropagation())})})});PM.displayName=AM;var oS=p.forwardRef((t,e)=>{const{__scopeCheckbox:s,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...f}=t;return n.jsx(Cne,{__scopeCheckbox:s,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>n.jsxs(n.Fragment,{children:[n.jsx(PM,{...f,ref:e,__scopeCheckbox:s}),h&&n.jsx(DM,{__scopeCheckbox:s})]})})});oS.displayName=n0;var IM="CheckboxIndicator",RM=p.forwardRef((t,e)=>{const{__scopeCheckbox:s,forceMount:r,...i}=t,a=aS(IM,s);return n.jsx(hn,{present:r||Cc(a.checked)||a.checked===!0,children:n.jsx(Je.span,{"data-state":MM(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});RM.displayName=IM;var OM="CheckboxBubbleInput",DM=p.forwardRef(({__scopeCheckbox:t,...e},s)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:f,bubbleInput:h,setBubbleInput:x}=aS(OM,t),g=ft(s,x),y=zv(a),w=Cv(r);p.useEffect(()=>{const v=h;if(!v)return;const N=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(N,"checked").set,T=!i.current;if(y!==a&&_){const j=new Event("click",{bubbles:T});v.indeterminate=Cc(a),_.call(v,Cc(a)?!1:a),v.dispatchEvent(j)}},[h,y,a,i]);const b=p.useRef(Cc(a)?!1:a);return n.jsx(Je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:d,value:u,form:f,...e,tabIndex:-1,ref:g,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});DM.displayName=OM;function kne(t){return typeof t=="function"}function Cc(t){return t==="indeterminate"}function MM(t){return Cc(t)?"indeterminate":t?"checked":"unchecked"}const tu=p.forwardRef(({className:t,...e},s)=>n.jsx(oS,{ref:s,className:Re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:n.jsx(RM,{className:Re("flex items-center justify-center text-current"),children:n.jsx(IN,{className:"h-4 w-4"})})}));tu.displayName=oS.displayName;var Ene=Symbol("radix.slottable");function Tne(t){const e=({children:s})=>n.jsx(n.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=Ene,e}var LM="AlertDialog",[Ane]=Cn(LM,[CD]),jl=CD(),FM=t=>{const{__scopeAlertDialog:e,...s}=t,r=jl(e);return n.jsx(Y_,{...r,...s,modal:!0})};FM.displayName=LM;var Pne="AlertDialogTrigger",$M=p.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=jl(s);return n.jsx(BD,{...i,...r,ref:e})});$M.displayName=Pne;var Ine="AlertDialogPortal",UM=t=>{const{__scopeAlertDialog:e,...s}=t,r=jl(e);return n.jsx(Q_,{...r,...s})};UM.displayName=Ine;var Rne="AlertDialogOverlay",zM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=jl(s);return n.jsx(og,{...i,...r,ref:e})});zM.displayName=Rne;var Eh="AlertDialogContent",[One,Dne]=Ane(Eh),Mne=Tne("AlertDialogContent"),BM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:s,children:r,...i}=t,a=jl(s),o=p.useRef(null),l=ft(e,o),c=p.useRef(null);return n.jsx(cte,{contentName:Eh,titleName:qM,docsSlug:"alert-dialog",children:n.jsx(One,{scope:s,cancelRef:c,children:n.jsxs(lg,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:Ie(i.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[n.jsx(Mne,{children:r}),n.jsx(Fne,{contentRef:o})]})})})});BM.displayName=Eh;var qM="AlertDialogTitle",VM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=jl(s);return n.jsx(cg,{...i,...r,ref:e})});VM.displayName=qM;var HM="AlertDialogDescription",WM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=jl(s);return n.jsx(dg,{...i,...r,ref:e})});WM.displayName=HM;var Lne="AlertDialogAction",KM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=jl(s);return n.jsx(Xv,{...i,...r,ref:e})});KM.displayName=Lne;var GM="AlertDialogCancel",YM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,{cancelRef:i}=Dne(GM,s),a=jl(s),o=ft(e,i);return n.jsx(Xv,{...a,...r,ref:o})});YM.displayName=GM;var Fne=({contentRef:t})=>{const e=`\`${Eh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Eh}\` by passing a \`${HM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Eh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},$ne=FM,Une=$M,zne=UM,QM=zM,ZM=BM,XM=KM,JM=YM,e6=VM,t6=WM;const Ca=$ne,s6=Une,Bne=zne,n6=p.forwardRef(({className:t,...e},s)=>n.jsx(QM,{className:Re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));n6.displayName=QM.displayName;const Oi=p.forwardRef(({className:t,...e},s)=>n.jsxs(Bne,{children:[n.jsx(n6,{}),n.jsx(ZM,{ref:s,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Oi.displayName=ZM.displayName;const Di=({className:t,...e})=>n.jsx("div",{className:Re("flex flex-col space-y-2 text-center sm:text-left",t),...e});Di.displayName="AlertDialogHeader";const Mi=({className:t,...e})=>n.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Mi.displayName="AlertDialogFooter";const Li=p.forwardRef(({className:t,...e},s)=>n.jsx(e6,{ref:s,className:Re("text-lg font-semibold",t),...e}));Li.displayName=e6.displayName;const Fi=p.forwardRef(({className:t,...e},s)=>n.jsx(t6,{ref:s,className:Re("text-sm text-muted-foreground",t),...e}));Fi.displayName=t6.displayName;const $i=p.forwardRef(({className:t,...e},s)=>n.jsx(XM,{ref:s,className:Re(ym(),t),...e}));$i.displayName=XM.displayName;const Ui=p.forwardRef(({className:t,...e},s)=>n.jsx(JM,{ref:s,className:Re(ym({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Ui.displayName=JM.displayName;function qne(){var X;const[,t]=Ds(),[e,s]=p.useState(""),[r,i]=p.useState("all"),[a,o]=p.useState("all"),[l,c]=p.useState("all"),[d,u]=p.useState(!1),[f,h]=p.useState(1),[x]=p.useState(10),[g,y]=p.useState([]),{toast:w}=Et();let b=`/api/admin/products?page=${f}&limit=${x}`;e&&(b+=`&title=${encodeURIComponent(e)}`),r&&r!=="all"&&(b+=`&category=${encodeURIComponent(r)}`),l&&l!=="all"&&(b+=`&price=${encodeURIComponent(l)}`);const{data:v,isLoading:N,isError:C,error:_,refetch:T}=Ve({queryKey:[b],retry:!1,staleTime:0,refetchOnMount:"always"}),j=((X=v==null?void 0:v.data)==null?void 0:X.products)||[],S=new Map;j.forEach(U=>{if(U.category){const $=typeof U.category=="object"?U.category._id:U.category,L=typeof U.category=="object"?U.category.name:U.category;$&&!S.has($)&&S.set($,L)}});const A=Array.from(S.entries()).map(([U,$])=>({id:U,name:$})),I=a&&a!=="all"?j.filter(U=>(U.status||"active")===a):j,P=v!=null&&v.data?{currentPage:f,totalPages:v.data.pages,totalItems:v.data.totalDoc,hasNextPage:f<v.data.pages,hasPrevPage:f>1}:void 0;p.useEffect(()=>{h(1)},[e,r,a,l]);const O=()=>{s(""),i("all"),o("all"),c("all")},D=e||r&&r!=="all"||a&&a!=="all"||l&&l!=="all",M=st({mutationFn:async U=>ut("DELETE","/api/products/deletemany",{ids:U}),onSuccess:()=>{w({title:"Products deleted",description:`${g.length} product(s) have been deleted.`}),y([]),We.invalidateQueries({queryKey:[b]})},onError:U=>{w({title:"Error",description:U.message||"Failed to delete products",variant:"destructive"})}}),J=()=>{g.length===I.length?y([]):y(I.map(U=>U._id||U.id))};return n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Total Products"}),n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-products",children:(P==null?void 0:P.totalItems)||j.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All products in inventory"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Active Products"}),n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-products",children:j.filter(U=>U.status==="active"||!U.status).length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"On current page"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Categories"}),n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-categories-count",children:new Set(j.map(U=>{var $;return(($=U.category)==null?void 0:$._id)||U.category}).filter(Boolean)).size}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique categories"})]})]})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(we,{children:"All Products"}),n.jsx(Fe,{children:"View and manage all product inventory"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>u(!d),"data-testid":"button-toggle-filters",className:"whitespace-nowrap",children:[n.jsx(kf,{className:"h-4 w-4 mr-2"}),"Filters",D&&n.jsx(Ye,{variant:"secondary",className:"ml-2",children:[e,r!=="all"&&r,a!=="all"&&a,l!=="all"&&l].filter(Boolean).length})]}),D&&n.jsx(G,{variant:"ghost",size:"sm",onClick:O,"data-testid":"button-clear-filters",children:n.jsx(un,{className:"h-4 w-4"})})]})]}),d&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pt-4 border-t",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search products...",value:e,onChange:U=>s(U.target.value),className:"pl-10","data-testid":"input-search-products"})]}),n.jsxs(Gt,{value:r,onValueChange:i,children:[n.jsx(Bt,{"data-testid":"select-category-filter",children:n.jsx(Yt,{placeholder:"All Categories"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Categories"}),A.map(U=>n.jsx(fe,{value:U.id,children:U.name},U.id))]})]}),n.jsxs(Gt,{value:a,onValueChange:o,children:[n.jsx(Bt,{"data-testid":"select-status-filter",children:n.jsx(Yt,{placeholder:"All Status"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Status"}),n.jsx(fe,{value:"active",children:"Active"}),n.jsx(fe,{value:"inactive",children:"Inactive"}),n.jsx(fe,{value:"draft",children:"Draft"})]})]}),n.jsxs(Gt,{value:l,onValueChange:c,children:[n.jsx(Bt,{"data-testid":"select-price-filter",children:n.jsx(Yt,{placeholder:"All Prices"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Prices"}),n.jsx(fe,{value:"0-25",children:"$0 - $25"}),n.jsx(fe,{value:"25-50",children:"$25 - $50"}),n.jsx(fe,{value:"50-100",children:"$50 - $100"}),n.jsx(fe,{value:"100-",children:"$100+"})]})]})]})]})}),n.jsx(ue,{children:N?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]}):C?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(hs,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),n.jsx("p",{className:"text-destructive font-medium",children:"Failed to load products"}),n.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"The server is temporarily unavailable"}),n.jsx(G,{variant:"outline",className:"mt-4",onClick:()=>T(),children:"Try Again"})]}):I.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(hs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No products found"})]}):n.jsxs(n.Fragment,{children:[g.length>0&&n.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-muted rounded-lg",children:[n.jsxs("span",{className:"text-sm font-medium",children:[g.length," selected"]}),n.jsxs(Ca,{children:[n.jsx(s6,{asChild:!0,children:n.jsxs(G,{variant:"destructive",size:"sm",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Delete Selected"]})}),n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Products"}),n.jsxs(Fi,{children:["Are you sure you want to delete ",g.length," product(s)? This action cannot be undone."]})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{children:"Cancel"}),n.jsx($i,{onClick:()=>M.mutate(g),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:M.isPending?"Deleting...":"Delete"})]})]})]}),n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>y([]),children:"Clear selection"})]}),n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{className:"w-[50px]",children:n.jsx(tu,{checked:g.length===I.length&&I.length>0,onCheckedChange:J})}),n.jsx(Ce,{className:"min-w-[250px]",children:"Product"}),n.jsx(Ce,{className:"hidden sm:table-cell",children:"Owner"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Category"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Type"}),n.jsx(Ce,{className:"hidden xl:table-cell",children:"Price"}),n.jsx(Ce,{className:"hidden 2xl:table-cell",children:"Stock"}),n.jsx(Ce,{className:"hidden 2xl:table-cell",children:"Featured"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{className:"text-right",children:"Actions"})]})}),n.jsx(Us,{children:I.map(U=>{var $,L,te;return n.jsxs(yt,{"data-testid":`row-product-${U._id||U.id}`,onClick:()=>t(`/admin/products/${U._id||U.id}`),className:"cursor-pointer hover-elevate",children:[n.jsx(ke,{onClick:F=>F.stopPropagation(),children:n.jsx(tu,{checked:g.includes(U._id||U.id),onCheckedChange:()=>{const F=U._id||U.id;y(z=>z.includes(F)?z.filter(pe=>pe!==F):[...z,F])}})}),n.jsx(ke,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[($=U.images)!=null&&$[0]?n.jsx("img",{src:U.images[0],alt:U.name,className:"h-10 w-10 rounded object-cover flex-shrink-0"}):n.jsx("div",{className:"h-10 w-10 rounded bg-muted flex items-center justify-center flex-shrink-0",children:n.jsx(hs,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-medium truncate",children:U.name}),n.jsxs("div",{className:"text-sm text-muted-foreground sm:hidden truncate",children:["Owner: ",typeof U.ownerId=="object"?U.ownerId.userName||U.ownerId.email||"Unknown":"N/A"]})]})]})}),n.jsx(ke,{className:"hidden sm:table-cell","data-testid":`text-owner-${U._id||U.id}`,children:n.jsx("div",{className:"max-w-[150px]",children:typeof U.ownerId=="object"?n.jsxs("div",{children:[n.jsx("div",{className:"font-medium truncate",children:U.ownerId.firstName&&U.ownerId.lastName?`${U.ownerId.firstName} ${U.ownerId.lastName}`:U.ownerId.userName||"Unknown"}),n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:U.ownerId.email||""})]}):n.jsx("span",{className:"text-muted-foreground",children:"N/A"})})}),n.jsx(ke,{className:"hidden md:table-cell","data-testid":`text-category-${U._id||U.id}`,children:((L=U.category)==null?void 0:L.name)||U.category||"Uncategorized"}),n.jsx(ke,{className:"hidden md:table-cell","data-testid":`text-type-${U._id||U.id}`,children:n.jsx(Ye,{variant:U.listing_type==="auction"?"default":U.listing_type==="giveaway"?"secondary":"outline",children:U.listing_type==="auction"?"Auction":U.listing_type==="giveaway"?"Giveaway":U.listing_type==="buy_now"?"Buy Now":U.listing_type||"Unknown"})}),n.jsxs(ke,{className:"hidden xl:table-cell","data-testid":`text-price-${U._id||U.id}`,children:["$",((te=U.price)==null?void 0:te.toFixed(2))||"0.00"]}),n.jsx(ke,{className:"hidden 2xl:table-cell",children:U.quantity||0}),n.jsx(ke,{className:"hidden 2xl:table-cell",children:n.jsx(Ye,{variant:U.featured?"default":"outline","data-testid":`badge-featured-${U._id||U.id}`,children:U.featured?"Yes":"No"})}),n.jsx(ke,{children:n.jsx(Ye,{variant:U.status==="active"||!U.status?"default":"secondary",children:U.status||"active"})}),n.jsx(ke,{className:"text-right",children:n.jsxs(G,{variant:"ghost",size:"sm",onClick:F=>{F.stopPropagation(),t(`/admin/products/${U._id||U.id}`)},"data-testid":`button-view-product-${U._id||U.id}`,className:"whitespace-nowrap",children:[n.jsx(cn,{className:"h-4 w-4 sm:mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:"View Details"})]})})]},U._id||U.id)})})]})}),P&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:[n.jsxs("span",{className:"hidden sm:inline",children:["Page ",P.currentPage," of ",P.totalPages," (",P.totalItems," total products)"]}),n.jsxs("span",{className:"sm:hidden",children:[P.currentPage," / ",P.totalPages]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>h(f-1),disabled:!P.hasPrevPage,"data-testid":"button-prev-page",children:[n.jsx(oi,{className:"h-4 w-4 sm:mr-1"}),n.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>h(f+1),disabled:!P.hasNextPage,"data-testid":"button-next-page",children:[n.jsx("span",{className:"hidden sm:inline",children:"Next"}),n.jsx(Vn,{className:"h-4 w-4 sm:ml-1"})]})]})]})]})})]})]})})}function Vne(){var c,d;const[,t]=Ds(),[,e]=Uc("/admin/products/:productId"),{user:s}=qi(),{toast:r}=Et(),i=e==null?void 0:e.productId;p.useEffect(()=>{s!=null&&s.admin||t("/")},[s==null?void 0:s.admin,t]);const{data:a,isLoading:o}=Ve({queryKey:[`/api/products/${i}`],enabled:!!i}),l=st({mutationFn:async()=>ut("DELETE",`/api/products/products/${i}`),onSuccess:()=>{r({title:"Product deleted",description:"The product has been successfully deleted."}),We.invalidateQueries({queryKey:["/api/products"]}),t("/admin/inventory")},onError:u=>{r({title:"Error",description:u.message||"Failed to delete product",variant:"destructive"})}});return o?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading product details..."})]})})}):a?n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs(G,{variant:"ghost",onClick:()=>t("/admin/inventory"),"data-testid":"button-back-to-inventory",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Inventory"]}),n.jsxs(Ca,{children:[n.jsx(s6,{asChild:!0,children:n.jsxs(G,{variant:"destructive",size:"sm",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Delete Product"]})}),n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Product"}),n.jsxs(Fi,{children:['Are you sure you want to delete "',a==null?void 0:a.name,'"? This action cannot be undone.']})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{children:"Cancel"}),n.jsx($i,{onClick:()=>l.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:l.isPending?"Deleting...":"Delete"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(we,{className:"text-2xl",children:a.name}),n.jsx(Ye,{variant:a.status==="active"||!a.status?"default":"secondary",children:a.status||"active"})]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Description"}),n.jsx("p",{className:"text-sm",children:a.description||"No description provided"})]}),a.images&&a.images.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center",children:[n.jsx(cy,{className:"h-4 w-4 mr-2"}),"Product Images"]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:a.images.map((u,f)=>n.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border",children:n.jsx("img",{src:u,alt:`${a.name} - ${f+1}`,className:"w-full h-full object-cover"})},f))})]})]})]}),a.ownerId&&n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"text-lg flex items-center",children:[n.jsx(fo,{className:"h-5 w-5 mr-2"}),"Product Owner"]})}),n.jsxs(ue,{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:typeof a.ownerId=="object"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),n.jsx("p",{className:"font-medium","data-testid":"text-owner-name",children:a.ownerId.firstName&&a.ownerId.lastName?`${a.ownerId.firstName} ${a.ownerId.lastName}`:a.ownerId.userName||"Unknown"})]}),a.ownerId.email&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium text-sm break-all","data-testid":"text-owner-email",children:a.ownerId.email})]}),a.ownerId.country&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Country"}),n.jsx("p",{className:"font-medium","data-testid":"text-owner-country",children:a.ownerId.country})]}),a.ownerId.seller!==void 0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Account Type"}),n.jsx(Ye,{variant:a.ownerId.seller?"default":"secondary",children:a.ownerId.seller?"Seller":"Customer"})]})]}):n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Owner ID"}),n.jsx("p",{className:"font-mono text-xs break-all","data-testid":"text-owner-id",children:String(a.ownerId)})]})}),n.jsx(G,{variant:"outline",className:"w-full mt-4",onClick:()=>t(`/admin/users/${a.ownerId._id||a.ownerId}`),"data-testid":"button-view-seller",children:"View Full Profile"})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"text-lg flex items-center",children:[n.jsx(zn,{className:"h-5 w-5 mr-2"}),"Pricing"]})}),n.jsx(ue,{children:n.jsxs("div",{className:"text-3xl font-bold","data-testid":"text-product-price",children:["$",((c=a.price)==null?void 0:c.toFixed(2))||"0.00"]})})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"text-lg flex items-center",children:[n.jsx(sU,{className:"h-5 w-5 mr-2"}),"Stock"]})}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-3xl font-bold","data-testid":"text-product-stock",children:a.quantity||0}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"units available"})]})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"text-lg flex items-center",children:[n.jsx(TU,{className:"h-5 w-5 mr-2"}),"Category"]})}),n.jsx(ue,{children:n.jsx("p",{className:"text-sm","data-testid":"text-product-category",children:((d=a.category)==null?void 0:d.name)||a.category||"Uncategorized"})})]}),a.shipping_profile&&n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"text-lg flex items-center",children:[n.jsx(Ri,{className:"h-5 w-5 mr-2"}),"Shipping Profile"]})}),n.jsx(ue,{children:n.jsx("div",{className:"space-y-3 text-sm",children:typeof a.shipping_profile=="object"&&a.shipping_profile?n.jsxs(n.Fragment,{children:[a.shipping_profile.name&&n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Name"}),n.jsx("p",{className:"font-medium","data-testid":"text-shipping-name",children:a.shipping_profile.name})]}),a.shipping_profile.weight!==void 0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Weight"}),n.jsxs("p",{className:"font-medium","data-testid":"text-shipping-weight",children:[a.shipping_profile.weight," ",a.shipping_profile.scale||"oz"]})]}),(a.shipping_profile.length||a.shipping_profile.width||a.shipping_profile.height)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Dimensions (L  W  H)"}),n.jsxs("p",{className:"font-medium","data-testid":"text-shipping-dimensions",children:[a.shipping_profile.length||0,"  ",a.shipping_profile.width||0,"  ",a.shipping_profile.height||0," in"]})]}),a.shipping_profile.description&&n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Description"}),n.jsx("p",{className:"font-medium","data-testid":"text-shipping-description",children:a.shipping_profile.description})]})]}):n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Profile ID"}),n.jsx("p",{className:"font-mono text-xs break-all","data-testid":"text-shipping-id",children:String(a.shipping_profile)})]})})})]})]})]})]})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-8",children:[n.jsxs(G,{variant:"ghost",onClick:()=>t("/admin/inventory"),className:"mb-6","data-testid":"button-back-to-inventory",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Inventory"]}),n.jsxs("div",{className:"text-center py-12",children:[n.jsx(hs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Product not found"})]})]})})}const r6=Y_,Hne=Q_,i6=p.forwardRef(({className:t,...e},s)=>n.jsx(og,{className:Re("fixed inset-0 z-[9998] bg-black/40  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));i6.displayName=og.displayName;const Wne=_f("fixed z-[9999] gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),lS=p.forwardRef(({side:t="right",className:e,children:s,...r},i)=>n.jsxs(Hne,{children:[n.jsx(i6,{}),n.jsxs(lg,{ref:i,className:Re(Wne({side:t}),e),...r,children:[s,n.jsxs(Xv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(un,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lS.displayName=lg.displayName;const cS=({className:t,...e})=>n.jsx("div",{className:Re("flex flex-col space-y-2 text-center sm:text-left",t),...e});cS.displayName="SheetHeader";const dS=p.forwardRef(({className:t,...e},s)=>n.jsx(cg,{ref:s,className:Re("text-lg font-semibold text-foreground",t),...e}));dS.displayName=cg.displayName;const a6=p.forwardRef(({className:t,...e},s)=>n.jsx(dg,{ref:s,className:Re("text-sm text-muted-foreground",t),...e}));a6.displayName=dg.displayName;var uS="Radio",[Kne,o6]=Cn(uS),[Gne,Yne]=Kne(uS),l6=p.forwardRef((t,e)=>{const{__scopeRadio:s,name:r,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:d,...u}=t,[f,h]=p.useState(null),x=ft(e,w=>h(w)),g=p.useRef(!1),y=f?d||!!f.closest("form"):!0;return n.jsxs(Gne,{scope:s,checked:i,disabled:o,children:[n.jsx(Je.button,{type:"button",role:"radio","aria-checked":i,"data-state":h6(i),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:x,onClick:Ie(t.onClick,w=>{i||c==null||c(),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&n.jsx(u6,{control:f,bubbles:!g.current,name:r,value:l,checked:i,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});l6.displayName=uS;var c6="RadioIndicator",d6=p.forwardRef((t,e)=>{const{__scopeRadio:s,forceMount:r,...i}=t,a=Yne(c6,s);return n.jsx(hn,{present:r||a.checked,children:n.jsx(Je.span,{"data-state":h6(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e})})});d6.displayName=c6;var Qne="RadioBubbleInput",u6=p.forwardRef(({__scopeRadio:t,control:e,checked:s,bubbles:r=!0,...i},a)=>{const o=p.useRef(null),l=ft(o,a),c=zv(s),d=Cv(e);return p.useEffect(()=>{const u=o.current;if(!u)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==s&&x){const g=new Event("click",{bubbles:r});x.call(u,s),u.dispatchEvent(g)}},[c,s,r]),n.jsx(Je.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});u6.displayName=Qne;function h6(t){return t?"checked":"unchecked"}var Zne=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],r0="RadioGroup",[Xne]=Cn(r0,[Lf,o6]),f6=Lf(),p6=o6(),[Jne,ere]=Xne(r0),m6=p.forwardRef((t,e)=>{const{__scopeRadioGroup:s,name:r,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:f,...h}=t,x=f6(s),g=Df(d),[y,w]=si({prop:a,defaultProp:i??null,onChange:f,caller:r0});return n.jsx(Jne,{scope:s,name:r,required:o,disabled:l,value:y,onValueChange:w,children:n.jsx(I_,{asChild:!0,...x,orientation:c,dir:g,loop:u,children:n.jsx(Je.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:e})})})});m6.displayName=r0;var g6="RadioGroupItem",x6=p.forwardRef((t,e)=>{const{__scopeRadioGroup:s,disabled:r,...i}=t,a=ere(g6,s),o=a.disabled||r,l=f6(s),c=p6(s),d=p.useRef(null),u=ft(e,d),f=a.value===i.value,h=p.useRef(!1);return p.useEffect(()=>{const x=y=>{Zne.includes(y.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",g)}},[]),n.jsx(R_,{asChild:!0,...l,focusable:!o,active:f,children:n.jsx(l6,{disabled:o,required:a.required,checked:f,...c,...i,name:a.name,ref:u,onCheck:()=>a.onValueChange(i.value),onKeyDown:Ie(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Ie(i.onFocus,()=>{var x;h.current&&((x=d.current)==null||x.click())})})})});x6.displayName=g6;var tre="RadioGroupIndicator",y6=p.forwardRef((t,e)=>{const{__scopeRadioGroup:s,...r}=t,i=p6(s);return n.jsx(d6,{...i,...r,ref:e})});y6.displayName=tre;var v6=m6,b6=x6,sre=y6;const w6=p.forwardRef(({className:t,...e},s)=>n.jsx(v6,{className:Re("grid gap-2",t),...e,ref:s}));w6.displayName=v6.displayName;const Ax=p.forwardRef(({className:t,...e},s)=>n.jsx(b6,{ref:s,className:Re("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:n.jsx(sre,{className:"flex items-center justify-center",children:n.jsx(jI,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ax.displayName=b6.displayName;function j6({order:t,open:e,onOpenChange:s}){var P,O,D;const[r,i]=p.useState({length:"10",width:"8",height:"3"}),[a,o]=p.useState("16"),[l,c]=p.useState(!1),[d,u]=p.useState(null),[f,h]=p.useState("PDF"),{toast:x}=Et(),g=cu(),{data:y,isLoading:w}=Ve({queryKey:["/api/orders",t==null?void 0:t._id],queryFn:async()=>{if(!(t!=null&&t._id))return null;const M=await fetch(`/api/orders/${t._id}`,{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch order details");const J=await M.json();return J.data||J},enabled:e&&!!(t!=null&&t._id),staleTime:3e4}),b=y||t;p.useEffect(()=>{var M,J,X,U;b&&e&&(i({length:((M=b.length)==null?void 0:M.toString())||"10",width:((J=b.width)==null?void 0:J.toString())||"8",height:((X=b.height)==null?void 0:X.toString())||"3"}),o(((U=b.weight)==null?void 0:U.toString())||"16"))},[b,e]);const v=!!(r.length&&r.width&&r.height&&a),N=()=>{var M,J,X,U;return(J=(M=b==null?void 0:b.giveaway)==null?void 0:M.user)!=null&&J._id?b.giveaway.user._id:(X=b==null?void 0:b.giveaway)!=null&&X.user&&typeof b.giveaway.user=="string"?b.giveaway.user:(U=b==null?void 0:b.seller)!=null&&U._id?b.seller._id:b!=null&&b.seller&&typeof b.seller=="string"?b.seller:"admin"},C=()=>{var M;return(M=b==null?void 0:b.customer)!=null&&M._id?b.customer._id:b!=null&&b.customer&&typeof b.customer=="string"?b.customer:""},_=Ve({queryKey:["/api/shipping/profiles/estimate/rates",{weight:a,length:r.length,width:r.width,height:r.height,orderId:t==null?void 0:t._id}],queryFn:async()=>{var $,L,te,F,z,pe;const M=N(),J=C(),X={weight:a,unit:((L=($=b==null?void 0:b.giveaway)==null?void 0:$.shipping_profile)==null?void 0:L.scale)||(b==null?void 0:b.scale)||"oz",product:((te=b==null?void 0:b.giveaway)==null?void 0:te._id)||((pe=(z=(F=b==null?void 0:b.items)==null?void 0:F[0])==null?void 0:z.productId)==null?void 0:pe._id)||(b==null?void 0:b._id),update:!0,owner:M,customer:J,length:parseFloat(r.length),width:parseFloat(r.width),height:parseFloat(r.height),isGiveaway:!!(b!=null&&b.giveaway)},U=await fetch("/api/shipping/profiles/estimate/rates",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(X)});if(!U.ok)throw new Error(`Failed to fetch shipping estimates: ${U.status}`);return await U.json()},enabled:v&&e&&!!b&&!!C(),retry:1}),T=_.data||[],j=()=>{g.invalidateQueries({queryKey:["/api/shipping/profiles/estimate/rates"]}),x({title:"Refreshing shipping estimates..."})},S=st({mutationFn:async M=>{var U,$,L,te;const J={rate_id:M.objectId,order:b._id,isBundle:!1,shipping_fee:parseFloat(M.price),servicelevel:`${M.carrier} ${M.service}`,carrier:M.carrier,deliveryTime:M.deliveryTime,label_file_type:M.labelFileType,weight:parseFloat(a),weight_unit:(($=(U=b==null?void 0:b.giveaway)==null?void 0:U.shipping_profile)==null?void 0:$.scale)||(b==null?void 0:b.scale)||"oz",length:parseFloat(r.length),width:parseFloat(r.width),height:parseFloat(r.height),estimate_data:{price:M.price,carrier:M.carrier,service:M.service,deliveryTime:M.deliveryTime,estimatedDays:M.estimatedDays,weight:parseFloat(a),weight_unit:((te=(L=b==null?void 0:b.giveaway)==null?void 0:L.shipping_profile)==null?void 0:te.scale)||(b==null?void 0:b.scale)||"oz",length:parseFloat(r.length),width:parseFloat(r.width),height:parseFloat(r.height)}};return await(await ut("POST","/api/shipping/profiles/buy/label",J)).json()},onSuccess:M=>{M.success&&M.data?(M.data.label_url&&window.open(M.data.label_url,"_blank"),g.invalidateQueries({queryKey:["admin-giveaway-orders"]}),g.invalidateQueries({predicate:J=>Array.isArray(J.queryKey)&&J.queryKey[0]==="admin-shipments"}),x({title:"Shipping label purchased!",description:`${M.data.carrier} ${M.data.service} - $${M.data.cost}
Tracking: ${M.data.tracking_number}`}),s(!1)):x({title:"Label purchase failed",description:M.message||"Unable to purchase shipping label",variant:"destructive"})},onError:M=>{x({title:"Failed to purchase shipping label",description:M.message||"An unexpected error occurred",variant:"destructive"})}}),A=M=>{if(!M.objectId||M.objectId.trim()===""){x({title:"Cannot purchase label",description:"Invalid shipping rate. Please refresh estimates and try again.",variant:"destructive"});return}u(M),c(!0)},I=()=>{d&&(S.mutate({...d,labelFileType:f}),c(!1))};return t?(typeof b.customer=="object"&&b.customer&&(`${b.customer.firstName||""} ${b.customer.lastName||""}`.trim()||b.customer.userName),(P=b.giveaway)!=null&&P.title||(O=b.giveaway)!=null&&O.name,n.jsxs(n.Fragment,{children:[n.jsx(r6,{open:e,onOpenChange:s,children:n.jsxs(lS,{className:"w-[500px] sm:max-w-[500px] overflow-y-auto",children:[n.jsxs(cS,{children:[n.jsxs(dS,{className:"flex items-center gap-2",children:[n.jsx(hs,{size:20}),"Ship Order ",b.invoice||((D=b._id)==null?void 0:D.slice(-8))]}),n.jsx(a6,{children:"Purchase a shipping label for this order"})]}),w?n.jsx("div",{className:"mt-6 flex items-center justify-center py-12",children:n.jsx(dn,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"mt-6 space-y-6 pb-6",children:[n.jsxs(de,{children:[n.jsx(be,{className:"pb-3",children:n.jsx(we,{className:"text-sm",children:"Order Items"})}),n.jsx(ue,{className:"space-y-2",children:b!=null&&b.items&&b.items.length>0?b.items.map((M,J)=>{var $,L,te;const X=($=M.productId)!=null&&$.name?`${M.productId.name}${M.order_reference?` ${M.order_reference}`:""}`:M.order_reference||"Item",U=(te=(L=M.productId)==null?void 0:L.images)==null?void 0:te[0];return n.jsxs("div",{className:"flex items-center gap-2 py-2 px-2 bg-muted/50 rounded text-xs",children:[U?n.jsx("img",{src:U,alt:X,className:"w-10 h-10 object-cover rounded"}):n.jsx("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium truncate",children:X}),n.jsxs("p",{className:"text-muted-foreground",children:[M.ordertype||"Item","  Qty: ",M.quantity||1,M.weight&&`  ${M.weight}${M.scale||"oz"}`]})]}),n.jsxs("p",{className:"font-medium",children:["$",parseFloat(M.price||0).toFixed(2)]})]},M._id||J)}):n.jsx("p",{className:"text-muted-foreground text-sm text-center py-2",children:"No items found"})})]}),n.jsxs(de,{children:[n.jsx(be,{className:"pb-3",children:n.jsx(we,{className:"text-sm",children:"Package Dimensions"})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Length (in)"}),n.jsx(le,{type:"number",value:r.length,onChange:M=>i(J=>({...J,length:M.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Width (in)"}),n.jsx(le,{type:"number",value:r.width,onChange:M=>i(J=>({...J,width:M.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Height (in)"}),n.jsx(le,{type:"number",value:r.height,onChange:M=>i(J=>({...J,height:M.target.value}))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Weight (oz)"}),n.jsx(le,{type:"number",value:a,onChange:M=>o(M.target.value)})]})]})]}),n.jsxs(de,{children:[n.jsx(be,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(we,{className:"text-sm flex items-center gap-2",children:[n.jsx(Ri,{size:16}),"Shipping Options"]}),n.jsx(G,{variant:"ghost",size:"sm",onClick:j,disabled:_.isFetching,children:n.jsx(NU,{className:`h-4 w-4 ${_.isFetching?"animate-spin":""}`})})]})}),n.jsx(ue,{children:_.isLoading?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(dn,{className:"h-6 w-6 animate-spin text-muted-foreground"}),n.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading rates..."})]}):_.isError?n.jsxs("div",{className:"flex items-center gap-2 text-destructive py-4",children:[n.jsx(qr,{className:"h-5 w-5"}),n.jsx("span",{children:"Failed to load shipping rates"})]}):T.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No shipping options available"}):n.jsx("div",{className:"space-y-3",children:T.map((M,J)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"font-medium text-sm",children:[M.carrier," ",M.service]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:M.deliveryTime})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"font-semibold text-green-600",children:["$",parseFloat(M.price).toFixed(2)]}),n.jsxs(G,{size:"sm",onClick:()=>A(M),disabled:S.isPending,children:[n.jsx(uy,{className:"h-4 w-4 mr-1"}),"Buy"]})]})]},M.objectId||J))})})]})]})]})}),n.jsx(ys,{open:l,onOpenChange:c,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Select Label Format"}),n.jsx(Ls,{children:"Choose the file format for your shipping label"})]}),n.jsx("div",{className:"py-4",children:n.jsxs(w6,{value:f,onValueChange:h,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ax,{value:"PDF",id:"pdf"}),n.jsx(re,{htmlFor:"pdf",children:"PDF (Recommended)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ax,{value:"PNG",id:"png"}),n.jsx(re,{htmlFor:"png",children:"PNG Image"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ax,{value:"ZPLII",id:"zpl"}),n.jsx(re,{htmlFor:"zpl",children:"ZPL (Thermal Printer)"})]})]})}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),n.jsx(G,{onClick:I,disabled:S.isPending,children:S.isPending?n.jsxs(n.Fragment,{children:[n.jsx(dn,{className:"h-4 w-4 mr-2 animate-spin"}),"Purchasing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zn,{className:"h-4 w-4 mr-1"}),"Purchase Label"]})})]})]})})]})):null}function nre({open:t,onOpenChange:e,scanForms:s,isLoading:r=!1}){const i=o=>{window.open(o,"_blank")},a=o=>{if(!o)return"N/A";try{return new Date(o).toLocaleString()}catch{return o}};return n.jsx(ys,{open:t,onOpenChange:e,children:n.jsxs(fs,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"USPS SCAN Forms"}),n.jsx(Ls,{children:"View and download your USPS SCAN forms for batch shipments"})]}),r?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(dn,{className:"h-6 w-6 animate-spin text-muted-foreground"}),n.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading scan forms..."})]}):s.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[n.jsx(Bd,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No scan forms found"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Generate shipping labels and create a SCAN form to see them here"})]}):n.jsx("div",{className:"space-y-4 py-4",children:s.map((o,l)=>n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(we,{className:"text-base",children:["USPS SCAN Form ",s.length>1?`${l+1}`:""]}),o.created_at&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created: ",a(o.created_at)]})]}),o.status&&n.jsx(Ye,{variant:o.status==="success"?"default":"secondary",children:o.status})]})}),n.jsx(ue,{children:n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.carrier&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Carrier:"}),n.jsx("span",{className:"ml-2 font-medium",children:o.carrier})]}),o.shipment_count!==void 0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Shipments:"}),n.jsx("span",{className:"ml-2 font-medium",children:o.shipment_count})]})]})}),n.jsx(__,{className:"gap-2 flex-wrap",children:o.scan_form_url?n.jsxs(n.Fragment,{children:[n.jsxs(G,{size:"sm",onClick:()=>i(o.scan_form_url),children:[n.jsx(NI,{className:"h-4 w-4 mr-2"}),"View Form"]}),n.jsxs(G,{size:"sm",variant:"outline",onClick:()=>{const c=document.createElement("a");c.href=o.scan_form_url,c.download=`scan-form-${o.manifest_id}.pdf`,c.click()},children:[n.jsx(RN,{className:"h-4 w-4 mr-2"}),"Download"]})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"Scan form URL not available"})})]},o.manifest_id||l))})]})})}function rre(){const[,t]=Ds(),{toast:e}=Et(),[s,r]=p.useState("orders"),[i,a]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState("customer"),[u,f]=p.useState("customer"),[h,x]=p.useState("all"),[g,y]=p.useState(!1),[w,b]=p.useState(null),[v,N]=p.useState(!1),[C,_]=p.useState(!1),[T,j]=p.useState([]),[S,A]=p.useState(!1),{data:I,isLoading:P}=Ve({queryKey:["admin-orders",s==="orders"?h:null,s==="orders"?o:null,s==="orders"?u:null],queryFn:async()=>{console.log("Fetching regular orders...");const se=new URLSearchParams;s==="orders"&&h&&h!=="all"&&se.set("status",h),s==="orders"&&o.trim()&&(se.set("search",o.trim()),se.set("searchBy",u));const ye=se.toString(),B=ye?`/api/orders?${ye}`:"/api/orders",ie=await fetch(B,{credentials:"include",cache:"no-store"});if(!ie.ok)throw new Error("Failed to fetch orders");return await ie.json()},refetchOnWindowFocus:!1,staleTime:6e4}),{data:O,isLoading:D}=Ve({queryKey:["admin-giveaway-orders",s==="giveaways"?h:null,s==="giveaways"?o:null,s==="giveaways"?u:null],queryFn:async()=>{console.log("Fetching giveaway orders with platform_order=true...");const se=new URLSearchParams;se.set("platform_order","true"),s==="giveaways"&&h&&h!=="all"&&se.set("status",h),s==="giveaways"&&o.trim()&&(se.set("search",o.trim()),se.set("searchBy",u));const ye=await fetch(`/api/orders?${se.toString()}`,{credentials:"include",cache:"no-store"});if(!ye.ok)throw new Error("Failed to fetch giveaway orders");return await ye.json()},refetchOnWindowFocus:!1,staleTime:6e4}),M=s==="orders"?P:D,J=(I==null?void 0:I.orders)||(I==null?void 0:I.data)||[],X=(O==null?void 0:O.orders)||(O==null?void 0:O.data)||[],U=st({mutationFn:async({id:se,type:ye})=>ut("PUT",`/api/admin/refund/${se}`,{type:ye,orderId:se}),onSuccess:()=>{We.invalidateQueries({queryKey:["admin-orders"]}),We.invalidateQueries({queryKey:["admin-giveaway-orders"]}),e({title:"Success",description:"Refund processed successfully"})},onError:se=>{e({title:"Error",description:se.message||"Failed to process refund",variant:"destructive"})}}),$=st({mutationFn:async()=>{const se=localStorage.getItem("admin_access_token"),ye=localStorage.getItem("tokshop_user_token"),B=localStorage.getItem("user"),ie=B?JSON.parse(B).id:void 0,ce={"Content-Type":"application/json"};se&&(ce["x-admin-token"]=se,ce.Authorization=`Bearer ${se}`),ye&&(ce["x-access-token"]=ye);const oe=await fetch("/api/shipping/generate/manifest",{method:"POST",headers:ce,credentials:"include",body:JSON.stringify({type:"giveaway",ownerId:ie,platform_order:!0})}),Z=await oe.json();if(!oe.ok)throw new Error(Z.message||Z.error||"Failed to generate scan form");return Z},onSuccess:se=>{We.invalidateQueries({queryKey:["admin-giveaway-orders"]}),e({title:"Scan form generation started",description:se.message||"SCAN Form generation has been initiated"}),N(!1)},onError:se=>{e({title:"Error",description:se.message,variant:"destructive"})}}),L=se=>{b(se),y(!0)},te=async()=>{try{A(!0),_(!0);const se=localStorage.getItem("admin_access_token"),ye=localStorage.getItem("tokshop_user_token"),B={"Content-Type":"application/json"};se&&(B["x-admin-token"]=se,B.Authorization=`Bearer ${se}`),ye&&(B["x-access-token"]=ye);const ie=await fetch("/api/shipping/generate/manifest/view",{method:"POST",headers:B,credentials:"include",body:JSON.stringify({type:"giveaway"})}),ce=await ie.json();if(!ie.ok)throw new Error(ce.message||ce.error||"Failed to fetch scan forms");j(ce.forms||[])}catch(se){e({title:"Failed to fetch scan forms",description:se.message,variant:"destructive"})}finally{A(!1)}},F=se=>{var B;const ye=(B=se.status)==null?void 0:B.toLowerCase();return!se.tracking_number&&ye!=="shipped"&&ye!=="delivered"&&ye!=="cancelled"},z=s==="giveaways"?X:J,pe=z.filter(se=>{if(i){const ye=String(se.invoice||se._id||"").toLowerCase(),B=typeof se.customer=="object"&&(`${se.customer.firstName||""} ${se.customer.lastName||""}`.trim()||se.customer.email)||"",ie=typeof se.customer=="object"&&se.customer.userName||"",ce=i.toLowerCase();if(!ye.includes(ce)&&!B.toLowerCase().includes(ce)&&!ie.toLowerCase().includes(ce))return!1}return!0}),xe=se=>se?new Date(se).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",_e=se=>{switch(se==null?void 0:se.toLowerCase()){case"completed":case"delivered":return"default";case"pending":case"processing":return"secondary";case"shipped":return"outline";case"cancelled":return"destructive";default:return"secondary"}},Me=()=>{l(i),f(c)},K=()=>{a(""),l(""),d("customer"),f("customer"),x("all")},Q=o||h!=="all";return M?n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Orders Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Track and manage all platform orders"})]}),n.jsx(de,{children:n.jsx(ue,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading orders..."})]})})})]})}):n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Orders Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Track and manage all platform orders"})]}),n.jsxs(Vi,{value:s,onValueChange:r,className:"w-full",children:[n.jsxs(li,{className:"mb-4",children:[n.jsxs(_t,{value:"orders",className:"flex items-center gap-2",children:[n.jsx(cr,{className:"h-4 w-4"}),"Orders (",J.length,")"]}),n.jsxs(_t,{value:"giveaways",className:"flex items-center gap-2",children:[n.jsx(ji,{className:"h-4 w-4"}),"Giveaways (",X.length,")"]})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[s==="giveaways"?n.jsx(ji,{className:"h-5 w-5 text-primary"}):n.jsx(cr,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:s==="giveaways"?"Giveaway Orders":"All Orders"}),n.jsxs(Fe,{children:[pe.length," of ",z.length," ",s==="giveaways"?"giveaway orders":"orders"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Gt,{value:c,onValueChange:d,children:[n.jsx(Bt,{className:"w-32",children:n.jsx(Yt,{})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"customer",children:"Customer"}),n.jsx(fe,{value:"seller",children:"Seller"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search...",value:i,onChange:se=>a(se.target.value),onKeyDown:se=>se.key==="Enter"&&Me(),className:"pl-9 w-40","data-testid":"input-search-orders"})]}),n.jsx(G,{size:"sm",onClick:Me,children:"Search"}),n.jsxs(Gt,{value:h,onValueChange:x,children:[n.jsx(Bt,{"data-testid":"select-status-filter",className:"w-40",children:n.jsx(Yt,{placeholder:"All statuses"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Statuses"}),n.jsx(fe,{value:"unfulfilled",children:"Unfulfilled"}),n.jsx(fe,{value:"pending",children:"Pending"}),n.jsx(fe,{value:"processing",children:"Processing"}),n.jsx(fe,{value:"shipped",children:"Shipped"}),n.jsx(fe,{value:"delivered",children:"Delivered"}),n.jsx(fe,{value:"completed",children:"Completed"}),n.jsx(fe,{value:"cancelled",children:"Cancelled"})]})]}),Q&&n.jsx(G,{variant:"ghost",size:"sm",onClick:K,children:"Clear"}),s==="giveaways"&&n.jsxs(n.Fragment,{children:[h==="unfulfilled"&&n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>N(!0),"data-testid":"button-generate-scan-form",children:[n.jsx(Bd,{className:"h-4 w-4 mr-2"}),"Generate Scan Form"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:te,"data-testid":"button-view-scan-forms",children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"View Scan Forms"]})]})]})]})}),n.jsx(ue,{children:pe.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(cr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:Q?"No orders match your filters":"No orders found"}),Q&&n.jsx(G,{variant:"outline",onClick:K,className:"mt-4",children:"Clear Filters"})]}):n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Order ID"}),n.jsx(Ce,{children:"Customer"}),n.jsx(Ce,{children:"Date"}),n.jsx(Ce,{children:"Items"}),n.jsx(Ce,{children:"Total"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{className:"text-right",children:"Actions"})]})}),n.jsx(Us,{children:pe.map(se=>{var Ne,Ke;const ye=se._id||se.id,B=se.invoice||ye,ie=typeof se.customer=="object"&&se.customer!==null?`${se.customer.firstName||""} ${se.customer.lastName||""}`.trim()||se.customer.email:"Unknown",ce=typeof se.customer=="object"&&se.customer!==null&&se.customer.userName||"",oe=((Ne=se.items)==null?void 0:Ne.length)||0,he=(()=>{if(!se.items||se.items.length===0)return 0;const $e=se.items.reduce((Ae,Y)=>{const je=Y.price||0,ze=Y.quantity||1;return Ae+je*ze},0),W=se.shipping_fee||se.shippingFee||se.shipping||0,ae=se.tax||0,ge=se.discount||0;return $e+W+ae-ge})();return n.jsxs(yt,{children:[n.jsx(ke,{className:"font-mono text-xs","data-testid":`text-order-id-${ye}`,children:B}),n.jsx(ke,{"data-testid":`text-customer-${ye}`,children:n.jsxs("div",{children:[ie,ce&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["@",ce]})]})}),n.jsx(ke,{"data-testid":`text-date-${ye}`,children:xe(se.createdAt||se.orderDate)}),n.jsxs(ke,{"data-testid":`text-items-${ye}`,children:[oe," ",oe===1?"item":"items"]}),n.jsxs(ke,{"data-testid":`text-total-${ye}`,children:["$",he.toFixed(2)]}),n.jsx(ke,{children:n.jsx(Ye,{variant:_e(se.status),"data-testid":`badge-status-${ye}`,children:se.status||"pending"})}),n.jsx(ke,{className:"text-right",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm","data-testid":`button-actions-${ye}`,children:n.jsx(Cf,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:()=>t(`/admin/orders/${ye}`),"data-testid":`menu-view-order-${ye}`,children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"View Details"]}),s==="giveaways"&&F(se)&&n.jsxs(n.Fragment,{children:[n.jsx(Na,{}),n.jsxs(Zt,{onClick:()=>L(se),"data-testid":`menu-ship-order-${ye}`,children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Ship Order"]})]}),s!=="giveaways"&&((Ke=se.status)==null?void 0:Ke.toLowerCase())!=="refunded"&&n.jsxs(n.Fragment,{children:[n.jsx(Na,{}),n.jsxs(Zt,{onClick:()=>{U.mutate({id:ye,type:"order"})},disabled:U.isPending,"data-testid":`menu-refund-order-${ye}`,className:"text-orange-600 focus:text-orange-600",children:[n.jsx(zn,{className:"h-4 w-4 mr-2"}),"Refund Order"]})]})]})]})})]},ye)})})]})})})]})]})]}),n.jsx(j6,{order:w,open:g,onOpenChange:y}),n.jsx(nre,{open:C,onOpenChange:_,scanForms:T,isLoading:S}),n.jsx(ys,{open:v,onOpenChange:N,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Generate SCAN Form"}),n.jsx(Ls,{children:"This will create a USPS SCAN form for all shipped giveaway orders that don't already have one. The carrier will scan this single barcode to accept all packages at once."})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),n.jsx(G,{onClick:()=>$.mutate(),disabled:$.isPending,children:$.isPending?n.jsxs(n.Fragment,{children:[n.jsx(dn,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Bd,{className:"h-4 w-4 mr-2"}),"Generate"]})})]})]})})]})}function ire(){var I;const[,t]=Ds(),[,e]=Uc("/admin/orders/:orderId"),s=e==null?void 0:e.orderId,{toast:r}=Et(),[i,a]=p.useState(!1),[o,l]=p.useState(null),[c,d]=p.useState(""),{data:u,isLoading:f}=Ve({queryKey:[`admin-order-${s}`],queryFn:async()=>{const P=await fetch(`/api/orders/${s}`,{credentials:"include"});if(!P.ok)throw new Error("Failed to fetch order");const O=await P.json();return O.success?O.data:O},enabled:!!s}),h=(u==null?void 0:u.order)||(u==null?void 0:u.data)||u,x=st({mutationFn:async({itemId:P,amount:O})=>ut("PUT",`/api/admin/refund/${P}`,{type:"order",orderId:s,itemId:P,amount:O}),onSuccess:()=>{We.invalidateQueries({queryKey:[`admin-order-${s}`]}),a(!1),l(null),d(""),r({title:"Success",description:"Item refund processed successfully"})},onError:P=>{r({title:"Error",description:P.message||"Failed to process refund",variant:"destructive"})}}),g=(P,O,D)=>{l({itemId:P,name:O,total:D}),d(D.toFixed(2)),a(!0)},y=()=>{if(!o)return;const P=o.total;x.mutate({itemId:o.itemId,amount:P})},w=P=>P?new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",b=P=>{switch(P==null?void 0:P.toLowerCase()){case"completed":case"delivered":return"default";case"pending":case"processing":return"secondary";case"shipped":return"outline";case"cancelled":return"destructive";default:return"secondary"}};if(f)return n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading order details..."})]})})});if(!h)return n.jsx(Ze,{children:n.jsx("div",{className:"p-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(hs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Order not found"}),n.jsx(G,{onClick:()=>t("/admin/orders"),className:"mt-4",children:"Back to Orders"})]})})});const v=h.customer&&typeof h.customer=="object"&&(`${h.customer.firstName||""} ${h.customer.lastName||""}`.trim()||h.customer.userName||h.customer.email)||"Unknown",N=h.customer&&typeof h.customer=="object"?h.customer.email:"",_=!h.items||h.items.length===0?0:h.items.reduce((P,O)=>{const D=O.price||0,M=O.quantity||1;return P+D*M},0),T=h.shipping_fee||h.shippingFee||h.shipping||0,j=h.tax||0,S=h.discount||0,A=_+T+j-S;return n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs(G,{variant:"ghost",onClick:()=>t("/admin/orders"),className:"mb-4","data-testid":"button-back-to-orders",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Orders"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Order Details"}),n.jsxs("p",{className:"text-muted-foreground",children:["Order ID: ",h.invoice||s]})]}),n.jsx(Ye,{variant:b(h.status),className:"text-lg py-2 px-4 w-fit","data-testid":"badge-order-status",children:h.status||"pending"})]})]}),n.jsx(de,{children:n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pb-6 border-b",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"ORDER INFO"}),n.jsxs("p",{className:"font-medium",children:["Invoice: ",h.invoice||s]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Date: ",w(h.createdAt||h.orderDate)]}),h.tracking_number&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Tracking: ",h.tracking_number]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"CUSTOMER"}),n.jsx("p",{className:"font-medium",children:v}),N&&n.jsx("p",{className:"text-sm text-muted-foreground",children:N}),((I=h.customer)==null?void 0:I.address)&&n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[h.customer.address.street&&n.jsx("p",{children:h.customer.address.street}),h.customer.address.city&&n.jsxs("p",{children:[h.customer.address.city,h.customer.address.state&&`, ${h.customer.address.state}`," ",h.customer.address.zipcode||h.customer.address.zipCode]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"SELLER"}),h.seller&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"font-medium",children:typeof h.seller=="object"?`${h.seller.firstName||""} ${h.seller.lastName||""}`.trim()||h.seller.userName||h.seller.email:h.seller}),typeof h.seller=="object"&&h.seller.email&&n.jsx("p",{className:"text-sm text-muted-foreground",children:h.seller.email})]}),h.shippingAddress&&n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[h.shippingAddress.street&&n.jsx("p",{children:h.shippingAddress.street}),h.shippingAddress.city&&n.jsxs("p",{children:[h.shippingAddress.city,h.shippingAddress.state&&`, ${h.shippingAddress.state}`," ",h.shippingAddress.zipCode]})]})]})]}),h.platform_order&&h.giveaway&&n.jsx("div",{className:"py-6 border-b",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg bg-muted/50",children:[n.jsx(ji,{className:"h-5 w-5 text-primary mt-1"}),h.giveaway.image&&n.jsx("img",{src:h.giveaway.image,alt:h.giveaway.title||"Giveaway",className:"w-16 h-16 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold",children:h.giveaway.title||h.giveaway.name||"Giveaway"}),h.giveaway.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:h.giveaway.description}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[h.giveaway.status&&n.jsx(Ye,{variant:"outline",children:h.giveaway.status}),h.giveaway.type&&n.jsx(Ye,{variant:"secondary",children:h.giveaway.type})]})]})]})}),!h.platform_order&&h.items&&h.items.length>0&&n.jsxs("div",{className:"py-6",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Order Items"}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{className:"w-12"}),n.jsx(Ce,{children:"Product"}),n.jsx(Ce,{className:"text-center",children:"Qty"}),n.jsx(Ce,{className:"text-right",children:"Price"}),n.jsx(Ce,{className:"text-right",children:"Shipping"}),n.jsx(Ce,{className:"text-right",children:"Total"}),n.jsx(Ce,{className:"text-right",children:"Action"})]})}),n.jsx(Us,{children:h.items.map((P,O)=>{var z,pe,xe,_e,Me,K,Q,se,ye,B,ie;const D=((z=P.giveawayId)==null?void 0:z.name)||((pe=P.giveawayId)==null?void 0:pe.title)||((xe=P.productId)==null?void 0:xe.name)||((_e=P.productId)==null?void 0:_e.title)||P.name||P.title||"Unknown Product",M=P.order_reference||"",J=M||D,X=((Me=P.giveawayId)==null?void 0:Me.image)||((Q=(K=P.giveawayId)==null?void 0:K.images)==null?void 0:Q[0])||((se=P.productId)==null?void 0:se.image)||((B=(ye=P.productId)==null?void 0:ye.images)==null?void 0:B[0])||P.image||((ie=P.images)==null?void 0:ie[0]),U=P.quantity||1,$=P.price||0,L=P.shipping_fee||P.shippingFee||P.shipping||0,te=P._id||P.id||`item-${O}`,F=P.status==="refunded"||P.refunded;return n.jsxs(yt,{"data-testid":`order-item-${O}`,children:[n.jsx(ke,{children:X&&n.jsx("img",{src:X,alt:J,className:"w-10 h-10 object-cover rounded"})}),n.jsxs(ke,{children:[n.jsx("p",{className:"font-medium",children:J}),F&&n.jsx(Ye,{variant:"destructive",className:"mt-1",children:"Refunded"})]}),n.jsx(ke,{className:"text-center",children:U}),n.jsxs(ke,{className:"text-right",children:["$",$.toFixed(2)]}),n.jsxs(ke,{className:"text-right",children:["$",L.toFixed(2)]}),n.jsxs(ke,{className:"text-right font-medium",children:["$",($*U+L).toFixed(2)]}),n.jsx(ke,{className:"text-right",children:!F&&P.status==="processing"?n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>g(te,J,$*U+L),disabled:x.isPending,children:[n.jsx(bv,{className:"h-3 w-3 mr-1"}),"Refund"]}):n.jsx(Ye,{variant:"secondary",className:"capitalize",children:P.status})})]},O)})})]})})]}),n.jsx("div",{className:"pt-6 border-t",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-2","data-testid":"order-summary",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),n.jsxs("span",{children:["$",_.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),n.jsxs("span",{children:["$",T.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Tax"}),n.jsxs("span",{children:["$",j.toFixed(2)]})]}),S>0&&n.jsxs("div",{className:"flex justify-between text-sm",style:{color:"hsl(var(--primary))"},children:[n.jsx("span",{children:"Discount"}),n.jsxs("span",{children:["-$",S.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between font-semibold text-lg pt-2 border-t",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{"data-testid":"text-order-total",children:["$",A.toFixed(2)]})]})]})})})]})})]}),n.jsx(ys,{open:i,onOpenChange:a,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Refund Item"}),n.jsx(Ls,{children:o&&`Refund for: ${o.name}`})]}),n.jsxs("div",{className:"py-4",children:[n.jsx(re,{htmlFor:"refundAmount",children:"Refund Amount ($)"}),n.jsx(le,{id:"refundAmount",type:"number",value:c,readOnly:!0,className:"mt-2 bg-muted"}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Item total: $",(o==null?void 0:o.total.toFixed(2))||"0.00"]})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsx(G,{onClick:y,disabled:x.isPending,children:x.isPending?"Processing...":"Process Refund"})]})]})})]})}function are(){const{toast:t}=Et(),{settings:e}=qc(),[s,r]=p.useState(""),[i,a]=p.useState(""),[o,l]=p.useState("all"),[c,d]=p.useState(null),[u,f]=p.useState(!1),[h,x]=p.useState(1),[g,y]=p.useState(1),[w,b]=p.useState(1),v=()=>{const F={"Content-Type":"application/json"},z=localStorage.getItem("adminAccessToken"),pe=localStorage.getItem("accessToken"),xe=localStorage.getItem("user");return console.log("[Transactions] getAuthHeaders:",{adminToken:z?"present":"missing",userToken:pe?"present":"missing",userData:xe?"present":"missing"}),z&&(F["x-admin-token"]=z),pe&&(F["x-access-token"]=pe),xe&&(F["x-user-data"]=btoa(unescape(encodeURIComponent(xe)))),F},{data:N,isLoading:C}=Ve({queryKey:["admin-transactions",h,i,o],queryFn:async()=>{const F=new URLSearchParams;F.append("limit","10"),F.append("page",String(h)),F.append("usertype","admin"),i.trim()&&F.append("username",i.trim()),o!=="all"&&F.append("type",o);const z=await fetch(`/api/admin/transactions?${F.toString()}`,{credentials:"include",headers:v()});if(!z.ok)throw new Error("Failed to fetch transactions");const pe=await z.json();return pe.success?pe.data:pe}}),_=()=>{a(s),x(1),We.invalidateQueries({queryKey:["admin-transactions"]})},{data:T,isLoading:j}=Ve({queryKey:["admin-refunds",g],queryFn:async()=>{const F=await fetch(`/api/admin/transactions?limit=10&page=${g}&status=Refunded&usertype=admin`,{credentials:"include",headers:v()});if(!F.ok)throw new Error("Failed to fetch refunds");const z=await F.json();return z.success?z.data:z}}),{data:S,isLoading:A}=Ve({queryKey:["admin-initiate-transactions",w],queryFn:async()=>{const F=await fetch(`/api/admin/transactions?limit=10&page=${w}&type=initiate&usertype=admin`,{credentials:"include",headers:v()});if(!F.ok)throw new Error("Failed to fetch initiate transactions");const z=await F.json();return z.success?z.data:z}}),{data:I}=Ve({queryKey:["admin-settings"],queryFn:async()=>{const F=await fetch("/api/settings",{credentials:"include",headers:v()});if(!F.ok)throw new Error("Failed to fetch settings");const z=await F.json();return z.success?z.data:z}}),P=(N==null?void 0:N.transactions)||(N==null?void 0:N.data)||[],O=(I==null?void 0:I.support_email)||"",D=(I==null?void 0:I.stripe_fee)||"0",M=(I==null?void 0:I.extra_charges)||"0",J=st({mutationFn:async({id:F,type:z})=>(t({title:"Processing",description:"Processing refund..."}),ut("PUT",`/api/admin/refund/${F}`,{type:z})),onSuccess:()=>{We.invalidateQueries({queryKey:["admin-transactions"]}),We.invalidateQueries({queryKey:["admin-refunds"]}),t({title:"Success",description:"Refund processed successfully"})},onError:F=>{t({title:"Refund Failed",description:F.message||"Failed to process refund. Please try again.",variant:"destructive"})}}),X=P,U=F=>F?new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",$=F=>{switch(F==null?void 0:F.toLowerCase()){case"completed":case"success":return"default";case"pending":return"secondary";case"failed":case"cancelled":return"destructive";default:return"secondary"}},L=()=>{r(""),a(""),l("all"),x(1)},te=i||o!=="all";return C?n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Transactions"}),n.jsx("p",{className:"text-muted-foreground",children:"Monitor all financial transactions"})]}),n.jsx(de,{children:n.jsx(ue,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading transactions..."})]})})})]})}):n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Transactions"}),n.jsx("p",{className:"text-muted-foreground",children:"Monitor all financial transactions and refunds"})]}),n.jsxs(Vi,{defaultValue:"transactions",className:"space-y-4",children:[n.jsxs(li,{children:[n.jsx(_t,{value:"transactions","data-testid":"tab-transactions",children:"Transactions"}),n.jsx(_t,{value:"refunds","data-testid":"tab-refunds",children:"Refunds"}),n.jsx(_t,{value:"initiate","data-testid":"tab-initiate",children:"Initiate"})]}),n.jsx(Ft,{value:"transactions",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(gd,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:"Transaction History"}),n.jsxs(Fe,{children:[(N==null?void 0:N.totalDocuments)||P.length," transactions",te&&` (filtered${i?` by: ${i}`:""}${o!=="all"?`, type: ${o.replace(/_/g," ")}`:""})`]})]})]}),n.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search by username...",value:s,onChange:F=>r(F.target.value),onKeyDown:F=>{F.key==="Enter"&&_()},className:"pl-9","data-testid":"input-search-transactions"})]}),n.jsxs(Gt,{value:o,onValueChange:F=>{l(F),x(1)},children:[n.jsxs(Bt,{className:"w-[180px]","data-testid":"select-type-filter",children:[n.jsx(kf,{className:"h-4 w-4 mr-2"}),n.jsx(Yt,{placeholder:"Filter by type"})]}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all","data-testid":"select-type-all",children:"All"}),n.jsx(fe,{value:"shipping_deduction","data-testid":"select-type-shipping",children:"Shipping Deduction"}),n.jsx(fe,{value:"service_fee","data-testid":"select-type-service-fee",children:"Service Fee"})]})]}),n.jsxs(G,{onClick:_,"data-testid":"button-search-transactions",children:[n.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Search"]}),te&&n.jsxs(G,{variant:"ghost",size:"sm",onClick:L,"data-testid":"button-clear-filters",children:[n.jsx(un,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})}),n.jsx(ue,{children:X.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(gd,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:te?"No transactions match your filters":"No transactions found"}),te&&n.jsx(G,{variant:"outline",onClick:L,className:"mt-4",children:"Clear Filters"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Transaction ID"}),n.jsx(Ce,{children:"Info"}),n.jsx(Ce,{children:"Amount"}),n.jsx(Ce,{children:"Date"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{className:"text-right",children:"Actions"})]})}),n.jsx(Us,{children:X.map(F=>{const z=F._id||F.id,pe=typeof F.from=="object"&&F.from&&F.from.userName||"",xe=typeof F.to=="object"&&F.to&&F.to.userName||"";Math.round((Number(F.amount)||0)*100)/100;const _e=F.status||"pending";return n.jsxs(yt,{children:[n.jsx(ke,{className:"font-mono text-xs","data-testid":`text-transaction-id-${z}`,children:String(z).slice(-8)}),n.jsx(ke,{"data-testid":`text-info-${z}`,children:n.jsxs("div",{className:"space-y-1",children:[pe&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"From:"}),n.jsx("span",{className:"text-sm",children:pe})]}),xe&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"To:"}),n.jsx("span",{className:"text-sm",children:xe})]}),F.reason&&n.jsx("div",{className:"text-xs text-muted-foreground",children:F.reason}),!pe&&!xe&&!F.reason&&n.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})]})}),n.jsx(ke,{"data-testid":`text-amount-${z}`,children:n.jsxs("div",{children:[(()=>{const Me=parseFloat(String(F.amount||0)).toFixed(2);return n.jsx("span",{className:F.deducting?"text-red-600":"",children:F.deducting?`-$${Me}`:`$${Me}`})})(),F.type==="payout"&&F.bank_name&&n.jsx("div",{className:"text-xs text-muted-foreground",children:F.bank_name}),F.type==="payout"&&F.balance_after_payout!==void 0&&n.jsxs("div",{className:"text-xs text-teal-600",children:["Balance: $",parseFloat(String(F.balance_after_payout||0)).toFixed(2)]}),F.type!=="payout"&&(F.available_on||F.availableOn)&&Number(F.available_on||F.availableOn)>0&&n.jsxs("div",{className:"text-xs text-teal-600",children:["Available on ",U(F.available_on||F.availableOn)]})]})}),n.jsx(ke,{"data-testid":`text-date-${z}`,children:U(F.createdAt||F.date)}),n.jsx(ke,{children:n.jsx(Ye,{variant:$(_e),"data-testid":`badge-status-${z}`,children:_e.replace(/_/g," ")})}),n.jsx(ke,{className:"text-right",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm","data-testid":`button-actions-${z}`,children:n.jsx(Cf,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:()=>{F.receipt?window.open(F.receipt,"_blank"):(d(F),f(!0))},"data-testid":`menu-print-receipt-${z}`,children:[n.jsx(uy,{className:"h-4 w-4 mr-2"}),"Print Receipt"]}),F.type!=="service_fee"&&F.type!=="shipping_deduction"&&n.jsxs(n.Fragment,{children:[n.jsx(Na,{}),n.jsxs(Zt,{onClick:()=>{window.confirm(`Are you sure you want to refund this transaction?

Transaction ID: ${String(z).slice(-8)}
Amount: $${parseFloat(String(F.amount||0)).toFixed(2)}

This action cannot be undone.`)&&J.mutate({id:z,type:"transaction"})},disabled:J.isPending,"data-testid":`menu-refund-transaction-${z}`,className:"text-orange-600 focus:text-orange-600",children:[n.jsx(zn,{className:"h-4 w-4 mr-2"}),"Refund Transaction"]})]})]})]})})]},z)})})]})}),(N==null?void 0:N.totalPages)>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",N.currentPage||h," of ",N.totalPages," (",N.totalDocuments," total)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>x(F=>Math.max(1,F-1)),disabled:h<=1,children:"Previous"}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>x(F=>Math.min(N.totalPages,F+1)),disabled:h>=N.totalPages,children:"Next"})]})]})]})})]})}),n.jsx(Ft,{value:"refunds",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(zn,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:"Refunds"}),n.jsx(Fe,{children:"View all processed refunds"})]})]})}),n.jsx(ue,{children:j?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading refunds..."})]}):!(T!=null&&T.data)||T.data.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(zn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No refunds found"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Transaction ID"}),n.jsx(Ce,{children:"Info"}),n.jsx(Ce,{children:"Amount"}),n.jsx(Ce,{children:"Date"}),n.jsx(Ce,{children:"Status"})]})}),n.jsx(Us,{children:T.data.map(F=>{var Me;const z=F._id||F.id,pe=Math.round((Number(F.amount)||0)*100)/100,xe=typeof F.from=="object"&&F.from&&F.from.userName||"",_e=typeof F.to=="object"&&F.to&&F.to.userName||"";return n.jsxs(yt,{children:[n.jsx(ke,{className:"font-mono text-xs","data-testid":`text-refund-id-${z}`,children:String(z).slice(-8)}),n.jsx(ke,{"data-testid":`text-info-${z}`,children:n.jsxs("div",{className:"space-y-1",children:[xe&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"From:"}),n.jsx("span",{className:"text-sm",children:xe})]}),_e&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"To:"}),n.jsx("span",{className:"text-sm",children:_e})]}),F.reason&&n.jsx("div",{className:"text-xs text-muted-foreground",children:F.reason}),!xe&&!_e&&!F.reason&&n.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})]})}),n.jsxs(ke,{"data-testid":`text-amount-${z}`,children:["$",pe.toFixed(2)]}),n.jsx(ke,{"data-testid":`text-date-${z}`,children:U(F.createdAt||F.created)}),n.jsx(ke,{children:n.jsx(Ye,{variant:$(F.status),"data-testid":`badge-status-${z}`,children:(Me=F.status)==null?void 0:Me.replace(/_/g," ")})})]},z)})})]})}),(T==null?void 0:T.totalPages)>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",T.currentPage||g," of ",T.totalPages," (",T.totalDocuments," total)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>y(F=>Math.max(1,F-1)),disabled:g<=1,children:"Previous"}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>y(F=>Math.min(T.totalPages,F+1)),disabled:g>=T.totalPages,children:"Next"})]})]})]})})]})}),n.jsx(Ft,{value:"initiate",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(gd,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:"Initiate Transactions"}),n.jsx(Fe,{children:"View all transactions with type initiate"})]})]})}),n.jsx(ue,{children:A?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading initiate transactions..."})]}):!(S!=null&&S.transactions||S!=null&&S.data)||((S==null?void 0:S.transactions)||(S==null?void 0:S.data)||[]).length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(gd,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No initiate transactions found"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Transaction ID"}),n.jsx(Ce,{children:"Info"}),n.jsx(Ce,{children:"Amount"}),n.jsx(Ce,{children:"Date"}),n.jsx(Ce,{children:"Status"})]})}),n.jsx(Us,{children:((S==null?void 0:S.transactions)||(S==null?void 0:S.data)||[]).map(F=>{var Me;const z=F._id||F.id,pe=Math.round((Number(F.amount)||0)*100)/100,xe=typeof F.from=="object"&&F.from&&F.from.userName||"",_e=typeof F.to=="object"&&F.to&&F.to.userName||"";return n.jsxs(yt,{children:[n.jsx(ke,{className:"font-mono text-xs","data-testid":`text-initiate-id-${z}`,children:String(z).slice(-8)}),n.jsx(ke,{"data-testid":`text-initiate-info-${z}`,children:n.jsxs("div",{className:"space-y-1",children:[xe&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"From:"}),n.jsx("span",{className:"text-sm",children:xe})]}),_e&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"To:"}),n.jsx("span",{className:"text-sm",children:_e})]}),F.reason&&n.jsx("div",{className:"text-xs text-muted-foreground",children:F.reason}),!xe&&!_e&&!F.reason&&n.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})]})}),n.jsxs(ke,{"data-testid":`text-initiate-amount-${z}`,children:["$",pe.toFixed(2)]}),n.jsx(ke,{"data-testid":`text-initiate-date-${z}`,children:U(F.createdAt||F.date)}),n.jsx(ke,{children:n.jsx(Ye,{variant:$(F.status),"data-testid":`badge-initiate-status-${z}`,children:(Me=F.status)==null?void 0:Me.replace(/_/g," ")})})]},z)})})]})}),(S==null?void 0:S.totalPages)>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",S.currentPage||w," of ",S.totalPages," (",S.totalDocuments," total)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>b(F=>Math.max(1,F-1)),disabled:w<=1,children:"Previous"}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>b(F=>Math.min(S.totalPages,F+1)),disabled:w>=S.totalPages,children:"Next"})]})]})]})})]})})]})]}),n.jsx(ys,{open:u,onOpenChange:f,children:n.jsxs(fs,{className:"max-w-md",children:[n.jsx(ps,{children:n.jsx(ms,{children:(c==null?void 0:c.type)==="shipping_deduction"?"Shipping Deduction Receipt":(c==null?void 0:c.type)==="service_fee"?"Service Fee Receipt":"Transaction Receipt"})}),c&&n.jsx("div",{id:"receipt-content",className:"space-y-4 p-4",children:(()=>{const F=(c.type||"").toLowerCase(),z=typeof c.from=="object"&&c.from&&(`${c.from.firstName||""} ${c.from.lastName||""}`.trim()||c.from.userName||c.from.email)||"",pe=typeof c.to=="object"&&c.to&&(`${c.to.firstName||""} ${c.to.lastName||""}`.trim()||c.to.userName||c.to.email)||"",xe=parseFloat(c.amount)||0;return F==="shipping_deduction"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center border-b pb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:e.app_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Shipping Deduction Receipt"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Transaction ID:"}),n.jsx("span",{className:"font-mono text-xs break-all",children:String(c._id||c.id)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Date:"}),n.jsx("span",{children:U(c.createdAt||c.date)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Type:"}),n.jsx("span",{className:"capitalize",children:"Shipping Deduction"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Status:"}),n.jsx(Ye,{variant:$(c.status||"pending"),children:(c.status||"pending").replace(/_/g," ")})]}),c.reason&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Reason:"}),n.jsx("span",{children:c.reason})]})]}),(z||pe)&&n.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[z&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Charged To:"}),n.jsx("span",{className:"font-medium",children:z})]}),pe&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Shipping Provider:"}),n.jsx("span",{className:"font-medium",children:pe})]})]}),n.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[c.shippingFee&&parseFloat(c.shippingFee)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Shipping Cost:"}),n.jsxs("span",{children:["$",parseFloat(c.shippingFee).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between items-center text-lg font-bold pt-2 border-t",children:[n.jsx("span",{children:"Amount Deducted:"}),n.jsxs("span",{className:"text-destructive",children:["-$",xe.toFixed(2)]})]})]}),n.jsxs("div",{className:"text-center text-xs text-muted-foreground border-t pt-4",children:[n.jsx("p",{children:"Shipping cost deducted from seller balance."}),n.jsxs("p",{children:["For support, please contact ",O]})]})]}):F==="service_fee"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center border-b pb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:e.app_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Service Fee Receipt"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Transaction ID:"}),n.jsx("span",{className:"font-mono text-xs break-all",children:String(c._id||c.id)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Date:"}),n.jsx("span",{children:U(c.createdAt||c.date)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Type:"}),n.jsx("span",{className:"capitalize",children:"Platform Commission"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Status:"}),n.jsx(Ye,{variant:$(c.status||"pending"),children:(c.status||"pending").replace(/_/g," ")})]}),c.reason&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Reason:"}),n.jsx("span",{children:c.reason})]})]}),(z||pe)&&n.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[z&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Seller:"}),n.jsx("span",{className:"font-medium",children:z})]}),pe&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Platform:"}),n.jsx("span",{className:"font-medium",children:pe})]})]}),n.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[c.total&&parseFloat(c.total)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Order Total:"}),n.jsxs("span",{children:["$",parseFloat(c.total).toFixed(2)]})]}),c.serviceFee&&parseFloat(c.serviceFee)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Commission Rate:"}),n.jsxs("span",{children:["$",parseFloat(c.serviceFee).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between items-center text-lg font-bold pt-2 border-t",children:[n.jsx("span",{children:"Commission Collected:"}),n.jsxs("span",{children:["$",xe.toFixed(2)]})]})]}),n.jsxs("div",{className:"text-center text-xs text-muted-foreground border-t pt-4",children:[n.jsx("p",{children:"Platform commission deducted from seller earnings."}),n.jsxs("p",{children:["For support, please contact ",O]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center border-b pb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:e.app_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Transaction Receipt"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Transaction ID:"}),n.jsx("span",{className:"font-mono text-xs break-all",children:String(c._id||c.id)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Date:"}),n.jsx("span",{children:U(c.createdAt||c.date)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Type:"}),n.jsx("span",{className:"capitalize",children:(c.type||"N/A").replace(/_/g," ")})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Status:"}),n.jsx(Ye,{variant:$(c.status||"pending"),children:(c.status||"pending").replace(/_/g," ")})]})]}),(z||pe)&&n.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[z&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"From:"}),n.jsx("span",{className:"font-medium",children:z})]}),pe&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"To:"}),n.jsx("span",{className:"font-medium",children:pe})]})]}),n.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[(()=>{const _e=parseFloat(c.total)||0,Me=parseFloat(c.shippingFee)||0,K=parseFloat(c.discount)||0,Q=_e+Me,se=parseFloat(c.stripe_fee)||0,ye=parseFloat(c.extra_charges)||0,B=se+ye;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total:"}),n.jsxs("span",{children:["$",Q.toFixed(2)]})]}),B>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Service Charge",parseFloat(D)>0||parseFloat(M)>0?` (${D}% + ${M}%)`:"",":"]}),n.jsxs("span",{className:"text-destructive",children:["-$",B.toFixed(2)]})]}),c.serviceFee&&parseFloat(c.serviceFee)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Service Fee:"}),n.jsxs("span",{className:"text-destructive",children:["-$",parseFloat(c.serviceFee).toFixed(2)]})]}),Me>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Shipping Fee:"}),n.jsxs("span",{className:"text-destructive",children:["-$",Me.toFixed(2)]})]}),K>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{style:{color:"hsl(var(--primary))"},children:"Discount:"}),n.jsxs("span",{style:{color:"hsl(var(--primary))"},children:["-$",K.toFixed(2)]})]})]})})(),n.jsxs("div",{className:"flex justify-between items-center text-lg font-bold pt-2 border-t",children:[n.jsx("span",{children:"Amount:"}),n.jsxs("span",{children:["$",xe.toFixed(2)]})]})]}),n.jsxs("div",{className:"text-center text-xs text-muted-foreground border-t pt-4",children:[n.jsx("p",{children:"Thank you for your business!"}),n.jsxs("p",{children:["For support, please contact ",O]})]})]})})()}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx(G,{variant:"outline",onClick:()=>f(!1),"data-testid":"button-close-receipt",children:"Close"}),n.jsxs(G,{onClick:()=>{const F=document.getElementById("receipt-content");if(F){const z=window.open("","_blank");z&&(z.document.write(`
                      <html>
                        <head>
                          <title>Receipt</title>
                          <style>
                            body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
                            .space-y-4 > * + * { margin-top: 1rem; }
                            .space-y-2 > * + * { margin-top: 0.5rem; }
                            .flex { display: flex; }
                            .justify-between { justify-content: space-between; }
                            .items-center { align-items: center; }
                            .text-center { text-align: center; }
                            .border-b { border-bottom: 1px solid #ddd; padding-bottom: 1rem; }
                            .border-t { border-top: 1px solid #ddd; padding-top: 1rem; }
                            .text-muted-foreground { color: #666; }
                            .font-mono { font-family: monospace; }
                            .font-bold { font-weight: bold; }
                            .font-medium { font-weight: 500; }
                            .text-lg { font-size: 1.125rem; }
                            .text-2xl { font-size: 1.5rem; }
                            .text-xs { font-size: 0.75rem; }
                            .text-sm { font-size: 0.875rem; }
                            .capitalize { text-transform: capitalize; }
                          </style>
                        </head>
                        <body>
                          ${F.innerHTML}
                        </body>
                      </html>
                    `),z.document.close(),z.focus(),setTimeout(()=>{z.print(),z.close()},250))}},"data-testid":"button-print-receipt-dialog",children:[n.jsx(uy,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})})]})}function ore(){const{toast:t}=Et(),e=cu(),[s,r]=p.useState("stripe"),[i,a]=p.useState(""),[o,l]=p.useState(1),[c,d]=p.useState(1),[u,f]=p.useState(""),[h,x]=p.useState(""),[g,y]=p.useState(""),[w,b]=p.useState(""),v=10,[N,C]=p.useState(!1),[_,T]=p.useState(!1),[j,S]=p.useState(null),I=(()=>{const Q=new URLSearchParams;return u&&u!=="all"&&Q.append("status",u),h&&Q.append("from",h),g&&Q.append("to",g),Q.append("limit",v.toString()),Q.append("page",o.toString()),Q.toString()})(),{data:P,isLoading:O}=Ve({queryKey:["/api/admin/stripe-payouts",u,h,g,o],queryFn:async()=>{const Q=`/api/admin/stripe-payouts${I?"?"+I:""}`;return console.log("Fetching payouts from:",Q),(await fetch(Q,{credentials:"include"})).json()},staleTime:0,refetchOnMount:!0}),{data:D,isLoading:M}=Ve({queryKey:["pending-payouts",c],queryFn:async()=>(await fetch(`/api/users/payouts/pending?page=${c}&limit=10`,{credentials:"include"})).json(),staleTime:0,refetchOnMount:!0}),J=(P==null?void 0:P.transactions)||(P==null?void 0:P.data)||[],X=(P==null?void 0:P.totalPages)||1,U=(P==null?void 0:P.totalDocuments)||J.length,$=D==null?void 0:D.data,L=Array.isArray($)?$:($==null?void 0:$.total)||($==null?void 0:$.payouts)||(D==null?void 0:D.payouts)||[],te=Array.isArray(L)?L:[],F=(D==null?void 0:D.totalPages)||($==null?void 0:$.totalPages)||1,z=J.filter(Q=>{if(i){const se=i.toLowerCase(),ye=(Q.bank_name||"").toLowerCase(),B=(Q._id||Q.payoutId||"").toLowerCase();if(!ye.includes(se)&&!B.includes(se))return!1}return!0}),pe=Q=>{a(Q),l(1)},xe=()=>{f(""),x(""),y(""),a(""),l(1)},_e=u||h||g,Me=()=>{o<X&&l(Q=>Q+1)},K=()=>{o>1&&l(Q=>Q-1)};return n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Payouts"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage payout transactions"})]}),n.jsxs(Vi,{value:s,onValueChange:r,className:"space-y-6",children:[n.jsxs(li,{children:[n.jsx(_t,{value:"stripe",children:"Stripe Payouts"}),n.jsx(_t,{value:"pending",children:"Pending"})]}),n.jsxs(Ft,{value:"stripe",children:[n.jsxs(de,{className:"mb-6",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kf,{className:"h-5 w-5 text-muted-foreground"}),n.jsx(we,{className:"text-lg",children:"Filters"})]}),_e&&n.jsxs(G,{variant:"ghost",size:"sm",onClick:xe,"data-testid":"button-reset-filters",children:[n.jsx(un,{className:"h-4 w-4 mr-1"}),"Reset"]})]})}),n.jsx(ue,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Status"}),n.jsxs(Gt,{value:u,onValueChange:f,children:[n.jsx(Bt,{"data-testid":"select-status",children:n.jsx(Yt,{placeholder:"All statuses"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All statuses"}),n.jsx(fe,{value:"Pending",children:"Pending"}),n.jsx(fe,{value:"Processing",children:"Processing"}),n.jsx(fe,{value:"Paid",children:"Paid"}),n.jsx(fe,{value:"Failed",children:"Failed"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"From Date"}),n.jsx(le,{type:"date",value:h,onChange:Q=>x(Q.target.value),"data-testid":"input-date-from"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"To Date"}),n.jsx(le,{type:"date",value:g,onChange:Q=>y(Q.target.value),"data-testid":"input-date-to"})]})]})})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(we,{children:"Payout Transactions"}),n.jsx(Fe,{children:"Stripe payout history"})]}),n.jsxs("div",{className:"relative w-full sm:w-64",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search by bank or ID...",value:i,onChange:Q=>pe(Q.target.value),className:"pl-10","data-testid":"input-search-payouts"})]})]})}),n.jsxs(ue,{children:[O?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading payouts..."})]}):z.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(oy,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:i?"No payouts found matching your search":"No payouts found"})]}):n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{className:"min-w-[180px]",children:"Bank"}),n.jsx(Ce,{className:"text-right",children:"Amount"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Balance After"}),n.jsx(Ce,{className:"hidden lg:table-cell",children:"Date"}),n.jsx(Ce,{children:"Type"}),n.jsx(Ce,{className:"hidden sm:table-cell",children:"Status"})]})}),n.jsx(Us,{children:z.map(Q=>{const se=Q._id||Q.payoutId,ye=Number(Q.amount)||0,B=Q.createdAt||Q.date,ie=Q.bank_name||"Bank Account",ce=Q.balance_after_payout,oe=Q.payout_type||"Stripe",Z=Q.status||"Pending",he=Ne=>{switch(Ne==null?void 0:Ne.toLowerCase()){case"paid":return"default";case"pending":return"secondary";case"processing":return"outline";case"failed":return"destructive";default:return"secondary"}};return n.jsxs(yt,{"data-testid":`row-payout-${se}`,children:[n.jsx(ke,{"data-testid":`text-bank-${se}`,children:n.jsx("div",{className:"max-w-[200px]",children:n.jsx("div",{className:"font-medium text-sm",children:ie})})}),n.jsxs(ke,{className:"text-right font-semibold text-red-600","data-testid":`text-amount-${se}`,children:["-$",ye.toFixed(2)]}),n.jsx(ke,{className:"hidden md:table-cell",children:ce!==void 0?`$${Number(ce).toFixed(2)}`:"N/A"}),n.jsx(ke,{className:"hidden lg:table-cell",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ci,{className:"h-4 w-4 text-muted-foreground"}),B?new Date(B).toLocaleDateString():"N/A"]})}),n.jsx(ke,{children:n.jsx(Ye,{variant:"outline",children:oe})}),n.jsx(ke,{className:"hidden sm:table-cell",children:n.jsx(Ye,{variant:he(Z),children:Z})})]},se)})})]})}),X>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",o," of ",X," (",U," total)"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:K,disabled:o===1,"data-testid":"button-prev-page",children:[n.jsx(oi,{className:"h-4 w-4"}),"Previous"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:Me,disabled:o>=X,"data-testid":"button-next-page",children:["Next",n.jsx(Vn,{className:"h-4 w-4"})]})]})]})]})]})]}),n.jsx(Ft,{value:"pending",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Cr,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx(we,{children:"Pending Payouts"}),n.jsx(Fe,{children:"View all pending payout requests"})]})]})}),n.jsx(ue,{children:M?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading pending payouts..."})]}):te.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Cr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No pending payouts found"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"User"}),n.jsx(Ce,{className:"text-right",children:"Amount"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{children:"Action"})]})}),n.jsx(Us,{children:te.map((Q,se)=>{var he,Ne,Ke,$e,W;const ye=Q._id||Q.id||Q.userId||`pending-${se}`,B=Q.total||Q.amount||0,ie=Q.userId||((he=Q.user)==null?void 0:he._id)||((Ne=Q.user)==null?void 0:Ne.id),ce=Q.userName||((Ke=Q.user)==null?void 0:Ke.userName)||(($e=Q.user)==null?void 0:$e.firstName)||"Unknown",oe=Q.email||((W=Q.user)==null?void 0:W.email),Z=Q.count||0;return n.jsxs(yt,{children:[n.jsxs(ke,{children:[n.jsx("div",{className:"font-medium",children:ce}),oe&&n.jsx("div",{className:"text-xs text-muted-foreground",children:oe})]}),n.jsxs(ke,{className:"text-right font-semibold",children:["$",Number(B).toFixed(2),Z>0&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[Z," transactions"]})]}),n.jsx(ke,{children:n.jsx(Ye,{variant:"secondary",children:Q.status||"Pending"})}),n.jsx(ke,{children:n.jsx(G,{size:"sm",onClick:()=>{S({amount:B,userId:ie,userName:ce}),C(!0)},children:"Transfer"})})]},ye)})})]})}),F>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",c," of ",F]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(Q=>Math.max(1,Q-1)),disabled:c<=1,children:"Previous"}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(Q=>Math.min(F,Q+1)),disabled:c>=F,children:"Next"})]})]})]})})]})})]})]}),n.jsx(Ca,{open:N,onOpenChange:C,children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Confirm Transfer"}),n.jsxs(Fi,{children:["Are you sure you want to transfer ",n.jsxs("strong",{children:["$",j?Number(j.amount).toFixed(2):"0.00"]})," to ",n.jsx("strong",{children:(j==null?void 0:j.userName)||"Unknown"}),"?",n.jsx("br",{}),n.jsx("br",{}),"This action cannot be undone."]})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{disabled:_,children:"Cancel"}),n.jsx($i,{disabled:_,onClick:async Q=>{if(Q.preventDefault(),!!j){T(!0);try{const ye=await(await fetch("/api/stripe/transfer",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:j.amount,user:j.userId})})).json();ye.success?(C(!1),t({title:"Transfer Successful",description:`$${Number(j.amount).toFixed(2)} has been transferred to ${j.userName}`}),e.invalidateQueries({queryKey:["pending-payouts"]})):t({title:"Transfer Failed",description:ye.error||"An error occurred during the transfer",variant:"destructive"})}catch{t({title:"Transfer Failed",description:"Failed to initiate transfer",variant:"destructive"})}finally{T(!1)}}},children:_?n.jsxs(n.Fragment,{children:[n.jsx(dn,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):"Confirm Transfer"})]})]})})]})}function lre(){const[,t]=Ds(),[e,s]=p.useState(1),[r,i]=p.useState(10),[a,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(!1),[f,h]=p.useState(null),[x,g]=p.useState(void 0),[y,w]=p.useState(!1),[b,v]=p.useState(null),{toast:N}=Et(),C=cu(),{data:_,isLoading:T}=Ve({queryKey:["/api/admin/shows",e,r,a,l]}),{data:j}=Ve({queryKey:["/api/admin/rooms/stats/all"],queryFn:async()=>{const F=await fetch("/api/admin/rooms/stats/all",{credentials:"include"});return F.ok?await F.json():{success:!1,data:{}}}}),S=(j==null?void 0:j.data)||{},A=Object.fromEntries(Object.entries(S).filter(([F,z])=>typeof z=="number"||typeof z=="string")),I=F=>F.replace(/([A-Z])/g," $1").replace(/^./,z=>z.toUpperCase()).replace(/_/g," ").trim(),P=F=>{const z=F.toLowerCase();return z.includes("live")?{icon:dr,color:"text-red-500",valueColor:"text-red-600"}:z.includes("upcoming")||z.includes("pending")||z.includes("scheduled")?{icon:Cr,color:"text-blue-500",valueColor:"text-blue-600"}:z.includes("active")||z.includes("approved")?{icon:lc,color:"text-green-500",valueColor:"text-green-600"}:z.includes("blocked")||z.includes("banned")?{icon:lm,color:"text-red-500",valueColor:"text-red-600"}:z.includes("revenue")||z.includes("amount")?{icon:zn,color:"text-green-500",valueColor:"text-green-600"}:z.includes("show")||z.includes("room")||z.includes("total")?{icon:dr,color:"text-muted-foreground",valueColor:""}:{icon:wv,color:"text-muted-foreground",valueColor:""}},O=(F,z)=>{const pe=F.toLowerCase(),xe=Number(z);return pe.includes("revenue")||pe.includes("amount")||pe.includes("price")?`$${xe.toFixed(2)}`:String(z??0)},D=st({mutationFn:async({roomId:F,featured:z,featured_until:pe})=>{const xe={featured:z};pe!==void 0&&(xe.featured_until=pe);const _e=await fetch(`/api/rooms/features/${F}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!_e.ok)throw new Error("Failed to update featured status");return _e.json()},onSuccess:()=>{N({title:"Show Featured",description:"The show has been set as featured successfully."}),C.invalidateQueries({queryKey:["/api/admin/shows"]}),u(!1),h(null),g(void 0)},onError:F=>{N({title:"Error",description:F.message||"Failed to feature the show.",variant:"destructive"})}}),M=st({mutationFn:async F=>{const z=await fetch(`/api/rooms/${F}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!z.ok)throw new Error("Failed to delete show");return z.json()},onSuccess:()=>{N({title:"Show Deleted",description:"The show has been deleted successfully."}),C.invalidateQueries({queryKey:["/api/admin/shows"]}),w(!1),v(null)},onError:F=>{N({title:"Error",description:F.message||"Failed to delete the show.",variant:"destructive"})}}),J=()=>{if(!b)return;const F=b._id||b.id;M.mutate(F)},X=(F,z)=>{z.stopPropagation(),v(F),w(!0)},U=()=>{if(!f)return;const F=f._id||f.id;D.mutate({roomId:F,featured:!0,featured_until:x?String(x.getTime()):null})},$=(F,z)=>{z.stopPropagation(),h(F),g(void 0),u(!0)},L=(_==null?void 0:_.data)||[],te=_?{currentPage:e,totalPages:_.pages||1,totalItems:_.totalDoc||0,hasNextPage:e<(_.pages||1),hasPrevPage:e>1}:null;return n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Live Shows"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage all live shopping shows and rooms"})]}),Object.keys(A).length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:Object.entries(A).map(([F,z])=>{const{icon:pe,color:xe,valueColor:_e}=P(F);return n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:I(F)}),F.toLowerCase()==="live"?n.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full animate-pulse"}):n.jsx(pe,{className:`h-4 w-4 ${xe}`})]}),n.jsx(ue,{children:n.jsx("div",{className:`text-2xl font-bold ${_e}`,children:O(F,z)})})]},F)})}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:n.jsxs("div",{children:[n.jsx(we,{children:"Live Shows & Rooms"}),n.jsx(Fe,{children:"View and manage all live shows"})]})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(Vi,{value:l||"all",onValueChange:F=>{c(F==="all"?"":F),s(1)},children:n.jsxs(li,{"data-testid":"tabs-filter",children:[n.jsx(_t,{value:"all","data-testid":"tab-all",children:"All"}),n.jsx(_t,{value:"live","data-testid":"tab-live",children:"Live"}),n.jsx(_t,{value:"scheduled","data-testid":"tab-scheduled",children:"Scheduled"}),n.jsx(_t,{value:"ended","data-testid":"tab-ended",children:"Ended"}),n.jsx(_t,{value:"featured","data-testid":"tab-featured",children:"Featured"})]})}),n.jsxs("div",{className:"relative max-w-md",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search by title...",value:a,onChange:F=>{o(F.target.value),s(1)},className:"pl-10","data-testid":"input-search-title"})]})]})]})}),n.jsx(ue,{children:T?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading shows..."})]}):L.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(dr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:a||l?"No shows found matching your filters":"No shows found"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{className:"min-w-[250px]",children:"Show Details"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Host"}),n.jsx(Ce,{className:"hidden lg:table-cell",children:"Viewers"}),n.jsx(Ce,{className:"hidden xl:table-cell",children:"Products"}),n.jsx(Ce,{className:"hidden xl:table-cell",children:"Orders"}),n.jsx(Ce,{className:"hidden xl:table-cell",children:"Revenue"}),n.jsx(Ce,{className:"hidden sm:table-cell",children:"Created"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{className:"text-right",children:"Actions"})]})}),n.jsx(Us,{children:L.map(F=>{var ye,B,ie,ce,oe,Z,he;const z=F._id||F.id,pe=F.createdAt?new Date(F.createdAt):null,xe=(ye=F.owner)!=null&&ye.firstName?String(F.owner.firstName):"",_e=(B=F.owner)!=null&&B.lastName?String(F.owner.lastName):"",Me=(ie=F.owner)!=null&&ie.userName?String(F.owner.userName):"",K=(ce=F.owner)!=null&&ce.email?String(F.owner.email):"",Q=(oe=F.owner)!=null&&oe.profilePhoto?String(F.owner.profilePhoto):"",se=!!F.owner;return n.jsxs(yt,{"data-testid":`row-show-${z}`,className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/admin/shows/${z}`),children:[n.jsx(ke,{className:"font-medium",children:n.jsxs("div",{className:"flex items-start gap-3",children:[F.preview_videos?n.jsx("video",{src:F.preview_videos,className:"w-16 h-16 rounded object-cover flex-shrink-0",muted:!0,playsInline:!0,"data-testid":`video-show-preview-${z}`}):F.thumbnail?n.jsx("img",{src:F.thumbnail,alt:F.title||"Show",className:"w-16 h-16 rounded object-cover flex-shrink-0"}):null,n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-medium truncate","data-testid":`text-title-${z}`,children:String(F.title||F.name||"Untitled Show")}),n.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[F.roomType&&n.jsx(Ye,{variant:"outline",className:"text-xs",children:String(F.roomType)}),((Z=F.category)==null?void 0:Z.name)&&n.jsx(Ye,{variant:"secondary",className:"text-xs",children:String(F.category.name)})]}),F.description&&typeof F.description=="string"&&n.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:F.description}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 md:hidden",children:[n.jsx(fo,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs text-muted-foreground truncate",children:se&&(xe||Me)||"Unknown Host"})]})]})]})}),n.jsx(ke,{className:"hidden md:table-cell",children:se?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Or,{className:"h-8 w-8 flex-shrink-0",children:[n.jsx(Dr,{src:Q}),n.jsxs(Mr,{children:[(xe||"U")[0],(_e||"H")[0]]})]}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"text-sm font-medium truncate",children:[xe," ",_e]}),n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:K})]})]}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"No host"})}),n.jsx(ke,{className:"hidden lg:table-cell","data-testid":`text-viewers-${z}`,children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(cn,{className:"h-4 w-4 text-muted-foreground"}),Array.isArray(F.viewers)?F.viewers.length:0]})}),n.jsx(ke,{className:"hidden xl:table-cell","data-testid":`text-products-${z}`,children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:F.productsCount||((he=F.products)==null?void 0:he.length)||0})]})}),n.jsx(ke,{className:"hidden xl:table-cell","data-testid":`text-orders-${z}`,children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(cr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:F.salesCount||F.ordersCount||0})]})}),n.jsx(ke,{className:"hidden xl:table-cell","data-testid":`text-revenue-${z}`,children:n.jsxs("div",{className:"flex items-center gap-1 text-green-600 font-medium",children:[n.jsx(zn,{className:"h-4 w-4"}),n.jsx("span",{children:(F.salesTotal||F.totalRevenue||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]})}),n.jsx(ke,{className:"hidden sm:table-cell",children:pe?pe.toLocaleDateString():"N/A"}),n.jsx(ke,{children:(()=>{let Ne="unknown";if(F.ended===!0)Ne="ended";else if(F.started===!0&&F.ended===!1)Ne="live";else if(F.started===!1&&F.ended===!1){const W=F.startDate||F.date||F.createdAt;W&&new Date(W)>new Date&&(Ne="active")}const Ke=Ne==="live",$e=Ne==="active"?"scheduled":Ne;return n.jsxs(Ye,{variant:Ke?"default":Ne==="active"?"secondary":"outline",className:Ke?"bg-green-600":"",children:[Ke&&n.jsxs("span",{className:"relative flex h-2 w-2 mr-1.5",children:[n.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),n.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),$e.charAt(0).toUpperCase()+$e.slice(1)]})})()}),n.jsx(ke,{className:"text-right",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"icon",onClick:Ne=>Ne.stopPropagation(),"data-testid":`button-actions-${z}`,children:n.jsx(ON,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:Ne=>{Ne.stopPropagation(),t(`/admin/shows/${z}`)},"data-testid":`menu-view-${z}`,children:[n.jsx(cn,{className:"mr-2 h-4 w-4"}),"View Details"]}),n.jsxs(Zt,{onClick:Ne=>$(F,Ne),className:F.featured?"text-yellow-600":"","data-testid":`menu-feature-${z}`,children:[n.jsx(EU,{className:`mr-2 h-4 w-4 ${F.featured?"fill-yellow-500":""}`}),F.featured?"Update Featured":"Feature Show"]}),n.jsxs(Zt,{onClick:Ne=>X(F,Ne),className:"text-destructive focus:text-destructive","data-testid":`menu-delete-${z}`,children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Delete Show"]})]})]})})]},z)})})]})}),te&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:[n.jsxs("span",{className:"hidden sm:inline",children:["Page ",te.currentPage," of ",te.totalPages," (",te.totalItems," total shows)"]}),n.jsxs("span",{className:"sm:hidden",children:[te.currentPage," / ",te.totalPages]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Show"}),n.jsxs(Gt,{value:String(r),onValueChange:F=>{i(Number(F)),s(1)},children:[n.jsx(Bt,{className:"w-[70px] h-8","data-testid":"select-limit",children:n.jsx(Yt,{})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"10",children:"10"}),n.jsx(fe,{value:"25",children:"25"}),n.jsx(fe,{value:"50",children:"50"}),n.jsx(fe,{value:"100",children:"100"})]})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>s(e-1),disabled:!te.hasPrevPage,"data-testid":"button-prev-page",children:[n.jsx(oi,{className:"h-4 w-4 sm:mr-1"}),n.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>s(e+1),disabled:!te.hasNextPage,"data-testid":"button-next-page",children:[n.jsx("span",{className:"hidden sm:inline",children:"Next"}),n.jsx(Vn,{className:"h-4 w-4 sm:ml-1"})]})]})]})]})})]})]}),n.jsx(ys,{open:d,onOpenChange:u,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Feature Show"}),n.jsx(Ls,{children:"Set this show as featured. Optionally set an expiration date for the featured status."})]}),n.jsx("div",{className:"py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{className:"text-sm font-medium",children:"Show"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(f==null?void 0:f.title)||(f==null?void 0:f.name)||"Untitled Show"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{className:"text-sm font-medium",children:"Featured Until (Optional)"}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:"w-full justify-start text-left font-normal","data-testid":"button-date-picker",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),x?It(x,"PPP"):"No expiration date"]})}),n.jsx(pa,{className:"w-auto p-0 z-[9999]",align:"start",children:n.jsx(fa,{mode:"single",selected:x,onSelect:g,initialFocus:!0,disabled:F=>F<new Date})})]}),x&&n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>g(void 0),className:"text-xs","data-testid":"button-clear-date",children:"Clear date"})]})]})}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>u(!1),"data-testid":"button-cancel-feature",children:"Cancel"}),n.jsx(G,{onClick:U,disabled:D.isPending,"data-testid":"button-confirm-feature",children:D.isPending?"Saving...":"Feature Show"})]})]})}),n.jsx(Ca,{open:y,onOpenChange:w,children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Show"}),n.jsxs(Fi,{children:['Are you sure you want to delete "',(b==null?void 0:b.title)||(b==null?void 0:b.name)||"this show",'"? This action cannot be undone and will permanently remove the show and all associated data.']})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx($i,{onClick:J,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:M.isPending,"data-testid":"button-confirm-delete",children:M.isPending?"Deleting...":"Delete Show"})]})]})})]})}function cre(){var _e,Me,K,Q,se,ye;const[,t]=Ds(),[,e]=Uc("/admin/shows/:showId"),s=e==null?void 0:e.showId,[r,i]=p.useState("overview"),[a,o]=p.useState(1),l=15,[c,d]=p.useState(!1),[u,f]=p.useState(null),{data:h,isLoading:x}=Ve({queryKey:[`admin-show-${s}`],queryFn:async()=>{const B=await fetch(`/api/admin/shows/${s}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch show");const ie=await B.json();return ie.success?ie.data:ie},enabled:!!s}),{data:g,isLoading:y}=Ve({queryKey:[`admin-show-${s}-auctions`],queryFn:async()=>{const B=await fetch(`/api/admin/shows/${s}/auctions?page=1&limit=15`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch auctions");return await B.json()},enabled:!!s&&r==="auctions"}),{data:w,isLoading:b}=Ve({queryKey:[`admin-show-${s}-giveaways`],queryFn:async()=>{const B=await fetch(`/api/admin/shows/${s}/giveaways?page=1&limit=20`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch giveaways");return await B.json()},enabled:!!s&&r==="giveaways"}),{data:v,isLoading:N}=Ve({queryKey:[`admin-show-${s}-buy-now`],queryFn:async()=>{const B=await fetch(`/api/admin/shows/${s}/buy-now?page=1&limit=15`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch buy now items");return await B.json()},enabled:!!s&&r==="buy-now"}),{data:C,isLoading:_}=Ve({queryKey:[`admin-show-${s}-sold`,a],queryFn:async()=>{const B=await fetch(`/api/orders/items/all?tokshow=${s}&page=${a}&limit=${l}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch sold items");return await B.json()},enabled:!!s&&r==="sold"}),T=(h==null?void 0:h.data)||h,j=B=>B?new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";if(x)return n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading show details..."})]})})});if(!T)return n.jsx(Ze,{children:n.jsx("div",{className:"p-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(dr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Show not found"}),n.jsx(G,{onClick:()=>t("/admin/shows"),className:"mt-4","data-testid":"button-back-to-shows",children:"Back to Shows"})]})})});const S=(_e=T.owner)!=null&&_e.firstName?String(T.owner.firstName):"",A=(Me=T.owner)!=null&&Me.lastName?String(T.owner.lastName):"",I=(K=T.owner)!=null&&K.userName?String(T.owner.userName):"",P=(Q=T.owner)!=null&&Q.email?String(T.owner.email):"",O=(se=T.owner)!=null&&se.profilePhoto?String(T.owner.profilePhoto):"",D=!!T.owner;let M="unknown";if(T.ended===!0)M="ended";else if(T.started===!0&&T.ended===!1)M="live";else if(T.started===!1&&T.ended===!1){const B=T.startDate||T.date||T.createdAt;B&&new Date(B)>new Date&&(M="active")}const J=M==="live",X=T.activeauction,U=T.pinnedobject,$=(X==null?void 0:X.bids)||[],L=(g==null?void 0:g.data)||[],te=(w==null?void 0:w.data)||[],F=(v==null?void 0:v.data)||[],z=(C==null?void 0:C.items)||(C==null?void 0:C.data)||[],pe=(C==null?void 0:C.totalPages)||1,xe=(C==null?void 0:C.totalDocuments)||z.length;return n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs(G,{variant:"ghost",onClick:()=>t("/admin/shows"),className:"mb-4","data-testid":"button-back-to-shows",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Shows"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground","data-testid":"text-show-title",children:String(T.title||T.name||"Untitled Show")}),n.jsx("p",{className:"text-muted-foreground",children:"Show Details"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(Ye,{variant:J?"default":M==="active"?"secondary":"outline",className:J?"bg-green-600":"",children:[J&&n.jsxs("span",{className:"relative flex h-2 w-2 mr-1.5",children:[n.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),n.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),M==="active"?"Scheduled":M.charAt(0).toUpperCase()+M.slice(1)]})})]})]}),n.jsxs(Vi,{value:r,onValueChange:i,className:"space-y-6",children:[n.jsx("div",{className:"w-full overflow-x-auto pb-2",children:n.jsxs(li,{className:"inline-flex w-full min-w-max sm:w-full sm:min-w-0 sm:grid sm:grid-cols-3 lg:grid-cols-5",children:[n.jsx(_t,{value:"overview","data-testid":"tab-overview",className:"flex-shrink-0 sm:flex-shrink",children:"Overview"}),n.jsxs(_t,{value:"auctions","data-testid":"tab-auctions",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(X0,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Auctions"]}),n.jsxs(_t,{value:"giveaways","data-testid":"tab-giveaways",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(ji,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Giveaways"]}),n.jsxs(_t,{value:"buy-now","data-testid":"tab-buy-now",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(cr,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Buy Now"]}),n.jsxs(_t,{value:"sold","data-testid":"tab-sold",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(hs,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Sold"]})]})}),n.jsxs(Ft,{value:"overview",className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-xs font-medium",children:"Viewers"}),n.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-viewers",children:Array.isArray(T.viewers)?T.viewers.length:0})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-xs font-medium",children:"Sales"}),n.jsx(cr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-sales",children:T.salesCount||0})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-xs font-medium",children:"Revenue"}),n.jsx(wv,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsxs("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-revenue",children:["$",(T.salesTotal||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-xs font-medium",children:"Giveaways"}),n.jsx(ji,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-giveaways",children:T.giveawayCount||0})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-xs font-medium",children:"Shipments"}),n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-shipments",children:T.shipmentsCount||0})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-xs font-medium",children:"Tips"}),n.jsx(zn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsxs("div",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-tips",children:["$",(T.tipsTotal||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(dr,{className:"h-5 w-5"}),"Show Information"]})}),n.jsxs(ue,{className:"space-y-4",children:[T.preview_videos?n.jsx("video",{src:T.preview_videos,className:"w-full h-64 rounded object-cover",controls:!0,autoPlay:!0,loop:!0,muted:!0}):T.thumbnail?n.jsx("img",{src:T.thumbnail,alt:T.title||"Show",className:"w-full h-64 rounded object-cover"}):null,n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Description"}),n.jsx("p",{className:"text-foreground","data-testid":"text-show-description",children:T.description||"No description provided"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Category"}),n.jsx("p",{className:"text-foreground",children:(ye=T.category)!=null&&ye.name?String(T.category.name):"N/A"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Viewers"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(cn,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-foreground","data-testid":"text-viewer-count",children:Array.isArray(T.viewers)?T.viewers.length:0})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Created"}),n.jsx("p",{className:"text-foreground",children:j(T.createdAt)})]}),T.date&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Scheduled Date"}),n.jsx("p",{className:"text-foreground",children:j(T.date)})]})]})]})]}),$.length>0&&n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-5 w-5"}),"Bids (",$.length,")"]}),n.jsx(Fe,{children:"All bids for the active auction"})]}),n.jsx(ue,{children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Bidder"}),n.jsx(Ce,{children:"Amount"}),n.jsx(Ce,{children:"Time"})]})}),n.jsx(Us,{children:$.map((B,ie)=>{var ce,oe,Z,he,Ne,Ke;return n.jsxs(yt,{"data-testid":`row-bid-${ie}`,children:[n.jsx(ke,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Or,{className:"h-8 w-8",children:[n.jsx(Dr,{src:(ce=B.user)==null?void 0:ce.profilePhoto}),n.jsxs(Mr,{children:[(((oe=B.user)==null?void 0:oe.firstName)||"B")[0],(((Z=B.user)==null?void 0:Z.lastName)||"D")[0]]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium",children:[(he=B.user)==null?void 0:he.firstName," ",(Ne=B.user)==null?void 0:Ne.lastName]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:(Ke=B.user)==null?void 0:Ke.email})]})]})}),n.jsx(ke,{children:n.jsxs("span",{className:"font-bold text-green-600","data-testid":`text-bid-amount-${ie}`,children:["$",B.amount||0]})}),n.jsx(ke,{className:"text-muted-foreground",children:j(B.createdAt)})]},B._id||ie)})})]})})})]}),U&&n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(jU,{className:"h-5 w-5"}),"Pinned Object"]}),n.jsx(Fe,{children:"Currently pinned item in the show"})]}),n.jsx(ue,{children:n.jsxs("div",{className:"flex items-start gap-4",children:[U.images&&U.images[0]&&n.jsx("img",{src:U.images[0],alt:U.name,className:"w-24 h-24 rounded object-cover flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-lg","data-testid":"text-pinned-name",children:U.name}),U.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:U.description}),n.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Price: "}),n.jsxs("span",{className:"font-bold text-foreground","data-testid":"text-pinned-price",children:["$",U.price||0]})]}),U.quantity&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Qty: "}),n.jsx("span",{className:"font-medium text-foreground",children:U.quantity})]})]})]})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(fo,{className:"h-5 w-5"}),"Host Information"]})}),n.jsx(ue,{children:D?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Or,{className:"h-12 w-12",children:[n.jsx(Dr,{src:O}),n.jsxs(Mr,{children:[(S||"U")[0],(A||"H")[0]]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium","data-testid":"text-host-name",children:[S," ",A]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",I]})]})]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs text-muted-foreground mb-1",children:"Email"}),n.jsx("p",{className:"text-sm","data-testid":"text-host-email",children:P})]}),T.owner.country&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs text-muted-foreground mb-1",children:"Country"}),n.jsx("p",{className:"text-sm",children:T.owner.country})]}),T.owner.accountType&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs text-muted-foreground mb-1",children:"Account Type"}),n.jsx(Ye,{variant:"secondary",children:T.owner.accountType})]})]})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No host information available"})})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsx(we,{children:"Quick Stats"})}),n.jsx(ue,{className:"space-y-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Viewers"}),n.jsx("span",{className:"font-bold",children:Array.isArray(T.viewers)?T.viewers.length:0})]})})]})]})]})]}),n.jsx(Ft,{value:"auctions",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(X0,{className:"h-5 w-5"}),"Auction Items (",L.length,")"]}),n.jsx(Fe,{children:"All auction products in this show"})]}),n.jsx(ue,{children:y?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading auctions..."})]}):L.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(X0,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No auction items found"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:L.map(B=>n.jsxs(de,{className:"overflow-hidden","data-testid":`card-auction-${B._id}`,children:[n.jsx("div",{className:"aspect-video relative",children:B.images&&B.images[0]?n.jsx("img",{src:B.images[0],alt:B.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:n.jsx(hs,{className:"h-8 w-8 text-muted-foreground"})})}),n.jsxs(ue,{className:"p-3",children:[n.jsx("h3",{className:"font-medium text-sm truncate","data-testid":`text-auction-name-${B._id}`,children:B.name}),n.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Price"}),n.jsxs("span",{className:"font-bold text-sm text-foreground","data-testid":`text-auction-price-${B._id}`,children:["$",B.price||0]})]}),B.status&&n.jsx(Ye,{variant:"secondary",className:"mt-1.5 text-xs",children:B.status})]})]},B._id))})})]})}),n.jsx(Ft,{value:"giveaways",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(ji,{className:"h-5 w-5"}),"Giveaway Items (",te.length,")"]}),n.jsx(Fe,{children:"All giveaway items in this show"})]}),n.jsx(ue,{children:b?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading giveaways..."})]}):te.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ji,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No giveaway items found"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:te.map(B=>n.jsxs(de,{className:"overflow-hidden","data-testid":`card-giveaway-${B._id}`,children:[n.jsx("div",{className:"aspect-video relative",children:B.images&&B.images[0]?n.jsx("img",{src:B.images[0],alt:B.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:n.jsx(ji,{className:"h-8 w-8 text-muted-foreground"})})}),n.jsxs(ue,{className:"p-3",children:[n.jsx("h3",{className:"font-medium text-sm truncate","data-testid":`text-giveaway-name-${B._id}`,children:B.name}),B.description&&n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:B.description}),B.quantity&&n.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Quantity"}),n.jsx("span",{className:"font-medium text-sm",children:B.quantity})]})]})]},B._id))})})]})}),n.jsx(Ft,{value:"buy-now",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(cr,{className:"h-5 w-5"}),"Buy Now Items (",F.length,")"]}),n.jsx(Fe,{children:"All buy now products in this show"})]}),n.jsx(ue,{children:N?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading buy now items..."})]}):F.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(cr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No buy now items found"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:F.map(B=>n.jsxs(de,{className:"overflow-hidden","data-testid":`card-buy-now-${B._id}`,children:[n.jsx("div",{className:"aspect-video relative",children:B.images&&B.images[0]?n.jsx("img",{src:B.images[0],alt:B.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:n.jsx(hs,{className:"h-8 w-8 text-muted-foreground"})})}),n.jsxs(ue,{className:"p-3",children:[n.jsx("h3",{className:"font-medium text-sm truncate","data-testid":`text-buy-now-name-${B._id}`,children:B.name}),n.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Price"}),n.jsxs("span",{className:"font-bold text-sm text-foreground","data-testid":`text-buy-now-price-${B._id}`,children:["$",B.price||0]})]}),B.quantity!==void 0&&n.jsxs("div",{className:"flex items-center justify-between mt-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Stock"}),n.jsx("span",{className:"font-medium text-sm",children:B.quantity})]}),B.status&&n.jsx(Ye,{variant:"secondary",className:"mt-1.5 text-xs",children:B.status})]})]},B._id))})})]})}),n.jsx(Ft,{value:"sold",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-5 w-5"}),"Sold Items (",xe,")"]}),n.jsx(Fe,{children:"All sold items from this show"})]}),n.jsx(ue,{children:_?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading sold items..."})]}):z.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(hs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No sold items found"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Order Ref"}),n.jsx(Ce,{children:"Product"}),n.jsx(Ce,{children:"Customer"}),n.jsx(Ce,{children:"Qty"}),n.jsx(Ce,{children:"Price"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{children:"Video"}),n.jsx(Ce,{children:"Date"})]})}),n.jsx(Us,{children:z.map(B=>{var ie,ce,oe,Z,he,Ne,Ke,$e,W,ae,ge;return n.jsxs(yt,{"data-testid":`row-sold-${B._id}`,children:[n.jsx(ke,{className:"font-mono text-sm font-medium",children:B.order_reference||"-"}),n.jsx(ke,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[((ce=(ie=B.productId)==null?void 0:ie.images)==null?void 0:ce[0])&&n.jsx("img",{src:B.productId.images[0],alt:((oe=B.productId)==null?void 0:oe.name)||"Product",className:"h-10 w-10 rounded object-cover"}),n.jsx("span",{className:"font-medium text-sm truncate max-w-[150px]",children:((Z=B.productId)==null?void 0:Z.name)||"Unknown Product"})]})}),n.jsx(ke,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[(he=B.customer)!=null&&he.profilePhoto?n.jsx("img",{src:B.customer.profilePhoto,alt:((Ne=B.customer)==null?void 0:Ne.userName)||"Customer",className:"h-6 w-6 rounded-full object-cover"}):n.jsx("div",{className:"h-6 w-6 rounded-full bg-muted flex items-center justify-center text-xs",children:((W=($e=(Ke=B.customer)==null?void 0:Ke.userName)==null?void 0:$e.charAt(0))==null?void 0:W.toUpperCase())||"?"}),n.jsx("span",{className:"text-sm",children:((ae=B.customer)==null?void 0:ae.userName)||"Unknown"})]})}),n.jsx(ke,{className:"text-center",children:B.quantity||1}),n.jsxs(ke,{className:"font-bold",children:["$",(B.price||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(ke,{children:n.jsx(Ye,{variant:B.status==="delivered"?"default":B.status==="ready_to_ship"?"outline":"secondary",className:B.status==="delivered"?"bg-green-500":B.status==="shipped"?"bg-blue-500":B.status==="ready_to_ship"?"border-primary text-primary bg-transparent":B.status==="cancelled"?"bg-red-500":"",children:((ge=B.status)==null?void 0:ge.replace(/_/g," "))||"pending"})}),n.jsx(ke,{children:B.videoReceipt?n.jsxs("button",{onClick:()=>{f(B.videoReceipt),d(!0)},className:"text-primary hover:underline flex items-center gap-1",children:[n.jsx(AC,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"View"})]}):n.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),n.jsx(ke,{className:"text-sm text-muted-foreground",children:j(B.createdAt)})]},B._id)})})]})}),pe>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",pe," (",xe," items)"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>o(B=>Math.max(1,B-1)),disabled:a<=1||_,children:[n.jsx(oi,{className:"h-4 w-4 mr-1"}),"Previous"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>o(B=>Math.min(pe,B+1)),disabled:a>=pe||_,children:["Next",n.jsx(Vn,{className:"h-4 w-4 ml-1"})]})]})]})]})})]})})]})]}),n.jsx(ys,{open:c,onOpenChange:d,children:n.jsxs(fs,{className:"max-w-3xl p-0",children:[n.jsx(ps,{className:"p-4 pb-0",children:n.jsxs(ms,{className:"flex items-center gap-2",children:[n.jsx(AC,{className:"h-5 w-5"}),"Video Receipt"]})}),n.jsx("div",{className:"p-4",children:u&&n.jsx("video",{src:u,controls:!0,autoPlay:!0,className:"w-full rounded-lg",style:{maxHeight:"70vh"},children:"Your browser does not support the video tag."})})]})})]})}function So(){const{user:t}=qi(),{data:e}=Ve({queryKey:["/api/admin/demo-mode"],enabled:!!(t!=null&&t.admin),staleTime:3e4,refetchOnWindowFocus:!0}),s=(e==null?void 0:e.demoMode)||!1,r=(t==null?void 0:t.admin)||!1,i=(t==null?void 0:t.role)==="superAdmin",a=(t==null?void 0:t.admin)&&!i;return{canCreate:!s&&r,canEdit:!s&&r,canDelete:!s&&r,canManageSettings:!s&&r,isSuperAdmin:i,isReadOnlyAdmin:a,isDemoMode:s}}function Ff(){var r;const{data:t,isLoading:e,error:s}=Ve({queryKey:["/api/config"],staleTime:1/0,gcTime:1/0,retry:3});return{externalApiUrl:((r=t==null?void 0:t.data)==null?void 0:r.externalApiUrl)||"",isLoading:e,error:s}}function su(t,e){if(!t)return"";if(t.startsWith("http://")||t.startsWith("https://"))return t;if(!e)return"";const s=t.replace(/^\//,"");return s.startsWith("images/")?`${e}/${s}`:s.startsWith("uploads/")?`${e}/${s}`:`${e}/images/category/${s}`}function dre(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),[r,i]=p.useState(!1),[a,o]=p.useState(null),[l,c]=p.useState(!1),[d,u]=p.useState(null),[f,h]=p.useState(!1),{externalApiUrl:x}=Ff(),{data:g,isLoading:y}=Ve({queryKey:["/api/settings/full"]}),w=(g==null?void 0:g.data)||g,{data:b,isLoading:v}=Ve({queryKey:["/api/themes"]}),N=(b==null?void 0:b.data)||b,C=L=>!L||L.length<8?"":`${L.substring(0,4)}${"".repeat(12)}${L.substring(L.length-4)}`,[_,T]=p.useState({app_name:"",seo_title:"",website_url:"",privacy_url:"",terms_url:"",demoMode:!1,commission:"",stripe_fee:"",extra_charges:"",referral_credit:"",referral_credit_limit:"",currency:"$",support_email:"",forceUpdate:!1,seller_auto_approve:!0,appVersion:"",androidVersion:"",iosVersion:"",ios_link:"",android_link:"",app_scheme:"",FIREBASE_API_KEY:"",firebase_auth_domain:"",firebase_project_id:"",firebase_storage_bucket:"",firebase_app_id:"",shippo_api_key:"",stripeSecretKey:"",stripepublickey:"",stripe_webhook_key:"",stripe_platform_webhook_key:"",stripe_connect_account:"",stripe_service_fee_account:"",livekit_url:"",livekit_api_key:"",livekit_api_secret:"",google_api_key:""}),[j,S]=p.useState({app_name:"",seo_title:"",slogan:"",primary_color:"",secondary_color:"",button_color:"",button_text_color:"",app_logo:"",header_logo:"",landing_page_logo:"",ios_link:"",android_link:""}),[A,I]=p.useState(!1);p.useEffect(()=>{var L,te,F,z;T({app_name:(w==null?void 0:w.app_name)||"",seo_title:(w==null?void 0:w.seo_title)||"",website_url:(w==null?void 0:w.website_url)||"",privacy_url:(w==null?void 0:w.privacy_url)||"",terms_url:(w==null?void 0:w.terms_url)||"",demoMode:(w==null?void 0:w.demoMode)||!1,commission:(w==null?void 0:w.commission)||"",stripe_fee:(w==null?void 0:w.stripe_fee)||"",extra_charges:(w==null?void 0:w.extra_charges)||"",referral_credit:(w==null?void 0:w.referral_credit)||"",referral_credit_limit:(w==null?void 0:w.referral_credit_limit)||"",currency:(w==null?void 0:w.currency)||"$",support_email:(w==null?void 0:w.support_email)||"",forceUpdate:(w==null?void 0:w.forceUpdate)||!1,seller_auto_approve:(w==null?void 0:w.seller_auto_approve)!==void 0?w.seller_auto_approve:!0,appVersion:(w==null?void 0:w.appVersion)||"",androidVersion:(w==null?void 0:w.androidVersion)||"",iosVersion:(w==null?void 0:w.iosVersion)||"",ios_link:(w==null?void 0:w.ios_link)||"",android_link:(w==null?void 0:w.android_link)||"",app_scheme:(w==null?void 0:w.app_scheme)||"",FIREBASE_API_KEY:(w==null?void 0:w.FIREBASE_API_KEY)||"",firebase_auth_domain:((L=w==null?void 0:w.firebase_config)==null?void 0:L.authDomain)||(w==null?void 0:w.firebase_auth_domain)||"",firebase_project_id:((te=w==null?void 0:w.firebase_config)==null?void 0:te.projectId)||(w==null?void 0:w.firebase_project_id)||"",firebase_storage_bucket:((F=w==null?void 0:w.firebase_config)==null?void 0:F.storageBucket)||(w==null?void 0:w.firebase_storage_bucket)||"",firebase_app_id:((z=w==null?void 0:w.firebase_config)==null?void 0:z.appId)||(w==null?void 0:w.firebase_app_id)||"",shippo_api_key:(w==null?void 0:w.shippo_api_key)||"",stripeSecretKey:(w==null?void 0:w.stripeSecretKey)||"",stripepublickey:(w==null?void 0:w.stripepublickey)||"",stripe_webhook_key:(w==null?void 0:w.stripe_webhook_key)||"",stripe_platform_webhook_key:(w==null?void 0:w.stripe_platform_webhook_key)||"",stripe_connect_account:(w==null?void 0:w.stripe_connect_account)||"",stripe_service_fee_account:(w==null?void 0:w.stripe_service_fee_account)||"",livekit_url:(w==null?void 0:w.livekit_url)||"",livekit_api_key:(w==null?void 0:w.livekit_api_key)||"",livekit_api_secret:(w==null?void 0:w.livekit_api_secret)||"",google_api_key:(w==null?void 0:w.google_api_key)||""})},[w]),p.useEffect(()=>{S({app_name:(N==null?void 0:N.app_name)||"",seo_title:(N==null?void 0:N.seo_title)||"",slogan:(N==null?void 0:N.slogan)||"",primary_color:(N==null?void 0:N.primary_color)||"FFFACC15",secondary_color:(N==null?void 0:N.secondary_color)||"FF0D9488",button_color:(N==null?void 0:N.button_color)||"FF000000",button_text_color:(N==null?void 0:N.button_text_color)||"FFFFFFFF",app_logo:(N==null?void 0:N.app_logo)||"",header_logo:(N==null?void 0:N.header_logo)||"",landing_page_logo:(N==null?void 0:N.landing_page_logo)||"",ios_link:(N==null?void 0:N.ios_link)||"",android_link:(N==null?void 0:N.android_link)||""})},[N]);const P=st({mutationFn:async L=>(await ut("POST","/api/settings",L)).json(),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/settings/full"]}),t({title:"Settings updated",description:"Platform settings have been saved successfully."}),i(!1)},onError:()=>{t({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"}),i(!1)}}),O=st({mutationFn:async L=>(await ut("POST","/api/themes",L)).json(),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/themes"]}),t({title:"Theme updated",description:"Theme settings have been saved successfully."}),I(!1)},onError:()=>{t({title:"Error",description:"Failed to update theme. Please try again.",variant:"destructive"}),I(!1)}}),D=()=>{if(!e){t({title:"Action not allowed",description:"Settings cannot be changed in demo mode",variant:"destructive"});return}i(!0),P.mutate(_)},M=()=>{if(!e){t({title:"Action not allowed",description:"Settings cannot be changed in demo mode",variant:"destructive"});return}I(!0),O.mutate(j)},J=(L,te)=>{T(F=>({...F,[L]:te}))},X=(L,te)=>{S(F=>({...F,[L]:te}))},U=async L=>{var te,F;c(!0);try{const z=new FormData;z.append("logo",L);const xe=await(await fetch("/api/themes/upload-logo",{method:"POST",body:z})).json();if(console.log("Logo upload response:",xe),xe.success){const _e=((te=xe.data)==null?void 0:te.logo_url)||((F=xe.data)==null?void 0:F.app_logo)||(typeof xe.data=="string"?xe.data:null);console.log("Extracted logo URL:",_e),_e&&S(K=>({...K,app_logo:_e})),o(null);const Me=document.getElementById("app_logo");Me&&(Me.value=""),t({title:"Logo uploaded",description:"App logo has been uploaded. Click 'Save Theme Settings' to apply the change."})}else throw new Error(xe.error||"Upload failed")}catch(z){t({title:"Upload failed",description:z.message||"Failed to upload logo. Please try again.",variant:"destructive"})}finally{c(!1)}},$=async L=>{var te,F;h(!0);try{const z=new FormData;z.append("logo",L);const xe=await(await fetch("/api/themes/upload-landing-logo",{method:"POST",body:z})).json();if(console.log("Landing logo upload response:",xe),xe.success){const _e=((te=xe.data)==null?void 0:te.logo_url)||((F=xe.data)==null?void 0:F.landing_page_logo)||(typeof xe.data=="string"?xe.data:null);console.log("Extracted landing logo URL:",_e),_e&&S(K=>({...K,landing_page_logo:_e})),u(null);const Me=document.getElementById("landing_page_logo");Me&&(Me.value=""),t({title:"Logo uploaded",description:"Landing page logo has been uploaded. Click 'Save Theme Settings' to apply the change."})}else throw new Error(xe.error||"Upload failed")}catch(z){t({title:"Upload failed",description:z.message||"Failed to upload landing page logo. Please try again.",variant:"destructive"})}finally{h(!1)}};return y?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading settings..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Platform Settings"}),n.jsx("p",{className:"text-muted-foreground",children:"Configure platform settings and preferences"})]}),n.jsx(G,{onClick:D,disabled:r||!e,"data-testid":"button-save-settings",children:r?"Saving...":s?"Demo Mode - Read Only":"Save Changes"})]}),s&&n.jsxs(Xs,{className:"mb-6",children:[n.jsx(fj,{className:"h-4 w-4"}),n.jsx(Js,{children:"Demo mode is active. All settings are read-only and cannot be modified."})]}),n.jsxs(Vi,{defaultValue:"general",className:"space-y-6",children:[n.jsx("div",{className:"w-full overflow-x-auto pb-2",children:n.jsxs(li,{className:"inline-flex w-full min-w-max sm:w-full sm:min-w-0 sm:grid sm:grid-cols-3 lg:grid-cols-6",children:[n.jsxs(_t,{value:"general","data-testid":"tab-general",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(dm,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"General"]}),n.jsxs(_t,{value:"payment","data-testid":"tab-payment",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(zn,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Payment"]}),n.jsxs(_t,{value:"theme","data-testid":"tab-theme",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(bU,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Theme"]}),n.jsxs(_t,{value:"api-keys","data-testid":"tab-api-keys",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(fU,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"API & Integrations"]}),n.jsxs(_t,{value:"app-versions","data-testid":"tab-app-versions",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(SI,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"App Versions"]}),n.jsxs(_t,{value:"translations","data-testid":"tab-translations",className:"flex-shrink-0 sm:flex-shrink",children:[n.jsx(pU,{className:"h-4 w-4 mr-2 hidden sm:inline"}),"Translations"]})]})}),n.jsxs(Ft,{value:"general",className:"space-y-6",children:[n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"General Settings"}),n.jsx(Fe,{children:"Basic platform configuration"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"support_email",children:"Support Email"}),n.jsx(le,{id:"support_email",type:"email",value:_.support_email,onChange:L=>J("support_email",L.target.value),placeholder:"support@example.com","data-testid":"input-support-email"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"currency",children:"Currency Symbol"}),n.jsx(le,{id:"currency",value:_.currency,onChange:L=>J("currency",L.target.value),placeholder:"$","data-testid":"input-currency"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"commission",children:"Platform Commission (%)"}),n.jsx(le,{id:"commission",type:"number",value:_.commission,onChange:L=>J("commission",L.target.value),placeholder:"5","data-testid":"input-commission"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Commission percentage charged on transactions"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"stripe_fee",children:"Stripe Fee (%)"}),n.jsx(le,{id:"stripe_fee",type:"number",step:"0.01",value:_.stripe_fee,onChange:L=>J("stripe_fee",L.target.value),placeholder:"2.9","data-testid":"input-stripe-fee"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Stripe processing fee percentage"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"extra_charges",children:"Extra Charges (Fixed)"}),n.jsx(le,{id:"extra_charges",type:"number",step:"0.01",value:_.extra_charges,onChange:L=>J("extra_charges",L.target.value),placeholder:"0.30","data-testid":"input-extra-charges"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Fixed additional charges per transaction"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"referral_credit",children:"Referral Credit ($)"}),n.jsx(le,{id:"referral_credit",type:"number",step:"0.01",value:_.referral_credit,onChange:L=>J("referral_credit",L.target.value),placeholder:"15","data-testid":"input-referral-credit"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Credit amount given to referred users"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"referral_credit_limit",children:"Referral Credit Limit ($)"}),n.jsx(le,{id:"referral_credit_limit",type:"number",step:"0.01",value:_.referral_credit_limit,onChange:L=>J("referral_credit_limit",L.target.value),placeholder:"25","data-testid":"input-referral-credit-limit"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum order amount to apply the referral credit"})]})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Seller Approval Workflow"}),n.jsx(Fe,{children:"Control how users become sellers on your platform"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5 flex-1",children:[n.jsx(re,{htmlFor:"seller-auto-approve",children:"Automatic Seller Approval"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, users can become sellers automatically without admin approval. When disabled, admin must manually approve all seller applications."})]}),n.jsx(il,{id:"seller-auto-approve",checked:_.seller_auto_approve,onCheckedChange:L=>J("seller_auto_approve",L),"data-testid":"switch-seller-auto-approve"})]}),n.jsxs(Xs,{children:[n.jsx(wc,{className:"h-4 w-4"}),n.jsx(Js,{children:_.seller_auto_approve?n.jsxs(n.Fragment,{children:["Automatic approval is ",n.jsx("strong",{children:"enabled"}),". Users will become sellers immediately after applying."]}):n.jsxs(n.Fragment,{children:["Manual approval is ",n.jsx("strong",{children:"required"}),". Admins must review and approve seller applications in the Users section."]})})]})]})]})]}),n.jsx(Ft,{value:"payment",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Stripe Integration"}),n.jsx(Fe,{children:"Stripe payment gateway configuration"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"stripepublickey",children:"Stripe Publishable Key"}),n.jsx(le,{id:"stripepublickey",value:j.demoMode?C(_.stripepublickey):_.stripepublickey,onChange:L=>J("stripepublickey",L.target.value),placeholder:"pk_test_...","data-testid":"input-stripe-public-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"stripeSecretKey",children:"Stripe Secret Key"}),n.jsx(le,{id:"stripeSecretKey",type:j.demoMode?"text":"password",value:j.demoMode?C(_.stripeSecretKey):_.stripeSecretKey,onChange:L=>J("stripeSecretKey",L.target.value),placeholder:"sk_test_...","data-testid":"input-stripe-secret-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Keep this key secret and secure"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"stripe_webhook_key",children:"Stripe Webhook Secret"}),n.jsx(le,{id:"stripe_webhook_key",type:j.demoMode?"text":"password",value:j.demoMode?C(_.stripe_webhook_key):_.stripe_webhook_key,onChange:L=>J("stripe_webhook_key",L.target.value),placeholder:"whsec_...","data-testid":"input-stripe-webhook-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for verifying webhook events from Stripe Connected Account"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"stripe_platform_webhook_key",children:"Stripe Platform Webhook Key"}),n.jsx(le,{id:"stripe_platform_webhook_key",type:j.demoMode?"text":"password",value:j.demoMode?C(_.stripe_platform_webhook_key):_.stripe_platform_webhook_key,onChange:L=>J("stripe_platform_webhook_key",L.target.value),placeholder:"whsec_...","data-testid":"input-stripe-platform-webhook-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for verifying webhook events from Stripe Platform"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"stripe_connect_account",children:"Stripe Connect Account (Shipping Fees)"}),n.jsx(le,{id:"stripe_connect_account",value:_.stripe_connect_account,onChange:L=>J("stripe_connect_account",L.target.value),placeholder:"acct_...","data-testid":"input-stripe-connect-account",readOnly:j.demoMode,disabled:j.demoMode}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Stripe Connect account ID to receive shipping fees"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"stripe_service_fee_account",children:"Stripe Connect Account (Service Fees)"}),n.jsx(le,{id:"stripe_service_fee_account",value:_.stripe_service_fee_account,onChange:L=>J("stripe_service_fee_account",L.target.value),placeholder:"acct_...","data-testid":"input-stripe-service-fee-account",readOnly:j.demoMode,disabled:j.demoMode}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Stripe Connect account ID to receive service fees"})]})]})]})}),n.jsxs(Ft,{value:"theme",className:"space-y-6",children:[n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Branding"}),n.jsx(Fe,{children:"Configure your app name, logo and slogan"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"app_name",children:"App Name"}),n.jsx(le,{id:"app_name",value:j.app_name,onChange:L=>X("app_name",L.target.value),placeholder:"Your App Name","data-testid":"input-app-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"seo_title",children:"SEO Title"}),n.jsx(le,{id:"seo_title",value:j.seo_title,onChange:L=>X("seo_title",L.target.value),placeholder:"Browser title (defaults to App Name if empty)","data-testid":"input-seo-title"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This will appear in the browser tab. If empty, the app name will be used."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"app_logo",children:"App Logo"}),n.jsxs("div",{className:"flex items-start gap-4",children:[j.app_logo&&n.jsx("div",{className:"flex-shrink-0",children:(()=>{const L=j.app_logo.startsWith("http")?j.app_logo:`${x}/${j.app_logo.replace(/^\//,"")}`;return console.log("Logo preview URL:",L,"from:",j.app_logo,"baseUrl:",x),n.jsx("img",{src:L,alt:"App Logo",className:"h-20 w-20 object-contain rounded border border-border bg-muted p-2",onError:te=>{console.log("Logo image failed to load:",L),te.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="%23666">Logo</text></svg>'}})})()}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{id:"app_logo",type:"file",accept:"image/*",onChange:L=>{var F;const te=(F=L.target.files)==null?void 0:F[0];te&&o(te)},"data-testid":"input-app-logo",className:"cursor-pointer flex-1"}),n.jsx(G,{type:"button",onClick:()=>{a?U(a):t({title:"No file selected",description:"Please select a logo file first.",variant:"destructive"})},disabled:!a||l,"data-testid":"button-upload-logo",children:l?"Uploading...":"Upload"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a logo file and click Upload (PNG, JPG, or SVG recommended)"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"landing_page_logo",children:"Landing Page Logo"}),n.jsxs("div",{className:"flex items-start gap-4",children:[j.landing_page_logo&&n.jsx("div",{className:"flex-shrink-0",children:(()=>{const L=j.landing_page_logo.startsWith("http")?j.landing_page_logo:`${x}/${j.landing_page_logo.replace(/^\//,"")}`;return n.jsx("img",{src:L,alt:"Landing Page Logo",className:"h-20 w-20 object-contain rounded border border-border bg-muted p-2",onError:te=>{te.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="%23666">Logo</text></svg>'}})})()}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{id:"landing_page_logo",type:"file",accept:"image/*",onChange:L=>{var F;const te=(F=L.target.files)==null?void 0:F[0];te&&u(te)},"data-testid":"input-landing-page-logo",className:"cursor-pointer flex-1"}),n.jsx(G,{type:"button",onClick:()=>{d?$(d):t({title:"No file selected",description:"Please select a logo file first.",variant:"destructive"})},disabled:!d||f,"data-testid":"button-upload-landing-logo",children:f?"Uploading...":"Upload"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Logo displayed on the landing page (PNG, JPG, or SVG recommended)"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"slogan",children:"Slogan"}),n.jsx(le,{id:"slogan",value:j.slogan,onChange:L=>X("slogan",L.target.value),placeholder:"Your app tagline or slogan","data-testid":"input-slogan"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"A short tagline that appears with your brand"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"website_url",children:"Website URL"}),n.jsx(le,{id:"website_url",type:"url",value:_.website_url,onChange:L=>J("website_url",L.target.value),placeholder:"https://yourwebsite.com","data-testid":"input-website-url"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Your main website URL"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"App Theme Colors"}),n.jsx(Fe,{children:"Configure colors for your mobile app"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"primary_color_theme",children:"Primary Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-12 h-10 rounded border border-border flex-shrink-0",style:{backgroundColor:j.primary_color?`#${j.primary_color.slice(-6)}`:"#FACC15"}}),n.jsx(le,{id:"primary_color_theme",value:j.primary_color,onChange:L=>X("primary_color",L.target.value.toUpperCase()),placeholder:"FFFACC15","data-testid":"input-primary-color-theme",maxLength:8})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: AARRGGBB (e.g., FFFACC15 for yellow)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"secondary_color_theme",children:"Secondary Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-12 h-10 rounded border border-border flex-shrink-0",style:{backgroundColor:j.secondary_color?`#${j.secondary_color.slice(-6)}`:"#0D9488"}}),n.jsx(le,{id:"secondary_color_theme",value:j.secondary_color,onChange:L=>X("secondary_color",L.target.value.toUpperCase()),placeholder:"FF0D9488","data-testid":"input-secondary-color-theme",maxLength:8})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: AARRGGBB (e.g., FF0D9488 for teal)"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"button_color",children:"Button Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-12 h-10 rounded border border-border flex-shrink-0",style:{backgroundColor:j.button_color?`#${j.button_color.slice(-6)}`:"#000000"}}),n.jsx(le,{id:"button_color",value:j.button_color,onChange:L=>X("button_color",L.target.value.toUpperCase()),placeholder:"FF000000","data-testid":"input-button-color",maxLength:8})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: AARRGGBB (e.g., FF000000 for black)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"button_text_color",children:"Button Text Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-12 h-10 rounded border border-border flex-shrink-0",style:{backgroundColor:j.button_text_color?`#${j.button_text_color.slice(-6)}`:"#FFFFFF"}}),n.jsx(le,{id:"button_text_color",value:j.button_text_color,onChange:L=>X("button_text_color",L.target.value.toUpperCase()),placeholder:"FFFFFFFF","data-testid":"input-button-text-color",maxLength:8})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: AARRGGBB (e.g., FFFFFFFF for white)"})]})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Legal Links"}),n.jsx(Fe,{children:"Privacy policy and terms of service URLs"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"privacy_url",children:"Privacy Policy URL"}),n.jsx(le,{id:"privacy_url",type:"url",value:_.privacy_url,onChange:L=>J("privacy_url",L.target.value),placeholder:"https://example.com/privacy","data-testid":"input-privacy-url"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"terms_url",children:"Terms of Service URL"}),n.jsx(le,{id:"terms_url",type:"url",value:_.terms_url,onChange:L=>J("terms_url",L.target.value),placeholder:"https://example.com/terms","data-testid":"input-terms-url"})]})]})]}),!_.demoMode&&n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Demo Mode"}),n.jsx(Fe,{children:"Control whether CRUD operations are allowed on the platform"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5 flex-1",children:[n.jsx(re,{htmlFor:"demo-mode",children:"Enable Demo Mode"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, all create, update, and delete operations will be disabled for everyone (including super admins). Perfect for protecting demo environments from modifications."})]}),n.jsx(il,{id:"demo-mode",checked:_.demoMode,onCheckedChange:L=>J("demoMode",L),"data-testid":"switch-demo-mode"})]}),_.demoMode&&n.jsxs(Xs,{children:[n.jsx(fj,{className:"h-4 w-4"}),n.jsxs(Js,{children:["Demo mode is currently ",n.jsx("strong",{children:"enabled"}),". All CRUD operations are disabled across the platform."]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(G,{onClick:M,disabled:A||!e,"data-testid":"button-save-theme",children:A?"Saving...":"Save Theme Settings"})})]}),n.jsxs(Ft,{value:"api-keys",className:"space-y-6",children:[n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Firebase Configuration"}),n.jsx(Fe,{children:"Configure Firebase for authentication and storage (web apps)"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs(Xs,{children:[n.jsx(wc,{className:"h-4 w-4"}),n.jsx(Js,{children:"These settings configure Firebase for your applications. Get these values from your Firebase Console  Project Settings  General  Your apps."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"firebase_auth_domain",children:"Firebase Auth Domain"}),n.jsx(le,{id:"firebase_auth_domain",value:_.firebase_auth_domain,onChange:L=>J("firebase_auth_domain",L.target.value),placeholder:"your-project.firebaseapp.com","data-testid":"input-firebase-auth-domain",readOnly:j.demoMode,disabled:j.demoMode})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"firebase_project_id",children:"Firebase Project ID"}),n.jsx(le,{id:"firebase_project_id",value:_.firebase_project_id,onChange:L=>J("firebase_project_id",L.target.value),placeholder:"your-project-id","data-testid":"input-firebase-project-id",readOnly:j.demoMode,disabled:j.demoMode})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"firebase_storage_bucket",children:"Firebase Storage Bucket"}),n.jsx(le,{id:"firebase_storage_bucket",value:_.firebase_storage_bucket,onChange:L=>J("firebase_storage_bucket",L.target.value),placeholder:"your-project.appspot.com","data-testid":"input-firebase-storage-bucket",readOnly:j.demoMode,disabled:j.demoMode})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"firebase_app_id",children:"Firebase App ID"}),n.jsx(le,{id:"firebase_app_id",type:j.demoMode?"text":"password",value:j.demoMode?C(_.firebase_app_id):_.firebase_app_id,onChange:L=>J("firebase_app_id",L.target.value),placeholder:"1:123456789:web:abc123def456","data-testid":"input-firebase-app-id",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Keep this App ID secure"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"FIREBASE_API_KEY",children:"Firebase API Key"}),n.jsx(le,{id:"FIREBASE_API_KEY",type:j.demoMode?"text":"password",value:j.demoMode?C(_.FIREBASE_API_KEY):_.FIREBASE_API_KEY,onChange:L=>J("FIREBASE_API_KEY",L.target.value),placeholder:"AIza...","data-testid":"input-firebase-api-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"API key for Firebase authentication and storage"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"LiveKit Integration"}),n.jsx(Fe,{children:"Live streaming platform configuration"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"livekit_url",children:"LiveKit URL"}),n.jsx(le,{id:"livekit_url",value:_.livekit_url,onChange:L=>J("livekit_url",L.target.value),placeholder:"wss://your-livekit-url.com","data-testid":"input-livekit-url"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"livekit_api_key",children:"LiveKit API Key"}),n.jsx(le,{id:"livekit_api_key",type:j.demoMode?"text":"password",value:j.demoMode?C(_.livekit_api_key):_.livekit_api_key,onChange:L=>J("livekit_api_key",L.target.value),placeholder:"API...","data-testid":"input-livekit-api-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"livekit_api_secret",children:"LiveKit API Secret"}),n.jsx(le,{id:"livekit_api_secret",type:j.demoMode?"text":"password",value:j.demoMode?C(_.livekit_api_secret):_.livekit_api_secret,onChange:L=>J("livekit_api_secret",L.target.value),placeholder:"Secret...","data-testid":"input-livekit-api-secret",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"LiveKit credentials for video streaming"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Other API Keys"}),n.jsx(Fe,{children:"Additional third-party service keys"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"shippo_api_key",children:"Shippo API Key"}),n.jsx(le,{id:"shippo_api_key",type:j.demoMode?"text":"password",value:j.demoMode?C(_.shippo_api_key):_.shippo_api_key,onChange:L=>J("shippo_api_key",L.target.value),placeholder:"shippo_...","data-testid":"input-shippo-api-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for shipping label generation"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"google_api_key",children:"Google API Key"}),n.jsx(le,{id:"google_api_key",type:j.demoMode?"text":"password",value:j.demoMode?C(_.google_api_key):_.google_api_key,onChange:L=>J("google_api_key",L.target.value),placeholder:"AIza...","data-testid":"input-google-api-key",readOnly:j.demoMode,disabled:j.demoMode,onCopy:L=>j.demoMode&&L.preventDefault(),onCut:L=>j.demoMode&&L.preventDefault(),onPaste:L=>j.demoMode&&L.preventDefault(),className:j.demoMode?"select-none cursor-not-allowed opacity-60":""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for Google services (Maps, Places, etc.)"})]})]})]})]}),n.jsx(Ft,{value:"app-versions",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"App Version Management"}),n.jsx(Fe,{children:"Manage mobile app version numbers"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"appVersion",children:"App Version"}),n.jsx(le,{id:"appVersion",value:_.appVersion,onChange:L=>J("appVersion",L.target.value),placeholder:"1.0.0","data-testid":"input-app-version"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"androidVersion",children:"Android Version"}),n.jsx(le,{id:"androidVersion",value:_.androidVersion,onChange:L=>J("androidVersion",L.target.value),placeholder:"1.0.0","data-testid":"input-android-version"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"iosVersion",children:"iOS Version"}),n.jsx(le,{id:"iosVersion",value:_.iosVersion,onChange:L=>J("iosVersion",L.target.value),placeholder:"1.0.0","data-testid":"input-ios-version"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"android_link",children:"Android App URL (Play Store)"}),n.jsx(le,{id:"android_link",value:_.android_link,onChange:L=>J("android_link",L.target.value),placeholder:"https://play.google.com/store/apps/details?id=...","data-testid":"input-android-link"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"ios_link",children:"iOS App URL (App Store)"}),n.jsx(le,{id:"ios_link",value:_.ios_link,onChange:L=>J("ios_link",L.target.value),placeholder:"https://apps.apple.com/app/...","data-testid":"input-ios-link"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"app_scheme",children:"Deep Link Scheme"}),n.jsx(le,{id:"app_scheme",value:_.app_scheme,onChange:L=>J("app_scheme",L.target.value),placeholder:"myapp://","data-testid":"input-app-scheme"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The URL scheme for deep linking into the mobile app (e.g., myapp://). Used when redirecting users from web to the native app."})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(il,{id:"forceUpdate",checked:_.forceUpdate,onCheckedChange:L=>J("forceUpdate",L),"data-testid":"switch-force-update"}),n.jsx(re,{htmlFor:"forceUpdate",className:"cursor-pointer",children:"Force App Update"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, users will be required to update the app to continue using it"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"These version numbers are used with the Force Update feature"})]}),n.jsx(__,{children:n.jsxs(G,{onClick:async()=>{if(!e){t({variant:"destructive",title:"Permission Denied",description:"You do not have permission to manage settings"});return}P.mutate(_)},disabled:P.isPending,"data-testid":"save-app-versions",children:[P.isPending&&n.jsx(dn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save App Version Settings"]})})]})}),n.jsx(Ft,{value:"translations",className:"space-y-6",children:n.jsx(ure,{})})]})]})})}function ure(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),[r,i]=p.useState("en"),[a,o]=p.useState(""),[l,c]=p.useState(!1),[d,u]=p.useState(!1),[f,h]=p.useState(""),x=p.useRef(!1),{data:g,isLoading:y}=Ve({queryKey:["/api/admin/translations"]}),w=(g==null?void 0:g.data)||{},b=w.translations||w,v=w.version,N=w.default_language,[C,_]=p.useState({}),T=Object.keys(C);p.useEffect(()=>{b&&Object.keys(b).length>0&&Object.keys(C).length===0&&_(b)},[b,C]),p.useEffect(()=>{!x.current&&N?(h(N),x.current=!0):!x.current&&T.length>0&&!f&&(h(T[0]),x.current=!0)},[N,T,f]);const j=Array.from(new Set(Object.values(C).flatMap(M=>Object.keys(M)))).sort(),S=()=>{if(!a||a.length!==2){t({title:"Invalid language code",description:"Language code must be exactly 2 characters (e.g., 'es', 'fr')",variant:"destructive"});return}if(T.includes(a)){t({title:"Language already exists",description:`Language '${a}' is already configured`,variant:"destructive"});return}if(T.length===0){const M={app_name:"",hi:"",home:"",profile:"",settings:""};_({[a]:M})}else{const M=b.en||b[T[0]]||{},J={};Object.keys(M).forEach(X=>{J[X]=""}),_(X=>({...X,[a]:J}))}i(a),o(""),c(!1),t({title:"Language added",description:`Language '${a}' has been added. ${T.length===0?"Add your translation keys and":"Fill in the translations and"} save.`})},A=M=>{if(M==="en"){t({title:"Cannot delete English",description:"English is the default language and cannot be deleted",variant:"destructive"});return}const J={...C};delete J[M],_(J),r===M&&i("en"),t({title:"Language removed",description:`Language '${M}' has been removed. Click Save to apply changes.`})},I=(M,J)=>{_(X=>({...X,[r]:{...X[r],[M]:J}}))},P=async()=>{if(!e){t({title:"Action not allowed",description:"Settings cannot be changed in demo mode",variant:"destructive"});return}u(!0);try{if(!(await ut("POST","/api/admin/translations",{translations:C,default_language:f})).ok)throw new Error("Failed to save translations");We.invalidateQueries({queryKey:["/api/admin/translations"]}),t({title:"Translations saved",description:"All translations have been saved successfully"})}catch(M){t({title:"Error",description:M.message||"Failed to save translations",variant:"destructive"})}finally{u(!1)}},O=async()=>{try{const M=await fetch("/api/admin/translations/download",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!M.ok)throw new Error("Failed to download translations");const J=await M.blob(),X=window.URL.createObjectURL(J),U=document.createElement("a");U.href=X,U.download="translations.xml",document.body.appendChild(U),U.click(),window.URL.revokeObjectURL(X),document.body.removeChild(U),t({title:"Download started",description:"Your translations XML file is downloading"})}catch(M){t({title:"Error",description:M.message||"Failed to download translations",variant:"destructive"})}},D=async M=>{var X;const J=(X=M.target.files)==null?void 0:X[0];if(J){if(!J.name.endsWith(".xml")){t({title:"Invalid file",description:"Please upload an XML file",variant:"destructive"});return}try{const U=new FormData;U.append("file",J);const $=await fetch("/api/admin/translations/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:U});if(!$.ok){const te=await $.json();throw new Error(te.error||"Failed to upload translations")}const L=await $.json();We.invalidateQueries({queryKey:["/api/admin/translations"]}),t({title:"Upload successful",description:L.message||"Translations imported successfully"}),M.target.value=""}catch(U){t({title:"Error",description:U.message||"Failed to upload translations",variant:"destructive"}),M.target.value=""}}};return y?n.jsx(de,{children:n.jsx(ue,{className:"p-8",children:n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})})}):T.length===0&&!l?n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"App Translations"}),n.jsx(Fe,{children:"No translations found. Add your first language to get started."})]}),n.jsxs(ue,{children:[n.jsxs(Xs,{className:"mb-4",children:[n.jsx(wc,{className:"h-4 w-4"}),n.jsx(Js,{children:"Start by adding English (en) as your default language, then add translation keys."})]}),n.jsxs(G,{onClick:()=>c(!0),"data-testid":"button-add-first-language",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add First Language"]}),l&&n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(le,{placeholder:"Code (e.g., en)",value:a,onChange:M=>o(M.target.value.toLowerCase()),maxLength:2,className:"w-32","data-testid":"input-new-language"}),n.jsx(G,{onClick:S,size:"sm","data-testid":"button-confirm-add",children:"Add"}),n.jsx(G,{onClick:()=>{c(!1),o("")},size:"sm",variant:"ghost","data-testid":"button-cancel-add",children:"Cancel"})]})]})]}):n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{children:"App Translations"}),n.jsx(Fe,{children:"Manage translations for your mobile app. Download as XML, edit offline, and upload back."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{onClick:O,variant:"outline","data-testid":"button-download-xml",children:[n.jsx(RN,{className:"h-4 w-4 mr-2"}),"Download XML"]}),n.jsxs(G,{onClick:()=>{var M;return(M=document.getElementById("xml-upload-input"))==null?void 0:M.click()},variant:"outline","data-testid":"button-upload-xml",children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),"Upload XML"]}),n.jsx("input",{id:"xml-upload-input",type:"file",accept:".xml",onChange:D,className:"hidden","data-testid":"input-xml-upload"}),n.jsx(G,{onClick:P,disabled:d||!e,"data-testid":"button-save-translations",children:d?"Saving...":s?"Demo Mode - Read Only":"Save"})]})]})}),n.jsxs(ue,{className:"space-y-6",children:[v!==void 0&&n.jsx("div",{className:"flex gap-4 text-sm text-muted-foreground border-b pb-4",children:n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Version:"})," ",v]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Select Language to Edit"}),n.jsxs(Gt,{value:r,onValueChange:i,children:[n.jsx(Bt,{"data-testid":"select-language",children:n.jsx(Yt,{})}),n.jsx(qt,{children:T.map(M=>{var J;return n.jsxs(fe,{value:M,children:[M.toUpperCase()," - ",((J=C[M])==null?void 0:J.app_name)||"Language"]},M)})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Default Language"}),n.jsxs(Gt,{value:f||T[0]||"en",onValueChange:h,children:[n.jsx(Bt,{"data-testid":"select-default-language",children:n.jsx(Yt,{placeholder:"Select default language"})}),n.jsx(qt,{children:T.map(M=>{var J;return n.jsxs(fe,{value:M,children:[M.toUpperCase()," - ",((J=C[M])==null?void 0:J.app_name)||"Language"]},M)})})]})]})]}),n.jsxs("div",{className:"flex gap-4 items-center",children:[l?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{placeholder:"Code (e.g., es)",value:a,onChange:M=>o(M.target.value.toLowerCase()),maxLength:2,className:"w-32","data-testid":"input-new-language"}),n.jsx(G,{onClick:S,size:"sm","data-testid":"button-confirm-add",children:"Add"}),n.jsx(G,{onClick:()=>{c(!1),o("")},size:"sm",variant:"ghost","data-testid":"button-cancel-add",children:"Cancel"})]}):n.jsxs(G,{onClick:()=>c(!0),variant:"outline","data-testid":"button-add-language",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Language"]}),r!=="en"&&n.jsx(G,{onClick:()=>A(r),variant:"destructive",size:"sm","data-testid":"button-delete-language",children:n.jsx(bn,{className:"h-4 w-4"})})]}),n.jsxs(Xs,{className:"mb-4",children:[n.jsx(wc,{className:"h-4 w-4"}),n.jsxs(Js,{children:[n.jsx("strong",{children:"Dynamic Placeholders:"})," Use placeholders like ",n.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"@app_name"}),", ",n.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"@name"}),", ",n.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"@provider"})," in your translations. These will be automatically replaced with actual values in the app."]})]}),n.jsxs("div",{className:"border rounded-lg",children:[n.jsx("div",{className:"bg-muted px-4 py-3 border-b",children:n.jsxs("p",{className:"text-sm font-medium",children:["Editing ",r.toUpperCase()," (",j.length," keys)"]})}),n.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:n.jsx("div",{className:"divide-y",children:j.map(M=>{var U,$;const J=(U=b.en)==null?void 0:U[M],X=r!=="en"&&J?J:`Enter ${r.toUpperCase()} translation for "${M}"`;return n.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:n.jsxs("div",{className:"grid gap-2",children:[n.jsx(re,{htmlFor:`trans-${M}`,className:"text-xs text-muted-foreground font-mono",children:M}),n.jsx(le,{id:`trans-${M}`,value:(($=C[r])==null?void 0:$[M])||"",onChange:L=>I(M,L.target.value),placeholder:X,"data-testid":`input-translation-${M}`})]})},M)})})})]}),j.length===0&&n.jsxs(Xs,{children:[n.jsx(wc,{className:"h-4 w-4"}),n.jsx(Js,{children:"No translation keys found. Add a language and start adding translations."})]})]})]})}function hre(){var N,C,_;const{toast:t}=Et(),[e,s]=p.useState(!1),[r,i]=p.useState(!1),{data:a}=Ve({queryKey:["/api/auth/session"]}),o=((N=a==null?void 0:a.data)==null?void 0:N.id)||((C=a==null?void 0:a.data)==null?void 0:C._id),{data:l,isLoading:c}=Ve({queryKey:[`/api/admin/profile/${o}`],enabled:!!o}),d=((_=l==null?void 0:l.data)==null?void 0:_.admin)||(l==null?void 0:l.admin)||(l==null?void 0:l.data)||l,[u,f]=p.useState({fullname:(d==null?void 0:d.fullname)||(d==null?void 0:d.name)||"",email:(d==null?void 0:d.email)||"",username:(d==null?void 0:d.username)||""}),[h,x]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""});p.useEffect(()=>{d&&f({fullname:(d==null?void 0:d.fullname)||(d==null?void 0:d.full_name)||(d==null?void 0:d.name)||"",email:(d==null?void 0:d.email)||"",username:(d==null?void 0:d.username)||(d==null?void 0:d.userName)||""})},[d]);const g=st({mutationFn:async T=>{const j={full_name:T.fullname,email:T.email,username:T.username};return ut("PATCH","/api/admin/profile",j)},onSuccess:()=>{We.invalidateQueries({queryKey:[`/api/admin/profile/${o}`]}),We.invalidateQueries({queryKey:["/api/auth/session"]}),s(!1),t({title:"Profile updated",description:"Your profile has been updated successfully."})},onError:T=>{t({title:"Update failed",description:T.message||"Failed to update profile. Please try again.",variant:"destructive"})}}),y=st({mutationFn:async T=>ut("POST","/api/admin/change-password",T),onSuccess:()=>{i(!1),x({currentPassword:"",newPassword:"",confirmPassword:""}),t({title:"Password changed",description:"Your password has been changed successfully."})},onError:T=>{t({title:"Password change failed",description:T.message||"Failed to change password. Please try again.",variant:"destructive"})}}),w=T=>{T.preventDefault(),g.mutate(u)},b=T=>{if(T.preventDefault(),h.newPassword!==h.confirmPassword){t({title:"Passwords don't match",description:"New password and confirm password must match.",variant:"destructive"});return}if(h.newPassword.length<6){t({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}y.mutate({currentPassword:h.currentPassword,newPassword:h.newPassword})},v=T=>T.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2);return c?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"My Profile"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your account information and security"})]}),n.jsxs("div",{className:"grid gap-6",children:[n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{children:"Profile Information"}),n.jsx(Fe,{children:"Update your personal details"})]}),!e&&n.jsxs(G,{onClick:()=>{f({fullname:(d==null?void 0:d.full_name)||(d==null?void 0:d.fullname)||(d==null?void 0:d.name)||"",email:(d==null?void 0:d.email)||"",username:(d==null?void 0:d.username)||(d==null?void 0:d.userName)||""}),s(!0)},"data-testid":"button-edit-profile",children:[n.jsx(fo,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]}),n.jsx(ue,{children:e?n.jsxs("form",{onSubmit:w,className:"space-y-4",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsxs(Or,{className:"h-24 w-24",children:[n.jsx(Dr,{src:d==null?void 0:d.profilepic,alt:(d==null?void 0:d.fullname)||(d==null?void 0:d.name)}),n.jsx(Mr,{className:"text-2xl",children:d!=null&&d.fullname||d!=null&&d.name?v(d.fullname||d.name):"AD"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"fullname",children:"Full Name"}),n.jsx(le,{id:"fullname",value:u.fullname,onChange:T=>f({...u,fullname:T.target.value}),"data-testid":"input-fullname"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"username",children:"Username"}),n.jsx(le,{id:"username",value:u.username,onChange:T=>f({...u,username:T.target.value}),"data-testid":"input-username"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"email",children:"Email"}),n.jsx(le,{id:"email",type:"email",value:u.email,onChange:T=>f({...u,email:T.target.value}),"data-testid":"input-email"})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[n.jsxs(G,{type:"button",variant:"outline",onClick:()=>s(!1),"data-testid":"button-cancel-edit",children:[n.jsx(un,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs(G,{type:"submit",disabled:g.isPending,"data-testid":"button-save-profile",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),g.isPending?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsxs(Or,{className:"h-24 w-24",children:[n.jsx(Dr,{src:d==null?void 0:d.profilepic,alt:(d==null?void 0:d.fullname)||(d==null?void 0:d.name)}),n.jsx(Mr,{className:"text-2xl",children:d!=null&&d.fullname||d!=null&&d.name?v(d.fullname||d.name):"AD"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{className:"text-muted-foreground",children:"Full Name"}),n.jsx("p",{className:"text-sm font-medium p-2 bg-muted rounded-md","data-testid":"text-fullname",children:(d==null?void 0:d.full_name)||(d==null?void 0:d.fullname)||(d==null?void 0:d.name)||"Not set"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{className:"text-muted-foreground",children:"Username"}),n.jsx("p",{className:"text-sm font-medium p-2 bg-muted rounded-md","data-testid":"text-username",children:(d==null?void 0:d.username)||(d==null?void 0:d.userName)||"Not set"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{className:"text-muted-foreground",children:"Email"}),n.jsx("p",{className:"text-sm font-medium p-2 bg-muted rounded-md","data-testid":"text-email",children:(d==null?void 0:d.email)||"Not set"})]})]})]})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{children:"Change Password"}),n.jsx(Fe,{children:"Update your account password"})]}),!r&&n.jsxs(G,{onClick:()=>i(!0),variant:"outline","data-testid":"button-change-password",children:[n.jsx(dy,{className:"h-4 w-4 mr-2"}),"Change Password"]})]}),r&&n.jsx(ue,{children:n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"currentPassword",children:"Current Password"}),n.jsx(le,{id:"currentPassword",type:"password",value:h.currentPassword,onChange:T=>x({...h,currentPassword:T.target.value}),required:!0,"data-testid":"input-current-password"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"newPassword",children:"New Password"}),n.jsx(le,{id:"newPassword",type:"password",value:h.newPassword,onChange:T=>x({...h,newPassword:T.target.value}),required:!0,minLength:6,"data-testid":"input-new-password"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 6 characters long"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"confirmPassword",children:"Confirm New Password"}),n.jsx(le,{id:"confirmPassword",type:"password",value:h.confirmPassword,onChange:T=>x({...h,confirmPassword:T.target.value}),required:!0,minLength:6,"data-testid":"input-confirm-password"})]}),n.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[n.jsxs(G,{type:"button",variant:"outline",onClick:()=>{i(!1),x({currentPassword:"",newPassword:"",confirmPassword:""})},"data-testid":"button-cancel-password",children:[n.jsx(un,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs(G,{type:"submit",disabled:y.isPending,"data-testid":"button-save-password",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),y.isPending?"Changing...":"Change Password"]})]})]})})]})]})]})})}function fre(){var Q,se,ye,B,ie,ce;const[t,e]=p.useState(void 0),[s,r]=p.useState(void 0),[i,a]=p.useState({from:"",to:"",limit:"50"}),[o,l]=p.useState(1),[c,d]=p.useState(!1),[u,f]=p.useState("shipping_deduction"),[h,x]=p.useState(void 0),[g,y]=p.useState(void 0),[w,b]=p.useState(null),v=cu(),{toast:N}=Et(),C=st({mutationFn:async({type:oe,amount:Z})=>{const he=await fetch("/api/admin/shipping-service-transfer",{method:"POST",credentials:"include",headers:{...I(),"Content-Type":"application/json"},body:JSON.stringify({type:oe,amount:Z})});if(!he.ok){const Ne=await he.json().catch(()=>({}));throw new Error(Ne.error||"Transfer failed")}return he.json()},onSuccess:(oe,Z)=>{N({title:"Transfer initiated",description:`${Z.type==="shipping_deduction"?"Shipping deduction":"Service fee"} transfer of $${Z.amount.toFixed(2)} submitted.`}),v.invalidateQueries({queryKey:["admin-shipping-service-pending"]})},onError:oe=>{N({title:"Transfer failed",description:oe.message,variant:"destructive"})},onSettled:()=>{b(null)}}),_=(oe,Z)=>{b(oe),C.mutate({type:oe,amount:Z})},j=(()=>{const oe=new URLSearchParams;return i.limit&&oe.append("limit",i.limit),i.from&&oe.append("from",i.from),i.to&&oe.append("to",i.to),o>1&&oe.append("page",o.toString()),oe.toString()})(),{data:S,isLoading:A}=Ve({queryKey:["/api/admin/revenue",j],queryFn:async()=>{const oe=await fetch(`/api/admin/revenue?${j}`);if(!oe.ok)throw new Error("Failed to fetch revenue");return oe.json()},staleTime:0,gcTime:0}),I=()=>{const oe={"Content-Type":"application/json"},Z=localStorage.getItem("adminAccessToken"),he=localStorage.getItem("accessToken"),Ne=localStorage.getItem("user");return Z&&(oe["x-admin-token"]=Z),he&&(oe["x-access-token"]=he),Ne&&(oe["x-user-data"]=btoa(unescape(encodeURIComponent(Ne)))),oe},P=h?It(h,"yyyy-MM-dd"):"",O=g?It(g,"yyyy-MM-dd"):"",D=oe=>{const Z=new URLSearchParams;return Z.append("type",oe),P&&Z.append("from",P),O&&Z.append("to",O),Z.toString()},{data:M,isLoading:J}=Ve({queryKey:["admin-shipping-service-pending",u,P,O],queryFn:async()=>{const oe=await fetch(`/api/admin/shipping-service-pending?${D(u)}`,{credentials:"include",headers:I()});if(!oe.ok)throw new Error("Failed to fetch pending data");const Z=await oe.json();return Z.success?Z.data:Z},staleTime:0,gcTime:0}),X=(S==null?void 0:S.data)||{},U=X.transactions||[],$=X.pagination||{},L=$.pages||1,te=$.total||0,F=A,z=(oe,Z=!1)=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(oe),pe=()=>{a({...i,from:t?It(t,"yyyy-MM-dd"):"",to:s?It(s,"yyyy-MM-dd"):""}),l(1)},xe=()=>{e(void 0),r(void 0),a({from:"",to:"",limit:"50"}),l(1)},_e=()=>{o<L&&l(o+1)},Me=()=>{o>1&&l(o-1)},K=[i.from,i.to].filter(oe=>oe).length;return F?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading revenue..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Revenue"}),n.jsx("p",{className:"text-muted-foreground",children:"Platform revenue and financial overview"})]}),n.jsxs(de,{className:"mb-6",children:[n.jsx(be,{className:"cursor-pointer select-none",onClick:()=>d(!c),"data-testid":"button-toggle-pending",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{className:"text-lg",children:"Pending Transfers"}),n.jsx(Fe,{children:"Pending shipping deductions and service fees"})]}),n.jsx(Sf,{className:Re("h-5 w-5 text-muted-foreground transition-transform",c&&"rotate-180")})]})}),c&&n.jsx(ue,{onClick:oe=>oe.stopPropagation(),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{className:"text-sm font-medium",children:"Type"}),n.jsxs(Gt,{value:u,onValueChange:oe=>{f(oe)},children:[n.jsx(Bt,{className:"w-[220px]","data-testid":"select-pending-type",children:n.jsx(Yt,{})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"shipping_deduction",children:"Shipping Deduction"}),n.jsx(fe,{value:"service_fee",children:"Service Fee"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{className:"text-sm font-medium",children:"From"}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:Re("w-[160px] justify-start text-left font-normal",!h&&"text-muted-foreground"),"data-testid":"button-pending-from-date",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),h?It(h,"MMM dd, yyyy"):"Pick date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:h,onSelect:x,initialFocus:!0})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{className:"text-sm font-medium",children:"To"}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:Re("w-[160px] justify-start text-left font-normal",!g&&"text-muted-foreground"),"data-testid":"button-pending-to-date",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),g?It(g,"MMM dd, yyyy"):"Pick date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:g,onSelect:y,initialFocus:!0})})]})]}),(h||g)&&n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{x(void 0),y(void 0)},"data-testid":"button-clear-pending-dates",children:n.jsx(un,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:u==="shipping_deduction"?n.jsx(zn,{className:"h-5 w-5 text-primary"}):n.jsx(gd,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:u==="shipping_deduction"?"Pending Shipping Deduction":"Pending Service Fee"}),n.jsx(Ye,{variant:"outline",className:"text-xs mt-1",children:u}),n.jsx("p",{className:"text-2xl font-bold","data-testid":"text-pending-value",children:J?n.jsx(dn,{className:"h-5 w-5 animate-spin"}):`$${parseFloat(String((M==null?void 0:M.total)??0)).toFixed(2)}`}),!J&&(M==null?void 0:M.count)>0&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[M.count," pending"]})]})]}),n.jsxs(G,{"data-testid":"button-transfer",className:"gap-2",disabled:w===u||J||!(M!=null&&M.total),onClick:()=>_(u,parseFloat(String((M==null?void 0:M.total)??0))),children:[w===u?n.jsx(dn,{className:"h-4 w-4 animate-spin"}):n.jsx(X7,{className:"h-4 w-4"}),"Transfer"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Stripe Available Balance"}),n.jsx(zn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-available-balance",children:z(((Q=X.balance)==null?void 0:Q.stripe_available_balance)||0)})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Stripe Pending Balance"}),n.jsx(pj,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"text-pending-balance",children:z(((se=X.balance)==null?void 0:se.stripe_pending_balance)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Processing payments"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Service Fees"}),n.jsx(wv,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Available"}),n.jsx("div",{className:"text-lg font-bold text-green-600","data-testid":"text-available-service-fee",children:z(((ye=X.serviceFees)==null?void 0:ye.available)||0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"}),n.jsx("div",{className:"text-lg font-bold text-orange-600","data-testid":"text-pending-service-fee",children:z(((B=X.serviceFees)==null?void 0:B.pending)||0)})]})]})})]}),n.jsxs(de,{children:[n.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(we,{className:"text-sm font-medium",children:"Payouts"}),n.jsx(pj,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(ue,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Available"}),n.jsx("div",{className:"text-lg font-bold text-green-600","data-testid":"text-available-payouts",children:z(((ie=X.payouts)==null?void 0:ie.available)||0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"}),n.jsx("div",{className:"text-lg font-bold text-orange-600","data-testid":"text-pending-payouts",children:z(((ce=X.payouts)==null?void 0:ce.pending)||0)})]})]})})]})]}),n.jsxs(de,{className:"mb-6",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kf,{className:"h-5 w-5"}),n.jsx(we,{children:"Transaction Filters"}),K>0&&n.jsxs(Ye,{variant:"secondary",children:[K," active"]})]})}),n.jsxs(ue,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"From Date"}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:Re("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),"data-testid":"button-from-date",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),t?It(t,"PPP"):"Pick a date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:t,onSelect:e,initialFocus:!0})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"To Date"}),n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:Re("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),"data-testid":"button-to-date",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),s?It(s,"PPP"):"Pick a date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:s,onSelect:r,initialFocus:!0})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"limit-filter",children:"Results per page"}),n.jsxs(Gt,{value:i.limit,onValueChange:oe=>a({...i,limit:oe}),children:[n.jsx(Bt,{id:"limit-filter","data-testid":"select-limit-filter",children:n.jsx(Yt,{placeholder:"50"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"10",children:"10"}),n.jsx(fe,{value:"25",children:"25"}),n.jsx(fe,{value:"50",children:"50"}),n.jsx(fe,{value:"100",children:"100"})]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(G,{onClick:pe,"data-testid":"button-apply-filters",children:"Apply Filters"}),n.jsxs(G,{variant:"outline",onClick:xe,"data-testid":"button-clear-filters",children:[n.jsx(un,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})]})]}),n.jsxs(de,{className:"mb-6",children:[n.jsxs(be,{children:[n.jsx(we,{children:"Transactions"}),n.jsx(Fe,{children:"Revenue from platform transactions"})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-border",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-sm text-muted-foreground",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-sm text-muted-foreground",children:"Type"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-sm text-muted-foreground",children:"From"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-sm text-muted-foreground",children:"To"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-sm text-muted-foreground",children:"Service Fee"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-sm text-muted-foreground",children:"Status"})]})}),n.jsx("tbody",{children:U.map(oe=>{var Z,he,Ne;return n.jsxs("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm",children:new Date(oe.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"capitalize text-sm",children:((Z=oe.type)==null?void 0:Z.replace(/_/g," "))||"N/A"}),oe.type==="order"&&n.jsxs(n.Fragment,{children:[oe.orderId&&n.jsx("span",{className:"text-xs text-muted-foreground",children:oe.orderId}),(oe.invoiceNumber||oe.invoice_number)&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Invoice: ",oe.invoiceNumber||oe.invoice_number]})]})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm",children:((he=oe.from)==null?void 0:he.userName)||"Unknown"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm",children:((Ne=oe.to)==null?void 0:Ne.userName)||"Unknown"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"font-semibold text-green-600 text-sm",children:z(oe.serviceFee||0)})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx(Ye,{variant:oe.status==="Pending"?"secondary":"default",className:"text-xs",children:oe.status||"Unknown"}),oe.status==="Pending"&&(oe.availableOn||oe.available_on)&&n.jsxs("span",{className:"text-xs text-muted-foreground mt-1",children:["Available ",new Date(oe.availableOn||oe.available_on).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})})]},oe._id)})})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-border",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",U.length," of ",te," transaction",te!==1?"s":"",L>1&&` (Page ${o} of ${L})`]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:Me,disabled:o<=1,"data-testid":"button-prev-page",children:[n.jsx(oi,{className:"h-4 w-4 mr-1"}),"Previous"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:_e,disabled:o>=L,"data-testid":"button-next-page",children:["Next",n.jsx(Vn,{className:"h-4 w-4 ml-1"})]})]})]})]})]})]})})}const zs=p.forwardRef(({className:t,...e},s)=>n.jsx("textarea",{className:Re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...e}));zs.displayName="Textarea";function pre(){var St,ts,Es;const[t,e]=p.useState(1),[s,r]=p.useState(""),[i,a]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(!1),[u,f]=p.useState(!1),[h,x]=p.useState(""),[g,y]=p.useState(null),[w,b]=p.useState("txcd_99999999"),[v,N]=p.useState(""),[C,_]=p.useState(!1),[T,j]=p.useState(null),[S,A]=p.useState(!1),[I,P]=p.useState(null),[O,D]=p.useState(""),[M,J]=p.useState(!1),[X,U]=p.useState(null),[$,L]=p.useState(""),[te,F]=p.useState(null),[z,pe]=p.useState(""),[xe,_e]=p.useState(!1),[Me,K]=p.useState(!1),{externalApiUrl:Q}=Ff(),[se,ye]=p.useState(null),[B,ie]=p.useState(""),{toast:ce}=Et(),oe=10,he=(()=>{const Ee=new URLSearchParams;return Ee.append("limit",oe.toString()),Ee.append("page",t.toString()),s&&Ee.append("title",s),Ee.toString()})(),{data:Ne,isLoading:Ke}=Ve({queryKey:["/api/admin/categories",he],queryFn:async()=>{const Ee=await fetch(`/api/admin/categories?${he}`);if(!Ee.ok)throw new Error("Failed to fetch categories");return Ee.json()}}),$e=((St=Ne==null?void 0:Ne.data)==null?void 0:St.categories)||[],W=((ts=Ne==null?void 0:Ne.data)==null?void 0:ts.pages)||1,ae=((Es=Ne==null?void 0:Ne.data)==null?void 0:Es.totalDoc)||0,ge=()=>{r(i),e(1)},Ae=()=>{a(""),r(""),e(1)},Y=st({mutationFn:async Ee=>ut("POST","/api/admin/categories/bulk",{names:Ee}),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories"]}),ce({title:"Success",description:"Categories imported successfully"}),l(""),d(!1)},onError:Ee=>{ce({title:"Error",description:Ee.message||"Failed to import categories",variant:"destructive"})}}),je=()=>{const Ee=o.split(`
`).map(Ct=>Ct.trim()).filter(Ct=>Ct.length>0);if(Ee.length===0){ce({title:"Error",description:"Please enter at least one category name",variant:"destructive"});return}Y.mutate(Ee)},ze=st({mutationFn:async({name:Ee,icon:Ct,tax_code:is,commission:On,commission_enabled:nn})=>{console.log("Starting category mutation with name:",Ee,"icon:",Ct==null?void 0:Ct.name,"tax_code:",is,"commission:",On,"commission_enabled:",nn);const ws=new FormData;ws.append("name",Ee),ws.append("tax_code",is),ws.append("commission",On),ws.append("commission_enabled",String(nn)),Ct&&ws.append("images",Ct),console.log("Sending request to /api/admin/categories");const er=localStorage.getItem("adminAccessToken"),Dn=localStorage.getItem("accessToken"),Bs=localStorage.getItem("user"),fn={};er&&(fn["x-admin-token"]=er),Dn&&(fn["x-access-token"]=Dn,fn.Authorization=`Bearer ${Dn}`),Bs&&(fn["x-user-data"]=btoa(unescape(encodeURIComponent(Bs))));try{const js=await fetch("/api/admin/categories",{method:"POST",headers:fn,body:ws,credentials:"include"});if(console.log("Response received:",js.status,js.statusText),!js.ok){const Ra=await js.json();throw new Error(Ra.error||"Failed to add category")}const tr=await js.json();return console.log("Success data:",tr),tr}catch(js){throw console.error("Fetch error:",js),js}},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories"]}),ce({title:"Success",description:"Category added successfully"}),x(""),y(null),b("txcd_99999999"),N(""),_(!1),f(!1)},onError:Ee=>{ce({title:"Error",description:Ee.message||"Failed to add category",variant:"destructive"})}}),pt=()=>{if(!h.trim()){ce({title:"Error",description:"Please enter a category name",variant:"destructive"});return}ze.mutate({name:h,icon:g,tax_code:w,commission:v,commission_enabled:C})},mt=st({mutationFn:async Ee=>ut("DELETE",`/api/admin/categories/${Ee}`),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories"]}),ce({title:"Success",description:"Category deleted successfully"}),j(null)},onError:Ee=>{ce({title:"Error",description:Ee.message||"Failed to delete category",variant:"destructive"})}}),os=()=>{T&&mt.mutate(T)},rs=st({mutationFn:async({id:Ee,name:Ct,icon:is,commission:On,commission_enabled:nn})=>{const ws=new FormData;ws.append("name",Ct),ws.append("commission",On),ws.append("commission_enabled",String(nn)),is&&ws.append("images",is);const er=localStorage.getItem("adminAccessToken"),Dn=localStorage.getItem("accessToken"),Bs=localStorage.getItem("user"),fn={};er&&(fn["x-admin-token"]=er),Dn&&(fn["x-access-token"]=Dn,fn.Authorization=`Bearer ${Dn}`),Bs&&(fn["x-user-data"]=btoa(unescape(encodeURIComponent(Bs))));const js=await fetch(`/api/admin/categories/${Ee}`,{method:"PUT",headers:fn,body:ws,credentials:"include"});if(!js.ok){const tr=await js.json();throw new Error(tr.error||"Failed to update category")}return js.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories"]}),ce({title:"Success",description:"Category updated successfully"}),J(!1),U(null),L(""),F(null),pe(""),_e(!1)},onError:Ee=>{ce({title:"Error",description:Ee.message||"Failed to update category",variant:"destructive"})}}),bs=()=>{if(!X||!$.trim()){ce({title:"Error",description:"Please enter a category name",variant:"destructive"});return}rs.mutate({id:X._id,name:$,icon:te,commission:z,commission_enabled:xe})},kn=Ee=>{var Ct;U(Ee),L(Ee.name),F(null),pe(((Ct=Ee.commission)==null?void 0:Ct.toString())||""),_e(Ee.commission_enabled||!1),J(!0)},Xe=st({mutationFn:async({categoryId:Ee,parentId:Ct})=>ut("PUT",`/api/admin/categories/${Ee}/convert`,{targetType:"child",parentId:Ct}),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories"]}),ce({title:"Success",description:"Category converted to subcategory successfully"}),K(!1),ye(null),ie("")},onError:Ee=>{ce({title:"Error",description:Ee.message||"Failed to convert category",variant:"destructive"})}}),Rt=()=>{if(!se||!B){ce({title:"Error",description:"Please select a parent category",variant:"destructive"});return}if(se._id===B){ce({title:"Error",description:"Cannot convert a category to be its own subcategory",variant:"destructive"});return}Xe.mutate({categoryId:se._id,parentId:B})},Ot=st({mutationFn:async({categoryId:Ee,names:Ct})=>ut("POST",`/api/admin/categories/${Ee}/subcategories/bulk`,{names:Ct}),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories"]}),ce({title:"Success",description:"Subcategories imported successfully"}),D(""),A(!1),P(null)},onError:Ee=>{ce({title:"Error",description:Ee.message||"Failed to import subcategories",variant:"destructive"})}}),Tt=()=>{if(!I)return;const Ee=O.split(`
`).map(Ct=>Ct.trim()).filter(Ct=>Ct.length>0);if(Ee.length===0){ce({title:"Error",description:"Please enter at least one subcategory name",variant:"destructive"});return}Ot.mutate({categoryId:I.id,names:Ee})};return Ke?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading categories..."})]})})}):n.jsxs(Ze,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Categories"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage product categories"})]}),n.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search categories by name...",value:i,onChange:Ee=>a(Ee.target.value),onKeyDown:Ee=>Ee.key==="Enter"&&ge(),className:"pl-10","data-testid":"input-search-categories"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{onClick:ge,"data-testid":"button-search",children:"Search"}),s&&n.jsx(G,{variant:"outline",onClick:Ae,"data-testid":"button-clear-search",children:"Clear"}),n.jsxs(ys,{open:u,onOpenChange:f,children:[n.jsx(df,{asChild:!0,children:n.jsxs(G,{"data-testid":"button-add-category",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Category"]})}),n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Add New Category"}),n.jsx(Ls,{children:"Create a new category with an optional icon image."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"category-name",children:"Category Name"}),n.jsx(le,{id:"category-name",placeholder:"Enter category name",value:h,onChange:Ee=>x(Ee.target.value),"data-testid":"input-category-name"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"category-tax-code",children:"Tax Code"}),n.jsx(le,{id:"category-tax-code",placeholder:"Enter tax code",value:w,onChange:Ee=>b(Ee.target.value),"data-testid":"input-category-tax-code"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"category-commission",children:"Commission Rate (%)"}),n.jsx(le,{id:"category-commission",type:"number",placeholder:"Enter commission rate (e.g., 5 for 5%)",value:v,onChange:Ee=>N(Ee.target.value),"data-testid":"input-category-commission",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(re,{htmlFor:"category-commission-enabled",children:"Enable Commission"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Apply commission to products in this category"})]}),n.jsx(il,{id:"category-commission-enabled",checked:C,onCheckedChange:_,"data-testid":"switch-category-commission-enabled"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"category-icon",children:"Category Icon (Optional)"}),n.jsx(le,{id:"category-icon",type:"file",accept:"image/*",onChange:Ee=>{var Ct;return y(((Ct=Ee.target.files)==null?void 0:Ct[0])||null)},"data-testid":"input-category-icon"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>{f(!1),x(""),y(null),b("txcd_99999999"),N(""),_(!1)},"data-testid":"button-cancel-add-category",children:"Cancel"}),n.jsx(G,{onClick:pt,disabled:ze.isPending,"data-testid":"button-submit-add-category",children:ze.isPending?"Adding...":"Add"})]})]})]}),n.jsxs(ys,{open:c,onOpenChange:d,children:[n.jsx(df,{asChild:!0,children:n.jsxs(G,{variant:"outline","data-testid":"button-bulk-import",children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),"Bulk Import"]})}),n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Bulk Import Categories"}),n.jsx(Ls,{children:"Enter category names, one per line. They will be added to the system."})]}),n.jsx(zs,{placeholder:`Category 1
Category 2
Category 3`,value:o,onChange:Ee=>l(Ee.target.value),className:"min-h-[200px]","data-testid":"textarea-bulk-import"}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>d(!1),"data-testid":"button-cancel-import",children:"Cancel"}),n.jsx(G,{onClick:je,disabled:Y.isPending,"data-testid":"button-submit-import",children:Y.isPending?"Importing...":"Import"})]})]})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"All Categories"}),n.jsx(Fe,{children:"Product categories in the platform"})]}),n.jsx(ue,{children:$e.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(cm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No categories found"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-border",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Icon"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Type"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Commission"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Subcategories"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),n.jsx("tbody",{children:$e.map(Ee=>{var Ct;return n.jsxs("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors","data-testid":`row-category-${Ee._id}`,children:[n.jsx("td",{className:"py-3 px-4",children:Ee.icon?n.jsx("img",{src:su(Ee.icon,Q),alt:Ee.name,className:"w-16 h-16 object-cover rounded-md","data-testid":`img-category-${Ee._id}`}):n.jsx("div",{className:"w-16 h-16 bg-muted rounded-md flex items-center justify-center",children:n.jsx(cm,{className:"h-6 w-6 text-muted-foreground"})})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(Gn,{href:`/admin/categories/${Ee._id}/subcategories`,children:n.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsx("span",{className:"font-medium text-foreground group-hover:text-primary transition-colors","data-testid":`text-category-name-${Ee._id}`,children:Ee.name}),n.jsx(Vn,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]})})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:Ee.type||"N/A"})}),n.jsx("td",{className:"py-3 px-4",children:Ee.commission_enabled?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-medium text-green-600",children:[Ee.commission,"%"]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"(Enabled)"})]}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"Disabled"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:((Ct=Ee.subCategories)==null?void 0:Ct.length)||0})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm","data-testid":`button-actions-${Ee._id}`,children:n.jsx(Cf,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:()=>kn(Ee),"data-testid":`button-edit-category-${Ee._id}`,children:[n.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(Zt,{onClick:()=>{P({id:Ee._id,name:Ee.name}),A(!0)},"data-testid":`button-add-subcategories-${Ee._id}`,children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Subcategories"]}),n.jsxs(Zt,{onClick:()=>{ye(Ee),K(!0)},"data-testid":`button-convert-to-child-${Ee._id}`,children:[n.jsx(Z7,{className:"h-4 w-4 mr-2"}),"Convert to Subcategory"]}),n.jsx(Na,{}),n.jsxs(Zt,{onClick:()=>j(Ee._id),"data-testid":`button-delete-category-${Ee._id}`,className:"text-destructive focus:text-destructive",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})})]},Ee._id)})})]})})})]}),$e.length>0&&n.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",t," of ",W," (",ae," total categories)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>e(Ee=>Math.max(1,Ee-1)),disabled:t===1,"data-testid":"button-prev-page",children:[n.jsx(oi,{className:"h-4 w-4 mr-1"}),"Previous"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>e(Ee=>Ee+1),disabled:t>=W,"data-testid":"button-next-page",children:["Next",n.jsx(Vn,{className:"h-4 w-4 ml-1"})]})]})]})]}),n.jsx(ys,{open:Me,onOpenChange:Ee=>{K(Ee),Ee||(ye(null),ie(""))},children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Convert to Subcategory"}),n.jsxs(Ls,{children:['Convert "',se==null?void 0:se.name,'" to a subcategory by selecting its parent category.']})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(re,{htmlFor:"parent-category",children:"Parent Category"}),n.jsxs(Gt,{value:B,onValueChange:ie,children:[n.jsx(Bt,{id:"parent-category","data-testid":"select-parent-category",children:n.jsx(Yt,{placeholder:"Select a parent category"})}),n.jsx(qt,{children:$e.filter(Ee=>Ee._id!==(se==null?void 0:se._id)).map(Ee=>n.jsx(fe,{value:Ee._id,children:Ee.name},Ee._id))})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>{K(!1),ye(null),ie("")},"data-testid":"button-cancel-convert",children:"Cancel"}),n.jsx(G,{onClick:Rt,disabled:Xe.isPending,"data-testid":"button-submit-convert",children:Xe.isPending?"Converting...":"Convert"})]})]})}),n.jsx(ys,{open:M,onOpenChange:Ee=>{J(Ee),Ee||(U(null),L(""),F(null))},children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Edit Category"}),n.jsx(Ls,{children:"Update the category name and icon."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-category-name",children:"Category Name"}),n.jsx(le,{id:"edit-category-name",placeholder:"Enter category name",value:$,onChange:Ee=>L(Ee.target.value),"data-testid":"input-edit-category-name"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-category-commission",children:"Commission Rate (%)"}),n.jsx(le,{id:"edit-category-commission",type:"number",placeholder:"Enter commission rate (e.g., 5 for 5%)",value:z,onChange:Ee=>pe(Ee.target.value),"data-testid":"input-edit-category-commission",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(re,{htmlFor:"edit-category-commission-enabled",children:"Enable Commission"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Apply commission to products in this category"})]}),n.jsx(il,{id:"edit-category-commission-enabled",checked:xe,onCheckedChange:_e,"data-testid":"switch-edit-category-commission-enabled"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-category-icon",children:"Category Icon (Optional)"}),n.jsx(le,{id:"edit-category-icon",type:"file",accept:"image/*",onChange:Ee=>{var Ct;return F(((Ct=Ee.target.files)==null?void 0:Ct[0])||null)},"data-testid":"input-edit-category-icon"}),(X==null?void 0:X.icon)&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Current Icon:"}),n.jsx("img",{src:su(X.icon,Q),alt:X.name,className:"w-16 h-16 object-cover rounded-md"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>{J(!1),U(null),L(""),F(null),pe(""),_e(!1)},"data-testid":"button-cancel-edit-category",children:"Cancel"}),n.jsx(G,{onClick:bs,disabled:rs.isPending,"data-testid":"button-submit-edit-category",children:rs.isPending?"Updating...":"Update"})]})]})}),n.jsx(ys,{open:S,onOpenChange:A,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Bulk Import Subcategories"}),n.jsxs(Ls,{children:["Add subcategories to ",I==null?void 0:I.name,". Enter one subcategory name per line."]})]}),n.jsx(zs,{placeholder:`Subcategory 1
Subcategory 2
Subcategory 3`,value:O,onChange:Ee=>D(Ee.target.value),className:"min-h-[200px]","data-testid":"textarea-bulk-import-subcategories-from-categories"}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>{A(!1),D(""),P(null)},"data-testid":"button-cancel-import-subcategories",children:"Cancel"}),n.jsx(G,{onClick:Tt,disabled:Ot.isPending,"data-testid":"button-submit-import-subcategories",children:Ot.isPending?"Importing...":"Import"})]})]})}),n.jsx(Ca,{open:!!T,onOpenChange:Ee=>!Ee&&j(null),children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Category"}),n.jsx(Fi,{children:"Are you sure you want to delete this category? This action cannot be undone."})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx($i,{onClick:os,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-delete",children:mt.isPending?"Deleting...":"Delete"})]})]})})]})}function mre({icon:t,name:e,externalApiUrl:s}){const[r,i]=p.useState(!1),a=t&&s?su(t,s):null;return!a||r?n.jsx("div",{className:"w-16 h-16 bg-muted rounded-md flex items-center justify-center",children:n.jsx(cm,{className:"h-6 w-6 text-muted-foreground"})}):n.jsx("img",{src:a,alt:e,className:"w-16 h-16 object-cover rounded-md",onError:()=>i(!0)})}function gre(){Ds();const[,t]=Uc("/admin/categories/:categoryId/subcategories"),e=t==null?void 0:t.categoryId,[s,r]=p.useState(""),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(""),[u,f]=p.useState(null),[h,x]=p.useState(null),[g,y]=p.useState(!1),[w,b]=p.useState(null),[v,N]=p.useState(""),[C,_]=p.useState(null),[T,j]=p.useState(""),[S,A]=p.useState(!1),{toast:I}=Et(),{externalApiUrl:P}=Ff(),{data:O,isLoading:D}=Ve({queryKey:["/api/admin/categories",e],queryFn:async()=>{const K=await fetch(`/api/admin/categories/${e}`);if(!K.ok)throw new Error("Failed to fetch category");return K.json()},enabled:!!e}),M=O==null?void 0:O.data,J=(M==null?void 0:M.subCategories)||[],X=st({mutationFn:async K=>ut("POST",`/api/admin/categories/${e}/subcategories/bulk`,{names:K}),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories",e]}),We.invalidateQueries({queryKey:["/api/admin/categories"]}),I({title:"Success",description:"Subcategories imported successfully"}),r(""),a(!1)},onError:K=>{I({title:"Error",description:K.message||"Failed to import subcategories",variant:"destructive"})}}),U=()=>{const K=s.split(`
`).map(Q=>Q.trim()).filter(Q=>Q.length>0);if(K.length===0){I({title:"Error",description:"Please enter at least one subcategory name",variant:"destructive"});return}X.mutate(K)},$=st({mutationFn:async({name:K,icon:Q,parentId:se})=>{const ye=new FormData;ye.append("name",K),ye.append("category",se),ye.append("type","child"),Q&&ye.append("images",Q);const B=await fetch("/api/admin/subcategories",{method:"POST",body:ye});if(!B.ok){const ie=await B.json();throw new Error(ie.error||"Failed to add subcategory")}return B.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories",e]}),We.invalidateQueries({queryKey:["/api/admin/categories"]}),I({title:"Success",description:"Subcategory added successfully"}),d(""),f(null),l(!1)},onError:K=>{I({title:"Error",description:K.message||"Failed to add subcategory",variant:"destructive"})}}),L=()=>{if(!c.trim()){I({title:"Error",description:"Please enter a subcategory name",variant:"destructive"});return}if(!e){I({title:"Error",description:"Category ID is missing",variant:"destructive"});return}$.mutate({name:c,icon:u,parentId:e})},te=st({mutationFn:async K=>ut("DELETE",`/api/admin/subcategories/${K}`),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories",e]}),We.invalidateQueries({queryKey:["/api/admin/categories"]}),I({title:"Success",description:"Subcategory deleted successfully"}),x(null)},onError:K=>{I({title:"Error",description:K.message||"Failed to delete subcategory",variant:"destructive"})}}),F=()=>{h&&te.mutate(h)},z=st({mutationFn:async K=>ut("PUT",`/api/admin/categories/${K}/convert`,{targetType:"parent"}),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories",e]}),We.invalidateQueries({queryKey:["/api/admin/categories"]}),I({title:"Success",description:"Subcategory converted to parent category successfully"})},onError:K=>{I({title:"Error",description:K.message||"Failed to convert subcategory",variant:"destructive"})}}),pe=K=>{z.mutate(K)},xe=st({mutationFn:async({id:K,name:Q,icon:se,commission:ye,commission_enabled:B})=>{const ie=new FormData;ie.append("name",Q),ie.append("commission",ye),ie.append("commission_enabled",String(B)),se&&ie.append("images",se);const ce=localStorage.getItem("adminAccessToken"),oe=localStorage.getItem("accessToken"),Z=localStorage.getItem("user"),he={};ce&&(he["x-admin-token"]=ce),oe&&(he["x-access-token"]=oe,he.Authorization=`Bearer ${oe}`),Z&&(he["x-user-data"]=btoa(unescape(encodeURIComponent(Z))));const Ne=await fetch(`/api/admin/subcategories/${K}`,{method:"PUT",headers:he,body:ie,credentials:"include"});if(!Ne.ok){const Ke=await Ne.json();throw new Error(Ke.error||"Failed to update subcategory")}return Ne.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/categories",e]}),We.invalidateQueries({queryKey:["/api/admin/categories"]}),I({title:"Success",description:"Subcategory updated successfully"}),y(!1),b(null),N(""),_(null),j(""),A(!1)},onError:K=>{I({title:"Error",description:K.message||"Failed to update subcategory",variant:"destructive"})}}),_e=()=>{if(!w||!v.trim()){I({title:"Error",description:"Please enter a subcategory name",variant:"destructive"});return}xe.mutate({id:w._id,name:v,icon:C,commission:T,commission_enabled:S})},Me=K=>{var Q;b(K),N(K.name),_(null),j(((Q=K.commission)==null?void 0:Q.toString())||""),A(K.commission_enabled||!1),y(!0)};return D?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading subcategories..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx(Gn,{href:"/admin/categories",children:n.jsxs(G,{variant:"ghost",size:"sm",className:"mb-4","data-testid":"button-back-to-categories",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Categories"]})}),n.jsxs("div",{className:"flex items-center gap-4",children:[M!=null&&M.icon?n.jsx("img",{src:su(M.icon,P),alt:M.name,className:"w-20 h-20 object-cover rounded-lg"}):n.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center",children:n.jsx(cm,{className:"h-8 w-8 text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:(M==null?void 0:M.name)||"Category"}),n.jsxs("p",{className:"text-muted-foreground",children:[J.length," subcategorie",J.length!==1?"s":""]})]})]})]}),n.jsxs("div",{className:"mb-6 flex justify-end gap-2",children:[n.jsxs(ys,{open:o,onOpenChange:l,children:[n.jsx(df,{asChild:!0,children:n.jsxs(G,{"data-testid":"button-add-subcategory",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Subcategory"]})}),n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Add New Subcategory"}),n.jsxs(Ls,{children:["Create a new subcategory under ",M==null?void 0:M.name," with an optional icon image."]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"subcategory-name",children:"Subcategory Name"}),n.jsx(le,{id:"subcategory-name",placeholder:"Enter subcategory name",value:c,onChange:K=>d(K.target.value),"data-testid":"input-subcategory-name"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"subcategory-icon",children:"Subcategory Icon (Optional)"}),n.jsx(le,{id:"subcategory-icon",type:"file",accept:"image/*",onChange:K=>{var Q;return f(((Q=K.target.files)==null?void 0:Q[0])||null)},"data-testid":"input-subcategory-icon"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>{l(!1),d(""),f(null)},"data-testid":"button-cancel-add-subcategory",children:"Cancel"}),n.jsx(G,{onClick:L,disabled:$.isPending,"data-testid":"button-submit-add-subcategory",children:$.isPending?"Adding...":"Add"})]})]})]}),n.jsxs(ys,{open:i,onOpenChange:a,children:[n.jsx(df,{asChild:!0,children:n.jsxs(G,{variant:"outline","data-testid":"button-bulk-import-subcategories",children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),"Bulk Import Subcategories"]})}),n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Bulk Import Subcategories"}),n.jsxs(Ls,{children:["Enter subcategory names, one per line. They will be added to ",M==null?void 0:M.name,"."]})]}),n.jsx(zs,{placeholder:`Subcategory 1
Subcategory 2
Subcategory 3`,value:s,onChange:K=>r(K.target.value),className:"min-h-[200px]","data-testid":"textarea-bulk-import-subcategories"}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-import-subcategories",children:"Cancel"}),n.jsx(G,{onClick:U,disabled:X.isPending,"data-testid":"button-submit-import-subcategories",children:X.isPending?"Importing...":"Import"})]})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Subcategories"}),n.jsxs(Fe,{children:["All subcategories under ",M==null?void 0:M.name]})]}),n.jsx(ue,{children:J.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(cm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No subcategories found"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-border",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Icon"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Commission"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Followers"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Viewers"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),n.jsx("tbody",{children:J.map(K=>n.jsxs("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors","data-testid":`row-subcategory-${K._id}`,children:[n.jsx("td",{className:"py-3 px-4","data-testid":`img-subcategory-${K._id}`,children:n.jsx(mre,{icon:K.icon,name:K.name,externalApiUrl:P})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"font-medium text-foreground","data-testid":`text-subcategory-name-${K._id}`,children:K.name})}),n.jsx("td",{className:"py-3 px-4",children:K.commission_enabled?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-medium text-green-600",children:[K.commission,"%"]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"(Enabled)"})]}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"Disabled"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:K.followersCount||0})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:K.viewersCount||0})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm","data-testid":`button-actions-${K._id}`,children:n.jsx(Cf,{className:"h-4 w-4"})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:()=>Me(K),"data-testid":`button-edit-subcategory-${K._id}`,children:[n.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(Zt,{onClick:()=>pe(K._id),"data-testid":`button-convert-to-parent-${K._id}`,children:[n.jsx(J7,{className:"h-4 w-4 mr-2"}),"Convert to Parent"]}),n.jsx(Na,{}),n.jsxs(Zt,{onClick:()=>x(K._id),"data-testid":`button-delete-subcategory-${K._id}`,className:"text-destructive focus:text-destructive",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})})]},K._id))})]})})})]}),n.jsx(Ca,{open:!!h,onOpenChange:K=>!K&&x(null),children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Subcategory"}),n.jsx(Fi,{children:"Are you sure you want to delete this subcategory? This action cannot be undone."})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{"data-testid":"button-cancel-delete-subcategory",children:"Cancel"}),n.jsx($i,{onClick:F,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-delete-subcategory",children:te.isPending?"Deleting...":"Delete"})]})]})}),n.jsx(ys,{open:g,onOpenChange:y,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Edit Subcategory"}),n.jsx(Ls,{children:"Update the subcategory details."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-subcategory-name",children:"Subcategory Name"}),n.jsx(le,{id:"edit-subcategory-name",placeholder:"Enter subcategory name",value:v,onChange:K=>N(K.target.value),"data-testid":"input-edit-subcategory-name"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-subcategory-commission",children:"Commission Rate (%)"}),n.jsx(le,{id:"edit-subcategory-commission",type:"number",placeholder:"Enter commission rate (e.g., 5 for 5%)",value:T,onChange:K=>j(K.target.value),"data-testid":"input-edit-subcategory-commission",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(re,{htmlFor:"edit-subcategory-commission-enabled",children:"Enable Commission"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Apply commission to products in this subcategory"})]}),n.jsx(il,{id:"edit-subcategory-commission-enabled",checked:S,onCheckedChange:A,"data-testid":"switch-edit-subcategory-commission-enabled"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-subcategory-icon",children:"Subcategory Icon (Optional)"}),n.jsx(le,{id:"edit-subcategory-icon",type:"file",accept:"image/*",onChange:K=>{var Q;return _(((Q=K.target.files)==null?void 0:Q[0])||null)},"data-testid":"input-edit-subcategory-icon"}),(w==null?void 0:w.icon)&&!C&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Current icon will be kept if no new file is selected"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>{y(!1),b(null),N(""),_(null),j(""),A(!1)},"data-testid":"button-cancel-edit-subcategory",children:"Cancel"}),n.jsx(G,{onClick:_e,disabled:xe.isPending,"data-testid":"button-submit-edit-subcategory",children:xe.isPending?"Saving...":"Save"})]})]})})]})})}function xre(){var _,T;const[,t]=Ds(),[e,s]=p.useState(1),[r,i]=p.useState("all"),[a,o]=p.useState(""),[l,c]=p.useState(!1),d=10,u=new URLSearchParams;u.append("page",e.toString()),u.append("limit",d.toString()),r!=="all"&&u.append("status",r);const{data:f,isLoading:h}=Ve({queryKey:["/api/admin/disputes",e,r],queryFn:async()=>{const j=await fetch(`/api/admin/disputes?${u.toString()}`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch disputes");return await j.json()}}),g=(((_=f==null?void 0:f.data)==null?void 0:_.disputes)||(f==null?void 0:f.data)||[]).filter(j=>j.orderId&&j.orderId._id),y=((T=f==null?void 0:f.data)==null?void 0:T.pages)||1,w=g.filter(j=>{var O,D,M,J,X;if(!a)return!0;const S=a.toLowerCase(),A=((D=(O=j.userId)==null?void 0:O.userName)==null?void 0:D.toLowerCase())||"",I=((J=(M=j.orderId)==null?void 0:M._id)==null?void 0:J.toLowerCase())||"",P=((X=j.reason)==null?void 0:X.toLowerCase())||"";return A.includes(S)||I.includes(S)||P.includes(S)}),b=j=>{switch(j==null?void 0:j.toLowerCase()){case"resolved":return"default";case"submitted":return"secondary";case"under_review":return"outline";case"rejected":return"destructive";default:return"secondary"}},v=j=>{var S;return((S=j==null?void 0:j.replace(/_/g," "))==null?void 0:S.replace(/\b\w/g,A=>A.toUpperCase()))||"N/A"},N=()=>{o(""),i("all"),s(1)},C=a||r!=="all";return h?n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Disputes Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Review and resolve order disputes"})]}),n.jsx(de,{children:n.jsx(ue,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading disputes..."})]})})})]})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-2 bg-destructive/10 rounded-lg",children:n.jsx(yh,{className:"h-6 w-6 text-destructive"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Disputes Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Review and resolve order disputes"})]})]})}),n.jsxs(de,{className:"mb-6",children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kf,{className:"h-5 w-5 text-muted-foreground"}),n.jsx(we,{children:"Filters"})]}),n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>c(!l),"data-testid":"button-toggle-filters",children:l?"Hide":"Show"})]})}),l&&n.jsx(ue,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"User, Order ID, Reason...",value:a,onChange:j=>o(j.target.value),className:"pl-10","data-testid":"input-search-disputes"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),n.jsxs(Gt,{value:r,onValueChange:i,children:[n.jsx(Bt,{"data-testid":"select-status-filter",children:n.jsx(Yt,{})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All Statuses"}),n.jsx(fe,{value:"submitted",children:"Submitted"}),n.jsx(fe,{value:"under_review",children:"Under Review"}),n.jsx(fe,{value:"resolved",children:"Resolved"}),n.jsx(fe,{value:"rejected",children:"Rejected"})]})]})]}),n.jsx("div",{className:"flex items-end",children:C&&n.jsxs(G,{variant:"outline",onClick:N,className:"w-full","data-testid":"button-clear-filters",children:[n.jsx(un,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})})]})})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{children:["All Disputes (",w.length,")"]}),n.jsx(Fe,{children:"Click on a dispute to view details and resolve"})]}),n.jsxs(ue,{children:[w.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(yh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No disputes found"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Order ID"}),n.jsx(Ce,{children:"User"}),n.jsx(Ce,{children:"Reason"}),n.jsx(Ce,{children:"Status"}),n.jsx(Ce,{children:"Order Total"}),n.jsx(Ce,{children:"Actions"})]})}),n.jsx(Us,{children:w.map(j=>{var O,D,M,J,X,U,$,L,te,F;const S=((D=(O=j.orderId)==null?void 0:O.items)==null?void 0:D.reduce((z,pe)=>z+(pe.price||0),0))||0,A=((M=j.orderId)==null?void 0:M.tax)||0,I=((J=j.orderId)==null?void 0:J.shipping_fee)||0,P=S+A+I;return n.jsxs(yt,{className:"cursor-pointer hover:bg-muted/50","data-testid":`row-dispute-${j._id}`,children:[n.jsxs(ke,{className:"font-mono text-sm",children:[(U=(X=j.orderId)==null?void 0:X._id)==null?void 0:U.substring(0,8),"..."]}),n.jsx(ke,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-primary",children:((L=($=j.userId)==null?void 0:$.userName)==null?void 0:L.charAt(0).toUpperCase())||"U"})}),n.jsx("span",{children:((te=j.userId)==null?void 0:te.userName)||"Unknown"})]})}),n.jsx(ke,{children:v(j.reason)}),n.jsx(ke,{children:n.jsx(Ye,{variant:b(j.status),children:((F=j.status)==null?void 0:F.replace(/_/g," "))||"Unknown"})}),n.jsxs(ke,{className:"font-medium",children:["$",P.toFixed(2)]}),n.jsx(ke,{children:n.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>{var z;return t(`/admin/disputes/${(z=j.orderId)==null?void 0:z._id}`)},"data-testid":`button-view-dispute-${j._id}`,children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"View"]})})]},j._id)})})]})}),w.length>0&&n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",e," of ",y]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>s(j=>Math.max(1,j-1)),disabled:e===1,"data-testid":"button-prev-page",children:"Previous"}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>s(j=>j+1),disabled:e>=y,"data-testid":"button-next-page",children:"Next"})]})]})]})]})]})})}var yre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vre=yre.reduce((t,e)=>{const s=eg(`Primitive.${e}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),bre="Separator",UE="horizontal",wre=["horizontal","vertical"],N6=p.forwardRef((t,e)=>{const{decorative:s,orientation:r=UE,...i}=t,a=jre(r)?r:UE,l=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return n.jsx(vre.div,{"data-orientation":a,...l,...i,ref:e})});N6.displayName=bre;function jre(t){return wre.includes(t)}var _6=N6;const vi=p.forwardRef(({className:t,orientation:e="horizontal",decorative:s=!0,...r},i)=>n.jsx(_6,{ref:i,decorative:s,orientation:e,className:Re("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));vi.displayName=_6.displayName;function Nre(){var $,L,te,F,z,pe,xe,_e,Me,K,Q,se,ye,B;const[,t]=Uc("/admin/disputes/:disputeId"),[,e]=Ds(),{toast:s}=Et(),r=t==null?void 0:t.disputeId,{externalApiUrl:i}=Ff(),[a,o]=p.useState(""),[l,c]=p.useState(!1),[d,u]=p.useState(null),[f,h]=p.useState(!1),[x,g]=p.useState(null),[y,w]=p.useState(null),{data:b,isLoading:v}=Ve({queryKey:["/api/admin/disputes",r],queryFn:async()=>{const ie=await fetch(`/api/admin/disputes/${r}`,{credentials:"include"});if(!ie.ok)throw new Error("Failed to fetch dispute");return await ie.json()},enabled:!!r}),N=b==null?void 0:b.data,C=st({mutationFn:async({decision:ie})=>{if(!N||!N.orderId)throw new Error("Dispute data not available");let ce=null;if(ie==="buyer"){if(ce=N.orderId.customer||"",!ce)throw new Error("Could not find buyer ID in order data")}else if(ie==="seller"&&(ce=N.orderId.seller||"",!ce))throw new Error("Could not find seller ID in order data");return ut("POST",`/api/admin/disputes/${N._id}/resolve`,{favored:ce,final_comments:a})},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/disputes"]}),s({title:"Success",description:"Dispute resolved successfully"}),e("/admin/disputes")},onError:ie=>{s({title:"Error",description:ie.message||"Failed to resolve dispute",variant:"destructive"})}}),_=st({mutationFn:async({itemId:ie,orderId:ce,amount:oe})=>{w(ie);const Z=await fetch(`/api/admin/refund/${ce}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:"order",orderId:ce,itemId:ie,amount:oe,fromDispute:!0})});if(!Z.ok){const he=await Z.json().catch(()=>({}));throw new Error(he.error||"Failed to process refund")}return Z.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/disputes",r]}),We.invalidateQueries({queryKey:["admin-orders"]}),s({title:"Refund Processed",description:"The item has been refunded successfully"}),w(null),h(!1),g(null)},onError:ie=>{s({title:"Refund Failed",description:ie.message||"Failed to process refund",variant:"destructive"}),w(null)}}),T=ie=>{u(ie),c(!0)},j=()=>{d&&(C.mutate({decision:d}),c(!1))},S=ie=>{var ce;g({_id:ie._id,name:((ce=ie.productId)==null?void 0:ce.name)||"Unknown Product",price:ie.price}),h(!0)},A=()=>{var ie;x&&((ie=N==null?void 0:N.orderId)!=null&&ie._id)&&_.mutate({itemId:x._id,orderId:N.orderId._id,amount:x.price})},I=ie=>{switch(ie==null?void 0:ie.toLowerCase()){case"resolved":return"default";case"submitted":return"secondary";case"under_review":return"outline";case"rejected":return"destructive";default:return"secondary"}},P=ie=>{var ce;return((ce=ie==null?void 0:ie.replace(/_/g," "))==null?void 0:ce.replace(/\b\w/g,oe=>oe.toUpperCase()))||"N/A"},O=ie=>ie?new Date(ie).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";if(v)return n.jsx(Ze,{children:n.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading dispute..."})]})})});if(!N)return n.jsx(Ze,{children:n.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(yh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Dispute not found"}),n.jsxs(G,{variant:"outline",className:"mt-4",onClick:()=>e("/admin/disputes"),"data-testid":"button-back-to-disputes",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Disputes"]})]})})});const D=((L=($=N.orderId)==null?void 0:$.items)==null?void 0:L.reduce((ie,ce)=>ie+(ce.price||0)*(ce.quantity||1),0))||0,M=((te=N.orderId)==null?void 0:te.tax)||0,J=((F=N.orderId)==null?void 0:F.shipping_fee)||0,X=D+M+J,U=((z=N.status)==null?void 0:z.toLowerCase())==="resolved";return n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs(G,{variant:"ghost",onClick:()=>e("/admin/disputes"),className:"mb-4","data-testid":"button-back",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Back to Disputes"]}),n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-destructive/10 rounded-lg",children:n.jsx(yh,{className:"h-6 w-6 text-destructive"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Dispute Resolution"}),n.jsxs("p",{className:"text-muted-foreground",children:["Case ID: ",N._id]})]})]}),n.jsx(Ye,{variant:I(N.status),className:"text-sm",children:(pe=N.status)==null?void 0:pe.replace(/_/g," ")})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(yh,{className:"h-5 w-5"}),"Dispute Details"]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Reason"}),n.jsx("p",{className:"text-lg font-semibold mt-1",children:P(N.reason)})]}),n.jsx(vi,{}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer's Statement"}),n.jsx("p",{className:"mt-2 p-4 bg-muted rounded-lg text-foreground whitespace-pre-wrap",children:N.details||"No details provided"})]}),N.seller_response&&n.jsxs(n.Fragment,{children:[n.jsx(vi,{}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Seller's Response"}),n.jsx("p",{className:"mt-2 p-4 bg-muted rounded-lg text-foreground whitespace-pre-wrap",children:N.seller_response})]})]}),n.jsx(vi,{}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Submitted On"}),n.jsx("p",{className:"mt-1",children:O(N.createdAt)})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(cr,{className:"h-5 w-5"}),"Order Details"]}),n.jsxs(Fe,{children:["Order ID: ",(xe=N.orderId)==null?void 0:xe._id]})]}),n.jsx(ue,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Items"}),n.jsx("div",{className:"space-y-3",children:(Me=(_e=N.orderId)==null?void 0:_e.items)==null?void 0:Me.map((ie,ce)=>{var oe,Z,he,Ne,Ke;return n.jsxs("div",{className:"flex items-start gap-3 p-3 border border-border rounded-lg","data-testid":`item-${ie._id}`,children:[(Z=(oe=ie.productId)==null?void 0:oe.images)!=null&&Z[0]?n.jsx("img",{src:su(ie.productId.images[0],i),alt:ie.productId.name,className:"w-16 h-16 object-cover rounded"}):n.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:n.jsx(hs,{className:"h-6 w-6 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium",children:[((he=ie.productId)==null?void 0:he.name)||"Unknown Product",ie.order_reference&&n.jsxs("span",{className:"text-muted-foreground",children:[" ",ie.order_reference]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",ie.quantity||1]}),n.jsxs("p",{className:"text-sm font-semibold mt-1",children:["$",(Ne=ie.price)==null?void 0:Ne.toFixed(2)]})]}),!U&&((Ke=ie.status)==null?void 0:Ke.toLowerCase())!=="refunded"&&n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>S(ie),disabled:y===ie._id,className:"shrink-0","data-testid":`refund-item-${ie._id}`,children:[n.jsx(bv,{className:`h-4 w-4 mr-1 ${y===ie._id?"animate-spin":""}`}),y===ie._id?"Refunding...":"Refund"]})]},ie._id||ce)})})]}),n.jsx(vi,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),n.jsxs("span",{children:["$",D.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Tax"}),n.jsxs("span",{children:["$",M.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),n.jsxs("span",{children:["$",J.toFixed(2)]})]}),n.jsx(vi,{}),n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["$",X.toFixed(2)]})]})]})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs(we,{className:"flex items-center gap-2 text-base",children:[n.jsx(fo,{className:"h-4 w-4"}),"Customer"]})}),n.jsx(ue,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx("span",{className:"text-lg font-semibold text-primary",children:((Q=(K=N.userId)==null?void 0:K.userName)==null?void 0:Q.charAt(0).toUpperCase())||"U"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:((se=N.userId)==null?void 0:se.userName)||"Unknown"}),((ye=N.userId)==null?void 0:ye.email)&&n.jsx("p",{className:"text-sm text-muted-foreground",children:N.userId.email})]})]})})]}),!U&&n.jsxs(de,{className:"border-primary/50",children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2 text-base",children:[n.jsx(uj,{className:"h-4 w-4"}),"Resolve Dispute"]}),n.jsx(Fe,{children:"Rule in favor of one party"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Admin Notes (Optional)"}),n.jsx(zs,{placeholder:"Add any notes about your decision...",value:a,onChange:ie=>o(ie.target.value),rows:4,"data-testid":"textarea-admin-notes"})]}),n.jsx(vi,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(G,{className:"w-full",variant:"default",size:"lg",onClick:()=>T("buyer"),disabled:C.isPending,"data-testid":"button-favor-buyer",children:[n.jsx(Pd,{className:"h-4 w-4 mr-2"}),"Rule in Favor of Buyer"]}),n.jsxs(G,{className:"w-full",variant:"outline",size:"lg",onClick:()=>T("seller"),disabled:C.isPending,"data-testid":"button-favor-seller",children:[n.jsx(wI,{className:"h-4 w-4 mr-2"}),"Rule in Favor of Seller"]}),n.jsxs(G,{className:"w-full",variant:"secondary",size:"lg",onClick:()=>T("no_favor"),disabled:C.isPending,"data-testid":"button-no-favor",children:[n.jsx(uj,{className:"h-4 w-4 mr-2"}),"Resolve No Favor"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"This action cannot be undone. The appropriate party will be refunded or compensated."})]})]}),U&&n.jsxs(de,{className:"border-green-500/50 bg-green-500/5",children:[n.jsx(be,{children:n.jsxs(we,{className:"flex items-center gap-2 text-base text-green-700 dark:text-green-400",children:[n.jsx(Pd,{className:"h-4 w-4"}),"Dispute Resolved"]})}),n.jsx(ue,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"This dispute has been resolved and closed."})})]})]})]}),n.jsx(Ca,{open:l,onOpenChange:c,children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Confirm Resolution"}),n.jsx(Fi,{children:d==="no_favor"?"Are you sure you want to resolve this dispute with no favor to either party? This action cannot be undone.":n.jsxs(n.Fragment,{children:["Are you sure you want to rule in favor of the ",d==="buyer"?"buyer":"seller","?",d==="buyer"&&" The buyer will be refunded.",d==="seller"&&" The seller will keep the payment."," ","This action cannot be undone."]})})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{"data-testid":"button-cancel-resolve",children:"Cancel"}),n.jsx($i,{onClick:j,disabled:C.isPending,"data-testid":"button-confirm-resolve",children:C.isPending?"Resolving...":"Confirm"})]})]})}),n.jsx(Ca,{open:f,onOpenChange:h,children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Confirm Refund"}),n.jsxs(Fi,{children:['Are you sure you want to refund "',x==null?void 0:x.name,'" for $',(B=x==null?void 0:x.price)==null?void 0:B.toFixed(2),"? This action cannot be undone."]})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{"data-testid":"button-cancel-refund",children:"Cancel"}),n.jsx($i,{onClick:A,disabled:_.isPending,"data-testid":"button-confirm-refund",children:_.isPending?"Processing...":"Confirm Refund"})]})]})})]})})}function _re(){var N,C;const[t,e]=p.useState(1),[s,r]=p.useState(""),[i,a]=p.useState(!1),{toast:o}=Et(),l=10,{data:c,isLoading:d}=Ve({queryKey:["/api/admin/reported-cases",t],queryFn:async()=>{const _=await fetch(`/api/admin/reported-cases?page=${t}&limit=${l}`,{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch reported cases");return await _.json()}}),u=Array.isArray((N=c==null?void 0:c.data)==null?void 0:N.data)?c.data.data:Array.isArray(c==null?void 0:c.data)?c.data:[],f=((C=c==null?void 0:c.data)==null?void 0:C.totalPages)||1,h=st({mutationFn:async({userId:_,blocked:T})=>ut("PATCH",`/api/admin/users/${_}/block`,{blocked:T}),onSuccess:(_,T)=>{We.invalidateQueries({queryKey:["/api/admin/reported-cases"]}),o({title:"Success",description:`User ${T.blocked?"blocked":"unblocked"} successfully`})},onError:(_,T)=>{o({title:"Error",description:_.message||`Failed to ${T.blocked?"block":"unblock"} user`,variant:"destructive"})}}),x=u.filter(_=>{var P,O,D,M,J,X;if(!s)return!0;const T=s.toLowerCase(),j=((O=(P=_.reported)==null?void 0:P.userName)==null?void 0:O.toLowerCase())||"",S=((M=(D=_.reported_by)==null?void 0:D.userName)==null?void 0:M.toLowerCase())||"",A=((J=_.reason)==null?void 0:J.toLowerCase())||"",I=((X=_.description)==null?void 0:X.toLowerCase())||"";return j.includes(T)||S.includes(T)||A.includes(T)||I.includes(T)}),g=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",y=_=>{switch(_==null?void 0:_.toLowerCase()){case"resolved":return"default";case"pending":return"secondary";case"under_review":return"outline";case"rejected":return"destructive";default:return"secondary"}},w=_=>{var T;return((T=_==null?void 0:_.replace(/_/g," "))==null?void 0:T.replace(/\b\w/g,j=>j.toUpperCase()))||"N/A"},b=()=>{r(""),e(1)},v=s;return d?n.jsx(Ze,{children:n.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-muted-foreground",children:"Loading reported cases..."})})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[n.jsx("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[n.jsx(dj,{className:"h-8 w-8"}),"Reported Cases"]}),n.jsx("p",{className:"text-muted-foreground mt-2","data-testid":"text-page-description",children:"Review and manage user-reported cases"})]})}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{children:"All Reported Cases"}),n.jsxs(Fe,{children:[x.length," ",x.length===1?"case":"cases"," found"]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"relative flex-1 sm:w-64",children:[n.jsx(Rn,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search by user, reason...",value:s,onChange:_=>r(_.target.value),className:"pl-8","data-testid":"input-search"})]}),v&&n.jsxs(G,{variant:"outline",onClick:b,className:"gap-2","data-testid":"button-clear-filters",children:[n.jsx(un,{className:"h-4 w-4"}),"Clear"]})]})]})}),n.jsx(ue,{children:x.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(dj,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground","data-testid":"text-no-cases",children:s?"No cases match your search criteria":"No reported cases found"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Case ID"}),n.jsx(Ce,{children:"Reported User"}),n.jsx(Ce,{className:"hidden md:table-cell",children:"Reporter"}),n.jsx(Ce,{children:"Reason"}),n.jsx(Ce,{className:"hidden lg:table-cell",children:"Status"}),n.jsx(Ce,{className:"hidden xl:table-cell",children:"Date"}),n.jsx(Ce,{className:"text-right",children:"Actions"})]})}),n.jsx(Us,{children:x.map(_=>{var T,j;return n.jsxs(yt,{"data-testid":`row-case-${_._id}`,children:[n.jsx(ke,{className:"font-mono text-xs","data-testid":`text-case-id-${_._id}`,children:_._id.slice(-8)}),n.jsx(ke,{"data-testid":`text-reported-user-${_._id}`,children:((T=_.reported)==null?void 0:T.userName)||"Unknown"}),n.jsx(ke,{className:"hidden md:table-cell","data-testid":`text-reporter-${_._id}`,children:((j=_.reported_by)==null?void 0:j.userName)||"Anonymous"}),n.jsx(ke,{"data-testid":`text-reason-${_._id}`,children:w(_.reason||"")}),n.jsx(ke,{className:"hidden lg:table-cell",children:n.jsx(Ye,{variant:y(_.status||"pending"),"data-testid":`badge-status-${_._id}`,children:_.status||"Pending"})}),n.jsx(ke,{className:"hidden xl:table-cell","data-testid":`text-date-${_._id}`,children:g(_.createdAt||"")}),n.jsx(ke,{className:"text-right",children:_.reported&&n.jsx(G,{variant:_.reported.system_blocked?"outline":"destructive",size:"sm",onClick:()=>{var S;(S=_.reported)!=null&&S._id&&h.mutate({userId:_.reported._id,blocked:!_.reported.system_blocked})},disabled:h.isPending,"data-testid":`button-block-${_._id}`,children:_.reported.system_blocked?n.jsxs(n.Fragment,{children:[n.jsx(lc,{className:"h-4 w-4 mr-2"}),"Unblock"]}):n.jsxs(n.Fragment,{children:[n.jsx(lm,{className:"h-4 w-4 mr-2"}),"Block"]})})})]},_._id)})})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground","data-testid":"text-pagination-info",children:["Page ",t," of ",f]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>e(_=>Math.max(1,_-1)),disabled:t===1,"data-testid":"button-previous-page",children:"Previous"}),n.jsx(G,{variant:"outline",onClick:()=>e(_=>Math.min(f,_+1)),disabled:t>=f,"data-testid":"button-next-page",children:"Next"})]})]})]})})]})]})})}function Sre(){const{toast:t}=Et(),[e,s]=p.useState("mailgun"),[r,i]=p.useState(""),[a,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(""),[f,h]=p.useState(""),{data:x}=Ve({queryKey:["/api/settings/full"]}),g=(x==null?void 0:x.data)||x,y=(g==null?void 0:g.demoMode)||!1;p.useEffect(()=>{g&&(s(g.email_service_provider||"mailgun"),i(g.email_api_key||""),o(g.email_from_address||""),c(g.email_from_name||""),u(g.email_reply_to||""),h(g.email_mailgun_domain||""))},[g]);const w=st({mutationFn:async v=>ut("POST","/api/settings",v),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/settings/full"]}),t({title:"Email settings saved",description:"Email configuration has been updated successfully"})},onError:v=>{t({title:"Error saving settings",description:v.message||"Failed to save email settings",variant:"destructive"})}}),b=()=>{if(!a.trim()){t({title:"Validation Error",description:"From Address is required",variant:"destructive"});return}w.mutate({email_service_provider:e,email_api_key:r,email_from_address:a,email_from_name:l,email_reply_to:d,email_mailgun_domain:f})};return n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[y&&n.jsxs(Xs,{className:"mb-6 border-destructive bg-destructive/10",children:[n.jsx(fj,{className:"h-4 w-4 text-destructive"}),n.jsx(Js,{className:"text-destructive",children:"Email functionality is disabled in demo mode. This page is view-only to prevent sending emails to real users."})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(dm,{className:"h-5 w-5"}),"Email Service Configuration"]}),n.jsx(Fe,{children:"Configure email service provider for sending emails to users"})]}),n.jsxs(ue,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"email_service_provider",children:"Email Service Provider"}),n.jsxs(Gt,{value:e,onValueChange:s,disabled:y,children:[n.jsx(Bt,{id:"email_service_provider","data-testid":"select-email-provider",children:n.jsx(Yt,{placeholder:"Select provider"})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"mailgun",children:"Mailgun"}),n.jsx(fe,{value:"brevo",children:"Brevo"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"email_api_key",children:"API Key"}),n.jsx(le,{id:"email_api_key",type:y?"text":"password",value:r,onChange:v=>i(v.target.value),placeholder:"Enter API key","data-testid":"input-email-api-key",disabled:y})]}),e==="mailgun"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"email_mailgun_domain",children:"Mailgun Domain"}),n.jsx(le,{id:"email_mailgun_domain",value:f,onChange:v=>h(v.target.value),placeholder:"yourdomain.com","data-testid":"input-mailgun-domain",disabled:y})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"email_from_address",children:"From Address *"}),n.jsx(le,{id:"email_from_address",type:"email",value:a,onChange:v=>o(v.target.value),placeholder:"noreply@yourdomain.com","data-testid":"input-email-from",disabled:y})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"email_from_name",children:"From Name"}),n.jsx(le,{id:"email_from_name",value:l,onChange:v=>c(v.target.value),placeholder:"Your App Name","data-testid":"input-email-from-name",disabled:y})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"email_reply_to",children:"Reply-To Address"}),n.jsx(le,{id:"email_reply_to",type:"email",value:d,onChange:v=>u(v.target.value),placeholder:"support@yourdomain.com","data-testid":"input-email-reply-to",disabled:y})]})]}),n.jsxs(G,{onClick:b,disabled:y||w.isPending,className:"w-full",size:"lg","data-testid":"button-save-email-settings",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),w.isPending?"Saving...":"Save Email Settings"]})]})]})]})})}function Cre(t,e){return p.useReducer((s,r)=>e[s][r]??s,t)}var hS="ScrollArea",[S6]=Cn(hS),[kre,Hi]=S6(hS),C6=p.forwardRef((t,e)=>{const{__scopeScrollArea:s,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[l,c]=p.useState(null),[d,u]=p.useState(null),[f,h]=p.useState(null),[x,g]=p.useState(null),[y,w]=p.useState(null),[b,v]=p.useState(0),[N,C]=p.useState(0),[_,T]=p.useState(!1),[j,S]=p.useState(!1),A=ft(e,P=>c(P)),I=Df(i);return n.jsx(kre,{scope:s,type:r,dir:I,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:h,scrollbarX:x,onScrollbarXChange:g,scrollbarXEnabled:_,onScrollbarXEnabledChange:T,scrollbarY:y,onScrollbarYChange:w,scrollbarYEnabled:j,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:C,children:n.jsx(Je.div,{dir:I,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});C6.displayName=hS;var k6="ScrollAreaViewport",E6=p.forwardRef((t,e)=>{const{__scopeScrollArea:s,children:r,nonce:i,...a}=t,o=Hi(k6,s),l=p.useRef(null),c=ft(e,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),n.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});E6.displayName=k6;var Co="ScrollAreaScrollbar",fS=p.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=Hi(Co,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?n.jsx(Ere,{...r,ref:e,forceMount:s}):i.type==="scroll"?n.jsx(Tre,{...r,ref:e,forceMount:s}):i.type==="auto"?n.jsx(T6,{...r,ref:e,forceMount:s}):i.type==="always"?n.jsx(pS,{...r,ref:e}):null});fS.displayName=Co;var Ere=p.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=Hi(Co,t.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),n.jsx(hn,{present:s||a,children:n.jsx(T6,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Tre=p.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=Hi(Co,t.__scopeScrollArea),a=t.orientation==="horizontal",o=a0(()=>c("SCROLL_END"),100),[l,c]=Cre("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),p.useEffect(()=>{const d=i.viewport,u=a?"scrollLeft":"scrollTop";if(d){let f=d[u];const h=()=>{const x=d[u];f!==x&&(c("SCROLL"),o()),f=x};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[i.viewport,a,c,o]),n.jsx(hn,{present:s||l!=="hidden",children:n.jsx(pS,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ie(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ie(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),T6=p.forwardRef((t,e)=>{const s=Hi(Co,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=p.useState(!1),l=t.orientation==="horizontal",c=a0(()=>{if(s.viewport){const d=s.viewport.offsetWidth<s.viewport.scrollWidth,u=s.viewport.offsetHeight<s.viewport.scrollHeight;o(l?d:u)}},10);return hf(s.viewport,c),hf(s.content,c),n.jsx(hn,{present:r||a,children:n.jsx(pS,{"data-state":a?"visible":"hidden",...i,ref:e})})}),pS=p.forwardRef((t,e)=>{const{orientation:s="vertical",...r}=t,i=Hi(Co,t.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=O6(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>a.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,x){return Dre(h,o.current,l,x)}return s==="horizontal"?n.jsx(Are,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const h=i.viewport.scrollLeft,x=zE(h,l,i.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=f(h,i.dir))}}):s==="vertical"?n.jsx(Pre,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const h=i.viewport.scrollTop,x=zE(h,l);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=f(h))}}):null}),Are=p.forwardRef((t,e)=>{const{sizes:s,onSizesChange:r,...i}=t,a=Hi(Co,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=ft(e,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(P6,{"data-orientation":"horizontal",...i,ref:d,sizes:s,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":i0(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(a.viewport){const h=a.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),M6(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:By(o.paddingLeft),paddingEnd:By(o.paddingRight)}})}})}),Pre=p.forwardRef((t,e)=>{const{sizes:s,onSizesChange:r,...i}=t,a=Hi(Co,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=ft(e,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(P6,{"data-orientation":"vertical",...i,ref:d,sizes:s,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":i0(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(a.viewport){const h=a.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),M6(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:By(o.paddingTop),paddingEnd:By(o.paddingBottom)}})}})}),[Ire,A6]=S6(Co),P6=p.forwardRef((t,e)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...h}=t,x=Hi(Co,s),[g,y]=p.useState(null),w=ft(e,A=>y(A)),b=p.useRef(null),v=p.useRef(""),N=x.viewport,C=r.content-r.viewport,_=Zs(u),T=Zs(c),j=a0(f,10);function S(A){if(b.current){const I=A.clientX-b.current.left,P=A.clientY-b.current.top;d({x:I,y:P})}}return p.useEffect(()=>{const A=I=>{const P=I.target;(g==null?void 0:g.contains(P))&&_(I,C)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[N,g,C,_]),p.useEffect(T,[r,T]),hf(g,j),hf(x.content,j),n.jsx(Ire,{scope:s,scrollbar:g,hasThumb:i,onThumbChange:Zs(a),onThumbPointerUp:Zs(o),onThumbPositionChange:T,onThumbPointerDown:Zs(l),children:n.jsx(Je.div,{...h,ref:w,style:{position:"absolute",...h.style},onPointerDown:Ie(t.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),b.current=g.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),S(A))}),onPointerMove:Ie(t.onPointerMove,S),onPointerUp:Ie(t.onPointerUp,A=>{const I=A.target;I.hasPointerCapture(A.pointerId)&&I.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,x.viewport&&(x.viewport.style.scrollBehavior=""),b.current=null})})})}),zy="ScrollAreaThumb",I6=p.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=A6(zy,t.__scopeScrollArea);return n.jsx(hn,{present:s||i.hasThumb,children:n.jsx(Rre,{ref:e,...r})})}),Rre=p.forwardRef((t,e)=>{const{__scopeScrollArea:s,style:r,...i}=t,a=Hi(zy,s),o=A6(zy,s),{onThumbPositionChange:l}=o,c=ft(e,f=>o.onThumbChange(f)),d=p.useRef(void 0),u=a0(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const f=a.viewport;if(f){const h=()=>{if(u(),!d.current){const x=Mre(f,l);d.current=x,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[a.viewport,u,l]),n.jsx(Je.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ie(t.onPointerDownCapture,f=>{const x=f.target.getBoundingClientRect(),g=f.clientX-x.left,y=f.clientY-x.top;o.onThumbPointerDown({x:g,y})}),onPointerUp:Ie(t.onPointerUp,o.onThumbPointerUp)})});I6.displayName=zy;var mS="ScrollAreaCorner",R6=p.forwardRef((t,e)=>{const s=Hi(mS,t.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?n.jsx(Ore,{...t,ref:e}):null});R6.displayName=mS;var Ore=p.forwardRef((t,e)=>{const{__scopeScrollArea:s,...r}=t,i=Hi(mS,s),[a,o]=p.useState(0),[l,c]=p.useState(0),d=!!(a&&l);return hf(i.scrollbarX,()=>{var f;const u=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),hf(i.scrollbarY,()=>{var f;const u=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),d?n.jsx(Je.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function By(t){return t?parseInt(t,10):0}function O6(t,e){const s=t/e;return isNaN(s)?0:s}function i0(t){const e=O6(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-s)*e;return Math.max(r,18)}function Dre(t,e,s,r="ltr"){const i=i0(s),a=i/2,o=e||a,l=i-o,c=s.scrollbar.paddingStart+o,d=s.scrollbar.size-s.scrollbar.paddingEnd-l,u=s.content-s.viewport,f=r==="ltr"?[0,u]:[u*-1,0];return D6([c,d],f)(t)}function zE(t,e,s="ltr"){const r=i0(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,l=a-r,c=s==="ltr"?[0,o]:[o*-1,0],d=qj(t,c);return D6([0,o],[0,l])(d)}function D6(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(s-t[0])}}function M6(t,e){return t>0&&t<e}var Mre=(t,e=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=s.left!==a.left,l=s.top!==a.top;(o||l)&&e(),s=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function a0(t,e){const s=Zs(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,e)},[s,e])}function hf(t,e){const s=Zs(e);en(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,s])}var L6=C6,Lre=E6,Fre=R6;const Px=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(L6,{ref:r,className:Re("relative overflow-hidden",t),...s,children:[n.jsx(Lre,{className:"h-full w-full rounded-[inherit]",children:e}),n.jsx(F6,{}),n.jsx(Fre,{})]}));Px.displayName=L6.displayName;const F6=p.forwardRef(({className:t,orientation:e="vertical",...s},r)=>n.jsx(fS,{ref:r,orientation:e,className:Re("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:n.jsx(I6,{className:"relative flex-1 rounded-full bg-border"})}));F6.displayName=fS.displayName;function $re(t,e=[]){let s=[];function r(a,o){const l=p.createContext(o);l.displayName=a+"Context";const c=s.length;s=[...s,o];const d=f=>{var b;const{scope:h,children:x,...g}=f,y=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,w=p.useMemo(()=>g,Object.values(g));return n.jsx(y.Provider,{value:w,children:x})};d.displayName=a+"Provider";function u(f,h){var y;const x=((y=h==null?void 0:h[t])==null?void 0:y[c])||l,g=p.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=s.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,Ure(i,...e)]}function Ure(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}var zre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$6=zre.reduce((t,e)=>{const s=eg(`Primitive.${e}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),gS="Progress",xS=100,[Bre]=$re(gS),[qre,Vre]=Bre(gS),U6=p.forwardRef((t,e)=>{const{__scopeProgress:s,value:r=null,max:i,getValueLabel:a=Hre,...o}=t;(i||i===0)&&!BE(i)&&console.error(Wre(`${i}`,"Progress"));const l=BE(i)?i:xS;r!==null&&!qE(r,l)&&console.error(Kre(`${r}`,"Progress"));const c=qE(r,l)?r:null,d=qy(c)?a(c,l):void 0;return n.jsx(qre,{scope:s,value:c,max:l,children:n.jsx($6.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":qy(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":q6(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});U6.displayName=gS;var z6="ProgressIndicator",B6=p.forwardRef((t,e)=>{const{__scopeProgress:s,...r}=t,i=Vre(z6,s);return n.jsx($6.div,{"data-state":q6(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});B6.displayName=z6;function Hre(t,e){return`${Math.round(t/e*100)}%`}function q6(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function qy(t){return typeof t=="number"}function BE(t){return qy(t)&&!isNaN(t)&&t>0}function qE(t,e){return qy(t)&&!isNaN(t)&&t<=e&&t>=0}function Wre(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${xS}\`.`}function Kre(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${xS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var V6=U6,Gre=B6;const yS=p.forwardRef(({className:t,value:e,...s},r)=>n.jsx(V6,{ref:r,className:Re("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:n.jsx(Gre,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));yS.displayName=V6.displayName;const Yre=`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Launch Your Live Shopping Business with Tokshop</title>
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f4; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f4; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 50px 30px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 36px; font-weight: bold;">TOKSHOP</h1>
              <p style="color: #00d4ff; margin: 15px 0 0 0; font-size: 18px; font-weight: 500;">Your Own Live Shopping Marketplace</p>
            </td>
          </tr>
          
          <!-- Hero Message -->
          <tr>
            <td style="padding: 40px 30px 20px 30px; text-align: center;">
              <h2 style="color: #1a1a2e; margin: 0 0 15px 0; font-size: 26px; line-height: 1.3;">
                Start Your Own Platform Like Whatnot
              </h2>
              <p style="color: #666666; font-size: 16px; line-height: 1.7; margin: 0;">
                Hi {{params.name}},<br><br>
                Live shopping is growing fast - <strong>$68 billion by 2026</strong>. 
                With Tokshop, you get a ready-made platform to start your own live shopping business in days.
              </p>
            </td>
          </tr>
          
          <!-- Stats Bar -->
          <tr>
            <td style="padding: 20px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;">
                <tr>
                  <td width="33%" style="padding: 25px 10px; text-align: center; border-right: 1px solid rgba(255,255,255,0.2);">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">$68B</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">Market by 2026</p>
                  </td>
                  <td width="33%" style="padding: 25px 10px; text-align: center; border-right: 1px solid rgba(255,255,255,0.2);">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">10x</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">More Sales</p>
                  </td>
                  <td width="33%" style="padding: 25px 10px; text-align: center;">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">48hrs</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">To Launch</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          
          <!-- CTA -->
          <tr>
            <td style="padding: 30px 30px 40px 30px; text-align: center;">
              <p style="color: #666666; font-size: 16px; margin: 0 0 25px 0;">
                Want to start your own live shopping business?
              </p>
              <a href="https://wa.me/254791334234?text=Hi%2C%20I%27m%20interested%20in%20Tokshop%20for%20my%20live%20shopping%20business" style="display: inline-block; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: #ffffff; text-decoration: none; padding: 18px 50px; border-radius: 30px; font-size: 16px; font-weight: bold; box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);">
                Chat With Us on WhatsApp
              </a>
              <p style="color: #999999; font-size: 13px; margin: 20px 0 0 0;">
                or just reply to this email
              </p>
            </td>
          </tr>
          
          <!-- Footer -->
          <tr>
            <td style="background-color: #1a1a2e; padding: 30px; text-align: center;">
              <p style="color: rgba(255,255,255,0.6); font-size: 12px; margin: 0 0 15px 0;">
                Tokshop - Live Shopping Platform
              </p>
              <p style="color: rgba(255,255,255,0.4); font-size: 11px; margin: 0; line-height: 1.6;">
                You got this email because you showed interest in live shopping.<br>
                <a href="https://tokshoplive.com/unsubscribe" style="color: #00d4ff; text-decoration: underline;">Unsubscribe</a>
              </p>
            </td>
          </tr>
          
        </table>
      </td>
    </tr>
  </table>
  
</body>
</html>`;function Qre(){const{toast:t}=Et(),[e,s]=p.useState("Launch Your Live Shopping Business with Tokshop"),[r,i]=p.useState(Yre),[a,o]=p.useState("Tokshop"),[l,c]=p.useState("sales@tokshoplive.com"),[d,u]=p.useState("reggycodas@gmail.com"),[f,h]=p.useState([]),[x,g]=p.useState(""),[y,w]=p.useState(""),[b,v]=p.useState(""),[N,C]=p.useState(""),[_,T]=p.useState(!1),[j,S]=p.useState({current:0,total:0,status:""}),[A,I]=p.useState(!1),[P,O]=p.useState(null),[D,M]=p.useState(!1),J=p.useRef(null),X=Q=>["email","e-mail","email address","emailaddress","mail","recipient"].some(ye=>Q.toLowerCase().includes(ye))||!Q.includes("@"),U=(Q,se)=>{const ye=`email,name
`+Q.map(ce=>`${ce.email},${ce.name||""}`).join(`
`),B=new Blob([ye],{type:"text/csv;charset=utf-8;"}),ie=document.createElement("a");ie.href=URL.createObjectURL(B),ie.download=se,ie.click()},$=Q=>{var B;const se=(B=Q.target.files)==null?void 0:B[0];if(!se)return;const ye=new FileReader;ye.onload=ie=>{var Ke,$e,W;const ce=(Ke=ie.target)==null?void 0:Ke.result;if(!ce)return;const oe=ce.split(`
`).filter(ae=>ae.trim()),Z=[],he=new Set(f.map(ae=>ae.email.toLowerCase()));let Ne=!1;for(const ae of oe){const ge=ae.split(",").map(je=>je.trim().replace(/^["']|["']$/g,"")),Ae=($e=ge[0])==null?void 0:$e.trim(),Y=((W=ge[1])==null?void 0:W.trim())||void 0;!Ne&&(Ne=!0,X(Ae))||Ae&&Ae.includes("@")&&Ae.includes(".")&&!he.has(Ae.toLowerCase())&&(Z.push({email:Ae,name:Y}),he.add(Ae.toLowerCase()))}Z.length>0?(h([...f,...Z]),t({title:"File imported successfully",description:`Added ${Z.length} recipients from ${se.name}`})):t({title:"No new recipients found",description:"The file contained no valid new email addresses",variant:"destructive"}),J.current&&(J.current.value="")},ye.readAsText(se)},L=async Q=>{const B=[];for(let Z=0;Z<Q.recipients.length;Z+=50)B.push(Q.recipients.slice(Z,Z+50));const ie=[],ce=[];I(!0),O(null),S({current:0,total:Q.recipients.length,status:"Starting..."});for(let Z=0;Z<B.length;Z++){const he=B[Z],Ne=Z*50;S({current:Ne,total:Q.recipients.length,status:`Sending batch ${Z+1} of ${B.length}...`});try{const $e=await(await ut("POST","/api/admin/brevo/send-batch",{recipients:he,subject:Q.subject,htmlContent:Q.htmlContent,senderName:Q.senderName,senderEmail:Q.senderEmail,replyToEmail:Q.replyToEmail})).json();if($e.success)he.forEach(W=>ie.push(W));else{const W=$e.error||`Batch ${Z+1} failed`;he.forEach(ae=>ce.push({recipient:ae,error:W}))}}catch(Ke){const $e=Ke.message||`Batch ${Z+1} error`;he.forEach(W=>ce.push({recipient:W,error:$e}))}S({current:Ne+he.length,total:Q.recipients.length,status:`Sent ${Ne+he.length} of ${Q.recipients.length}`}),Z<B.length-1&&await new Promise(Ke=>setTimeout(Ke,1e3))}if(I(!1),S({current:Q.recipients.length,total:Q.recipients.length,status:"Complete"}),O({successful:ie,failed:ce}),M(!0),ie.length===0&&ce.length>0)throw new Error(`All ${ce.length} emails failed to send. Check your Brevo API key and sender email.`);return{success:ie.length>0,message:`Campaign complete: ${ie.length} sent successfully, ${ce.length} failed`,details:{total:Q.recipients.length,successful:ie.length,failed:ce.length,successfulEmails:ie,failedEmails:ce}}},te=st({mutationFn:async Q=>ut("POST","/api/admin/brevo/send-test",Q),onSuccess:Q=>{t({title:"Test email sent",description:Q.message||`Email sent to ${b}`})},onError:Q=>{t({title:"Failed to send test email",description:Q.message||"Please check your Brevo API key and try again",variant:"destructive"})}}),F=st({mutationFn:async Q=>L(Q),onSuccess:Q=>{var ye;const se=((ye=Q.details)==null?void 0:ye.failed)>0;t({title:se?"Campaign completed with some failures":"Campaign sent successfully",description:Q.message||"Emails sent successfully",variant:"default"})},onError:Q=>{I(!1),t({title:"Campaign failed",description:Q.message||"Please check your settings and try again",variant:"destructive"})}}),z=()=>{if(!x.trim()){t({title:"Email required",description:"Please enter an email address",variant:"destructive"});return}if(f.some(Q=>Q.email===x.trim())){t({title:"Duplicate email",description:"This email is already in the list",variant:"destructive"});return}h([...f,{email:x.trim(),name:y.trim()||void 0}]),g(""),w("")},pe=Q=>{h(f.filter(se=>se.email!==Q))},xe=()=>{var ie,ce;if(!N.trim()){t({title:"No data",description:"Please paste CSV data",variant:"destructive"});return}const Q=N.split(`
`).filter(oe=>oe.trim()),se=[],ye=new Set(f.map(oe=>oe.email.toLowerCase()));let B=!1;for(const oe of Q){const Z=oe.split(",").map(Ke=>Ke.trim().replace(/^["']|["']$/g,"")),he=(ie=Z[0])==null?void 0:ie.trim(),Ne=((ce=Z[1])==null?void 0:ce.trim())||void 0;!B&&(B=!0,X(he))||he&&he.includes("@")&&he.includes(".")&&!ye.has(he.toLowerCase())&&(se.push({email:he,name:Ne}),ye.add(he.toLowerCase()))}se.length>0?(h([...f,...se]),C(""),t({title:"Import successful",description:`Added ${se.length} recipients`})):t({title:"No new recipients",description:"No valid new email addresses found",variant:"destructive"})},_e=()=>{if(!b.trim()){t({title:"Email required",description:"Please enter a test email address",variant:"destructive"});return}te.mutate({email:b.trim(),subject:e,htmlContent:r,senderName:a,senderEmail:l})},Me=()=>{if(f.length===0){t({title:"No recipients",description:"Please add at least one recipient",variant:"destructive"});return}if(!e.trim()||!r.trim()){t({title:"Missing content",description:"Please provide subject and email content",variant:"destructive"});return}F.mutate({recipients:f,subject:e,htmlContent:r,senderName:a,senderEmail:l,replyToEmail:d})},K=async()=>{try{const Q=await fetch("/email-preview.html");if(Q.ok){const se=await Q.text();i(se),t({title:"Template loaded",description:"Email template has been loaded"})}}catch{t({title:"Failed to load template",description:"Could not load the email template",variant:"destructive"})}};return n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(du,{className:"h-6 w-6"}),"Brevo Email Campaign"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Send marketing emails using Brevo (formerly Sendinblue)"})]}),n.jsxs(ys,{open:_,onOpenChange:T,children:[n.jsx(df,{asChild:!0,children:n.jsxs(G,{variant:"outline","data-testid":"button-preview-email",children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"Preview Email"]})}),n.jsxs(fs,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[n.jsx(ps,{children:n.jsx(ms,{children:"Email Preview"})}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsx("iframe",{srcDoc:r,title:"Email Preview",className:"w-full h-[600px] bg-white"})})]})]})]}),n.jsxs(Xs,{children:[n.jsx(qr,{className:"h-4 w-4"}),n.jsxs(Js,{children:["Make sure you have configured your ",n.jsx("strong",{children:"BREVO_API_KEY"})," in the environment variables. You can get your API key from the ",n.jsx("a",{href:"https://app.brevo.com/settings/keys/api",target:"_blank",rel:"noopener noreferrer",className:"underline text-primary",children:"Brevo dashboard"}),"."]})]}),n.jsxs(Vi,{defaultValue:"compose",className:"space-y-6",children:[n.jsxs(li,{children:[n.jsx(_t,{value:"compose","data-testid":"tab-compose",children:"Compose"}),n.jsxs(_t,{value:"recipients","data-testid":"tab-recipients",children:["Recipients",f.length>0&&n.jsx(Ye,{variant:"secondary",className:"ml-2",children:f.length})]}),n.jsx(_t,{value:"settings","data-testid":"tab-settings",children:"Settings"})]}),n.jsxs(Ft,{value:"compose",className:"space-y-6",children:[n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Email Content"}),n.jsxs(Fe,{children:["Write your email subject and content. Use ","{{params.name}}"," to personalize with recipient's name."]})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"subject",children:"Subject Line"}),n.jsx(le,{id:"subject",value:e,onChange:Q=>s(Q.target.value),placeholder:"Enter email subject...","data-testid":"input-subject"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(re,{htmlFor:"html-content",children:"HTML Content"}),n.jsxs(G,{variant:"outline",size:"sm",onClick:K,"data-testid":"button-load-template",children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),"Load Template"]})]}),n.jsx(zs,{id:"html-content",value:r,onChange:Q=>i(Q.target.value),placeholder:"Paste your HTML email content here...",rows:15,className:"font-mono text-sm","data-testid":"textarea-html-content"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Send Test Email"}),n.jsx(Fe,{children:"Send a test email to yourself before sending to all recipients"})]}),n.jsx(ue,{className:"space-y-4",children:n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx(le,{value:b,onChange:Q=>v(Q.target.value),placeholder:"Enter your email address...","data-testid":"input-test-email"})}),n.jsxs(G,{onClick:_e,disabled:te.isPending,"data-testid":"button-send-test",children:[n.jsx(hy,{className:"h-4 w-4 mr-2"}),te.isPending?"Sending...":"Send Test"]})]})})]})]}),n.jsxs(Ft,{value:"recipients",className:"space-y-6",children:[n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Add Recipients"}),n.jsx(Fe,{children:"Add email addresses manually or import from CSV"})]}),n.jsxs(ue,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr,1fr,auto]",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Email Address"}),n.jsx(le,{value:x,onChange:Q=>g(Q.target.value),placeholder:"email@example.com","data-testid":"input-new-email"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Name (Optional)"}),n.jsx(le,{value:y,onChange:Q=>w(Q.target.value),placeholder:"John Doe","data-testid":"input-new-name"})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs(G,{onClick:z,"data-testid":"button-add-recipient",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add"]})})]}),n.jsxs("div",{className:"border-t pt-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{children:"Upload CSV File"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Upload a CSV file with email addresses (supports 2500+ rows)"}),n.jsx("div",{className:"flex gap-2",children:n.jsx(le,{ref:J,type:"file",accept:".csv,.txt",onChange:$,className:"flex-1","data-testid":"input-file-upload"})}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Format: email,name (one per line). Header row is optional and will be skipped."})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx(re,{children:"Or Paste CSV Data"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"For smaller lists, paste directly"}),n.jsx(zs,{value:N,onChange:Q=>C(Q.target.value),placeholder:`john@example.com,John Doe
jane@example.com,Jane Smith`,rows:5,"data-testid":"textarea-csv"}),n.jsxs(G,{onClick:xe,className:"mt-2",variant:"outline","data-testid":"button-import-csv",children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),"Import Pasted Data"]})]})]})]})]}),n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(we,{children:"Recipients List"}),n.jsxs(Fe,{children:[f.length," recipient",f.length!==1?"s":""," added"]})]}),f.length>0&&n.jsxs(G,{variant:"destructive",size:"sm",onClick:()=>h([]),"data-testid":"button-clear-all",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})}),n.jsx(ue,{children:f.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No recipients added yet"}):n.jsx(Px,{className:"h-[300px]",children:n.jsx("div",{className:"space-y-2",children:f.map((Q,se)=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30","data-testid":`recipient-${se}`,children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Q.email}),Q.name&&n.jsx("p",{className:"text-sm text-muted-foreground",children:Q.name})]}),n.jsx(G,{variant:"ghost",size:"icon",onClick:()=>pe(Q.email),"data-testid":`button-remove-${se}`,children:n.jsx(bn,{className:"h-4 w-4 text-destructive"})})]},Q.email))})})})]})]}),n.jsx(Ft,{value:"settings",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Sender Settings"}),n.jsx(Fe,{children:"Configure the sender name and email address"})]}),n.jsx(ue,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"sender-name",children:"Sender Name"}),n.jsx(le,{id:"sender-name",value:a,onChange:Q=>o(Q.target.value),placeholder:"Your Company Name","data-testid":"input-sender-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"sender-email",children:"Sender Email"}),n.jsx(le,{id:"sender-email",value:l,onChange:Q=>c(Q.target.value),placeholder:"sales@yourcompany.com","data-testid":"input-sender-email"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be a verified sender in your Brevo account"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"reply-to-email",children:"Reply-To Email"}),n.jsx(le,{id:"reply-to-email",value:d,onChange:Q=>u(Q.target.value),placeholder:"replies@yourcompany.com","data-testid":"input-reply-to-email"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Recipients will reply to this email address"})]})]})})]})})]}),n.jsx(de,{className:"border-primary",children:n.jsx(ue,{className:"pt-6",children:A?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(dn,{className:"h-5 w-5 animate-spin text-primary"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:j.status}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.current," of ",j.total," emails sent"]})]}),n.jsxs(Ye,{variant:"outline",children:[Math.round(j.current/j.total*100),"%"]})]}),n.jsx(yS,{value:j.current/j.total*100,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Estimated time remaining: ~",Math.ceil((j.total-j.current)/50)," seconds"]})]}):n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[f.length>0?n.jsx(Pd,{className:"h-5 w-5 text-green-500"}):n.jsx(qr,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium",children:["Ready to send to ",f.length.toLocaleString()," recipient",f.length!==1?"s":""]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e||"No subject set"}),f.length>100&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Estimated time: ~",Math.ceil(f.length/50)," seconds (",Math.ceil(f.length/50)," batches)"]})]})]}),n.jsxs(G,{size:"lg",onClick:Me,disabled:f.length===0||F.isPending,"data-testid":"button-send-campaign",children:[n.jsx(hy,{className:"h-4 w-4 mr-2"}),F.isPending?"Sending Campaign...":"Send Campaign"]})]})})}),n.jsx(ys,{open:D,onOpenChange:M,children:n.jsxs(fs,{className:"max-w-2xl max-h-[90vh] overflow-auto",children:[n.jsx(ps,{children:n.jsxs(ms,{className:"flex items-center gap-2",children:[P&&P.failed.length===0?n.jsx(Pd,{className:"h-5 w-5 text-green-500"}):n.jsx(qr,{className:"h-5 w-5 text-yellow-500"}),"Campaign Results"]})}),P&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(de,{className:"border-green-200 bg-green-50 dark:bg-green-950/30",children:n.jsxs(ue,{className:"pt-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-green-600",children:P.successful.length.toLocaleString()}),n.jsx("p",{className:"text-sm text-green-700",children:"Sent Successfully"})]})}),n.jsx(de,{className:"border-red-200 bg-red-50 dark:bg-red-950/30",children:n.jsxs(ue,{className:"pt-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-red-600",children:P.failed.length.toLocaleString()}),n.jsx("p",{className:"text-sm text-red-700",children:"Failed to Send"})]})})]}),P.successful.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h4",{className:"font-medium text-green-700",children:["Successful Emails (",P.successful.length,")"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>U(P.successful,`successful-emails-${new Date().toISOString().split("T")[0]}.csv`),"data-testid":"button-download-successful",children:[n.jsx(IC,{className:"h-4 w-4 mr-2"}),"Download CSV"]})]}),n.jsx(Px,{className:"h-[120px] border rounded-lg p-2",children:n.jsxs("div",{className:"space-y-1",children:[P.successful.slice(0,50).map((Q,se)=>n.jsxs("div",{className:"text-sm flex items-center gap-2",children:[n.jsx(Pd,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:Q.email}),Q.name&&n.jsxs("span",{className:"text-muted-foreground",children:["(",Q.name,")"]})]},se)),P.successful.length>50&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["... and ",P.successful.length-50," more. Download CSV for full list."]})]})})]}),P.failed.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h4",{className:"font-medium text-red-700",children:["Failed Emails (",P.failed.length,")"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>U(P.failed.map(Q=>Q.recipient),`failed-emails-${new Date().toISOString().split("T")[0]}.csv`),"data-testid":"button-download-failed",children:[n.jsx(IC,{className:"h-4 w-4 mr-2"}),"Download Failed CSV"]})]}),n.jsx(Px,{className:"h-[120px] border rounded-lg p-2 border-red-200",children:n.jsxs("div",{className:"space-y-1",children:[P.failed.slice(0,50).map((Q,se)=>n.jsxs("div",{className:"text-sm flex items-center gap-2",children:[n.jsx(qr,{className:"h-3 w-3 text-red-500 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:Q.recipient.email}),n.jsxs("span",{className:"text-xs text-red-500 truncate",children:["- ",Q.error]})]},se)),P.failed.length>50&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["... and ",P.failed.length-50," more. Download CSV for full list."]})]})}),n.jsxs(Xs,{className:"mt-4",variant:"destructive",children:[n.jsx(qr,{className:"h-4 w-4"}),n.jsx(Js,{children:"You can download the failed emails and retry them by importing the CSV again."})]})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx(G,{variant:"outline",onClick:()=>M(!1),"data-testid":"button-close-results",children:"Close"})})]})]})})]})})}const VE=[{id:"payment_available",name:"Payment Available",description:"Sent to seller when payment is available for withdrawal",subject:" Your payment is ready for withdrawal - {{app_name}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #10b981; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 40px;"></span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">Payment Ready for Withdrawal!</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{name}}, great news! Your earnings are now available for withdrawal.
              </p>
            </td>
          </tr>
          <!-- Amount Box -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f0fdf4; border: 2px solid #10b981; border-radius: 12px;">
                <tr>
                  <td style="padding: 24px; text-align: center;">
                    <p style="color: #166534; font-size: 14px; margin: 0 0 8px; text-transform: uppercase; letter-spacing: 1px;">Available for Withdrawal</p>
                    <p style="color: #15803d; font-size: 36px; font-weight: 700; margin: 0;">{{amount}}</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- CTA Button -->
          <tr>
            <td style="padding: 0 40px 32px; text-align: center;">
              <a href="{{dashboard_url}}" style="display: inline-block; background-color: {{primary_color}}; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600;">Withdraw Now</a>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Thank you for selling with us!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Need help? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["Seller"],icon:zn,variables:[{name:"name",description:"Seller's name"},{name:"amount",description:"Withdrawal amount"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"},{name:"dashboard_url",description:"Seller dashboard URL"}]},{id:"order_received",name:"Order Received",description:"Sent to both seller and customer when an order is placed",subject:" Order Confirmed - {{order_id}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #3b82f6; border-radius: 50%; margin: 0 auto;">
                <span style="font-size: 40px; line-height: 80px;"></span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">Order Confirmed!</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{recipient_name}}, {{message}}
              </p>
            </td>
          </tr>
          <!-- Order Summary -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 8px;">
                <tr>
                  <td style="padding: 20px;">
                    <p style="color: #71717a; font-size: 12px; margin: 0 0 16px; text-transform: uppercase; letter-spacing: 1px;">Order Summary</p>
                    <!-- Product Row -->
                    <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom: 16px;">
                      <tr>
                        <td style="width: 60px; vertical-align: top;">
                          <div style="width: 50px; height: 50px; background-color: #e4e4e7; border-radius: 8px;"></div>
                        </td>
                        <td style="vertical-align: top; padding-left: 12px;">
                          <p style="color: #18181b; font-size: 14px; font-weight: 500; margin: 0 0 4px;">{{product_name}}</p>
                          <p style="color: #71717a; font-size: 13px; margin: 0;">Qty: {{quantity}}</p>
                        </td>
                        <td style="vertical-align: top; text-align: right;">
                          <p style="color: #18181b; font-size: 14px; font-weight: 600; margin: 0;">{{total_amount}}</p>
                        </td>
                      </tr>
                    </table>
                    <!-- Divider -->
                    <div style="height: 1px; background-color: #e4e4e7; margin: 16px 0;"></div>
                    <!-- Order ID -->
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td style="color: #71717a; font-size: 14px;">Order ID</td>
                        <td style="color: #18181b; font-size: 14px; text-align: right; font-weight: 500;">{{order_id}}</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Shipping Address -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 8px;">
                <tr>
                  <td style="padding: 20px;">
                    <p style="color: #71717a; font-size: 12px; margin: 0 0 12px; text-transform: uppercase; letter-spacing: 1px;"> Shipping Address</p>
                    <p style="color: #18181b; font-size: 14px; line-height: 1.6; margin: 0; white-space: pre-line;">{{shipping_address}}</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- CTA Button -->
          <tr>
            <td style="padding: 0 40px 32px; text-align: center;">
              <a href="{{order_url}}" style="display: inline-block; background-color: {{primary_color}}; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600;">View Order Details</a>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Questions? We're here to help!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["Seller","Customer"],icon:hs,variables:[{name:"recipient_name",description:"Recipient's name"},{name:"message",description:"Custom message based on recipient type"},{name:"order_id",description:"Order ID"},{name:"product_name",description:"Product name"},{name:"quantity",description:"Quantity ordered"},{name:"total_amount",description:"Total order amount"},{name:"shipping_address",description:"Shipping address"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"},{name:"order_url",description:"Order details URL"}]},{id:"order_shipped",name:"Order Shipped",description:"Sent to customer when order is shipped",subject:" Your order is on its way! - {{order_id}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #8b5cf6; border-radius: 50%; margin: 0 auto;">
                <span style="font-size: 40px; line-height: 80px;"></span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">Your Order Has Shipped!</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{customer_name}}, great news! Your package is on its way.
              </p>
            </td>
          </tr>
          <!-- Tracking Info -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #faf5ff; border: 2px solid #8b5cf6; border-radius: 12px;">
                <tr>
                  <td style="padding: 24px; text-align: center;">
                    <p style="color: #6b21a8; font-size: 14px; margin: 0 0 8px; text-transform: uppercase; letter-spacing: 1px;">{{carrier}}</p>
                    <p style="color: #581c87; font-size: 18px; font-weight: 600; margin: 0 0 16px; font-family: monospace; letter-spacing: 2px;">{{tracking_number}}</p>
                    <a href="{{tracking_url}}" style="display: inline-block; background-color: #8b5cf6; color: #ffffff; text-decoration: none; padding: 10px 24px; border-radius: 6px; font-size: 14px; font-weight: 500;">Track Package</a>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Delivery Estimate -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 8px;">
                <tr>
                  <td style="padding: 20px;">
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7;"> Estimated Delivery</td>
                        <td style="color: #18181b; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7; text-align: right; font-weight: 600;">{{estimated_delivery}}</td>
                      </tr>
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7;"> Product</td>
                        <td style="color: #18181b; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7; text-align: right; font-weight: 500;">{{product_name}}</td>
                      </tr>
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0;"> Order ID</td>
                        <td style="color: #18181b; font-size: 14px; padding: 8px 0; text-align: right; font-weight: 500;">{{order_id}}</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Shipping Address -->
          <tr>
            <td style="padding: 0 40px 32px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 8px;">
                <tr>
                  <td style="padding: 20px;">
                    <p style="color: #71717a; font-size: 12px; margin: 0 0 12px; text-transform: uppercase; letter-spacing: 1px;"> Delivering To</p>
                    <p style="color: #18181b; font-size: 14px; line-height: 1.6; margin: 0; white-space: pre-line;">{{shipping_address}}</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Thank you for shopping with us!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Need help? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["Customer"],icon:Ri,variables:[{name:"customer_name",description:"Customer's name"},{name:"order_id",description:"Order ID"},{name:"product_name",description:"Product name"},{name:"carrier",description:"Shipping carrier name"},{name:"tracking_number",description:"Tracking number"},{name:"tracking_url",description:"Tracking URL"},{name:"estimated_delivery",description:"Estimated delivery date"},{name:"shipping_address",description:"Shipping address"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"}]},{id:"password_reset",name:"Password Reset",description:"Sent to user when they request a password reset",subject:"Reset Your Password - {{app_name}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #f59e0b; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 40px;">&#128274;</span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">Password Reset Request</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{name}}, we received a request to reset your password. Click the button below to create a new password.
              </p>
            </td>
          </tr>
          <!-- Security Notice -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fef3c7; border: 2px solid #f59e0b; border-radius: 12px;">
                <tr>
                  <td style="padding: 20px; text-align: center;">
                    <p style="color: #92400e; font-size: 14px; margin: 0 0 8px;">This link will expire in</p>
                    <p style="color: #78350f; font-size: 24px; font-weight: 700; margin: 0;">{{expiry_time}}</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- CTA Button -->
          <tr>
            <td style="padding: 0 40px 24px; text-align: center;">
              <a href="{{reset_url}}" style="display: inline-block; background-color: {{primary_color}}; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600;">Reset Password</a>
            </td>
          </tr>
          <!-- Alternative Link -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <p style="color: #71717a; font-size: 14px; line-height: 1.6; margin: 0; text-align: center;">
                If the button doesn't work, copy and paste this link into your browser:
              </p>
              <p style="color: {{primary_color}}; font-size: 12px; line-height: 1.6; margin: 8px 0 0; text-align: center; word-break: break-all;">
                {{reset_url}}
              </p>
            </td>
          </tr>
          <!-- Security Warning -->
          <tr>
            <td style="padding: 0 40px 32px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 8px;">
                <tr>
                  <td style="padding: 20px;">
                    <p style="color: #71717a; font-size: 13px; line-height: 1.6; margin: 0; text-align: center;">
                      If you didn't request a password reset, please ignore this email or contact support if you have concerns about your account security.
                    </p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Need help? We're here for you!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["User"],icon:hU,variables:[{name:"name",description:"User's name"},{name:"reset_url",description:"Password reset link URL"},{name:"expiry_time",description:"Time until link expires (e.g., '1 hour')"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"}]},{id:"show_analytics",name:"Live Show Stats",description:"Sent to seller after a live show ends with performance analytics",subject:"Your Show Analytics - {{show_title}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #667eea; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 40px; line-height: 80px;">&#128202;</span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">Your Show Analytics</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 8px; text-align: center; font-weight: 600;">
                {{show_title}}
              </p>
              <p style="color: #71717a; font-size: 14px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                {{show_time}}
              </p>
            </td>
          </tr>
          <!-- Metrics Grid -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 12px;">
                <tr>
                  <td style="padding: 20px;">
                    <p style="color: #71717a; font-size: 12px; margin: 0 0 16px; text-transform: uppercase; letter-spacing: 1px;">Show Analytics</p>
                    <!-- Items Sold -->
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td style="padding: 12px 0; border-bottom: 1px solid #e4e4e7;">
                          <table width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="color: #71717a; font-size: 14px;">Items Sold</td>
                              <td style="color: #18181b; font-size: 18px; font-weight: 600; text-align: right;">{{items_sold}}</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <!-- Giveaways -->
                      <tr>
                        <td style="padding: 12px 0; border-bottom: 1px solid #e4e4e7;">
                          <table width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="color: #71717a; font-size: 14px;">Giveaways</td>
                              <td style="color: #18181b; font-size: 18px; font-weight: 600; text-align: right;">{{giveaways}}</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <!-- Shipments -->
                      <tr>
                        <td style="padding: 12px 0; border-bottom: 1px solid #e4e4e7;">
                          <table width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="color: #71717a; font-size: 14px;">Shipments</td>
                              <td style="color: #18181b; font-size: 18px; font-weight: 600; text-align: right;">{{shipments}}</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <!-- Total Sales -->
                      <tr>
                        <td style="padding: 12px 0; border-bottom: 1px solid #e4e4e7;">
                          <table width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="color: #71717a; font-size: 14px;">Total Sales</td>
                              <td style="color: #10b981; font-size: 22px; font-weight: 700; text-align: right;">{{total_sales}}</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <!-- Tips Received -->
                      <tr>
                        <td style="padding: 12px 0; border-bottom: 1px solid #e4e4e7;">
                          <table width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="color: #71717a; font-size: 14px;">Tips Received</td>
                              <td style="color: #8b5cf6; font-size: 22px; font-weight: 700; text-align: right;">{{tips_received}}</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <!-- Viewers -->
                      <tr>
                        <td style="padding: 12px 0; border-bottom: 1px solid #e4e4e7;">
                          <table width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="color: #71717a; font-size: 14px;">Viewers</td>
                              <td style="color: #18181b; font-size: 18px; font-weight: 600; text-align: right;">{{viewers}}</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <!-- New Followers -->
                      <tr>
                        <td style="padding: 12px 0;">
                          <table width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="color: #71717a; font-size: 14px;">New Followers</td>
                              <td style="color: #18181b; font-size: 18px; font-weight: 600; text-align: right;">{{new_followers}}</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- CTA Button -->
          <tr>
            <td style="padding: 0 40px 32px; text-align: center;">
              <a href="{{show_analytics_url}}" style="display: inline-block; background-color: {{primary_color}}; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600;">Start Shipping</a>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Thank you for hosting on {{app_name}}!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Need help? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["Seller"],icon:nU,variables:[{name:"show_title",description:"Live show title"},{name:"show_time",description:"Show date and time"},{name:"items_sold",description:"Number of items sold"},{name:"giveaways",description:"Number of giveaways"},{name:"shipments",description:"Number of shipments"},{name:"total_sales",description:"Total sales amount (e.g., $245.00)"},{name:"tips_received",description:"Tips received amount (e.g., $25.00)"},{name:"viewers",description:"Number of viewers"},{name:"new_followers",description:"Number of new followers"},{name:"show_analytics_url",description:"Link to shipping/analytics page"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"}]},{id:"seller_approval",name:"Seller Approval",description:"Sent to user when their seller application is approved",subject:"Congratulations! You're Approved to Sell on {{app_name}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #10b981; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 40px; line-height: 80px;">&#10004;</span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">You're Approved!</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{name}}, congratulations! Your seller application has been approved. You now have access to the Seller Hub where you can list products, host live shows, and start selling!
              </p>
            </td>
          </tr>
          <!-- What's Next Box -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f0fdf4; border: 2px solid #10b981; border-radius: 12px;">
                <tr>
                  <td style="padding: 24px;">
                    <p style="color: #166534; font-size: 14px; margin: 0 0 16px; text-transform: uppercase; letter-spacing: 1px; text-align: center;">What's Next?</p>
                    <ul style="color: #15803d; font-size: 14px; line-height: 1.8; margin: 0; padding-left: 20px;">
                      <li>Set up your seller profile</li>
                      <li>Add your first products</li>
                      <li>Configure shipping options</li>
                      <li>Schedule your first live show</li>
                    </ul>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- CTA Button -->
          <tr>
            <td style="padding: 0 40px 32px; text-align: center;">
              <a href="{{seller_hub_url}}" style="display: inline-block; background-color: {{primary_color}}; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600;">Go to Seller Hub</a>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Welcome to the {{app_name}} seller community!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Need help? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["User"],icon:CI,variables:[{name:"name",description:"User's name"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"},{name:"seller_hub_url",description:"Link to seller hub/dashboard"}]},{id:"app_update",name:"App Update",description:"Notify users about a new app version available",subject:"New Update Available - {{app_name}} v{{version}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #3b82f6; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 40px; line-height: 80px;">&#128241;</span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">New Version Available!</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{name}}, a new version of {{app_name}} is now available! Update to version {{version}} to enjoy the latest features and improvements.
              </p>
            </td>
          </tr>
          <!-- What's New -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #eff6ff; border: 2px solid #3b82f6; border-radius: 12px;">
                <tr>
                  <td style="padding: 24px;">
                    <p style="color: #1e40af; font-size: 14px; margin: 0 0 12px; text-transform: uppercase; letter-spacing: 1px; text-align: center;">What's New</p>
                    <div style="color: #18181b; font-size: 14px; line-height: 1.8; margin: 0;">{{whats_new}}</div>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Download Buttons -->
          <tr>
            <td style="padding: 0 40px 32px; text-align: center;">
              <table width="100%" cellpadding="0" cellspacing="0">
                <tr>
                  <td style="padding: 8px; text-align: center;">
                    <a href="{{android_link}}" style="display: inline-block; background-color: #10b981; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600; margin: 4px;">Update on Android</a>
                  </td>
                </tr>
                <tr>
                  <td style="padding: 8px; text-align: center;">
                    <a href="{{ios_link}}" style="display: inline-block; background-color: #18181b; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600; margin: 4px;">Update on iOS</a>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Thank you for using {{app_name}}!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Need help? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["All Users"],icon:SI,variables:[{name:"name",description:"User's name"},{name:"version",description:"New app version number"},{name:"whats_new",description:"List of new features/changes"},{name:"android_link",description:"Google Play Store link"},{name:"ios_link",description:"Apple App Store link"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"}]},{id:"promotion",name:"Promotion",description:"Promote Tokshop live shopping platform features to potential clients",subject:"Launch Your Live Shopping Business with Tokshop",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Launch Your Live Shopping Business with Tokshop</title>
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f4; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f4; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <tr>
            <td style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 50px 30px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 36px; font-weight: bold;">TOKSHOP</h1>
              <p style="color: #00d4ff; margin: 15px 0 0 0; font-size: 18px; font-weight: 500;">Build Your Own Live Shopping Empire</p>
            </td>
          </tr>
          <tr>
            <td style="padding: 40px 30px 20px 30px; text-align: center;">
              <h2 style="color: #1a1a2e; margin: 0 0 15px 0; font-size: 26px; line-height: 1.3;">Your Platform. Your Brand. Your Rules.</h2>
              <p style="color: #666666; font-size: 16px; line-height: 1.7; margin: 0;">
                Hi {{name}},<br><br>
                Live shopping is a <strong>$68 billion industry</strong> and growing fast. Tokshop gives you everything you need to launch your own marketplace like Whatnot - with iOS, Android, and Web apps ready to go.
              </p>
            </td>
          </tr>
          <tr>
            <td style="padding: 20px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;">
                <tr>
                  <td width="33%" style="padding: 25px 10px; text-align: center; border-right: 1px solid rgba(255,255,255,0.2);">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">$68B</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">Market by 2026</p>
                  </td>
                  <td width="33%" style="padding: 25px 10px; text-align: center; border-right: 1px solid rgba(255,255,255,0.2);">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">10x</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">Higher Conversions</p>
                  </td>
                  <td width="33%" style="padding: 25px 10px; text-align: center;">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">48hrs</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">To Launch</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 30px 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">Sell Live, Sell More</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FEF3C7; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #F59E0B; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#127909;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Live Streaming</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers tap one button to go live. Viewers watch in HD, chat in real-time, and buy products right from the stream.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #F0FDF4; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #10B981; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128296;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Live Auctions</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers auction products during live shows. Buyers place bids, compete in real-time, highest bidder wins.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FCE7F3; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #EC4899; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128176;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Buy Now & Offers</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Fixed price purchases and buyer offers with negotiation support.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #ECFEFF; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #06B6D4; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#127873;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Giveaways & Engagement</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Run giveaways during shows with automatic winner selection.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">Payments & Operations Built-In</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #E0F2FE; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #0EA5E9; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128179;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Stripe Payments + Commissions</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Secure payments via Stripe. Set commission rates and earn on every sale.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FFF5F4; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #EF4444; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128230;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Shipping & Order Tracking</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Shipping costs calculate automatically at checkout via USPS. Sellers print shipping labels right from the app - no copy-pasting addresses. Buyers track their orders in real-time.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #EDE9FE; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #8B5CF6; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#9878;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Disputes & Refunds</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">If something goes wrong, buyers open a dispute. You review the case and decide the outcome. Process refunds with one click. Everything is tracked in one place.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FEF9C3; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #EAB308; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#127916;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Video Proof & Receipts</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Every auction ending is automatically recorded as a short video clip. Buyers get video proof showing exactly what they won and the final price.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">Powerful Dashboards for Everyone</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #F0F9FF; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #0369A1; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128187;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Admin Dashboard</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Your command center to run the entire platform. Approve new sellers, manage categories, set commission rates, handle disputes, view analytics.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #F0FDF4; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #15803D; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128188;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Seller Hub (Desktop)</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers get their own web dashboard - view orders, print shipping labels in bulk, track payouts, see sales analytics, manage inventory.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 20px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #059669 0%, #047857 100%); border-radius: 12px;">
                <tr>
                  <td style="padding: 25px; text-align: center;">
                    <h3 style="color: #ffffff; margin: 0 0 8px 0; font-size: 18px;">&#128241; Try It Yourself</h3>
                    <p style="color: rgba(255,255,255,0.9); font-size: 14px; margin: 0 0 20px 0;">Download the apps and explore the full platform - no commitment required</p>
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://apps.apple.com/in/app/tokshop-live/id1630634917" style="display: inline-block; background-color: #000000; color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px;">&#63743; iOS App</a>
                        </td>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://play.google.com/store/apps/details?id=com.tokshop.live&hl=en_US" style="display: inline-block; background-color: #000000; color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px;">&#9654; Android App</a>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://tokshoplive.com" style="display: inline-block; background-color: rgba(255,255,255,0.15); color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px; border: 1px solid rgba(255,255,255,0.3);">&#127760; Web App</a>
                        </td>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://admin.tokshoplive.com" style="display: inline-block; background-color: rgba(255,255,255,0.15); color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px; border: 1px solid rgba(255,255,255,0.3);">&#128187; Admin Demo</a>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 20px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 12px;">
                <tr>
                  <td style="padding: 25px; text-align: center;">
                    <h3 style="color: #ffffff; margin: 0 0 20px 0; font-size: 18px;">Complete Platform Control</h3>
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td width="50%" style="padding: 8px; text-align: left; vertical-align: top;">
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; iOS + Android + Web Apps</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Admin Dashboard</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Seller Center</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Seller Approval System</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0;">&#10003; Multi-Category Management</p>
                        </td>
                        <td width="50%" style="padding: 8px; text-align: left; vertical-align: top;">
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Your Brand & Colors</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Full Source Code</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; No Monthly Fees</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Multi-Language Ready</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0;">&#10003; Light & Dark Themes</p>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">And Much More</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
                <tr>
                  <td style="padding: 20px;">
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#9889; <strong>Auto-Bid</strong> - Set max price, system bids for you</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128172; <strong>Live Chat</strong> - Real-time viewer interaction</p>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128176; <strong>Tipping</strong> - Viewers support sellers</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128226; <strong>Raid Shows</strong> - Send viewers to other shows</p>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#11088; <strong>Favorites</strong> - Save shows to watch later</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128276; <strong>Notifications</strong> - Alerts when sellers go live</p>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128200; <strong>Analytics</strong> - Sales and viewer reports</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128274; <strong>Moderation</strong> - Block users, manage content</p>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 35px 30px; text-align: center;">
              <p style="color: #666666; font-size: 16px; margin: 0 0 20px 0;">Ready to launch your live shopping business?</p>
              <a href="https://wa.me/254791334234?text=Hi%2C%20I%27m%20interested%20in%20Tokshop%20for%20my%20live%20shopping%20business" style="display: inline-block; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: #ffffff; text-decoration: none; padding: 16px 45px; border-radius: 30px; font-size: 16px; font-weight: bold; box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);">Chat With Us on WhatsApp</a>
              <p style="color: #999999; font-size: 13px; margin: 15px 0 0 0;">or reply to this email</p>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8fafc; border-radius: 12px;">
                <tr>
                  <td style="padding: 20px; text-align: center;">
                    <p style="color: #666666; font-size: 15px; font-style: italic; margin: 0 0 12px 0; line-height: 1.5;">"Launched in 3 days. First month: 200+ sellers, $50K+ in sales. The platform just works."</p>
                    <p style="color: #1a1a2e; font-size: 14px; font-weight: bold; margin: 0;">- Platform Owner</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="background-color: #1a1a2e; padding: 25px; text-align: center;">
              <p style="color: rgba(255,255,255,0.6); font-size: 12px; margin: 0 0 10px 0;">Tokshop - White-Label Live Shopping Platform</p>
              <p style="color: rgba(255,255,255,0.4); font-size: 11px; margin: 0; line-height: 1.5;">
                You received this because you showed interest in live commerce.<br>
                <a href="https://tokshoplive.com/unsubscribe?email={{email}}" style="color: #00d4ff; text-decoration: underline;">Unsubscribe</a>
              </p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["Prospects","Users"],icon:xU,variables:[{name:"name",description:"Recipient's name"},{name:"email",description:"Recipient's email"}]},{id:"payout_initiated",name:"Payout Initiated",description:"Sent to seller when they initiate a payout request",subject:"Payout of {{amount}} initiated - {{app_name}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #3b82f6; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 40px;">&#128690;</span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">Payout Initiated</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{name}}, your payout request has been submitted and is being processed.
              </p>
            </td>
          </tr>
          <!-- Amount Box -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #eff6ff; border: 2px solid #3b82f6; border-radius: 12px;">
                <tr>
                  <td style="padding: 24px; text-align: center;">
                    <p style="color: #1d4ed8; font-size: 14px; margin: 0 0 8px; text-transform: uppercase; letter-spacing: 1px;">Payout Amount</p>
                    <p style="color: #1e40af; font-size: 36px; font-weight: 700; margin: 0;">{{amount}}</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Transfer Details -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 8px;">
                <tr>
                  <td style="padding: 20px;">
                    <p style="color: #71717a; font-size: 12px; margin: 0 0 16px; text-transform: uppercase; letter-spacing: 1px;">Transfer Details</p>
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7;">Bank</td>
                        <td style="color: #18181b; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7; text-align: right; font-weight: 500;">{{bank_name}}</td>
                      </tr>
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7;">Remaining Balance</td>
                        <td style="color: #18181b; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7; text-align: right; font-weight: 500;">{{balance_after_payout}}</td>
                      </tr>
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0;">Status</td>
                        <td style="color: #f59e0b; font-size: 14px; padding: 8px 0; text-align: right; font-weight: 600;">Processing</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Info Note -->
          <tr>
            <td style="padding: 0 40px 32px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fef3c7; border-radius: 8px;">
                <tr>
                  <td style="padding: 16px 20px;">
                    <p style="color: #92400e; font-size: 13px; line-height: 1.6; margin: 0; text-align: center;">
                      Your payout is being processed. You will receive another email once the funds have been deposited to your bank account.
                    </p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- CTA Button -->
          <tr>
            <td style="padding: 0 40px 32px; text-align: center;">
              <a href="{{dashboard_url}}" style="display: inline-block; background-color: {{primary_color}}; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600;">View Transaction History</a>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Thank you for selling with us!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Need help? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["Seller"],icon:oy,variables:[{name:"name",description:"Seller's name"},{name:"amount",description:"Payout amount"},{name:"bank_name",description:"Bank name where funds will be deposited"},{name:"balance_after_payout",description:"Remaining wallet balance after payout"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"},{name:"dashboard_url",description:"Seller dashboard URL"}]},{id:"payout_completed",name:"Payout Completed",description:"Sent to seller when funds have been successfully transferred to their bank account",subject:"Your payout of {{amount}} has been sent - {{app_name}}",body:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Icon -->
          <tr>
            <td style="padding: 40px 40px 20px; text-align: center;">
              <div style="width: 80px; height: 80px; background-color: #059669; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 40px;">&#128184;</span>
              </div>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 20px 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">Payout Completed!</h2>
              <p style="color: #52525b; font-size: 16px; line-height: 1.6; margin: 0 0 24px; text-align: center;">
                Hi {{name}}, great news! Your funds have been successfully transferred to your bank account.
              </p>
            </td>
          </tr>
          <!-- Amount Box -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #ecfdf5; border: 2px solid #059669; border-radius: 12px;">
                <tr>
                  <td style="padding: 24px; text-align: center;">
                    <p style="color: #047857; font-size: 14px; margin: 0 0 8px; text-transform: uppercase; letter-spacing: 1px;">Amount Transferred</p>
                    <p style="color: #065f46; font-size: 36px; font-weight: 700; margin: 0;">{{amount}}</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Transfer Details -->
          <tr>
            <td style="padding: 0 40px 24px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fafafa; border-radius: 8px;">
                <tr>
                  <td style="padding: 20px;">
                    <p style="color: #71717a; font-size: 12px; margin: 0 0 16px; text-transform: uppercase; letter-spacing: 1px;">Transfer Details</p>
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7;">Bank</td>
                        <td style="color: #18181b; font-size: 14px; padding: 8px 0; border-bottom: 1px solid #e4e4e7; text-align: right; font-weight: 500;">{{bank_name}}</td>
                      </tr>
                      <tr>
                        <td style="color: #71717a; font-size: 14px; padding: 8px 0;">Status</td>
                        <td style="color: #059669; font-size: 14px; padding: 8px 0; text-align: right; font-weight: 600;">Paid</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- Info Note -->
          <tr>
            <td style="padding: 0 40px 32px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f0f9ff; border-radius: 8px;">
                <tr>
                  <td style="padding: 16px 20px;">
                    <p style="color: #0369a1; font-size: 13px; line-height: 1.6; margin: 0; text-align: center;">
                      This payment has been deposited to your bank account. You can view your transaction history in your seller dashboard.
                    </p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <!-- CTA Button -->
          <tr>
            <td style="padding: 0 40px 32px; text-align: center;">
              <a href="{{dashboard_url}}" style="display: inline-block; background-color: {{primary_color}}; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600;">View Transaction History</a>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #fafafa; padding: 24px 40px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Thank you for selling with us!</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0 0 8px;">{{app_name}} Team</p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;">Need help? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}};">{{support_email}}</a></p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,recipients:["Seller"],icon:oy,variables:[{name:"name",description:"Seller's name"},{name:"amount",description:"Payout amount"},{name:"bank_name",description:"Bank name where funds were deposited"},{name:"app_name",description:"Application name"},{name:"support_email",description:"Support email address"},{name:"primary_color",description:"Brand primary color"},{name:"secondary_color",description:"Brand secondary color"},{name:"dashboard_url",description:"Seller dashboard URL"}]}];function Zre(){const{toast:t}=Et(),[e,s]=p.useState(VE),[r,i]=p.useState("payment_available"),[a,o]=p.useState(!1),[l,c]=p.useState({subject:"",body:""}),{data:d,isLoading:u}=Ve({queryKey:["/api/templates"]});p.useEffect(()=>{if(d!=null&&d.success&&(d!=null&&d.data)){const v=Array.isArray(d.data)?d.data:[d.data];v.length>0&&s(N=>N.map(C=>{const _=v.find(T=>T.slug===C.id);return _?{...C,body:_.htmlContent||C.body}:C}))}},[d]);const f=st({mutationFn:async v=>{const N={name:v.name,slug:v.id,htmlContent:v.body,placeholders:v.variables.map(C=>C.name)};return ut("POST","/api/templates",N)},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/templates"]}),t({title:"Template saved",description:"Email template has been saved successfully"})},onError:v=>{t({title:"Error saving template",description:v.message||"Failed to save email template",variant:"destructive"})}});st({mutationFn:async v=>{const N={name:v.name,slug:v.id,htmlContent:v.body,placeholders:v.variables.map(C=>C.name)};return ut("PUT",`/api/templates/${v.id}`,N)},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/templates"]}),t({title:"Template updated",description:"Email template has been updated successfully"})},onError:v=>{t({title:"Error updating template",description:v.message||"Failed to update email template",variant:"destructive"})}});const h=st({mutationFn:async v=>ut("DELETE",`/api/templates/${v}`),onSuccess:()=>{if(We.invalidateQueries({queryKey:["/api/templates"]}),t({title:"Template deleted",description:"Email template has been deleted successfully"}),e.length>1){const v=e.filter(N=>N.id!==r);v.length>0&&i(v[0].id)}},onError:v=>{t({title:"Error deleting template",description:v.message||"Failed to delete email template",variant:"destructive"})}}),x=v=>{confirm("Are you sure you want to delete this template? This action cannot be undone.")&&h.mutate(v)},g=(v,N,C)=>{s(_=>_.map(T=>T.id===v?{...T,[N]:C}:T))},y=v=>{const N=e.find(C=>C.id===v);N&&f.mutate(N)},w=v=>{const N=VE.find(C=>C.id===v);N&&(s(C=>C.map(_=>_.id===v?{...N}:_)),t({title:"Template reset",description:"Template has been reset to default. Click 'Save Template' to save changes."}))},b=v=>{const N={name:"John Doe",customer_name:"Jane Smith",recipient_name:"Jane Smith",message:"your order has been confirmed and is being processed.",amount:"$245.00",order_id:"ORD-12345",product_name:"Vintage Watch",quantity:"1",total_amount:"$55.99",carrier:"USPS",tracking_number:"9400111899223456789012",tracking_url:"https://tools.usps.com/go/TrackConfirmAction?tLabels=9400111899223456789012",estimated_delivery:"December 28, 2025",shipping_address:"123 Main St<br>Anytown, CA 12345",app_name:"Your Store",support_email:"support@yourstore.com",primary_color:"#F43F5E",secondary_color:"#0D9488",dashboard_url:"#",order_url:"#",reset_url:"https://yourstore.com/reset-password?token=abc123xyz",expiry_time:"1 hour",show_title:"Friday Night Live Sale",show_time:"December 27, 2025 at 8:00 PM",items_sold:"24",giveaways:"3",shipments:"18",total_sales:"$1,245.00",tips_received:"$85.50",viewers:"156",new_followers:"12",show_analytics_url:"#"};let C=v.subject,_=v.body;Object.entries(N).forEach(([T,j])=>{const S=new RegExp(`{{${T}}}`,"g");C=C.replace(S,j),_=_.replace(S,j)}),c({subject:C,body:_}),o(!0)};return e.find(v=>v.id===r),n.jsx(Ze,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Email Templates"}),n.jsx("p",{className:"text-muted-foreground",children:"Customize the email templates sent to sellers and customers"})]}),n.jsxs(Vi,{value:r,onValueChange:i,children:[n.jsx(li,{className:"mb-6 flex-wrap h-auto gap-2",children:e.map(v=>{const N=v.icon;return n.jsxs(_t,{value:v.id,className:"flex items-center gap-2","data-testid":`tab-${v.id}`,children:[n.jsx(N,{className:"h-4 w-4"}),v.name]},v.id)})}),e.map(v=>n.jsx(Ft,{value:v.id,children:n.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(du,{className:"h-5 w-5"}),v.name]}),n.jsx(Fe,{children:v.description})]}),n.jsx("div",{className:"flex gap-2",children:v.recipients.map(N=>n.jsx(Ye,{variant:"secondary",children:N},N))})]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`subject-${v.id}`,children:"Subject Line"}),n.jsx(le,{id:`subject-${v.id}`,value:v.subject,onChange:N=>g(v.id,"subject",N.target.value),placeholder:"Email subject","data-testid":`input-subject-${v.id}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`body-${v.id}`,children:"Email Body"}),n.jsx(zs,{id:`body-${v.id}`,value:v.body,onChange:N=>g(v.id,"body",N.target.value),placeholder:"Email body content",className:"min-h-[400px] font-mono text-sm","data-testid":`textarea-body-${v.id}`})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(G,{onClick:()=>y(v.id),disabled:f.isPending,"data-testid":`button-save-${v.id}`,children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),f.isPending?"Saving...":"Save Template"]}),n.jsxs(G,{variant:"outline",onClick:()=>w(v.id),"data-testid":`button-reset-${v.id}`,children:[n.jsx(bv,{className:"h-4 w-4 mr-2"}),"Reset to Default"]}),n.jsxs(G,{variant:"destructive",onClick:()=>x(v.id),disabled:h.isPending,"data-testid":`button-delete-${v.id}`,children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),h.isPending?"Deleting...":"Delete"]}),n.jsxs(ys,{open:a,onOpenChange:o,children:[n.jsx(df,{asChild:!0,children:n.jsxs(G,{variant:"outline",onClick:()=>b(v),"data-testid":`button-preview-${v.id}`,children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"Preview"]})}),n.jsxs(fs,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Email Preview"}),n.jsx(Ls,{children:"Preview with sample data and branding colors"})]}),n.jsxs("div",{className:"space-y-4 pt-4",children:[n.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Subject:"}),n.jsx("p",{className:"font-medium",children:l.subject})]}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsx("iframe",{srcDoc:l.body,title:"Email Preview",className:"w-full h-[600px] border-0",sandbox:"allow-same-origin"})})]})]})]})]})]})]})}),n.jsx("div",{children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{className:"text-base",children:"Available Variables"}),n.jsx(Fe,{children:"Use these placeholders in your template"})]}),n.jsx(ue,{children:n.jsx("div",{className:"space-y-3",children:v.variables.map(N=>n.jsxs("div",{className:"text-sm",children:[n.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"{{"+N.name+"}}"}),n.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:N.description})]},N.name))})})]})})]})},v.id))]})]})})}var H6=typeof global=="object"&&global&&global.Object===Object&&global,Xre=typeof self=="object"&&self&&self.Object===Object&&self,ko=H6||Xre||Function("return this")(),Mc=ko.Symbol,W6=Object.prototype,Jre=W6.hasOwnProperty,eie=W6.toString,up=Mc?Mc.toStringTag:void 0;function tie(t){var e=Jre.call(t,up),s=t[up];try{t[up]=void 0;var r=!0}catch{}var i=eie.call(t);return r&&(e?t[up]=s:delete t[up]),i}var sie=Object.prototype,nie=sie.toString;function rie(t){return nie.call(t)}var iie="[object Null]",aie="[object Undefined]",HE=Mc?Mc.toStringTag:void 0;function $f(t){return t==null?t===void 0?aie:iie:HE&&HE in Object(t)?tie(t):rie(t)}function yl(t){return t!=null&&typeof t=="object"}var nu=Array.isArray;function Kc(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function K6(t){return t}var oie="[object AsyncFunction]",lie="[object Function]",cie="[object GeneratorFunction]",die="[object Proxy]";function vS(t){if(!Kc(t))return!1;var e=$f(t);return e==lie||e==cie||e==oie||e==die}var $b=ko["__core-js_shared__"],WE=function(){var t=/[^.]+$/.exec($b&&$b.keys&&$b.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function uie(t){return!!WE&&WE in t}var hie=Function.prototype,fie=hie.toString;function xu(t){if(t!=null){try{return fie.call(t)}catch{}try{return t+""}catch{}}return""}var pie=/[\\^$.*+?()[\]{}|]/g,mie=/^\[object .+?Constructor\]$/,gie=Function.prototype,xie=Object.prototype,yie=gie.toString,vie=xie.hasOwnProperty,bie=RegExp("^"+yie.call(vie).replace(pie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wie(t){if(!Kc(t)||uie(t))return!1;var e=vS(t)?bie:mie;return e.test(xu(t))}function jie(t,e){return t==null?void 0:t[e]}function yu(t,e){var s=jie(t,e);return wie(s)?s:void 0}var e1=yu(ko,"WeakMap"),KE=Object.create,Nie=function(){function t(){}return function(e){if(!Kc(e))return{};if(KE)return KE(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();function _ie(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}function Sie(t,e){var s=-1,r=t.length;for(e||(e=Array(r));++s<r;)e[s]=t[s];return e}var Cie=800,kie=16,Eie=Date.now;function Tie(t){var e=0,s=0;return function(){var r=Eie(),i=kie-(r-s);if(s=r,i>0){if(++e>=Cie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Aie(t){return function(){return t}}var Vy=function(){try{var t=yu(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Pie=Vy?function(t,e){return Vy(t,"toString",{configurable:!0,enumerable:!1,value:Aie(e),writable:!0})}:K6,Iie=Tie(Pie);function Rie(t,e){for(var s=-1,r=t==null?0:t.length;++s<r&&e(t[s],s,t)!==!1;);return t}var Oie=9007199254740991,Die=/^(?:0|[1-9]\d*)$/;function G6(t,e){var s=typeof t;return e=e??Oie,!!e&&(s=="number"||s!="symbol"&&Die.test(t))&&t>-1&&t%1==0&&t<e}function bS(t,e,s){e=="__proto__"&&Vy?Vy(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}function mg(t,e){return t===e||t!==t&&e!==e}var Mie=Object.prototype,Lie=Mie.hasOwnProperty;function Y6(t,e,s){var r=t[e];(!(Lie.call(t,e)&&mg(r,s))||s===void 0&&!(e in t))&&bS(t,e,s)}function Fie(t,e,s,r){var i=!s;s||(s={});for(var a=-1,o=e.length;++a<o;){var l=e[a],c=void 0;c===void 0&&(c=t[l]),i?bS(s,l,c):Y6(s,l,c)}return s}var GE=Math.max;function $ie(t,e,s){return e=GE(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=GE(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=s(o),_ie(t,this,l)}}function Uie(t,e){return Iie($ie(t,e,K6),t+"")}var zie=9007199254740991;function Q6(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zie}function o0(t){return t!=null&&Q6(t.length)&&!vS(t)}function Bie(t,e,s){if(!Kc(s))return!1;var r=typeof e;return(r=="number"?o0(s)&&G6(e,s.length):r=="string"&&e in s)?mg(s[e],t):!1}function qie(t){return Uie(function(e,s){var r=-1,i=s.length,a=i>1?s[i-1]:void 0,o=i>2?s[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&Bie(s[0],s[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var l=s[r];l&&t(e,l,r,a)}return e})}var Vie=Object.prototype;function wS(t){var e=t&&t.constructor,s=typeof e=="function"&&e.prototype||Vie;return t===s}function Hie(t,e){for(var s=-1,r=Array(t);++s<t;)r[s]=e(s);return r}var Wie="[object Arguments]";function YE(t){return yl(t)&&$f(t)==Wie}var Z6=Object.prototype,Kie=Z6.hasOwnProperty,Gie=Z6.propertyIsEnumerable,t1=YE(function(){return arguments}())?YE:function(t){return yl(t)&&Kie.call(t,"callee")&&!Gie.call(t,"callee")};function Yie(){return!1}var X6=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,QE=X6&&typeof Qr=="object"&&Qr&&!Qr.nodeType&&Qr,Qie=QE&&QE.exports===X6,ZE=Qie?ko.Buffer:void 0,Zie=ZE?ZE.isBuffer:void 0,jm=Zie||Yie,Xie="[object Arguments]",Jie="[object Array]",eae="[object Boolean]",tae="[object Date]",sae="[object Error]",nae="[object Function]",rae="[object Map]",iae="[object Number]",aae="[object Object]",oae="[object RegExp]",lae="[object Set]",cae="[object String]",dae="[object WeakMap]",uae="[object ArrayBuffer]",hae="[object DataView]",fae="[object Float32Array]",pae="[object Float64Array]",mae="[object Int8Array]",gae="[object Int16Array]",xae="[object Int32Array]",yae="[object Uint8Array]",vae="[object Uint8ClampedArray]",bae="[object Uint16Array]",wae="[object Uint32Array]",Rs={};Rs[fae]=Rs[pae]=Rs[mae]=Rs[gae]=Rs[xae]=Rs[yae]=Rs[vae]=Rs[bae]=Rs[wae]=!0;Rs[Xie]=Rs[Jie]=Rs[uae]=Rs[eae]=Rs[hae]=Rs[tae]=Rs[sae]=Rs[nae]=Rs[rae]=Rs[iae]=Rs[aae]=Rs[oae]=Rs[lae]=Rs[cae]=Rs[dae]=!1;function jae(t){return yl(t)&&Q6(t.length)&&!!Rs[$f(t)]}function jS(t){return function(e){return t(e)}}var J6=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,Up=J6&&typeof Qr=="object"&&Qr&&!Qr.nodeType&&Qr,Nae=Up&&Up.exports===J6,Ub=Nae&&H6.process,ff=function(){try{var t=Up&&Up.require&&Up.require("util").types;return t||Ub&&Ub.binding&&Ub.binding("util")}catch{}}(),XE=ff&&ff.isTypedArray,NS=XE?jS(XE):jae,_ae=Object.prototype,Sae=_ae.hasOwnProperty;function eL(t,e){var s=nu(t),r=!s&&t1(t),i=!s&&!r&&jm(t),a=!s&&!r&&!i&&NS(t),o=s||r||i||a,l=o?Hie(t.length,String):[],c=l.length;for(var d in t)(e||Sae.call(t,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||G6(d,c)))&&l.push(d);return l}function tL(t,e){return function(s){return t(e(s))}}var Cae=tL(Object.keys,Object),kae=Object.prototype,Eae=kae.hasOwnProperty;function Tae(t){if(!wS(t))return Cae(t);var e=[];for(var s in Object(t))Eae.call(t,s)&&s!="constructor"&&e.push(s);return e}function Aae(t){return o0(t)?eL(t):Tae(t)}function Pae(t){var e=[];if(t!=null)for(var s in Object(t))e.push(s);return e}var Iae=Object.prototype,Rae=Iae.hasOwnProperty;function Oae(t){if(!Kc(t))return Pae(t);var e=wS(t),s=[];for(var r in t)r=="constructor"&&(e||!Rae.call(t,r))||s.push(r);return s}function sL(t){return o0(t)?eL(t,!0):Oae(t)}var Nm=yu(Object,"create");function Dae(){this.__data__=Nm?Nm(null):{},this.size=0}function Mae(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Lae="__lodash_hash_undefined__",Fae=Object.prototype,$ae=Fae.hasOwnProperty;function Uae(t){var e=this.__data__;if(Nm){var s=e[t];return s===Lae?void 0:s}return $ae.call(e,t)?e[t]:void 0}var zae=Object.prototype,Bae=zae.hasOwnProperty;function qae(t){var e=this.__data__;return Nm?e[t]!==void 0:Bae.call(e,t)}var Vae="__lodash_hash_undefined__";function Hae(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=Nm&&e===void 0?Vae:e,this}function ru(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}ru.prototype.clear=Dae;ru.prototype.delete=Mae;ru.prototype.get=Uae;ru.prototype.has=qae;ru.prototype.set=Hae;function Wae(){this.__data__=[],this.size=0}function l0(t,e){for(var s=t.length;s--;)if(mg(t[s][0],e))return s;return-1}var Kae=Array.prototype,Gae=Kae.splice;function Yae(t){var e=this.__data__,s=l0(e,t);if(s<0)return!1;var r=e.length-1;return s==r?e.pop():Gae.call(e,s,1),--this.size,!0}function Qae(t){var e=this.__data__,s=l0(e,t);return s<0?void 0:e[s][1]}function Zae(t){return l0(this.__data__,t)>-1}function Xae(t,e){var s=this.__data__,r=l0(s,t);return r<0?(++this.size,s.push([t,e])):s[r][1]=e,this}function Nl(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}Nl.prototype.clear=Wae;Nl.prototype.delete=Yae;Nl.prototype.get=Qae;Nl.prototype.has=Zae;Nl.prototype.set=Xae;var _m=yu(ko,"Map");function Jae(){this.size=0,this.__data__={hash:new ru,map:new(_m||Nl),string:new ru}}function eoe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function c0(t,e){var s=t.__data__;return eoe(e)?s[typeof e=="string"?"string":"hash"]:s.map}function toe(t){var e=c0(this,t).delete(t);return this.size-=e?1:0,e}function soe(t){return c0(this,t).get(t)}function noe(t){return c0(this,t).has(t)}function roe(t,e){var s=c0(this,t),r=s.size;return s.set(t,e),this.size+=s.size==r?0:1,this}function vu(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}vu.prototype.clear=Jae;vu.prototype.delete=toe;vu.prototype.get=soe;vu.prototype.has=noe;vu.prototype.set=roe;function ioe(t,e){for(var s=-1,r=e.length,i=t.length;++s<r;)t[i+s]=e[s];return t}var nL=tL(Object.getPrototypeOf,Object),aoe="[object Object]",ooe=Function.prototype,loe=Object.prototype,rL=ooe.toString,coe=loe.hasOwnProperty,doe=rL.call(Object);function uoe(t){if(!yl(t)||$f(t)!=aoe)return!1;var e=nL(t);if(e===null)return!0;var s=coe.call(e,"constructor")&&e.constructor;return typeof s=="function"&&s instanceof s&&rL.call(s)==doe}function hoe(){this.__data__=new Nl,this.size=0}function foe(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s}function poe(t){return this.__data__.get(t)}function moe(t){return this.__data__.has(t)}var goe=200;function xoe(t,e){var s=this.__data__;if(s instanceof Nl){var r=s.__data__;if(!_m||r.length<goe-1)return r.push([t,e]),this.size=++s.size,this;s=this.__data__=new vu(r)}return s.set(t,e),this.size=s.size,this}function uo(t){var e=this.__data__=new Nl(t);this.size=e.size}uo.prototype.clear=hoe;uo.prototype.delete=foe;uo.prototype.get=poe;uo.prototype.has=moe;uo.prototype.set=xoe;var iL=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,JE=iL&&typeof Qr=="object"&&Qr&&!Qr.nodeType&&Qr,yoe=JE&&JE.exports===iL,eT=yoe?ko.Buffer:void 0,tT=eT?eT.allocUnsafe:void 0;function aL(t,e){if(e)return t.slice();var s=t.length,r=tT?tT(s):new t.constructor(s);return t.copy(r),r}function voe(t,e){for(var s=-1,r=t==null?0:t.length,i=0,a=[];++s<r;){var o=t[s];e(o,s,t)&&(a[i++]=o)}return a}function boe(){return[]}var woe=Object.prototype,joe=woe.propertyIsEnumerable,sT=Object.getOwnPropertySymbols,Noe=sT?function(t){return t==null?[]:(t=Object(t),voe(sT(t),function(e){return joe.call(t,e)}))}:boe;function _oe(t,e,s){var r=e(t);return nu(t)?r:ioe(r,s(t))}function s1(t){return _oe(t,Aae,Noe)}var n1=yu(ko,"DataView"),r1=yu(ko,"Promise"),i1=yu(ko,"Set"),nT="[object Map]",Soe="[object Object]",rT="[object Promise]",iT="[object Set]",aT="[object WeakMap]",oT="[object DataView]",Coe=xu(n1),koe=xu(_m),Eoe=xu(r1),Toe=xu(i1),Aoe=xu(e1),oa=$f;(n1&&oa(new n1(new ArrayBuffer(1)))!=oT||_m&&oa(new _m)!=nT||r1&&oa(r1.resolve())!=rT||i1&&oa(new i1)!=iT||e1&&oa(new e1)!=aT)&&(oa=function(t){var e=$f(t),s=e==Soe?t.constructor:void 0,r=s?xu(s):"";if(r)switch(r){case Coe:return oT;case koe:return nT;case Eoe:return rT;case Toe:return iT;case Aoe:return aT}return e});var Poe=Object.prototype,Ioe=Poe.hasOwnProperty;function Roe(t){var e=t.length,s=new t.constructor(e);return e&&typeof t[0]=="string"&&Ioe.call(t,"index")&&(s.index=t.index,s.input=t.input),s}var Hy=ko.Uint8Array;function _S(t){var e=new t.constructor(t.byteLength);return new Hy(e).set(new Hy(t)),e}function Ooe(t,e){var s=_S(t.buffer);return new t.constructor(s,t.byteOffset,t.byteLength)}var Doe=/\w*$/;function Moe(t){var e=new t.constructor(t.source,Doe.exec(t));return e.lastIndex=t.lastIndex,e}var lT=Mc?Mc.prototype:void 0,cT=lT?lT.valueOf:void 0;function Loe(t){return cT?Object(cT.call(t)):{}}function oL(t,e){var s=e?_S(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}var Foe="[object Boolean]",$oe="[object Date]",Uoe="[object Map]",zoe="[object Number]",Boe="[object RegExp]",qoe="[object Set]",Voe="[object String]",Hoe="[object Symbol]",Woe="[object ArrayBuffer]",Koe="[object DataView]",Goe="[object Float32Array]",Yoe="[object Float64Array]",Qoe="[object Int8Array]",Zoe="[object Int16Array]",Xoe="[object Int32Array]",Joe="[object Uint8Array]",ele="[object Uint8ClampedArray]",tle="[object Uint16Array]",sle="[object Uint32Array]";function nle(t,e,s){var r=t.constructor;switch(e){case Woe:return _S(t);case Foe:case $oe:return new r(+t);case Koe:return Ooe(t);case Goe:case Yoe:case Qoe:case Zoe:case Xoe:case Joe:case ele:case tle:case sle:return oL(t,s);case Uoe:return new r;case zoe:case Voe:return new r(t);case Boe:return Moe(t);case qoe:return new r;case Hoe:return Loe(t)}}function lL(t){return typeof t.constructor=="function"&&!wS(t)?Nie(nL(t)):{}}var rle="[object Map]";function ile(t){return yl(t)&&oa(t)==rle}var dT=ff&&ff.isMap,ale=dT?jS(dT):ile,ole="[object Set]";function lle(t){return yl(t)&&oa(t)==ole}var uT=ff&&ff.isSet,cle=uT?jS(uT):lle,dle=1,cL="[object Arguments]",ule="[object Array]",hle="[object Boolean]",fle="[object Date]",ple="[object Error]",dL="[object Function]",mle="[object GeneratorFunction]",gle="[object Map]",xle="[object Number]",uL="[object Object]",yle="[object RegExp]",vle="[object Set]",ble="[object String]",wle="[object Symbol]",jle="[object WeakMap]",Nle="[object ArrayBuffer]",_le="[object DataView]",Sle="[object Float32Array]",Cle="[object Float64Array]",kle="[object Int8Array]",Ele="[object Int16Array]",Tle="[object Int32Array]",Ale="[object Uint8Array]",Ple="[object Uint8ClampedArray]",Ile="[object Uint16Array]",Rle="[object Uint32Array]",_s={};_s[cL]=_s[ule]=_s[Nle]=_s[_le]=_s[hle]=_s[fle]=_s[Sle]=_s[Cle]=_s[kle]=_s[Ele]=_s[Tle]=_s[gle]=_s[xle]=_s[uL]=_s[yle]=_s[vle]=_s[ble]=_s[wle]=_s[Ale]=_s[Ple]=_s[Ile]=_s[Rle]=!0;_s[ple]=_s[dL]=_s[jle]=!1;function Ix(t,e,s,r,i,a){var o,l=e&dle;if(o!==void 0)return o;if(!Kc(t))return t;var c=nu(t);if(c)o=Roe(t);else{var d=oa(t),u=d==dL||d==mle;if(jm(t))return aL(t,l);if(d==uL||d==cL||u&&!i)o=u?{}:lL(t);else{if(!_s[d])return i?t:{};o=nle(t,d,l)}}a||(a=new uo);var f=a.get(t);if(f)return f;a.set(t,o),cle(t)?t.forEach(function(g){o.add(Ix(g,e,s,g,t,a))}):ale(t)&&t.forEach(function(g,y){o.set(y,Ix(g,e,s,y,t,a))});var h=s1,x=c?void 0:h(t);return Rie(x||t,function(g,y){x&&(y=g,g=t[y]),Y6(o,y,Ix(g,e,s,y,t,a))}),o}var Ole=1,Dle=4;function Th(t){return Ix(t,Ole|Dle)}var Mle="__lodash_hash_undefined__";function Lle(t){return this.__data__.set(t,Mle),this}function Fle(t){return this.__data__.has(t)}function Wy(t){var e=-1,s=t==null?0:t.length;for(this.__data__=new vu;++e<s;)this.add(t[e])}Wy.prototype.add=Wy.prototype.push=Lle;Wy.prototype.has=Fle;function $le(t,e){for(var s=-1,r=t==null?0:t.length;++s<r;)if(e(t[s],s,t))return!0;return!1}function Ule(t,e){return t.has(e)}var zle=1,Ble=2;function hL(t,e,s,r,i,a){var o=s&zle,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(t),u=a.get(e);if(d&&u)return d==e&&u==t;var f=-1,h=!0,x=s&Ble?new Wy:void 0;for(a.set(t,e),a.set(e,t);++f<l;){var g=t[f],y=e[f];if(r)var w=o?r(y,g,f,e,t,a):r(g,y,f,t,e,a);if(w!==void 0){if(w)continue;h=!1;break}if(x){if(!$le(e,function(b,v){if(!Ule(x,v)&&(g===b||i(g,b,s,r,a)))return x.push(v)})){h=!1;break}}else if(!(g===y||i(g,y,s,r,a))){h=!1;break}}return a.delete(t),a.delete(e),h}function qle(t){var e=-1,s=Array(t.size);return t.forEach(function(r,i){s[++e]=[i,r]}),s}function Vle(t){var e=-1,s=Array(t.size);return t.forEach(function(r){s[++e]=r}),s}var Hle=1,Wle=2,Kle="[object Boolean]",Gle="[object Date]",Yle="[object Error]",Qle="[object Map]",Zle="[object Number]",Xle="[object RegExp]",Jle="[object Set]",ece="[object String]",tce="[object Symbol]",sce="[object ArrayBuffer]",nce="[object DataView]",hT=Mc?Mc.prototype:void 0,zb=hT?hT.valueOf:void 0;function rce(t,e,s,r,i,a,o){switch(s){case nce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sce:return!(t.byteLength!=e.byteLength||!a(new Hy(t),new Hy(e)));case Kle:case Gle:case Zle:return mg(+t,+e);case Yle:return t.name==e.name&&t.message==e.message;case Xle:case ece:return t==e+"";case Qle:var l=qle;case Jle:var c=r&Hle;if(l||(l=Vle),t.size!=e.size&&!c)return!1;var d=o.get(t);if(d)return d==e;r|=Wle,o.set(t,e);var u=hL(l(t),l(e),r,i,a,o);return o.delete(t),u;case tce:if(zb)return zb.call(t)==zb.call(e)}return!1}var ice=1,ace=Object.prototype,oce=ace.hasOwnProperty;function lce(t,e,s,r,i,a){var o=s&ice,l=s1(t),c=l.length,d=s1(e),u=d.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in e:oce.call(e,h)))return!1}var x=a.get(t),g=a.get(e);if(x&&g)return x==e&&g==t;var y=!0;a.set(t,e),a.set(e,t);for(var w=o;++f<c;){h=l[f];var b=t[h],v=e[h];if(r)var N=o?r(v,b,h,e,t,a):r(b,v,h,t,e,a);if(!(N===void 0?b===v||i(b,v,s,r,a):N)){y=!1;break}w||(w=h=="constructor")}if(y&&!w){var C=t.constructor,_=e.constructor;C!=_&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return a.delete(t),a.delete(e),y}var cce=1,fT="[object Arguments]",pT="[object Array]",Jg="[object Object]",dce=Object.prototype,mT=dce.hasOwnProperty;function uce(t,e,s,r,i,a){var o=nu(t),l=nu(e),c=o?pT:oa(t),d=l?pT:oa(e);c=c==fT?Jg:c,d=d==fT?Jg:d;var u=c==Jg,f=d==Jg,h=c==d;if(h&&jm(t)){if(!jm(e))return!1;o=!0,u=!1}if(h&&!u)return a||(a=new uo),o||NS(t)?hL(t,e,s,r,i,a):rce(t,e,c,s,r,i,a);if(!(s&cce)){var x=u&&mT.call(t,"__wrapped__"),g=f&&mT.call(e,"__wrapped__");if(x||g){var y=x?t.value():t,w=g?e.value():e;return a||(a=new uo),i(y,w,s,r,a)}}return h?(a||(a=new uo),lce(t,e,s,r,i,a)):!1}function fL(t,e,s,r,i){return t===e?!0:t==null||e==null||!yl(t)&&!yl(e)?t!==t&&e!==e:uce(t,e,s,r,fL,i)}function hce(t){return function(e,s,r){for(var i=-1,a=Object(e),o=r(e),l=o.length;l--;){var c=o[++i];if(s(a[c],c,a)===!1)break}return e}}var fce=hce();function a1(t,e,s){(s!==void 0&&!mg(t[e],s)||s===void 0&&!(e in t))&&bS(t,e,s)}function pce(t){return yl(t)&&o0(t)}function o1(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function mce(t){return Fie(t,sL(t))}function gce(t,e,s,r,i,a,o){var l=o1(t,s),c=o1(e,s),d=o.get(c);if(d){a1(t,s,d);return}var u=a?a(l,c,s+"",t,e,o):void 0,f=u===void 0;if(f){var h=nu(c),x=!h&&jm(c),g=!h&&!x&&NS(c);u=c,h||x||g?nu(l)?u=l:pce(l)?u=Sie(l):x?(f=!1,u=aL(c,!0)):g?(f=!1,u=oL(c,!0)):u=[]:uoe(c)||t1(c)?(u=l,t1(l)?u=mce(l):(!Kc(l)||vS(l))&&(u=lL(c))):f=!1}f&&(o.set(c,u),i(u,c,r,a,o),o.delete(c)),a1(t,s,u)}function pL(t,e,s,r,i){t!==e&&fce(e,function(a,o){if(i||(i=new uo),Kc(a))gce(t,e,o,s,pL,r,i);else{var l=r?r(o1(t,o),a,o+"",t,e,i):void 0;l===void 0&&(l=a),a1(t,o,l)}},sL)}function Yl(t,e){return fL(t,e)}var kc=qie(function(t,e,s){pL(t,e,s)}),dt=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(dt||{});class xo{constructor(e,s,r={}){this.attrName=e,this.keyName=s;const i=dt.TYPE&dt.ATTRIBUTE;this.scope=r.scope!=null?r.scope&dt.LEVEL|i:dt.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(s=>s.name)}add(e,s){return this.canAdd(e,s)?(e.setAttribute(this.keyName,s),!0):!1}canAdd(e,s){return this.whitelist==null?!0:typeof s=="string"?this.whitelist.indexOf(s.replace(/["']/g,""))>-1:this.whitelist.indexOf(s)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const s=e.getAttribute(this.keyName);return this.canAdd(e,s)&&s?s:""}}class Ah extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const mL=class l1{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,s=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(s){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,s)}return null}create(e,s,r){const i=this.query(s);if(i==null)throw new Ah(`Unable to create ${s} blot`);const a=i,o=s instanceof Node||s.nodeType===Node.TEXT_NODE?s:a.create(r),l=new a(e,o,r);return l1.blots.set(l.domNode,l),l}find(e,s=!1){return l1.find(e,s)}query(e,s=dt.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&dt.LEVEL&dt.BLOCK?r=this.types.block:e&dt.LEVEL&dt.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&s&dt.LEVEL&r.scope&&s&dt.TYPE&r.scope?r:null}register(...e){return e.map(s=>{const r="blotName"in s,i="attrName"in s;if(!r&&!i)throw new Ah("Invalid definition");if(r&&s.blotName==="abstract")throw new Ah("Cannot register abstract class");const a=r?s.blotName:i?s.attrName:void 0;return this.types[a]=s,i?typeof s.keyName=="string"&&(this.attributes[s.keyName]=s):r&&(s.className&&(this.classes[s.className]=s),s.tagName&&(Array.isArray(s.tagName)?s.tagName=s.tagName.map(o=>o.toUpperCase()):s.tagName=s.tagName.toUpperCase(),(Array.isArray(s.tagName)?s.tagName:[s.tagName]).forEach(o=>{(this.tags[o]==null||s.className==null)&&(this.tags[o]=s)}))),s})}};mL.blots=new WeakMap;let pf=mL;function gT(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(s=>s.indexOf(`${e}-`)===0)}class xce extends xo{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(s=>s.split("-").slice(0,-1).join("-"))}add(e,s){return this.canAdd(e,s)?(this.remove(e),e.classList.add(`${this.keyName}-${s}`),!0):!1}remove(e){gT(e,this.keyName).forEach(s=>{e.classList.remove(s)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const s=(gT(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,s)?s:""}}const Aa=xce;function Bb(t){const e=t.split("-"),s=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+s}class yce extends xo{static keys(e){return(e.getAttribute("style")||"").split(";").map(s=>s.split(":")[0].trim())}add(e,s){return this.canAdd(e,s)?(e.style[Bb(this.keyName)]=s,!0):!1}remove(e){e.style[Bb(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const s=e.style[Bb(this.keyName)];return this.canAdd(e,s)?s:""}}const Gc=yce;class vce{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,s){s?e.add(this.domNode,s)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=pf.find(this.domNode);if(e==null)return;const s=xo.keys(this.domNode),r=Aa.keys(this.domNode),i=Gc.keys(this.domNode);s.concat(r).concat(i).forEach(a=>{const o=e.scroll.query(a,dt.ATTRIBUTE);o instanceof xo&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(s=>{const r=this.attributes[s].value(this.domNode);e.format(s,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(s=>{this.attributes[s].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,s)=>(e[s]=this.attributes[s].value(this.domNode),e),{})}}const d0=vce,gL=class{constructor(e,s){this.scroll=e,this.domNode=s,pf.blots.set(s,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Ah("Blot definition missing tagName");let s,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?s=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?s=document.createElement(r):s=document.createElement(this.tagName[0])):s=document.createElement(this.tagName),this.className&&s.classList.add(this.className),s}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),pf.blots.delete(this.domNode)}deleteAt(e,s){this.isolate(e,s).remove()}formatAt(e,s,r,i){const a=this.isolate(e,s);if(this.scroll.query(r,dt.BLOT)!=null&&i)a.wrap(r,i);else if(this.scroll.query(r,dt.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);a.wrap(o),o.format(r,i)}}insertAt(e,s,r){const i=r==null?this.scroll.create("text",s):this.scroll.create(s,r),a=this.split(e);this.parent.insertBefore(i,a||void 0)}isolate(e,s){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(s),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,s){return e===0?this:this.next}update(e,s){}wrap(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Ah(`Cannot wrap ${e}`);return r.appendChild(this),r}};gL.blotName="abstract";let xL=gL;const yL=class extends xL{static value(e){return!0}index(e,s){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(s,1):-1}position(e,s){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};yL.scope=dt.INLINE_BLOT;let bce=yL;const Zn=bce;class wce{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const s=e.slice(1);this.append(...s)}}at(e){const s=this.iterator();let r=s();for(;r&&e>0;)e-=1,r=s();return r}contains(e){const s=this.iterator();let r=s();for(;r;){if(r===e)return!0;r=s()}return!1}indexOf(e){const s=this.iterator();let r=s(),i=0;for(;r;){if(r===e)return i;i+=1,r=s()}return-1}insertBefore(e,s){e!=null&&(this.remove(e),e.next=s,s!=null?(e.prev=s.prev,s.prev!=null&&(s.prev.next=e),s.prev=e,s===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let s=0,r=this.head;for(;r!=null;){if(r===e)return s;s+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const s=e;return e!=null&&(e=e.next),s}}find(e,s=!1){const r=this.iterator();let i=r();for(;i;){const a=i.length();if(e<a||s&&e===a&&(i.next==null||i.next.length()!==0))return[i,e];e-=a,i=r()}return[null,0]}forEach(e){const s=this.iterator();let r=s();for(;r;)e(r),r=s()}forEachAt(e,s,r){if(s<=0)return;const[i,a]=this.find(e);let o=e-a;const l=this.iterator(i);let c=l();for(;c&&o<e+s;){const d=c.length();e>o?r(c,e-o,Math.min(s,o+d-e)):r(c,0,Math.min(d,e+s-o)),o+=d,c=l()}}map(e){return this.reduce((s,r)=>(s.push(e(r)),s),[])}reduce(e,s){const r=this.iterator();let i=r();for(;i;)s=e(s,i),i=r();return s}}function xT(t,e){const s=e.find(t);if(s)return s;try{return e.create(t)}catch{const r=e.create(dt.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const vL=class $l extends xL{constructor(e,s){super(e,s),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,$l.uiClass&&this.uiNode.classList.add($l.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new wce,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const s=xT(e,this.scroll);this.insertBefore(s,this.children.head||void 0)}catch(s){if(s instanceof Ah)return;throw s}})}deleteAt(e,s){if(e===0&&s===this.length())return this.remove();this.children.forEachAt(e,s,(r,i,a)=>{r.deleteAt(i,a)})}descendant(e,s=0){const[r,i]=this.children.find(s);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof $l?r.descendant(e,i):[null,-1]}descendants(e,s=0,r=Number.MAX_VALUE){let i=[],a=r;return this.children.forEachAt(s,r,(o,l,c)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&i.push(o),o instanceof $l&&(i=i.concat(o.descendants(e,l,a))),a-=c}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(s=>{e||this.statics.allowedChildren.some(r=>s instanceof r)||(s.statics.scope===dt.BLOCK_BLOT?(s.next!=null&&this.splitAfter(s),s.prev!=null&&this.splitAfter(s.prev),s.parent.unwrap(),e=!0):s instanceof $l?s.unwrap():s.remove())})}formatAt(e,s,r,i){this.children.forEachAt(e,s,(a,o,l)=>{a.formatAt(o,l,r,i)})}insertAt(e,s,r){const[i,a]=this.children.find(e);if(i)i.insertAt(a,s,r);else{const o=r==null?this.scroll.create("text",s):this.scroll.create(s,r);this.appendChild(o)}}insertBefore(e,s){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,s||null),e.parent=this,s!=null&&(r=s.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,s)=>e+s.length(),0)}moveChildren(e,s){this.children.forEach(r=>{e.insertBefore(r,s)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s)}else this.remove()}path(e,s=!1){const[r,i]=this.children.find(e,s),a=[[this,e]];return r instanceof $l?a.concat(r.path(i,s)):(r!=null&&a.push([r,i]),a)}removeChild(e){this.children.remove(e)}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return r instanceof $l&&this.moveChildren(r),super.replaceWith(r)}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,a,o)=>{const l=i.split(a,s);l!=null&&r.appendChild(l)}),r}splitAfter(e){const s=this.clone();for(;e.next!=null;)s.appendChild(e.next);return this.parent&&this.parent.insertBefore(s,this.next||void 0),s}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,s){const r=[],i=[];e.forEach(a=>{a.target===this.domNode&&a.type==="childList"&&(r.push(...a.addedNodes),i.push(...a.removedNodes))}),i.forEach(a=>{if(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(a);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),r.filter(a=>a.parentNode===this.domNode&&a!==this.uiNode).sort((a,o)=>a===o?0:a.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(a=>{let o=null;a.nextSibling!=null&&(o=this.scroll.find(a.nextSibling));const l=xT(a,this.scroll);(l.next!==o||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,o||void 0))}),this.enforceAllowedChildren()}};vL.uiClass="";let jce=vL;const ya=jce;function Nce(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}const Ku=class Gu extends ya{static create(e){return super.create(e)}static formats(e,s){const r=s.query(Gu.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new d0(this.domNode)}format(e,s){if(e===this.statics.blotName&&!s)this.children.forEach(r=>{r instanceof Gu||(r=r.wrap(Gu.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,dt.INLINE);if(r==null)return;r instanceof xo?this.attributes.attribute(r,s):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s)}}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,i){this.formats()[r]!=null||this.scroll.query(r,dt.ATTRIBUTE)?this.isolate(e,s).format(r,i):super.formatAt(e,s,r,i)}optimize(e){super.optimize(e);const s=this.formats();if(Object.keys(s).length===0)return this.unwrap();const r=this.next;r instanceof Gu&&r.prev===this&&Nce(s,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,s){const r=super.wrap(e,s);return r instanceof Gu&&this.attributes.move(r),r}};Ku.allowedChildren=[Ku,Zn],Ku.blotName="inline",Ku.scope=dt.INLINE_BLOT,Ku.tagName="SPAN";let _ce=Ku;const SS=_ce,Yu=class c1 extends ya{static create(e){return super.create(e)}static formats(e,s){const r=s.query(c1.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new d0(this.domNode)}format(e,s){const r=this.scroll.query(e,dt.BLOCK);r!=null&&(r instanceof xo?this.attributes.attribute(r,s):e===this.statics.blotName&&!s?this.replaceWith(c1.blotName):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s))}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,i){this.scroll.query(r,dt.BLOCK)!=null?this.format(r,i):super.formatAt(e,s,r,i)}insertAt(e,s,r){if(r==null||this.scroll.query(s,dt.INLINE)!=null)super.insertAt(e,s,r);else{const i=this.split(e);if(i!=null){const a=this.scroll.create(s,r);i.parent.insertBefore(a,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Yu.blotName="block",Yu.scope=dt.BLOCK_BLOT,Yu.tagName="P",Yu.allowedChildren=[SS,Yu,Zn];let Sce=Yu;const Sm=Sce,d1=class extends ya{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,s){super.deleteAt(e,s),this.enforceAllowedChildren()}formatAt(e,s,r,i){super.formatAt(e,s,r,i),this.enforceAllowedChildren()}insertAt(e,s,r){super.insertAt(e,s,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};d1.blotName="container",d1.scope=dt.BLOCK_BLOT;let Cce=d1;const u0=Cce;class kce extends Zn{static formats(e,s){}format(e,s){super.formatAt(0,this.length(),e,s)}formatAt(e,s,r,i){e===0&&s===this.length()?this.format(r,i):super.formatAt(e,s,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const ci=kce,Ece={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Tce=100,Qu=class extends ya{constructor(e,s){super(null,s),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,Ece),this.attach()}create(e,s){return this.registry.create(this,e,s)}find(e,s=!1){const r=this.registry.find(e,s);return r?r.scroll===this?r:s?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,s=dt.ANY){return this.registry.query(e,s)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,s){this.update(),e===0&&s===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,s)}formatAt(e,s,r,i){this.update(),super.formatAt(e,s,r,i)}insertAt(e,s,r){this.update(),super.insertAt(e,s,r)}optimize(e=[],s={}){super.optimize(s);const r=s.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const a=(c,d=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(r.has(c.domNode)||r.set(c.domNode,[]),d&&a(c.parent))},o=c=>{r.has(c.domNode)&&(c instanceof ya&&c.children.forEach(o),r.delete(c.domNode),c.optimize(s))};let l=e;for(let c=0;l.length>0;c+=1){if(c>=Tce)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(d=>{const u=this.find(d.target,!0);u!=null&&(u.domNode===d.target&&(d.type==="childList"?(a(this.find(d.previousSibling,!1)),Array.from(d.addedNodes).forEach(f=>{const h=this.find(f,!1);a(h,!1),h instanceof ya&&h.children.forEach(x=>{a(x,!1)})})):d.type==="attributes"&&a(u.prev)),a(u))}),this.children.forEach(o),l=Array.from(this.observer.takeRecords()),i=l.slice();i.length>0;)e.push(i.pop())}}update(e,s={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const a=this.find(i.target,!0);return a==null?null:r.has(a.domNode)?(r.get(a.domNode).push(i),null):(r.set(a.domNode,[i]),a)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],s)}),s.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),s),this.optimize(e,s)}};Qu.blotName="scroll",Qu.defaultChild=Sm,Qu.allowedChildren=[Sm,u0],Qu.scope=dt.BLOCK_BLOT,Qu.tagName="DIV";let Ace=Qu;const CS=Ace,u1=class bL extends Zn{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,s){super(e,s),this.text=this.statics.value(this.domNode)}deleteAt(e,s){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+s)}index(e,s){return this.domNode===e?s:-1}insertAt(e,s,r){r==null?(this.text=this.text.slice(0,e)+s+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,s,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof bL&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,s=!1){return[this.domNode,e]}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,s){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};u1.blotName="text",u1.scope=dt.INLINE_BLOT;let Pce=u1;const Ky=Pce,Ice=Object.freeze(Object.defineProperty({__proto__:null,Attributor:xo,AttributorStore:d0,BlockBlot:Sm,ClassAttributor:Aa,ContainerBlot:u0,EmbedBlot:ci,InlineBlot:SS,LeafBlot:Zn,ParentBlot:ya,Registry:pf,Scope:dt,ScrollBlot:CS,StyleAttributor:Gc,TextBlot:Ky},Symbol.toStringTag,{value:"Module"}));var h1={exports:{}},Gr=-1,ur=1,_n=0;function Cm(t,e,s,r,i){if(t===e)return t?[[_n,t]]:[];if(s!=null){var a=zce(t,e,s);if(a)return a}var o=kS(t,e),l=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=h0(t,e);var c=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var d=Rce(t,e);return l&&d.unshift([_n,l]),c&&d.push([_n,c]),ES(d,i),r&&Mce(d),d}function Rce(t,e){var s;if(!t)return[[ur,e]];if(!e)return[[Gr,t]];var r=t.length>e.length?t:e,i=t.length>e.length?e:t,a=r.indexOf(i);if(a!==-1)return s=[[ur,r.substring(0,a)],[_n,i],[ur,r.substring(a+i.length)]],t.length>e.length&&(s[0][0]=s[2][0]=Gr),s;if(i.length===1)return[[Gr,t],[ur,e]];var o=Dce(t,e);if(o){var l=o[0],c=o[1],d=o[2],u=o[3],f=o[4],h=Cm(l,d),x=Cm(c,u);return h.concat([[_n,f]],x)}return Oce(t,e)}function Oce(t,e){for(var s=t.length,r=e.length,i=Math.ceil((s+r)/2),a=i,o=2*i,l=new Array(o),c=new Array(o),d=0;d<o;d++)l[d]=-1,c[d]=-1;l[a+1]=0,c[a+1]=0;for(var u=s-r,f=u%2!==0,h=0,x=0,g=0,y=0,w=0;w<i;w++){for(var b=-w+h;b<=w-x;b+=2){var v=a+b,N;b===-w||b!==w&&l[v-1]<l[v+1]?N=l[v+1]:N=l[v-1]+1;for(var C=N-b;N<s&&C<r&&t.charAt(N)===e.charAt(C);)N++,C++;if(l[v]=N,N>s)x+=2;else if(C>r)h+=2;else if(f){var _=a+u-b;if(_>=0&&_<o&&c[_]!==-1){var T=s-c[_];if(N>=T)return yT(t,e,N,C)}}}for(var j=-w+g;j<=w-y;j+=2){var _=a+j,T;j===-w||j!==w&&c[_-1]<c[_+1]?T=c[_+1]:T=c[_-1]+1;for(var S=T-j;T<s&&S<r&&t.charAt(s-T-1)===e.charAt(r-S-1);)T++,S++;if(c[_]=T,T>s)y+=2;else if(S>r)g+=2;else if(!f){var v=a+u-j;if(v>=0&&v<o&&l[v]!==-1){var N=l[v],C=a+N-v;if(T=s-T,N>=T)return yT(t,e,N,C)}}}}return[[Gr,t],[ur,e]]}function yT(t,e,s,r){var i=t.substring(0,s),a=e.substring(0,r),o=t.substring(s),l=e.substring(r),c=Cm(i,a),d=Cm(o,l);return c.concat(d)}function kS(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var s=0,r=Math.min(t.length,e.length),i=r,a=0;s<i;)t.substring(a,i)==e.substring(a,i)?(s=i,a=s):r=i,i=Math.floor((r-s)/2+s);return wL(t.charCodeAt(i-1))&&i--,i}function vT(t,e){var s=t.length,r=e.length;if(s==0||r==0)return 0;s>r?t=t.substring(s-r):s<r&&(e=e.substring(0,s));var i=Math.min(s,r);if(t==e)return i;for(var a=0,o=1;;){var l=t.substring(i-o),c=e.indexOf(l);if(c==-1)return a;o+=c,(c==0||t.substring(i-o)==e.substring(0,o))&&(a=o,o++)}}function h0(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var s=0,r=Math.min(t.length,e.length),i=r,a=0;s<i;)t.substring(t.length-i,t.length-a)==e.substring(e.length-i,e.length-a)?(s=i,a=s):r=i,i=Math.floor((r-s)/2+s);return jL(t.charCodeAt(t.length-i))&&i--,i}function Dce(t,e){var s=t.length>e.length?t:e,r=t.length>e.length?e:t;if(s.length<4||r.length*2<s.length)return null;function i(x,g,y){for(var w=x.substring(y,y+Math.floor(x.length/4)),b=-1,v="",N,C,_,T;(b=g.indexOf(w,b+1))!==-1;){var j=kS(x.substring(y),g.substring(b)),S=h0(x.substring(0,y),g.substring(0,b));v.length<S+j&&(v=g.substring(b-S,b)+g.substring(b,b+j),N=x.substring(0,y-S),C=x.substring(y+j),_=g.substring(0,b-S),T=g.substring(b+j))}return v.length*2>=x.length?[N,C,_,T,v]:null}var a=i(s,r,Math.ceil(s.length/4)),o=i(s,r,Math.ceil(s.length/2)),l;if(!a&&!o)return null;o?a?l=a[4].length>o[4].length?a:o:l=o:l=a;var c,d,u,f;t.length>e.length?(c=l[0],d=l[1],u=l[2],f=l[3]):(u=l[0],f=l[1],c=l[2],d=l[3]);var h=l[4];return[c,d,u,f,h]}function Mce(t){for(var e=!1,s=[],r=0,i=null,a=0,o=0,l=0,c=0,d=0;a<t.length;)t[a][0]==_n?(s[r++]=a,o=c,l=d,c=0,d=0,i=t[a][1]):(t[a][0]==ur?c+=t[a][1].length:d+=t[a][1].length,i&&i.length<=Math.max(o,l)&&i.length<=Math.max(c,d)&&(t.splice(s[r-1],0,[Gr,i]),t[s[r-1]+1][0]=ur,r--,r--,a=r>0?s[r-1]:-1,o=0,l=0,c=0,d=0,i=null,e=!0)),a++;for(e&&ES(t),$ce(t),a=1;a<t.length;){if(t[a-1][0]==Gr&&t[a][0]==ur){var u=t[a-1][1],f=t[a][1],h=vT(u,f),x=vT(f,u);h>=x?(h>=u.length/2||h>=f.length/2)&&(t.splice(a,0,[_n,f.substring(0,h)]),t[a-1][1]=u.substring(0,u.length-h),t[a+1][1]=f.substring(h),a++):(x>=u.length/2||x>=f.length/2)&&(t.splice(a,0,[_n,u.substring(0,x)]),t[a-1][0]=ur,t[a-1][1]=f.substring(0,f.length-x),t[a+1][0]=Gr,t[a+1][1]=u.substring(x),a++),a++}a++}}var bT=/[^a-zA-Z0-9]/,wT=/\s/,jT=/[\r\n]/,Lce=/\n\r?\n$/,Fce=/^\r?\n\r?\n/;function $ce(t){function e(x,g){if(!x||!g)return 6;var y=x.charAt(x.length-1),w=g.charAt(0),b=y.match(bT),v=w.match(bT),N=b&&y.match(wT),C=v&&w.match(wT),_=N&&y.match(jT),T=C&&w.match(jT),j=_&&x.match(Lce),S=T&&g.match(Fce);return j||S?5:_||T?4:b&&!N&&C?3:N||C?2:b||v?1:0}for(var s=1;s<t.length-1;){if(t[s-1][0]==_n&&t[s+1][0]==_n){var r=t[s-1][1],i=t[s][1],a=t[s+1][1],o=h0(r,i);if(o){var l=i.substring(i.length-o);r=r.substring(0,r.length-o),i=l+i.substring(0,i.length-o),a=l+a}for(var c=r,d=i,u=a,f=e(r,i)+e(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var h=e(r,i)+e(i,a);h>=f&&(f=h,c=r,d=i,u=a)}t[s-1][1]!=c&&(c?t[s-1][1]=c:(t.splice(s-1,1),s--),t[s][1]=d,u?t[s+1][1]=u:(t.splice(s+1,1),s--))}s++}}function ES(t,e){t.push([_n,""]);for(var s=0,r=0,i=0,a="",o="",l;s<t.length;){if(s<t.length-1&&!t[s][1]){t.splice(s,1);continue}switch(t[s][0]){case ur:i++,o+=t[s][1],s++;break;case Gr:r++,a+=t[s][1],s++;break;case _n:var c=s-i-r-1;if(e){if(c>=0&&_L(t[c][1])){var d=t[c][1].slice(-1);if(t[c][1]=t[c][1].slice(0,-1),a=d+a,o=d+o,!t[c][1]){t.splice(c,1),s--;var u=c-1;t[u]&&t[u][0]===ur&&(i++,o=t[u][1]+o,u--),t[u]&&t[u][0]===Gr&&(r++,a=t[u][1]+a,u--),c=u}}if(NL(t[s][1])){var d=t[s][1].charAt(0);t[s][1]=t[s][1].slice(1),a+=d,o+=d}}if(s<t.length-1&&!t[s][1]){t.splice(s,1);break}if(a.length>0||o.length>0){a.length>0&&o.length>0&&(l=kS(o,a),l!==0&&(c>=0?t[c][1]+=o.substring(0,l):(t.splice(0,0,[_n,o.substring(0,l)]),s++),o=o.substring(l),a=a.substring(l)),l=h0(o,a),l!==0&&(t[s][1]=o.substring(o.length-l)+t[s][1],o=o.substring(0,o.length-l),a=a.substring(0,a.length-l)));var f=i+r;a.length===0&&o.length===0?(t.splice(s-f,f),s=s-f):a.length===0?(t.splice(s-f,f,[ur,o]),s=s-f+1):o.length===0?(t.splice(s-f,f,[Gr,a]),s=s-f+1):(t.splice(s-f,f,[Gr,a],[ur,o]),s=s-f+2)}s!==0&&t[s-1][0]===_n?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,i=0,r=0,a="",o="";break}}t[t.length-1][1]===""&&t.pop();var h=!1;for(s=1;s<t.length-1;)t[s-1][0]===_n&&t[s+1][0]===_n&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)===t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),h=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),h=!0)),s++;h&&ES(t,e)}function wL(t){return t>=55296&&t<=56319}function jL(t){return t>=56320&&t<=57343}function NL(t){return jL(t.charCodeAt(0))}function _L(t){return wL(t.charCodeAt(t.length-1))}function Uce(t){for(var e=[],s=0;s<t.length;s++)t[s][1].length>0&&e.push(t[s]);return e}function qb(t,e,s,r){return _L(t)||NL(r)?null:Uce([[_n,t],[Gr,e],[ur,s],[_n,r]])}function zce(t,e,s){var r=typeof s=="number"?{index:s,length:0}:s.oldRange,i=typeof s=="number"?null:s.newRange,a=t.length,o=e.length;if(r.length===0&&(i===null||i.length===0)){var l=r.index,c=t.slice(0,l),d=t.slice(l),u=i?i.index:null;e:{var f=l+o-a;if(u!==null&&u!==f||f<0||f>o)break e;var h=e.slice(0,f),x=e.slice(f);if(x!==d)break e;var g=Math.min(l,f),y=c.slice(0,g),w=h.slice(0,g);if(y!==w)break e;var b=c.slice(g),v=h.slice(g);return qb(y,b,v,d)}e:{if(u!==null&&u!==l)break e;var N=l,h=e.slice(0,N),x=e.slice(N);if(h!==c)break e;var C=Math.min(a-N,o-N),_=d.slice(d.length-C),T=x.slice(x.length-C);if(_!==T)break e;var b=d.slice(0,d.length-C),v=x.slice(0,x.length-C);return qb(c,b,v,_)}}if(r.length>0&&i&&i.length===0)e:{var y=t.slice(0,r.index),_=t.slice(r.index+r.length),g=y.length,C=_.length;if(o<g+C)break e;var w=e.slice(0,g),T=e.slice(o-C);if(y!==w||_!==T)break e;var b=t.slice(g,a-C),v=e.slice(g,o-C);return qb(y,b,v,_)}return null}function f0(t,e,s,r){return Cm(t,e,s,r,!0)}f0.INSERT=ur;f0.DELETE=Gr;f0.EQUAL=_n;var Bce=f0,Gy={exports:{}};Gy.exports;(function(t,e){var s=200,r="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object Array]",l="[object Boolean]",c="[object Date]",d="[object Error]",u="[object Function]",f="[object GeneratorFunction]",h="[object Map]",x="[object Number]",g="[object Object]",y="[object Promise]",w="[object RegExp]",b="[object Set]",v="[object String]",N="[object Symbol]",C="[object WeakMap]",_="[object ArrayBuffer]",T="[object DataView]",j="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",I="[object Int16Array]",P="[object Int32Array]",O="[object Uint8Array]",D="[object Uint8ClampedArray]",M="[object Uint16Array]",J="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,U=/\w*$/,$=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,te={};te[a]=te[o]=te[_]=te[T]=te[l]=te[c]=te[j]=te[S]=te[A]=te[I]=te[P]=te[h]=te[x]=te[g]=te[w]=te[b]=te[v]=te[N]=te[O]=te[D]=te[M]=te[J]=!0,te[d]=te[u]=te[C]=!1;var F=typeof ic=="object"&&ic&&ic.Object===Object&&ic,z=typeof self=="object"&&self&&self.Object===Object&&self,pe=F||z||Function("return this")(),xe=e&&!e.nodeType&&e,_e=xe&&!0&&t&&!t.nodeType&&t,Me=_e&&_e.exports===xe;function K(E,q){return E.set(q[0],q[1]),E}function Q(E,q){return E.add(q),E}function se(E,q){for(var ee=-1,Se=E?E.length:0;++ee<Se&&q(E[ee],ee,E)!==!1;);return E}function ye(E,q){for(var ee=-1,Se=q.length,vt=E.length;++ee<Se;)E[vt+ee]=q[ee];return E}function B(E,q,ee,Se){for(var vt=-1,it=E?E.length:0;++vt<it;)ee=q(ee,E[vt],vt,E);return ee}function ie(E,q){for(var ee=-1,Se=Array(E);++ee<E;)Se[ee]=q(ee);return Se}function ce(E,q){return E==null?void 0:E[q]}function oe(E){var q=!1;if(E!=null&&typeof E.toString!="function")try{q=!!(E+"")}catch{}return q}function Z(E){var q=-1,ee=Array(E.size);return E.forEach(function(Se,vt){ee[++q]=[vt,Se]}),ee}function he(E,q){return function(ee){return E(q(ee))}}function Ne(E){var q=-1,ee=Array(E.size);return E.forEach(function(Se){ee[++q]=Se}),ee}var Ke=Array.prototype,$e=Function.prototype,W=Object.prototype,ae=pe["__core-js_shared__"],ge=function(){var E=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),Ae=$e.toString,Y=W.hasOwnProperty,je=W.toString,ze=RegExp("^"+Ae.call(Y).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=Me?pe.Buffer:void 0,mt=pe.Symbol,os=pe.Uint8Array,rs=he(Object.getPrototypeOf,Object),bs=Object.create,kn=W.propertyIsEnumerable,Xe=Ke.splice,Rt=Object.getOwnPropertySymbols,Ot=pt?pt.isBuffer:void 0,Tt=he(Object.keys,Object),St=Mn(pe,"DataView"),ts=Mn(pe,"Map"),Es=Mn(pe,"Promise"),Ee=Mn(pe,"Set"),Ct=Mn(pe,"WeakMap"),is=Mn(Object,"create"),On=Fn(St),nn=Fn(ts),ws=Fn(Es),er=Fn(Ee),Dn=Fn(Ct),Bs=mt?mt.prototype:void 0,fn=Bs?Bs.valueOf:void 0;function js(E){var q=-1,ee=E?E.length:0;for(this.clear();++q<ee;){var Se=E[q];this.set(Se[0],Se[1])}}function tr(){this.__data__=is?is(null):{}}function Ra(E){return this.has(E)&&delete this.__data__[E]}function Eo(E){var q=this.__data__;if(is){var ee=q[E];return ee===r?void 0:ee}return Y.call(q,E)?q[E]:void 0}function Pe(E){var q=this.__data__;return is?q[E]!==void 0:Y.call(q,E)}function rt(E,q){var ee=this.__data__;return ee[E]=is&&q===void 0?r:q,this}js.prototype.clear=tr,js.prototype.delete=Ra,js.prototype.get=Eo,js.prototype.has=Pe,js.prototype.set=rt;function lt(E){var q=-1,ee=E?E.length:0;for(this.clear();++q<ee;){var Se=E[q];this.set(Se[0],Se[1])}}function Vt(){this.__data__=[]}function $t(E){var q=this.__data__,ee=Da(q,E);if(ee<0)return!1;var Se=q.length-1;return ee==Se?q.pop():Xe.call(q,ee,1),!0}function qs(E){var q=this.__data__,ee=Da(q,E);return ee<0?void 0:q[ee][1]}function pn(E){return Da(this.__data__,E)>-1}function yr(E,q){var ee=this.__data__,Se=Da(ee,E);return Se<0?ee.push([E,q]):ee[Se][1]=q,this}lt.prototype.clear=Vt,lt.prototype.delete=$t,lt.prototype.get=qs,lt.prototype.has=pn,lt.prototype.set=yr;function Ns(E){var q=-1,ee=E?E.length:0;for(this.clear();++q<ee;){var Se=E[q];this.set(Se[0],Se[1])}}function Oa(){this.__data__={hash:new js,map:new(ts||lt),string:new js}}function Nu(E){return Oo(this,E).delete(E)}function Uf(E){return Oo(this,E).get(E)}function Sl(E){return Oo(this,E).has(E)}function _u(E,q){return Oo(this,E).set(E,q),this}Ns.prototype.clear=Oa,Ns.prototype.delete=Nu,Ns.prototype.get=Uf,Ns.prototype.has=Sl,Ns.prototype.set=_u;function En(E){this.__data__=new lt(E)}function To(){this.__data__=new lt}function Wi(E){return this.__data__.delete(E)}function Yc(E){return this.__data__.get(E)}function zf(E){return this.__data__.has(E)}function Su(E,q){var ee=this.__data__;if(ee instanceof lt){var Se=ee.__data__;if(!ts||Se.length<s-1)return Se.push([E,q]),this;ee=this.__data__=new Ns(Se)}return ee.set(E,q),this}En.prototype.clear=To,En.prototype.delete=Wi,En.prototype.get=Yc,En.prototype.has=zf,En.prototype.set=Su;function Ao(E,q){var ee=Fa(E)||La(E)?ie(E.length,String):[],Se=ee.length,vt=!!Se;for(var it in E)Y.call(E,it)&&!(vt&&(it=="length"||Pu(it,Se)))&&ee.push(it);return ee}function Qc(E,q,ee){var Se=E[q];(!(Y.call(E,q)&&Ru(Se,ee))||ee===void 0&&!(q in E))&&(E[q]=ee)}function Da(E,q){for(var ee=E.length;ee--;)if(Ru(E[ee][0],q))return ee;return-1}function vr(E,q){return E&&Zc(q,Xc(q),E)}function Cl(E,q,ee,Se,vt,it,Ut){var Mt;if(Se&&(Mt=it?Se(E,vt,it,Ut):Se(E)),Mt!==void 0)return Mt;if(!ss(E))return E;var Ts=Fa(E);if(Ts){if(Mt=Tu(E),!q)return Eu(E,Mt)}else{var Qt=hi(E),rn=Qt==u||Qt==f;if($a(E))return ui(E,q);if(Qt==g||Qt==a||rn&&!it){if(oe(E))return it?E:{};if(Mt=Lr(rn?{}:E),!q)return Vf(E,vr(Mt,E))}else{if(!te[Qt])return it?E:{};Mt=Au(E,Qt,Cl,q)}}Ut||(Ut=new En);var Hn=Ut.get(E);if(Hn)return Hn;if(Ut.set(E,Mt),!Ts)var Ks=ee?Hf(E):Xc(E);return se(Ks||E,function(Gs,mn){Ks&&(mn=Gs,Gs=E[mn]),Qc(Mt,mn,Cl(Gs,q,ee,Se,mn,E,Ut))}),Mt}function Cu(E){return ss(E)?bs(E):{}}function ku(E,q,ee){var Se=q(E);return Fa(E)?Se:ye(Se,ee(E))}function Bf(E){return je.call(E)}function di(E){if(!ss(E)||Wf(E))return!1;var q=kl(E)||oe(E)?ze:$;return q.test(Fn(E))}function br(E){if(!Iu(E))return Tt(E);var q=[];for(var ee in Object(E))Y.call(E,ee)&&ee!="constructor"&&q.push(ee);return q}function ui(E,q){if(q)return E.slice();var ee=new E.constructor(E.length);return E.copy(ee),ee}function Ki(E){var q=new E.constructor(E.byteLength);return new os(q).set(new os(E)),q}function Gi(E,q){var ee=q?Ki(E.buffer):E.buffer;return new E.constructor(ee,E.byteOffset,E.byteLength)}function ls(E,q,ee){var Se=q?ee(Z(E),!0):Z(E);return B(Se,K,new E.constructor)}function Po(E){var q=new E.constructor(E.source,U.exec(E));return q.lastIndex=E.lastIndex,q}function Io(E,q,ee){var Se=q?ee(Ne(E),!0):Ne(E);return B(Se,Q,new E.constructor)}function Ro(E){return fn?Object(fn.call(E)):{}}function qf(E,q){var ee=q?Ki(E.buffer):E.buffer;return new E.constructor(ee,E.byteOffset,E.length)}function Eu(E,q){var ee=-1,Se=E.length;for(q||(q=Array(Se));++ee<Se;)q[ee]=E[ee];return q}function Zc(E,q,ee,Se){ee||(ee={});for(var vt=-1,it=q.length;++vt<it;){var Ut=q[vt],Mt=void 0;Qc(ee,Ut,Mt===void 0?E[Ut]:Mt)}return ee}function Vf(E,q){return Zc(E,Ln(E),q)}function Hf(E){return ku(E,Xc,Ln)}function Oo(E,q){var ee=E.__data__;return Ma(q)?ee[typeof q=="string"?"string":"hash"]:ee.map}function Mn(E,q){var ee=ce(E,q);return di(ee)?ee:void 0}var Ln=Rt?he(Rt,Object):Du,hi=Bf;(St&&hi(new St(new ArrayBuffer(1)))!=T||ts&&hi(new ts)!=h||Es&&hi(Es.resolve())!=y||Ee&&hi(new Ee)!=b||Ct&&hi(new Ct)!=C)&&(hi=function(E){var q=je.call(E),ee=q==g?E.constructor:void 0,Se=ee?Fn(ee):void 0;if(Se)switch(Se){case On:return T;case nn:return h;case ws:return y;case er:return b;case Dn:return C}return q});function Tu(E){var q=E.length,ee=E.constructor(q);return q&&typeof E[0]=="string"&&Y.call(E,"index")&&(ee.index=E.index,ee.input=E.input),ee}function Lr(E){return typeof E.constructor=="function"&&!Iu(E)?Cu(rs(E)):{}}function Au(E,q,ee,Se){var vt=E.constructor;switch(q){case _:return Ki(E);case l:case c:return new vt(+E);case T:return Gi(E,Se);case j:case S:case A:case I:case P:case O:case D:case M:case J:return qf(E,Se);case h:return ls(E,Se,ee);case x:case v:return new vt(E);case w:return Po(E);case b:return Io(E,Se,ee);case N:return Ro(E)}}function Pu(E,q){return q=q??i,!!q&&(typeof E=="number"||L.test(E))&&E>-1&&E%1==0&&E<q}function Ma(E){var q=typeof E;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?E!=="__proto__":E===null}function Wf(E){return!!ge&&ge in E}function Iu(E){var q=E&&E.constructor,ee=typeof q=="function"&&q.prototype||W;return E===ee}function Fn(E){if(E!=null){try{return Ae.call(E)}catch{}try{return E+""}catch{}}return""}function Fr(E){return Cl(E,!0,!0)}function Ru(E,q){return E===q||E!==E&&q!==q}function La(E){return Mo(E)&&Y.call(E,"callee")&&(!kn.call(E,"callee")||je.call(E)==a)}var Fa=Array.isArray;function Do(E){return E!=null&&El(E.length)&&!kl(E)}function Mo(E){return Ou(E)&&Do(E)}var $a=Ot||Mu;function kl(E){var q=ss(E)?je.call(E):"";return q==u||q==f}function El(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=i}function ss(E){var q=typeof E;return!!E&&(q=="object"||q=="function")}function Ou(E){return!!E&&typeof E=="object"}function Xc(E){return Do(E)?Ao(E):br(E)}function Du(){return[]}function Mu(){return!1}t.exports=Fr})(Gy,Gy.exports);var SL=Gy.exports,Yy={exports:{}};Yy.exports;(function(t,e){var s=200,r="__lodash_hash_undefined__",i=1,a=2,o=9007199254740991,l="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",h="[object Error]",x="[object Function]",g="[object GeneratorFunction]",y="[object Map]",w="[object Number]",b="[object Null]",v="[object Object]",N="[object Promise]",C="[object Proxy]",_="[object RegExp]",T="[object Set]",j="[object String]",S="[object Symbol]",A="[object Undefined]",I="[object WeakMap]",P="[object ArrayBuffer]",O="[object DataView]",D="[object Float32Array]",M="[object Float64Array]",J="[object Int8Array]",X="[object Int16Array]",U="[object Int32Array]",$="[object Uint8Array]",L="[object Uint8ClampedArray]",te="[object Uint16Array]",F="[object Uint32Array]",z=/[\\^$.*+?()[\]{}|]/g,pe=/^\[object .+?Constructor\]$/,xe=/^(?:0|[1-9]\d*)$/,_e={};_e[D]=_e[M]=_e[J]=_e[X]=_e[U]=_e[$]=_e[L]=_e[te]=_e[F]=!0,_e[l]=_e[c]=_e[P]=_e[u]=_e[O]=_e[f]=_e[h]=_e[x]=_e[y]=_e[w]=_e[v]=_e[_]=_e[T]=_e[j]=_e[I]=!1;var Me=typeof ic=="object"&&ic&&ic.Object===Object&&ic,K=typeof self=="object"&&self&&self.Object===Object&&self,Q=Me||K||Function("return this")(),se=e&&!e.nodeType&&e,ye=se&&!0&&t&&!t.nodeType&&t,B=ye&&ye.exports===se,ie=B&&Me.process,ce=function(){try{return ie&&ie.binding&&ie.binding("util")}catch{}}(),oe=ce&&ce.isTypedArray;function Z(E,q){for(var ee=-1,Se=E==null?0:E.length,vt=0,it=[];++ee<Se;){var Ut=E[ee];q(Ut,ee,E)&&(it[vt++]=Ut)}return it}function he(E,q){for(var ee=-1,Se=q.length,vt=E.length;++ee<Se;)E[vt+ee]=q[ee];return E}function Ne(E,q){for(var ee=-1,Se=E==null?0:E.length;++ee<Se;)if(q(E[ee],ee,E))return!0;return!1}function Ke(E,q){for(var ee=-1,Se=Array(E);++ee<E;)Se[ee]=q(ee);return Se}function $e(E){return function(q){return E(q)}}function W(E,q){return E.has(q)}function ae(E,q){return E==null?void 0:E[q]}function ge(E){var q=-1,ee=Array(E.size);return E.forEach(function(Se,vt){ee[++q]=[vt,Se]}),ee}function Ae(E,q){return function(ee){return E(q(ee))}}function Y(E){var q=-1,ee=Array(E.size);return E.forEach(function(Se){ee[++q]=Se}),ee}var je=Array.prototype,ze=Function.prototype,pt=Object.prototype,mt=Q["__core-js_shared__"],os=ze.toString,rs=pt.hasOwnProperty,bs=function(){var E=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),kn=pt.toString,Xe=RegExp("^"+os.call(rs).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=B?Q.Buffer:void 0,Ot=Q.Symbol,Tt=Q.Uint8Array,St=pt.propertyIsEnumerable,ts=je.splice,Es=Ot?Ot.toStringTag:void 0,Ee=Object.getOwnPropertySymbols,Ct=Rt?Rt.isBuffer:void 0,is=Ae(Object.keys,Object),On=Ln(Q,"DataView"),nn=Ln(Q,"Map"),ws=Ln(Q,"Promise"),er=Ln(Q,"Set"),Dn=Ln(Q,"WeakMap"),Bs=Ln(Object,"create"),fn=Fn(On),js=Fn(nn),tr=Fn(ws),Ra=Fn(er),Eo=Fn(Dn),Pe=Ot?Ot.prototype:void 0,rt=Pe?Pe.valueOf:void 0;function lt(E){var q=-1,ee=E==null?0:E.length;for(this.clear();++q<ee;){var Se=E[q];this.set(Se[0],Se[1])}}function Vt(){this.__data__=Bs?Bs(null):{},this.size=0}function $t(E){var q=this.has(E)&&delete this.__data__[E];return this.size-=q?1:0,q}function qs(E){var q=this.__data__;if(Bs){var ee=q[E];return ee===r?void 0:ee}return rs.call(q,E)?q[E]:void 0}function pn(E){var q=this.__data__;return Bs?q[E]!==void 0:rs.call(q,E)}function yr(E,q){var ee=this.__data__;return this.size+=this.has(E)?0:1,ee[E]=Bs&&q===void 0?r:q,this}lt.prototype.clear=Vt,lt.prototype.delete=$t,lt.prototype.get=qs,lt.prototype.has=pn,lt.prototype.set=yr;function Ns(E){var q=-1,ee=E==null?0:E.length;for(this.clear();++q<ee;){var Se=E[q];this.set(Se[0],Se[1])}}function Oa(){this.__data__=[],this.size=0}function Nu(E){var q=this.__data__,ee=ui(q,E);if(ee<0)return!1;var Se=q.length-1;return ee==Se?q.pop():ts.call(q,ee,1),--this.size,!0}function Uf(E){var q=this.__data__,ee=ui(q,E);return ee<0?void 0:q[ee][1]}function Sl(E){return ui(this.__data__,E)>-1}function _u(E,q){var ee=this.__data__,Se=ui(ee,E);return Se<0?(++this.size,ee.push([E,q])):ee[Se][1]=q,this}Ns.prototype.clear=Oa,Ns.prototype.delete=Nu,Ns.prototype.get=Uf,Ns.prototype.has=Sl,Ns.prototype.set=_u;function En(E){var q=-1,ee=E==null?0:E.length;for(this.clear();++q<ee;){var Se=E[q];this.set(Se[0],Se[1])}}function To(){this.size=0,this.__data__={hash:new lt,map:new(nn||Ns),string:new lt}}function Wi(E){var q=Mn(this,E).delete(E);return this.size-=q?1:0,q}function Yc(E){return Mn(this,E).get(E)}function zf(E){return Mn(this,E).has(E)}function Su(E,q){var ee=Mn(this,E),Se=ee.size;return ee.set(E,q),this.size+=ee.size==Se?0:1,this}En.prototype.clear=To,En.prototype.delete=Wi,En.prototype.get=Yc,En.prototype.has=zf,En.prototype.set=Su;function Ao(E){var q=-1,ee=E==null?0:E.length;for(this.__data__=new En;++q<ee;)this.add(E[q])}function Qc(E){return this.__data__.set(E,r),this}function Da(E){return this.__data__.has(E)}Ao.prototype.add=Ao.prototype.push=Qc,Ao.prototype.has=Da;function vr(E){var q=this.__data__=new Ns(E);this.size=q.size}function Cl(){this.__data__=new Ns,this.size=0}function Cu(E){var q=this.__data__,ee=q.delete(E);return this.size=q.size,ee}function ku(E){return this.__data__.get(E)}function Bf(E){return this.__data__.has(E)}function di(E,q){var ee=this.__data__;if(ee instanceof Ns){var Se=ee.__data__;if(!nn||Se.length<s-1)return Se.push([E,q]),this.size=++ee.size,this;ee=this.__data__=new En(Se)}return ee.set(E,q),this.size=ee.size,this}vr.prototype.clear=Cl,vr.prototype.delete=Cu,vr.prototype.get=ku,vr.prototype.has=Bf,vr.prototype.set=di;function br(E,q){var ee=La(E),Se=!ee&&Ru(E),vt=!ee&&!Se&&Do(E),it=!ee&&!Se&&!vt&&Ou(E),Ut=ee||Se||vt||it,Mt=Ut?Ke(E.length,String):[],Ts=Mt.length;for(var Qt in E)rs.call(E,Qt)&&!(Ut&&(Qt=="length"||vt&&(Qt=="offset"||Qt=="parent")||it&&(Qt=="buffer"||Qt=="byteLength"||Qt=="byteOffset")||Au(Qt,Ts)))&&Mt.push(Qt);return Mt}function ui(E,q){for(var ee=E.length;ee--;)if(Fr(E[ee][0],q))return ee;return-1}function Ki(E,q,ee){var Se=q(E);return La(E)?Se:he(Se,ee(E))}function Gi(E){return E==null?E===void 0?A:b:Es&&Es in Object(E)?hi(E):Iu(E)}function ls(E){return ss(E)&&Gi(E)==l}function Po(E,q,ee,Se,vt){return E===q?!0:E==null||q==null||!ss(E)&&!ss(q)?E!==E&&q!==q:Io(E,q,ee,Se,Po,vt)}function Io(E,q,ee,Se,vt,it){var Ut=La(E),Mt=La(q),Ts=Ut?c:Lr(E),Qt=Mt?c:Lr(q);Ts=Ts==l?v:Ts,Qt=Qt==l?v:Qt;var rn=Ts==v,Hn=Qt==v,Ks=Ts==Qt;if(Ks&&Do(E)){if(!Do(q))return!1;Ut=!0,rn=!1}if(Ks&&!rn)return it||(it=new vr),Ut||Ou(E)?Zc(E,q,ee,Se,vt,it):Vf(E,q,Ts,ee,Se,vt,it);if(!(ee&i)){var Gs=rn&&rs.call(E,"__wrapped__"),mn=Hn&&rs.call(q,"__wrapped__");if(Gs||mn){var Yi=Gs?E.value():E,$r=mn?q.value():q;return it||(it=new vr),vt(Yi,$r,ee,Se,it)}}return Ks?(it||(it=new vr),Hf(E,q,ee,Se,vt,it)):!1}function Ro(E){if(!El(E)||Ma(E))return!1;var q=$a(E)?Xe:pe;return q.test(Fn(E))}function qf(E){return ss(E)&&kl(E.length)&&!!_e[Gi(E)]}function Eu(E){if(!Wf(E))return is(E);var q=[];for(var ee in Object(E))rs.call(E,ee)&&ee!="constructor"&&q.push(ee);return q}function Zc(E,q,ee,Se,vt,it){var Ut=ee&i,Mt=E.length,Ts=q.length;if(Mt!=Ts&&!(Ut&&Ts>Mt))return!1;var Qt=it.get(E);if(Qt&&it.get(q))return Qt==q;var rn=-1,Hn=!0,Ks=ee&a?new Ao:void 0;for(it.set(E,q),it.set(q,E);++rn<Mt;){var Gs=E[rn],mn=q[rn];if(Se)var Yi=Ut?Se(mn,Gs,rn,q,E,it):Se(Gs,mn,rn,E,q,it);if(Yi!==void 0){if(Yi)continue;Hn=!1;break}if(Ks){if(!Ne(q,function($r,Qi){if(!W(Ks,Qi)&&(Gs===$r||vt(Gs,$r,ee,Se,it)))return Ks.push(Qi)})){Hn=!1;break}}else if(!(Gs===mn||vt(Gs,mn,ee,Se,it))){Hn=!1;break}}return it.delete(E),it.delete(q),Hn}function Vf(E,q,ee,Se,vt,it,Ut){switch(ee){case O:if(E.byteLength!=q.byteLength||E.byteOffset!=q.byteOffset)return!1;E=E.buffer,q=q.buffer;case P:return!(E.byteLength!=q.byteLength||!it(new Tt(E),new Tt(q)));case u:case f:case w:return Fr(+E,+q);case h:return E.name==q.name&&E.message==q.message;case _:case j:return E==q+"";case y:var Mt=ge;case T:var Ts=Se&i;if(Mt||(Mt=Y),E.size!=q.size&&!Ts)return!1;var Qt=Ut.get(E);if(Qt)return Qt==q;Se|=a,Ut.set(E,q);var rn=Zc(Mt(E),Mt(q),Se,vt,it,Ut);return Ut.delete(E),rn;case S:if(rt)return rt.call(E)==rt.call(q)}return!1}function Hf(E,q,ee,Se,vt,it){var Ut=ee&i,Mt=Oo(E),Ts=Mt.length,Qt=Oo(q),rn=Qt.length;if(Ts!=rn&&!Ut)return!1;for(var Hn=Ts;Hn--;){var Ks=Mt[Hn];if(!(Ut?Ks in q:rs.call(q,Ks)))return!1}var Gs=it.get(E);if(Gs&&it.get(q))return Gs==q;var mn=!0;it.set(E,q),it.set(q,E);for(var Yi=Ut;++Hn<Ts;){Ks=Mt[Hn];var $r=E[Ks],Qi=q[Ks];if(Se)var Kf=Ut?Se(Qi,$r,Ks,q,E,it):Se($r,Qi,Ks,E,q,it);if(!(Kf===void 0?$r===Qi||vt($r,Qi,ee,Se,it):Kf)){mn=!1;break}Yi||(Yi=Ks=="constructor")}if(mn&&!Yi){var Lo=E.constructor,Jc=q.constructor;Lo!=Jc&&"constructor"in E&&"constructor"in q&&!(typeof Lo=="function"&&Lo instanceof Lo&&typeof Jc=="function"&&Jc instanceof Jc)&&(mn=!1)}return it.delete(E),it.delete(q),mn}function Oo(E){return Ki(E,Xc,Tu)}function Mn(E,q){var ee=E.__data__;return Pu(q)?ee[typeof q=="string"?"string":"hash"]:ee.map}function Ln(E,q){var ee=ae(E,q);return Ro(ee)?ee:void 0}function hi(E){var q=rs.call(E,Es),ee=E[Es];try{E[Es]=void 0;var Se=!0}catch{}var vt=kn.call(E);return Se&&(q?E[Es]=ee:delete E[Es]),vt}var Tu=Ee?function(E){return E==null?[]:(E=Object(E),Z(Ee(E),function(q){return St.call(E,q)}))}:Du,Lr=Gi;(On&&Lr(new On(new ArrayBuffer(1)))!=O||nn&&Lr(new nn)!=y||ws&&Lr(ws.resolve())!=N||er&&Lr(new er)!=T||Dn&&Lr(new Dn)!=I)&&(Lr=function(E){var q=Gi(E),ee=q==v?E.constructor:void 0,Se=ee?Fn(ee):"";if(Se)switch(Se){case fn:return O;case js:return y;case tr:return N;case Ra:return T;case Eo:return I}return q});function Au(E,q){return q=q??o,!!q&&(typeof E=="number"||xe.test(E))&&E>-1&&E%1==0&&E<q}function Pu(E){var q=typeof E;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?E!=="__proto__":E===null}function Ma(E){return!!bs&&bs in E}function Wf(E){var q=E&&E.constructor,ee=typeof q=="function"&&q.prototype||pt;return E===ee}function Iu(E){return kn.call(E)}function Fn(E){if(E!=null){try{return os.call(E)}catch{}try{return E+""}catch{}}return""}function Fr(E,q){return E===q||E!==E&&q!==q}var Ru=ls(function(){return arguments}())?ls:function(E){return ss(E)&&rs.call(E,"callee")&&!St.call(E,"callee")},La=Array.isArray;function Fa(E){return E!=null&&kl(E.length)&&!$a(E)}var Do=Ct||Mu;function Mo(E,q){return Po(E,q)}function $a(E){if(!El(E))return!1;var q=Gi(E);return q==x||q==g||q==d||q==C}function kl(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=o}function El(E){var q=typeof E;return E!=null&&(q=="object"||q=="function")}function ss(E){return E!=null&&typeof E=="object"}var Ou=oe?$e(oe):qf;function Xc(E){return Fa(E)?br(E):Eu(E)}function Du(){return[]}function Mu(){return!1}t.exports=Mo})(Yy,Yy.exports);var CL=Yy.exports,TS={};Object.defineProperty(TS,"__esModule",{value:!0});const qce=SL,Vce=CL;var f1;(function(t){function e(a={},o={},l=!1){typeof a!="object"&&(a={}),typeof o!="object"&&(o={});let c=qce(o);l||(c=Object.keys(c).reduce((d,u)=>(c[u]!=null&&(d[u]=c[u]),d),{}));for(const d in a)a[d]!==void 0&&o[d]===void 0&&(c[d]=a[d]);return Object.keys(c).length>0?c:void 0}t.compose=e;function s(a={},o={}){typeof a!="object"&&(a={}),typeof o!="object"&&(o={});const l=Object.keys(a).concat(Object.keys(o)).reduce((c,d)=>(Vce(a[d],o[d])||(c[d]=o[d]===void 0?null:o[d]),c),{});return Object.keys(l).length>0?l:void 0}t.diff=s;function r(a={},o={}){a=a||{};const l=Object.keys(o).reduce((c,d)=>(o[d]!==a[d]&&a[d]!==void 0&&(c[d]=o[d]),c),{});return Object.keys(a).reduce((c,d)=>(a[d]!==o[d]&&o[d]===void 0&&(c[d]=null),c),l)}t.invert=r;function i(a,o,l=!1){if(typeof a!="object")return o;if(typeof o!="object")return;if(!l)return o;const c=Object.keys(o).reduce((d,u)=>(a[u]===void 0&&(d[u]=o[u]),d),{});return Object.keys(c).length>0?c:void 0}t.transform=i})(f1||(f1={}));TS.default=f1;var p0={};Object.defineProperty(p0,"__esModule",{value:!0});var p1;(function(t){function e(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.retain=="object"&&s.retain!==null?1:typeof s.insert=="string"?s.insert.length:1}t.length=e})(p1||(p1={}));p0.default=p1;var AS={};Object.defineProperty(AS,"__esModule",{value:!0});const NT=p0;class Hce{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const s=this.ops[this.index];if(s){const r=this.offset,i=NT.default.length(s);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof s.delete=="number")return{delete:e};{const a={};return s.attributes&&(a.attributes=s.attributes),typeof s.retain=="number"?a.retain=e:typeof s.retain=="object"&&s.retain!==null?a.retain=s.retain:typeof s.insert=="string"?a.insert=s.insert.substr(r,e):a.insert=s.insert,a}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?NT.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,s=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=s,[r].concat(i)}}else return[]}}AS.default=Hce;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const s=Bce,r=SL,i=CL,a=TS;e.AttributeMap=a.default;const o=p0;e.Op=o.default;const l=AS;e.OpIterator=l.default;const c="\0",d=(f,h)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);const x=Object.keys(f)[0];if(!x||x!==Object.keys(h)[0])throw new Error(`embed types not matched: ${x} != ${Object.keys(h)[0]}`);return[x,f[x],h[x]]};class u{constructor(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}static registerEmbed(h,x){this.handlers[h]=x}static unregisterEmbed(h){delete this.handlers[h]}static getHandler(h){const x=this.handlers[h];if(!x)throw new Error(`no handlers for embed type "${h}"`);return x}insert(h,x){const g={};return typeof h=="string"&&h.length===0?this:(g.insert=h,x!=null&&typeof x=="object"&&Object.keys(x).length>0&&(g.attributes=x),this.push(g))}delete(h){return h<=0?this:this.push({delete:h})}retain(h,x){if(typeof h=="number"&&h<=0)return this;const g={retain:h};return x!=null&&typeof x=="object"&&Object.keys(x).length>0&&(g.attributes=x),this.push(g)}push(h){let x=this.ops.length,g=this.ops[x-1];if(h=r(h),typeof g=="object"){if(typeof h.delete=="number"&&typeof g.delete=="number")return this.ops[x-1]={delete:g.delete+h.delete},this;if(typeof g.delete=="number"&&h.insert!=null&&(x-=1,g=this.ops[x-1],typeof g!="object"))return this.ops.unshift(h),this;if(i(h.attributes,g.attributes)){if(typeof h.insert=="string"&&typeof g.insert=="string")return this.ops[x-1]={insert:g.insert+h.insert},typeof h.attributes=="object"&&(this.ops[x-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof g.retain=="number")return this.ops[x-1]={retain:g.retain+h.retain},typeof h.attributes=="object"&&(this.ops[x-1].attributes=h.attributes),this}}return x===this.ops.length?this.ops.push(h):this.ops.splice(x,0,h),this}chop(){const h=this.ops[this.ops.length-1];return h&&typeof h.retain=="number"&&!h.attributes&&this.ops.pop(),this}filter(h){return this.ops.filter(h)}forEach(h){this.ops.forEach(h)}map(h){return this.ops.map(h)}partition(h){const x=[],g=[];return this.forEach(y=>{(h(y)?x:g).push(y)}),[x,g]}reduce(h,x){return this.ops.reduce(h,x)}changeLength(){return this.reduce((h,x)=>x.insert?h+o.default.length(x):x.delete?h-x.delete:h,0)}length(){return this.reduce((h,x)=>h+o.default.length(x),0)}slice(h=0,x=1/0){const g=[],y=new l.default(this.ops);let w=0;for(;w<x&&y.hasNext();){let b;w<h?b=y.next(h-w):(b=y.next(x-w),g.push(b)),w+=o.default.length(b)}return new u(g)}compose(h){const x=new l.default(this.ops),g=new l.default(h.ops),y=[],w=g.peek();if(w!=null&&typeof w.retain=="number"&&w.attributes==null){let v=w.retain;for(;x.peekType()==="insert"&&x.peekLength()<=v;)v-=x.peekLength(),y.push(x.next());w.retain-v>0&&g.next(w.retain-v)}const b=new u(y);for(;x.hasNext()||g.hasNext();)if(g.peekType()==="insert")b.push(g.next());else if(x.peekType()==="delete")b.push(x.next());else{const v=Math.min(x.peekLength(),g.peekLength()),N=x.next(v),C=g.next(v);if(C.retain){const _={};if(typeof N.retain=="number")_.retain=typeof C.retain=="number"?v:C.retain;else if(typeof C.retain=="number")N.retain==null?_.insert=N.insert:_.retain=N.retain;else{const j=N.retain==null?"insert":"retain",[S,A,I]=d(N[j],C.retain),P=u.getHandler(S);_[j]={[S]:P.compose(A,I,j==="retain")}}const T=a.default.compose(N.attributes,C.attributes,typeof N.retain=="number");if(T&&(_.attributes=T),b.push(_),!g.hasNext()&&i(b.ops[b.ops.length-1],_)){const j=new u(x.rest());return b.concat(j).chop()}}else typeof C.delete=="number"&&(typeof N.retain=="number"||typeof N.retain=="object"&&N.retain!==null)&&b.push(C)}return b.chop()}concat(h){const x=new u(this.ops.slice());return h.ops.length>0&&(x.push(h.ops[0]),x.ops=x.ops.concat(h.ops.slice(1))),x}diff(h,x){if(this.ops===h.ops)return new u;const g=[this,h].map(N=>N.map(C=>{if(C.insert!=null)return typeof C.insert=="string"?C.insert:c;const _=N===h?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")),y=new u,w=s(g[0],g[1],x,!0),b=new l.default(this.ops),v=new l.default(h.ops);return w.forEach(N=>{let C=N[1].length;for(;C>0;){let _=0;switch(N[0]){case s.INSERT:_=Math.min(v.peekLength(),C),y.push(v.next(_));break;case s.DELETE:_=Math.min(C,b.peekLength()),b.next(_),y.delete(_);break;case s.EQUAL:_=Math.min(b.peekLength(),v.peekLength(),C);const T=b.next(_),j=v.next(_);i(T.insert,j.insert)?y.retain(_,a.default.diff(T.attributes,j.attributes)):y.push(j).delete(_);break}C-=_}}),y.chop()}eachLine(h,x=`
`){const g=new l.default(this.ops);let y=new u,w=0;for(;g.hasNext();){if(g.peekType()!=="insert")return;const b=g.peek(),v=o.default.length(b)-g.peekLength(),N=typeof b.insert=="string"?b.insert.indexOf(x,v)-v:-1;if(N<0)y.push(g.next());else if(N>0)y.push(g.next(N));else{if(h(y,g.next(1).attributes||{},w)===!1)return;w+=1,y=new u}}y.length()>0&&h(y,{},w)}invert(h){const x=new u;return this.reduce((g,y)=>{if(y.insert)x.delete(o.default.length(y));else{if(typeof y.retain=="number"&&y.attributes==null)return x.retain(y.retain),g+y.retain;if(y.delete||typeof y.retain=="number"){const w=y.delete||y.retain;return h.slice(g,g+w).forEach(v=>{y.delete?x.push(v):y.retain&&y.attributes&&x.retain(o.default.length(v),a.default.invert(y.attributes,v.attributes))}),g+w}else if(typeof y.retain=="object"&&y.retain!==null){const w=h.slice(g,g+1),b=new l.default(w.ops).next(),[v,N,C]=d(y.retain,b.insert),_=u.getHandler(v);return x.retain({[v]:_.invert(N,C)},a.default.invert(y.attributes,b.attributes)),g+1}}return g},0),x.chop()}transform(h,x=!1){if(x=!!x,typeof h=="number")return this.transformPosition(h,x);const g=h,y=new l.default(this.ops),w=new l.default(g.ops),b=new u;for(;y.hasNext()||w.hasNext();)if(y.peekType()==="insert"&&(x||w.peekType()!=="insert"))b.retain(o.default.length(y.next()));else if(w.peekType()==="insert")b.push(w.next());else{const v=Math.min(y.peekLength(),w.peekLength()),N=y.next(v),C=w.next(v);if(N.delete)continue;if(C.delete)b.push(C);else{const _=N.retain,T=C.retain;let j=typeof T=="object"&&T!==null?T:v;if(typeof _=="object"&&_!==null&&typeof T=="object"&&T!==null){const S=Object.keys(_)[0];if(S===Object.keys(T)[0]){const A=u.getHandler(S);A&&(j={[S]:A.transform(_[S],T[S],x)})}}b.retain(j,a.default.transform(N.attributes,C.attributes,x))}}return b.chop()}transformPosition(h,x=!1){x=!!x;const g=new l.default(this.ops);let y=0;for(;g.hasNext()&&y<=h;){const w=g.peekLength(),b=g.peekType();if(g.next(),b==="delete"){h-=Math.min(w,h-y);continue}else b==="insert"&&(y<h||!x)&&(h+=w);y+=w}return h}}u.Op=o.default,u.OpIterator=l.default,u.AttributeMap=a.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(h1,h1.exports);var ki=h1.exports;const ot=Xy(ki);class Pa extends ci{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Pa.blotName="break";Pa.tagName="BR";let ka=class extends Ky{};const Wce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function m0(t){return t.replace(/[&<>"']/g,e=>Wce[e])}const qa=class qa extends SS{static compare(e,s){const r=qa.order.indexOf(e),i=qa.order.indexOf(s);return r>=0||i>=0?r-i:e===s?0:e<s?-1:1}formatAt(e,s,r,i){if(qa.compare(this.statics.blotName,r)<0&&this.scroll.query(r,dt.BLOT)){const a=this.isolate(e,s);i&&a.wrap(r,i)}else super.formatAt(e,s,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof qa&&qa.compare(this.statics.blotName,this.parent.statics.blotName)>0){const s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}};Ge(qa,"allowedChildren",[qa,Pa,ci,ka]),Ge(qa,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let yo=qa;const _T=1;class Bn extends Sm{constructor(){super(...arguments);Ge(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=kL(this)),this.cache.delta}deleteAt(s,r){super.deleteAt(s,r),this.cache={}}formatAt(s,r,i,a){r<=0||(this.scroll.query(i,dt.BLOCK)?s+r===this.length()&&this.format(i,a):super.formatAt(s,Math.min(r,this.length()-s-1),i,a),this.cache={})}insertAt(s,r,i){if(i!=null){super.insertAt(s,r,i),this.cache={};return}if(r.length===0)return;const a=r.split(`
`),o=a.shift();o.length>0&&(s<this.length()-1||this.children.tail==null?super.insertAt(Math.min(s,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let l=this;a.reduce((c,d)=>(l=l.split(c,!0),l.insertAt(0,d),d.length),s+o.length)}insertBefore(s,r){const{head:i}=this.children;super.insertBefore(s,r),i instanceof Pa&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+_T),this.cache.length}moveChildren(s,r){super.moveChildren(s,r),this.cache={}}optimize(s){super.optimize(s),this.cache={}}path(s){return super.path(s,!0)}removeChild(s){super.removeChild(s),this.cache={}}split(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(s===0||s>=this.length()-_T)){const a=this.clone();return s===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const i=super.split(s,r);return this.cache={},i}}Bn.blotName="block";Bn.tagName="P";Bn.defaultChild=Pa;Bn.allowedChildren=[Pa,yo,ci,ka];class _i extends ci{attach(){super.attach(),this.attributes=new d0(this.domNode)}delta(){return new ot().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,s){const r=this.scroll.query(e,dt.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,s)}formatAt(e,s,r,i){this.format(r,i)}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r);return}const i=s.split(`
`),a=i.pop(),o=i.map(c=>{const d=this.scroll.create(Bn.blotName);return d.insertAt(0,c),d}),l=this.split(e);o.forEach(c=>{this.parent.insertBefore(c,l)}),a&&this.parent.insertBefore(this.scroll.create("text",a),l)}}_i.scope=dt.BLOCK_BLOT;function kL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Zn).reduce((s,r)=>r.length()===0?s:s.insert(r.value(),bi(r,{},e)),new ot).insert(`
`,bi(t))}function bi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},s&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:bi(t.parent,e,s)}const pi=class pi extends ci{static value(){}constructor(e,s,r){super(e,s),this.selection=r,this.textNode=document.createTextNode(pi.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,s){if(this.savedLength!==0){super.format(e,s);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==dt.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=pi.CONTENTS.length,r.optimize(),r.formatAt(i,pi.CONTENTS.length,e,s),this.savedLength=0)}index(e,s){return e===this.textNode?0:super.index(e,s)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const s=this.prev instanceof ka?this.prev:null,r=s?s.length():0,i=this.next instanceof ka?this.next:null,a=i?i.text:"",{textNode:o}=this,l=o.data.split(pi.CONTENTS).join("");o.data=pi.CONTENTS;let c;if(s)c=s,(l||i)&&(s.insertAt(s.length(),l+a),i&&i.remove());else if(i)c=i,i.insertAt(0,l);else{const d=document.createTextNode(l);c=this.scroll.create(d),this.parent.insertBefore(c,this)}if(this.remove(),e){const d=(h,x)=>s&&h===s.domNode?x:h===o?r+x-1:i&&h===i.domNode?r+l.length+x:null,u=d(e.start.node,e.start.offset),f=d(e.end.node,e.end.offset);if(u!==null&&f!==null)return{startNode:c.domNode,startOffset:u,endNode:c.domNode,endOffset:f}}return null}update(e,s){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(s.range=r)}}optimize(e){super.optimize(e);let{parent:s}=this;for(;s;){if(s.domNode.tagName==="A"){this.savedLength=pi.CONTENTS.length,s.isolate(this.offset(s),this.length()).unwrap(),this.savedLength=0;break}s=s.parent}}value(){return""}};Ge(pi,"blotName","cursor"),Ge(pi,"className","ql-cursor"),Ge(pi,"tagName","span"),Ge(pi,"CONTENTS","\uFEFF");let mf=pi;var EL={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,s="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(s=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new i(u,f||c,h),g=s?s+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],x]:c._events[g].push(x):(c._events[g]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)e.call(u,f)&&d.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=s?s+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,x=f.length,g=new Array(x);h<x;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(d){var u=s?s+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,h,x,g){var y=s?s+d:d;if(!this._events[y])return!1;var w=this._events[y],b=arguments.length,v,N;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),b){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,f),!0;case 4:return w.fn.call(w.context,u,f,h),!0;case 5:return w.fn.call(w.context,u,f,h,x),!0;case 6:return w.fn.call(w.context,u,f,h,x,g),!0}for(N=1,v=new Array(b-1);N<b;N++)v[N-1]=arguments[N];w.fn.apply(w.context,v)}else{var C=w.length,_;for(N=0;N<C;N++)switch(w[N].once&&this.removeListener(d,w[N].fn,void 0,!0),b){case 1:w[N].fn.call(w[N].context);break;case 2:w[N].fn.call(w[N].context,u);break;case 3:w[N].fn.call(w[N].context,u,f);break;case 4:w[N].fn.call(w[N].context,u,f,h);break;default:if(!v)for(_=1,v=new Array(b-1);_<b;_++)v[_-1]=arguments[_];w[N].fn.apply(w[N].context,v)}}return!0},l.prototype.on=function(d,u,f){return a(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return a(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,h){var x=s?s+d:d;if(!this._events[x])return this;if(!u)return o(this,x),this;var g=this._events[x];if(g.fn)g.fn===u&&(!h||g.once)&&(!f||g.context===f)&&o(this,x);else{for(var y=0,w=[],b=g.length;y<b;y++)(g[y].fn!==u||h&&!g[y].once||f&&g[y].context!==f)&&w.push(g[y]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=s?s+d:d,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,t.exports=l})(EL);var Kce=EL.exports;const Gce=Xy(Kce),m1=new WeakMap,g1=["error","warn","log","info"];let x1="warn";function TL(t){if(x1&&g1.indexOf(t)<=g1.indexOf(x1)){for(var e=arguments.length,s=new Array(e>1?e-1:0),r=1;r<e;r++)s[r-1]=arguments[r];console[t](...s)}}function _l(t){return g1.reduce((e,s)=>(e[s]=TL.bind(console,s,t),e),{})}_l.level=t=>{x1=t};TL.level=_l.level;const Vb=_l("quill:events"),Yce=["selectionchange","mousedown","mouseup","click"];Yce.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const a=m1.get(i);a&&a.emitter&&a.emitter.handleDOM(...s)})})});class nt extends Gce{constructor(){super(),this.domListeners={},this.on("error",Vb.error)}emit(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return Vb.log.call(Vb,...s),super.emit(...s)}handleDOM(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(a=>{let{node:o,handler:l}=a;(e.target===o||o.contains(e.target))&&l(e,...r)})}listenDOM(e,s,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:s,handler:r})}}Ge(nt,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),Ge(nt,"sources",{API:"api",SILENT:"silent",USER:"user"});const Hb=_l("quill:selection");class iu{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=s}}class Qce{constructor(e,s){this.emitter=s,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new iu(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,nt.sources.USER),1)}),this.emitter.on(nt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(nt.events.SCROLL_UPDATE,(i,a)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const o=a.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(o?nt.sources.SILENT:i)}catch{}})}),this.emitter.on(nt.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:a,startOffset:o,endNode:l,endOffset:c}=i.range;this.setNativeRange(a,o,l,c),this.update(nt.sources.SILENT)}}),this.update(nt.sources.SILENT)}handleComposition(){this.emitter.on(nt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(nt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(nt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,s){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,dt.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof Zn){const a=i.split(r.start.offset);i.parent.insertBefore(this.cursor,a)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,s),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),s=Math.min(e+s,r-1)-e;let i,[a,o]=this.scroll.leaf(e);if(a==null)return null;if(s>0&&o===a.length()){const[u]=this.scroll.leaf(e+1);if(u){const[f]=this.scroll.line(e),[h]=this.scroll.line(e+1);f===h&&(a=u,o=0)}}[i,o]=a.position(o,!0);const l=document.createRange();if(s>0)return l.setStart(i,o),[a,o]=this.scroll.leaf(e+s),a==null?null:([i,o]=a.position(o,!0),l.setEnd(i,o),l.getBoundingClientRect());let c="left",d;if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(l.setStart(i,o),l.setEnd(i,o+1)):(l.setStart(i,o-1),l.setEnd(i,o),c="right"),d=l.getBoundingClientRect()}else{if(!(a.domNode instanceof Element))return null;d=a.domNode.getBoundingClientRect(),o>0&&(c="right")}return{bottom:d.top+d.height,height:d.height,left:d[c],right:d[c],top:d.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const s=e.getRangeAt(0);if(s==null)return null;const r=this.normalizeNative(s);return Hb.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const s=this.getNativeRange();return s==null?[null,null]:[this.normalizedToRange(s),s]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Wb(this.root,document.activeElement)}normalizedToRange(e){const s=[[e.start.node,e.start.offset]];e.native.collapsed||s.push([e.end.node,e.end.offset]);const r=s.map(o=>{const[l,c]=o,d=this.scroll.find(l,!0),u=d.offset(this.scroll);return c===0?u:d instanceof Zn?u+d.index(l,c):u+d.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),a=Math.min(i,...r);return new iu(a,i-a)}normalizeNative(e){if(!Wb(this.root,e.startContainer)||!e.collapsed&&!Wb(this.root,e.endContainer))return null;const s={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[s.start,s.end].forEach(r=>{let{node:i,offset:a}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>a)i=i.childNodes[a],a=0;else if(i.childNodes.length===a)i=i.lastChild,i instanceof Text?a=i.data.length:i.childNodes.length>0?a=i.childNodes.length:a=i.childNodes.length+1;else break;r.node=i,r.offset=a}),s}rangeToNative(e){const s=this.scroll.length(),r=(i,a)=>{i=Math.min(s-1,i);const[o,l]=this.scroll.leaf(i);return o?o.position(l,a):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Hb.info("setNativeRange",e,s,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||a||e!==l.startContainer||s!==l.startOffset||r!==l.endContainer||i!==l.endOffset){e instanceof Element&&e.tagName==="BR"&&(s=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const c=document.createRange();c.setStart(e,s),c.setEnd(r,i),o.removeAllRanges(),o.addRange(c)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nt.sources.API;if(typeof s=="string"&&(r=s,s=!1),Hb.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,s)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nt.sources.USER;const s=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Yl(s,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const a=[nt.events.SELECTION_CHANGE,Th(this.lastRange),Th(s),e];this.emitter.emit(nt.events.EDITOR_CHANGE,...a),e!==nt.sources.SILENT&&this.emitter.emit(...a)}}}function Wb(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Zce=/^[ -~]*$/;class Xce{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let s=this.scroll.length();this.scroll.batchStart();const r=ST(e),i=new ot;return ede(r.ops.slice()).reduce((o,l)=>{const c=ki.Op.length(l);let d=l.attributes||{},u=!1,f=!1;if(l.insert!=null){if(i.retain(c),typeof l.insert=="string"){const g=l.insert;f=!g.endsWith(`
`)&&(s<=o||!!this.scroll.descendant(_i,o)[0]),this.scroll.insertAt(o,g);const[y,w]=this.scroll.line(o);let b=kc({},bi(y));if(y instanceof Bn){const[v]=y.descendant(Zn,w);v&&(b=kc(b,bi(v)))}d=ki.AttributeMap.diff(b,d)||{}}else if(typeof l.insert=="object"){const g=Object.keys(l.insert)[0];if(g==null)return o;const y=this.scroll.query(g,dt.INLINE)!=null;if(y)(s<=o||this.scroll.descendant(_i,o)[0])&&(f=!0);else if(o>0){const[w,b]=this.scroll.descendant(Zn,o-1);w instanceof ka?w.value()[b]!==`
`&&(u=!0):w instanceof ci&&w.statics.scope===dt.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,g,l.insert[g]),y){const[w]=this.scroll.descendant(Zn,o);if(w){const b=kc({},bi(w));d=ki.AttributeMap.diff(b,d)||{}}}}s+=c}else if(i.push(l),l.retain!==null&&typeof l.retain=="object"){const g=Object.keys(l.retain)[0];if(g==null)return o;this.scroll.updateEmbedAt(o,g,l.retain[g])}Object.keys(d).forEach(g=>{this.scroll.formatAt(o,c,g,d[g])});const h=u?1:0,x=f?1:0;return s+=h+x,i.retain(h),i.delete(x),o+c+h+x},0),i.reduce((o,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(o,l.delete),o):o+ki.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,s){return this.scroll.deleteAt(e,s),this.update(new ot().retain(e).delete(s))}formatLine(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(a=>{this.scroll.lines(e,Math.max(s,1)).forEach(o=>{o.format(a,r[a])})}),this.scroll.optimize();const i=new ot().retain(e).retain(s,Th(r));return this.update(i)}formatText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(a=>{this.scroll.formatAt(e,s,a,r[a])});const i=new ot().retain(e).retain(s,Th(r));return this.update(i)}getContents(e,s){return this.delta.slice(e,e+s)}getDelta(){return this.scroll.lines().reduce((e,s)=>e.concat(s.delta()),new ot)}getFormat(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];s===0?this.scroll.path(e).forEach(l=>{const[c]=l;c instanceof Bn?r.push(c):c instanceof Zn&&i.push(c)}):(r=this.scroll.lines(e,s),i=this.scroll.descendants(Zn,e,s));const[a,o]=[r,i].map(l=>{const c=l.shift();if(c==null)return{};let d=bi(c);for(;Object.keys(d).length>0;){const u=l.shift();if(u==null)return d;d=Jce(bi(u),d)}return d});return{...a,...o}}getHTML(e,s){const[r,i]=this.scroll.line(e);if(r){const a=r.length();return r.length()>=i+s&&!(i===0&&s===a)?km(r,i,s,!0):km(this.scroll,e,s,!0)}return""}getText(e,s){return this.getContents(e,s).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,s){const r=ST(s),i=new ot().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,s,r){return this.scroll.insertAt(e,s,r),this.update(new ot().retain(e).insert({[s]:r}))}insertText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s=s.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,s),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,s.length,i,r[i])}),this.update(new ot().retain(e).insert(s,Th(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Bn.blotName)return!1;const s=e;return s.children.length>1?!1:s.children.head instanceof Pa}removeFormat(e,s){const r=this.getText(e,s),[i,a]=this.scroll.line(e+s);let o=0,l=new ot;i!=null&&(o=i.length()-a,l=i.delta().slice(a,a+o-1).insert(`
`));const d=this.getContents(e,s+o).diff(new ot().insert(r).concat(l)),u=new ot().retain(e).concat(d);return this.applyDelta(u)}update(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(s.length===1&&s[0].type==="characterData"&&s[0].target.data.match(Zce)&&this.scroll.find(s[0].target)){const a=this.scroll.find(s[0].target),o=bi(a),l=a.offset(this.scroll),c=s[0].oldValue.replace(mf.CONTENTS,""),d=new ot().insert(c),u=new ot().insert(a.value()),f=r&&{oldRange:CT(r.oldRange,-l),newRange:CT(r.newRange,-l)};e=new ot().retain(l).concat(d.diff(u,f)).reduce((x,g)=>g.insert?x.insert(g.insert,o):x.push(g),new ot),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!Yl(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function Zu(t,e,s){if(t.length===0){const[x]=Kb(s.pop());return e<=0?`</li></${x}>`:`</li></${x}>${Zu([],e-1,s)}`}const[{child:r,offset:i,length:a,indent:o,type:l},...c]=t,[d,u]=Kb(l);if(o>e)return s.push(l),o===e+1?`<${d}><li${u}>${km(r,i,a)}${Zu(c,o,s)}`:`<${d}><li>${Zu(t,e+1,s)}`;const f=s[s.length-1];if(o===e&&l===f)return`</li><li${u}>${km(r,i,a)}${Zu(c,o,s)}`;const[h]=Kb(s.pop());return`</li></${h}>${Zu(t,e-1,s)}`}function km(t,e,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,s);if(t instanceof ka)return m0(t.value().slice(e,e+s)).replaceAll(" ","&nbsp;");if(t instanceof ya){if(t.statics.blotName==="list-container"){const d=[];return t.children.forEachAt(e,s,(u,f,h)=>{const x="formats"in u&&typeof u.formats=="function"?u.formats():{};d.push({child:u,offset:f,length:h,indent:x.indent||0,type:x.list})}),Zu(d,-1,[])}const i=[];if(t.children.forEachAt(e,s,(d,u,f)=>{i.push(km(d,u,f))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:a,innerHTML:o}=t.domNode,[l,c]=a.split(`>${o}<`);return l==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${c}`:`${l}>${i.join("")}<${c}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Jce(t,e){return Object.keys(e).reduce((s,r)=>{if(t[r]==null)return s;const i=e[r];return i===t[r]?s[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?s[r]=i.concat([t[r]]):s[r]=i:s[r]=[i,t[r]],s},{})}function Kb(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function ST(t){return t.reduce((e,s)=>{if(typeof s.insert=="string"){const r=s.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,s.attributes)}return e.push(s)},new ot)}function CT(t,e){let{index:s,length:r}=t;return new iu(s+e,r)}function ede(t){const e=[];return t.forEach(s=>{typeof s.insert=="string"?s.insert.split(`
`).forEach((i,a)=>{a&&e.push({insert:`
`,attributes:s.attributes}),i&&e.push({insert:i,attributes:s.attributes})}):e.push(s)}),e}class Ia{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=s}}Ge(Ia,"DEFAULTS",{});const ex="\uFEFF";class PS extends ci{constructor(e,s){super(e,s),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(ex),this.rightGuard=document.createTextNode(ex),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,s){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,s)}restore(e){let s=null,r;const i=e.data.split(ex).join("");if(e===this.leftGuard)if(this.prev instanceof ka){const a=this.prev.length();this.prev.insertAt(a,i),s={startNode:this.prev.domNode,startOffset:a+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),s={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof ka?(this.next.insertAt(0,i),s={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),s={startNode:r,startOffset:i.length}));return e.data=ex,s}update(e,s){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(s.range=i)}})}}class tde{constructor(e,s){Ge(this,"isComposing",!1);this.scroll=e,this.emitter=s,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const s=e.target instanceof Node?this.scroll.find(e.target,!0):null;s&&!(s instanceof PS)&&(this.emitter.emit(nt.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(nt.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(nt.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(nt.events.COMPOSITION_END,e),this.isComposing=!1}}const Bp=class Bp{constructor(e,s){Ge(this,"modules",{});this.quill=e,this.options=s}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const s=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new s(this.quill,this.options.modules[e]||{}),this.modules[e]}};Ge(Bp,"DEFAULTS",{modules:{}}),Ge(Bp,"themes",{default:Bp});let gf=Bp;const sde=t=>t.parentElement||t.getRootNode().host||null,nde=t=>{const e=t.getBoundingClientRect(),s="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*s,bottom:e.top+t.clientHeight*r,left:e.left}},tx=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},kT=(t,e,s,r,i,a)=>t<s&&e>r?0:t<s?-(s-t+i):e>r?e-t>r-s?t+i-s:e-r+a:0,rde=(t,e)=>{var a,o,l;const s=t.ownerDocument;let r=e,i=t;for(;i;){const c=i===s.body,d=c?{top:0,right:((a=window.visualViewport)==null?void 0:a.width)??s.documentElement.clientWidth,bottom:((o=window.visualViewport)==null?void 0:o.height)??s.documentElement.clientHeight,left:0}:nde(i),u=getComputedStyle(i),f=kT(r.left,r.right,d.left,d.right,tx(u.scrollPaddingLeft),tx(u.scrollPaddingRight)),h=kT(r.top,r.bottom,d.top,d.bottom,tx(u.scrollPaddingTop),tx(u.scrollPaddingBottom));if(f||h)if(c)(l=s.defaultView)==null||l.scrollBy(f,h);else{const{scrollLeft:x,scrollTop:g}=i;h&&(i.scrollTop+=h),f&&(i.scrollLeft+=f);const y=i.scrollLeft-x,w=i.scrollTop-g;r={left:r.left-y,top:r.top-w,right:r.right-y,bottom:r.bottom-w}}i=c||u.position==="fixed"?null:sde(i)}},ide=100,ade=["block","break","cursor","inline","scroll","text"],ode=(t,e,s)=>{const r=new pf;return ade.forEach(i=>{const a=e.query(i);a&&r.register(a)}),t.forEach(i=>{let a=e.query(i);a||s.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;a;)if(r.register(a),a="blotName"in a?a.requiredContainer??null:null,o+=1,o>ide){s.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},Ph=_l("quill"),sx=new pf;ya.uiClass="ql-ui";const ea=class ea{static debug(e){e===!0&&(e="log"),_l.level(e)}static find(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return m1.get(e)||sx.find(e,s)}static import(e){return this.imports[e]==null&&Ph.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],s=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,s):Object.keys(e).forEach(i=>{this.register(i,e[i],s)})}else{const e=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&Ph.warn(`Overwriting ${e} with`,s),this.imports[e]=s,(e.startsWith("blots/")||e.startsWith("formats/"))&&s&&typeof s!="boolean"&&s.blotName!=="abstract"&&sx.register(s),typeof s.register=="function"&&s.register(sx)}}constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=lde(e,s),this.container=this.options.container,this.container==null){Ph.error("Invalid Quill container",e);return}this.options.debug&&ea.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",m1.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new nt;const i=CS.blotName,a=this.options.registry.query(i);if(!a||!("blotName"in a))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new a(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Xce(this.scroll),this.selection=new Qce(this.scroll,this.emitter),this.composition=new tde(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(nt.events.EDITOR_CHANGE,o=>{o===nt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(nt.events.SCROLL_UPDATE,(o,l)=>{const c=this.selection.lastRange,[d]=this.selection.getRange(),u=c&&d?{oldRange:c,newRange:d}:void 0;Xi.call(this,()=>this.editor.update(null,l,u),o)}),this.emitter.on(nt.events.SCROLL_EMBED_UPDATE,(o,l)=>{const c=this.selection.lastRange,[d]=this.selection.getRange(),u=c&&d?{oldRange:c,newRange:d}:void 0;Xi.call(this,()=>{const f=new ot().retain(o.offset(this)).retain({[o.statics.blotName]:l});return this.editor.update(f,[],u)},ea.sources.USER)}),r){const o=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,s),e}blur(){this.selection.setRange(null)}deleteText(e,s,r){return[e,s,,r]=zo(e,s,r),Xi.call(this,()=>this.editor.deleteText(e,s),r,e,-1*s)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const s=e();return this.allowReadOnlyEdits=!1,s}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nt.sources.API;return Xi.call(this,()=>{const i=this.getSelection(!0);let a=new ot;if(i==null)return a;if(this.scroll.query(e,dt.BLOCK))a=this.editor.formatLine(i.index,i.length,{[e]:s});else{if(i.length===0)return this.selection.format(e,s),a;a=this.editor.formatText(i.index,i.length,{[e]:s})}return this.setSelection(i,nt.sources.SILENT),a},r)}formatLine(e,s,r,i,a){let o;return[e,s,o,a]=zo(e,s,r,i,a),Xi.call(this,()=>this.editor.formatLine(e,s,o),a,e,0)}formatText(e,s,r,i,a){let o;return[e,s,o,a]=zo(e,s,r,i,a),Xi.call(this,()=>this.editor.formatText(e,s,o),a,e,0)}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,s):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,s]=zo(e,s),this.editor.getContents(e,s)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,s):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,s)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=zo(e,s),this.editor.getHTML(e,s)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=zo(e,s),this.editor.getText(e,s)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,s,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ea.sources.API;return Xi.call(this,()=>this.editor.insertEmbed(e,s,r),i,e)}insertText(e,s,r,i,a){let o;return[e,,o,a]=zo(e,0,r,i,a),Xi.call(this,()=>this.editor.insertText(e,s,o),a,e,s.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,s,r){return[e,s,,r]=zo(e,s,r),Xi.call(this,()=>this.editor.removeFormat(e,s),r,e)}scrollRectIntoView(e){rde(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,s=e&&this.selection.getBounds(e.index,e.length);s&&this.scrollRectIntoView(s)}setContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt.sources.API;return Xi.call(this,()=>{e=new ot(e);const r=this.getLength(),i=this.editor.deleteText(0,r),a=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return i.compose(a).compose(o)},s)}setSelection(e,s,r){e==null?this.selection.setRange(null,s||ea.sources.API):([e,s,,r]=zo(e,s,r),this.selection.setRange(new iu(Math.max(0,e),s),r),r!==nt.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt.sources.API;const r=new ot().insert(e);return this.setContents(r,s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nt.sources.USER;const s=this.scroll.update(e);return this.selection.update(e),s}updateContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt.sources.API;return Xi.call(this,()=>(e=new ot(e),this.editor.applyDelta(e)),s,!0)}};Ge(ea,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:sx,theme:"default"}),Ge(ea,"events",nt.events),Ge(ea,"sources",nt.sources),Ge(ea,"version","2.0.3"),Ge(ea,"imports",{delta:ot,parchment:Ice,"core/module":Ia,"core/theme":gf});let Te=ea;function ET(t){return typeof t=="string"?document.querySelector(t):t}function Gb(t){return Object.entries(t??{}).reduce((e,s)=>{let[r,i]=s;return{...e,[r]:i===!0?{}:i}},{})}function TT(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function lde(t,e){const s=ET(t);if(!s)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===Te.DEFAULTS.theme?gf:Te.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:a,...o}=Te.DEFAULTS,{modules:l,...c}=i.DEFAULTS;let d=Gb(e.modules);d!=null&&d.toolbar&&d.toolbar.constructor!==Object&&(d={...d,toolbar:{container:d.toolbar}});const u=kc({},Gb(a),Gb(l),d),f={...o,...TT(c),...TT(e)};let h=e.registry;return h?e.formats&&Ph.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?ode(e.formats,f.registry,Ph):f.registry,{...f,registry:h,container:s,theme:i,modules:Object.entries(u).reduce((x,g)=>{let[y,w]=g;if(!w)return x;const b=Te.import(`modules/${y}`);return b==null?(Ph.error(`Cannot load ${y} module. Are you sure you registered it?`),x):{...x,[y]:kc({},b.DEFAULTS||{},w)}},{}),bounds:ET(f.bounds)}}function Xi(t,e,s,r){if(!this.isEnabled()&&e===nt.sources.USER&&!this.allowReadOnlyEdits)return new ot;let i=s==null?null:this.getSelection();const a=this.editor.delta,o=t();if(i!=null&&(s===!0&&(s=i.index),r==null?i=AT(i,o,e):r!==0&&(i=AT(i,s,r,e)),this.setSelection(i,nt.sources.SILENT)),o.length()>0){const l=[nt.events.TEXT_CHANGE,o,a,e];this.emitter.emit(nt.events.EDITOR_CHANGE,...l),e!==nt.sources.SILENT&&this.emitter.emit(...l)}return o}function zo(t,e,s,r,i){let a={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=s,s=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=s,s=e,e=0),typeof s=="object"?(a=s,i=r):typeof s=="string"&&(r!=null?a[s]=r:i=s),i=i||nt.sources.API,[t,e,a,i]}function AT(t,e,s,r){const i=typeof s=="number"?s:0;if(t==null)return null;let a,o;return e&&typeof e.transformPosition=="function"?[a,o]=[t.index,t.index+t.length].map(l=>e.transformPosition(l,r!==nt.sources.USER)):[a,o]=[t.index,t.index+t.length].map(l=>l<e||l===e&&r===nt.sources.USER?l:i>=0?l+i:Math.max(e,l+i)),new iu(a,o-a)}class bu extends u0{}function PT(t){return t instanceof Bn||t instanceof _i}function IT(t){return typeof t.updateContent=="function"}class Xu extends CS{constructor(e,s,r){let{emitter:i}=r;super(e,s),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",a=>this.handleDragStart(a))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(nt.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(nt.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,s){this.emitter.emit(nt.events.SCROLL_EMBED_UPDATE,e,s)}deleteAt(e,s){const[r,i]=this.line(e),[a]=this.line(e+s);if(super.deleteAt(e,s),a!=null&&r!==a&&i>0){if(r instanceof _i||a instanceof _i){this.optimize();return}const o=a.children.head instanceof Pa?null:a.children.head;r.moveChildren(a,o),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,s,r,i){super.formatAt(e,s,r,i),this.optimize()}insertAt(e,s,r){if(e>=this.length())if(r==null||this.scroll.query(s,dt.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&s.endsWith(`
`)?i.insertAt(0,s.slice(0,-1),r):i.insertAt(0,s,r)}else{const i=this.scroll.create(s,r);this.appendChild(i)}else super.insertAt(e,s,r);this.optimize()}insertBefore(e,s){if(e.statics.scope===dt.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,s)}else super.insertBefore(e,s)}insertContents(e,s){const r=this.deltaToRenderBlocks(s.concat(new ot().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const a=r.shift();if(a){const c=a.type==="block"&&(a.delta.length()===0||!this.descendant(_i,e)[0]&&e<this.length()),d=a.type==="block"?a.delta:new ot().insert({[a.key]:a.value});Yb(this,e,d);const u=a.type==="block"?1:0,f=e+d.length()+u;c&&this.insertAt(f-1,`
`);const h=bi(this.line(e)[0]),x=ki.AttributeMap.diff(h,a.attributes)||{};Object.keys(x).forEach(g=>{this.formatAt(f-1,1,g,x[g])}),e=f}let[o,l]=this.children.find(e);if(r.length&&(o&&(o=o.split(l),l=0),r.forEach(c=>{if(c.type==="block"){const d=this.createBlock(c.attributes,o||void 0);Yb(d,0,c.delta)}else{const d=this.create(c.key,c.value);this.insertBefore(d,o||void 0),Object.keys(c.attributes).forEach(u=>{d.format(u,c.attributes[u])})}})),i.type==="block"&&i.delta.length()){const c=o?o.offset(o.scroll)+l:this.length();Yb(this,c,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const s=this.path(e).pop();if(!s)return[null,-1];const[r,i]=s;return r instanceof Zn?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(PT,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,a,o)=>{let l=[],c=o;return i.children.forEachAt(a,o,(d,u,f)=>{PT(d)?l.push(d):d instanceof u0&&(l=l.concat(r(d,u,c))),c-=f}),l};return r(this,e,s)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,s),e.length>0&&this.emitter.emit(nt.events.SCROLL_OPTIMIZE,e,s))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let s=nt.sources.USER;typeof e=="string"&&(s=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const a=this.find(i,!0);return a&&!IT(a)}),e.length>0&&this.emitter.emit(nt.events.SCROLL_BEFORE_UPDATE,s,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(nt.events.SCROLL_UPDATE,s,e)}updateEmbedAt(e,s,r){const[i]=this.descendant(a=>a instanceof _i,e);i&&i.statics.blotName===s&&IT(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const s=[];let r=new ot;return e.forEach(i=>{const a=i==null?void 0:i.insert;if(a)if(typeof a=="string"){const o=a.split(`
`);o.slice(0,-1).forEach(c=>{r.insert(c,i.attributes),s.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new ot});const l=o[o.length-1];l&&r.insert(l,i.attributes)}else{const o=Object.keys(a)[0];if(!o)return;this.query(o,dt.INLINE)?r.push(i):(r.length()&&s.push({type:"block",delta:r,attributes:{}}),r=new ot,s.push({type:"blockEmbed",key:o,value:a[o],attributes:i.attributes??{}}))}}),r.length()&&s.push({type:"block",delta:r,attributes:{}}),s}createBlock(e,s){let r;const i={};Object.entries(e).forEach(l=>{let[c,d]=l;this.query(c,dt.BLOCK&dt.BLOT)!=null?r=c:i[c]=d});const a=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(a,s||void 0);const o=a.length();return Object.entries(i).forEach(l=>{let[c,d]=l;a.formatAt(0,o,c,d)}),a}}Ge(Xu,"blotName","scroll"),Ge(Xu,"className","ql-editor"),Ge(Xu,"tagName","DIV"),Ge(Xu,"defaultChild",Bn),Ge(Xu,"allowedChildren",[Bn,_i,bu]);function Yb(t,e,s){s.reduce((r,i)=>{const a=ki.Op.length(i);let o=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const l=i.insert;t.insertAt(r,l);const[c]=t.descendant(Zn,r),d=bi(c);o=ki.AttributeMap.diff(d,o)||{}}else if(typeof i.insert=="object"){const l=Object.keys(i.insert)[0];if(l==null)return r;if(t.insertAt(r,l,i.insert[l]),t.scroll.query(l,dt.INLINE)!=null){const[d]=t.descendant(Zn,r),u=bi(d);o=ki.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(l=>{t.formatAt(r,a,l,o[l])}),r+a},e)}const IS={scope:dt.BLOCK,whitelist:["right","center","justify"]},cde=new xo("align","align",IS),AL=new Aa("align","ql-align",IS),PL=new Gc("align","text-align",IS);class IL extends Gc{value(e){let s=super.value(e);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${s.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):s}}const dde=new Aa("color","ql-color",{scope:dt.INLINE}),RS=new IL("color","color",{scope:dt.INLINE}),ude=new Aa("background","ql-bg",{scope:dt.INLINE}),OS=new IL("background","background-color",{scope:dt.INLINE});class wu extends bu{static create(e){const s=super.create(e);return s.setAttribute("spellcheck","false"),s}code(e,s){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+s)}html(e,s){return`<pre>
${m0(this.code(e,s))}
</pre>`}}class Xn extends Bn{static register(){Te.register(wu)}}Ge(Xn,"TAB","  ");class DS extends yo{}DS.blotName="code";DS.tagName="CODE";Xn.blotName="code-block";Xn.className="ql-code-block";Xn.tagName="DIV";wu.blotName="code-block-container";wu.className="ql-code-block-container";wu.tagName="DIV";wu.allowedChildren=[Xn];Xn.allowedChildren=[ka,Pa,mf];Xn.requiredContainer=wu;const MS={scope:dt.BLOCK,whitelist:["rtl"]},RL=new xo("direction","dir",MS),OL=new Aa("direction","ql-direction",MS),DL=new Gc("direction","direction",MS),ML={scope:dt.INLINE,whitelist:["serif","monospace"]},LL=new Aa("font","ql-font",ML);class hde extends Gc{value(e){return super.value(e).replace(/["']/g,"")}}const FL=new hde("font","font-family",ML),$L=new Aa("size","ql-size",{scope:dt.INLINE,whitelist:["small","large","huge"]}),UL=new Gc("size","font-size",{scope:dt.INLINE,whitelist:["10px","18px","32px"]}),fde=_l("quill:keyboard"),pde=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class g0 extends Ia{static match(e,s){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!s[r]!==e[r]&&s[r]!==null)?!1:s.key===e.key||s.key===e.which}constructor(e,s){super(e,s),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=gde(e);if(i==null){fde.warn("Attempted to add invalid keyboard binding",i);return}typeof s=="function"&&(s={handler:s}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(o=>{const l={...i,key:o,...s,...r};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(b=>g0.match(e,b));if(i.length===0)return;const a=Te.find(e.target,!0);if(a&&a.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[l,c]=this.quill.getLine(o.index),[d,u]=this.quill.getLeaf(o.index),[f,h]=o.length===0?[d,u]:this.quill.getLeaf(o.index+o.length),x=d instanceof Ky?d.value().slice(0,u):"",g=f instanceof Ky?f.value().slice(h):"",y={collapsed:o.length===0,empty:o.length===0&&l.length()<=1,format:this.quill.getFormat(o),line:l,offset:c,prefix:x,suffix:g,event:e};i.some(b=>{if(b.collapsed!=null&&b.collapsed!==y.collapsed||b.empty!=null&&b.empty!==y.empty||b.offset!=null&&b.offset!==y.offset)return!1;if(Array.isArray(b.format)){if(b.format.every(v=>y.format[v]==null))return!1}else if(typeof b.format=="object"&&!Object.keys(b.format).every(v=>b.format[v]===!0?y.format[v]!=null:b.format[v]===!1?y.format[v]==null:Yl(b.format[v],y.format[v])))return!1;return b.prefix!=null&&!b.prefix.test(y.prefix)||b.suffix!=null&&!b.suffix.test(y.suffix)?!1:b.handler.call(this,o,y,b)!==!0})&&e.preventDefault()})}handleBackspace(e,s){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(s.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[a]=this.quill.getLine(e.index);let o=new ot().retain(e.index-r).delete(r);if(s.offset===0){const[l]=this.quill.getLine(e.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const d=a.formats(),u=this.quill.getFormat(e.index-1,1);if(i=ki.AttributeMap.diff(d,u)||{},Object.keys(i).length>0){const f=new ot().retain(e.index+a.length()-2).retain(1,i);o=o.compose(f)}}}this.quill.updateContents(o,Te.sources.USER),this.quill.focus()}handleDelete(e,s){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(s.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[a]=this.quill.getLine(e.index);let o=new ot().retain(e.index).delete(r);if(s.offset>=a.length()-1){const[l]=this.quill.getLine(e.index+1);if(l){const c=a.formats(),d=this.quill.getFormat(e.index,1);i=ki.AttributeMap.diff(c,d)||{},Object.keys(i).length>0&&(o=o.retain(l.length()-1).retain(1,i))}}this.quill.updateContents(o,Te.sources.USER),this.quill.focus()}handleDeleteRange(e){LS({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,s){const r=Object.keys(s.format).reduce((a,o)=>(this.quill.scroll.query(o,dt.BLOCK)&&!Array.isArray(s.format[o])&&(a[o]=s.format[o]),a),{}),i=new ot().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,Te.sources.USER),this.quill.setSelection(e.index+1,Te.sources.SILENT),this.quill.focus()}}const mde={bindings:{bold:Qb("bold"),italic:Qb("italic"),underline:Qb("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Te.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Te.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",Te.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Te.sources.USER)}},"indent code-block":RT(!0),"outdent code-block":RT(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Te.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const s=new ot().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(s,Te.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Te.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Te.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const s={list:!1};e.format.indent&&(s.indent=!1),this.quill.formatLine(t.index,t.length,s,Te.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,s]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new ot().retain(t.index).insert(`
`,r).retain(e.length()-s-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,Te.sources.USER),this.quill.setSelection(t.index+1,Te.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[s,r]=this.quill.getLine(t.index),i=new ot().retain(t.index).insert(`
`,e.format).retain(s.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,Te.sources.USER),this.quill.setSelection(t.index+1,Te.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[s,r,i,a]=e.getTable(t),o=xde(s,r,i,a);if(o==null)return;let l=s.offset();if(o<0){const c=new ot().retain(l).insert(`
`);this.quill.updateContents(c,Te.sources.USER),this.quill.setSelection(t.index+1,t.length,Te.sources.SILENT)}else if(o>0){l+=s.length();const c=new ot().retain(l).insert(`
`);this.quill.updateContents(c,Te.sources.USER),this.quill.setSelection(l,Te.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:s,line:r}=e,i=r.offset(this.quill.scroll);s.shiftKey?this.quill.setSelection(i-1,Te.sources.USER):this.quill.setSelection(i+r.length(),Te.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:s}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>s)return!0;let a;switch(e.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":case"*":a="bullet";break;default:a="ordered"}this.quill.insertText(t.index," ",Te.sources.USER),this.quill.history.cutoff();const o=new ot().retain(t.index-i).delete(s+1).retain(r.length()-2-i).retain(1,{list:a});return this.quill.updateContents(o,Te.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-s,Te.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,s]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const a=new ot().retain(t.index+e.length()-s-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(a,Te.sources.USER),this.quill.setSelection(t.index-1,Te.sources.SILENT),!1}return!0}},"embed left":nx("ArrowLeft",!1),"embed left shift":nx("ArrowLeft",!0),"embed right":nx("ArrowRight",!1),"embed right shift":nx("ArrowRight",!0),"table down":OT(!1),"table up":OT(!0)}};g0.DEFAULTS=mde;function RT(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,s){let{event:r}=s;const i=this.quill.scroll.query("code-block"),{TAB:a}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,a,Te.sources.USER),this.quill.setSelection(e.index+a.length,Te.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:l,length:c}=e;o.forEach((d,u)=>{t?(d.insertAt(0,a),u===0?l+=a.length:c+=a.length):d.domNode.textContent.startsWith(a)&&(d.deleteAt(0,a.length),u===0?l-=a.length:c-=a.length)}),this.quill.update(Te.sources.USER),this.quill.setSelection(l,c,Te.sources.SILENT)}}}function nx(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[a]=this.quill.getLeaf(i);return a instanceof ci?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,Te.sources.USER):this.quill.setSelection(r.index-1,Te.sources.USER):e?this.quill.setSelection(r.index,r.length+1,Te.sources.USER):this.quill.setSelection(r.index+r.length+1,Te.sources.USER),!1):!0}}}function Qb(t){return{key:t[0],shortKey:!0,handler(e,s){this.quill.format(t,!s.format[t],Te.sources.USER)}}}function OT(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,s){const r=t?"prev":"next",i=s.line,a=i.parent[r];if(a!=null){if(a.statics.blotName==="table-row"){let o=a.children.head,l=i;for(;l.prev!=null;)l=l.prev,o=o.next;const c=o.offset(this.quill.scroll)+Math.min(s.offset,o.length()-1);this.quill.setSelection(c,0,Te.sources.USER)}}else{const o=i.table()[r];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Te.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Te.sources.USER))}return!1}}}function gde(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Th(t);else return null;return t.shortKey&&(t[pde]=t.shortKey,delete t.shortKey),t}function LS(t){let{quill:e,range:s}=t;const r=e.getLines(s);let i={};if(r.length>1){const a=r[0].formats(),o=r[r.length-1].formats();i=ki.AttributeMap.diff(o,a)||{}}e.deleteText(s,Te.sources.USER),Object.keys(i).length>0&&e.formatLine(s.index,1,i,Te.sources.USER),e.setSelection(s.index,Te.sources.SILENT)}function xde(t,e,s,r){return e.prev==null&&e.next==null?s.prev==null&&s.next==null?r===0?-1:1:s.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const yde=/font-weight:\s*normal/,vde=["P","OL","UL"],DT=t=>t&&vde.includes(t.tagName),bde=t=>{Array.from(t.querySelectorAll("br")).filter(e=>DT(e.previousElementSibling)&&DT(e.nextElementSibling)).forEach(e=>{var s;(s=e.parentNode)==null||s.removeChild(e)})},wde=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var s;return(s=e.getAttribute("style"))==null?void 0:s.match(yde)}).forEach(e=>{var r;const s=t.createDocumentFragment();s.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(s,e)})};function jde(t){t.querySelector('[id^="docs-internal-guid-"]')&&(wde(t),bde(t))}const Nde=/\bmso-list:[^;]*ignore/i,_de=/\bmso-list:[^;]*\bl(\d+)/i,Sde=/\bmso-list:[^;]*\blevel(\d+)/i,Cde=(t,e)=>{const s=t.getAttribute("style"),r=s==null?void 0:s.match(_de);if(!r)return null;const i=Number(r[1]),a=s==null?void 0:s.match(Sde),o=a?Number(a[1]):1,l=new RegExp(`@list l${i}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=e.match(l),d=c&&c[1]==="bullet"?"bullet":"ordered";return{id:i,indent:o,type:d,element:t}},kde=t=>{var o,l;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),s=[],r=[];e.forEach(c=>{(c.getAttribute("style")||"").match(Nde)?s.push(c):r.push(c)}),s.forEach(c=>{var d;return(d=c.parentNode)==null?void 0:d.removeChild(c)});const i=t.documentElement.innerHTML,a=r.map(c=>Cde(c,i)).filter(c=>c);for(;a.length;){const c=[];let d=a.shift();for(;d;)c.push(d),d=a.length&&((o=a[0])==null?void 0:o.element)===d.element.nextElementSibling&&a[0].id===d.id?a.shift():null;const u=document.createElement("ul");c.forEach(x=>{const g=document.createElement("li");g.setAttribute("data-list",x.type),x.indent>1&&g.setAttribute("class",`ql-indent-${x.indent-1}`),g.innerHTML=x.element.innerHTML,u.appendChild(g)});const f=(l=c[0])==null?void 0:l.element,{parentNode:h}=f??{};f&&(h==null||h.replaceChild(u,f)),c.slice(1).forEach(x=>{let{element:g}=x;h==null||h.removeChild(g)})}};function Ede(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&kde(t)}const Tde=[Ede,jde],Ade=t=>{t.documentElement&&Tde.forEach(e=>{e(t)})},Pde=_l("quill:clipboard"),Ide=[[Node.TEXT_NODE,Vde],[Node.TEXT_NODE,LT],["br",Lde],[Node.ELEMENT_NODE,LT],[Node.ELEMENT_NODE,Mde],[Node.ELEMENT_NODE,Dde],[Node.ELEMENT_NODE,Bde],["li",Ude],["ol, ul",zde],["pre",Fde],["tr",qde],["b",Zb("bold")],["i",Zb("italic")],["strike",Zb("strike")],["style",$de]],Rde=[cde,RL].reduce((t,e)=>(t[e.keyName]=e,t),{}),MT=[PL,OS,RS,DL,FL,UL].reduce((t,e)=>(t[e.keyName]=e,t),{});class zL extends Ia{constructor(e,s){super(e,s),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Ide.concat(this.options.matchers??[]).forEach(r=>{let[i,a]=r;this.addMatcher(i,a)})}addMatcher(e,s){this.matchers.push([e,s])}convert(e){let{html:s,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[Xn.blotName])return new ot().insert(r||"",{[Xn.blotName]:i[Xn.blotName]});if(!s)return new ot().insert(r||"",i);const a=this.convertHTML(s);return gg(a,`
`)&&(a.ops[a.ops.length-1].attributes==null||i.table)?a.compose(new ot().retain(a.length()-1).delete(1)):a}normalizeHTML(e){Ade(e)}convertHTML(e){const s=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(s);const r=s.body,i=new WeakMap,[a,o]=this.prepareMatching(r,i);return FS(this.quill.scroll,r,a,o,i)}dangerouslyPasteHTML(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,s),this.quill.setSelection(0,Te.sources.SILENT)}else{const i=this.convert({html:s,text:""});this.quill.updateContents(new ot().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),Te.sources.SILENT)}}onCaptureCopy(e){var o,l;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:a}=this.onCopy(r,s);(o=e.clipboardData)==null||o.setData("text/plain",a),(l=e.clipboardData)==null||l.setData("text/html",i),s&&LS({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(s=>s[0]!=="#").join(`
`)}onCapturePaste(e){var o,l,c,d,u;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const s=this.quill.getSelection(!0);if(s==null)return;const r=(o=e.clipboardData)==null?void 0:o.getData("text/html");let i=(l=e.clipboardData)==null?void 0:l.getData("text/plain");if(!r&&!i){const f=(c=e.clipboardData)==null?void 0:c.getData("text/uri-list");f&&(i=this.normalizeURIList(f))}const a=Array.from(((d=e.clipboardData)==null?void 0:d.files)||[]);if(!r&&a.length>0){this.quill.uploader.upload(s,a);return}if(r&&a.length>0){const f=new DOMParser().parseFromString(r,"text/html");if(f.body.childElementCount===1&&((u=f.body.firstElementChild)==null?void 0:u.tagName)==="IMG"){this.quill.uploader.upload(s,a);return}}this.onPaste(s,{html:r,text:i})}onCopy(e){const s=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:s}}onPaste(e,s){let{text:r,html:i}=s;const a=this.quill.getFormat(e.index),o=this.convert({text:r,html:i},a);Pde.log("onPaste",o,{text:r,html:i});const l=new ot().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(l,Te.sources.USER),this.quill.setSelection(l.length()-e.length,Te.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,s){const r=[],i=[];return this.matchers.forEach(a=>{const[o,l]=a;switch(o){case Node.TEXT_NODE:i.push(l);break;case Node.ELEMENT_NODE:r.push(l);break;default:Array.from(e.querySelectorAll(o)).forEach(c=>{if(s.has(c)){const d=s.get(c);d==null||d.push(l)}else s.set(c,[l])});break}}),[r,i]}}Ge(zL,"DEFAULTS",{matchers:[]});function ju(t,e,s,r){return r.query(e)?t.reduce((i,a)=>{if(!a.insert)return i;if(a.attributes&&a.attributes[e])return i.push(a);const o=s?{[e]:s}:{};return i.insert(a.insert,{...o,...a.attributes})},new ot):t}function gg(t,e){let s="";for(let r=t.ops.length-1;r>=0&&s.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;s=i.insert+s}return s.slice(-1*e.length)===e}function dc(t,e){if(!(t instanceof Element))return!1;const s=e.query(t);return s&&s.prototype instanceof ci?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function Ode(t,e){return t.previousElementSibling&&t.nextElementSibling&&!dc(t.previousElementSibling,e)&&!dc(t.nextElementSibling,e)}const rx=new WeakMap;function BL(t){return t==null?!1:(rx.has(t)||(t.tagName==="PRE"?rx.set(t,!0):rx.set(t,BL(t.parentNode))),rx.get(t))}function FS(t,e,s,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((a,o)=>o(e,a,t),new ot):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((a,o)=>{let l=FS(t,o,s,r,i);return o.nodeType===e.ELEMENT_NODE&&(l=s.reduce((c,d)=>d(o,c,t),l),l=(i.get(o)||[]).reduce((c,d)=>d(o,c,t),l)),a.concat(l)},new ot):new ot}function Zb(t){return(e,s,r)=>ju(s,t,!0,r)}function Dde(t,e,s){const r=xo.keys(t),i=Aa.keys(t),a=Gc.keys(t),o={};return r.concat(i).concat(a).forEach(l=>{let c=s.query(l,dt.ATTRIBUTE);c!=null&&(o[c.attrName]=c.value(t),o[c.attrName])||(c=Rde[l],c!=null&&(c.attrName===l||c.keyName===l)&&(o[c.attrName]=c.value(t)||void 0),c=MT[l],c!=null&&(c.attrName===l||c.keyName===l)&&(c=MT[l],o[c.attrName]=c.value(t)||void 0))}),Object.entries(o).reduce((l,c)=>{let[d,u]=c;return ju(l,d,u,s)},e)}function Mde(t,e,s){const r=s.query(t);if(r==null)return e;if(r.prototype instanceof ci){const i={},a=r.value(t);if(a!=null)return i[r.blotName]=a,new ot().insert(i,r.formats(t,s))}else if(r.prototype instanceof Sm&&!gg(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return ju(e,r.blotName,r.formats(t,s),s);return e}function Lde(t,e){return gg(e,`
`)||e.insert(`
`),e}function Fde(t,e,s){const r=s.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,s):!0;return ju(e,"code-block",i,s)}function $de(){return new ot}function Ude(t,e,s){const r=s.query(t);if(r==null||r.blotName!=="list"||!gg(e,`
`))return e;let i=-1,a=t.parentNode;for(;a!=null;)["OL","UL"].includes(a.tagName)&&(i+=1),a=a.parentNode;return i<=0?e:e.reduce((o,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?o.push(l):o.insert(l.insert,{indent:i,...l.attributes||{}}):o,new ot)}function zde(t,e,s){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const a=r.getAttribute("data-checked");return a&&(i=a==="true"?"checked":"unchecked"),ju(e,"list",i,s)}function LT(t,e,s){if(!gg(e,`
`)){if(dc(t,s)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(dc(r,s))return e.insert(`
`);const i=s.query(r);if(i&&i.prototype instanceof _i)return e.insert(`
`);r=r.firstChild}}}return e}function Bde(t,e,s){var a;const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((a=i.fontWeight)!=null&&a.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,l)=>{let[c,d]=l;return ju(o,c,d,s)},e),parseFloat(i.textIndent||0)>0?new ot().insert("	").concat(e):e}function qde(t,e,s){var i,a;const r=((i=t.parentElement)==null?void 0:i.tagName)==="TABLE"?t.parentElement:(a=t.parentElement)==null?void 0:a.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return ju(e,"table",l,s)}return e}function Vde(t,e,s){var i;let r=t.data;if(((i=t.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(r.trim());if(!BL(t)){if(r.trim().length===0&&r.includes(`
`)&&!Ode(t,s))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&dc(t.parentElement,s)||t.previousSibling instanceof Element&&dc(t.previousSibling,s))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&dc(t.parentElement,s)||t.nextSibling instanceof Element&&dc(t.nextSibling,s))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class qL extends Ia{constructor(s,r){super(s,r);Ge(this,"lastRecorded",0);Ge(this,"ignoreChange",!1);Ge(this,"stack",{undo:[],redo:[]});Ge(this,"currentRange",null);this.quill.on(Te.events.EDITOR_CHANGE,(i,a,o,l)=>{i===Te.events.SELECTION_CHANGE?a&&l!==Te.sources.SILENT&&(this.currentRange=a):i===Te.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===Te.sources.USER?this.record(a,o):this.transform(a)),this.currentRange=y1(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(s,r){if(this.stack[s].length===0)return;const i=this.stack[s].pop();if(!i)return;const a=this.quill.getContents(),o=i.delta.invert(a);this.stack[r].push({delta:o,range:y1(i.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,Te.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(s,r){if(s.ops.length===0)return;this.stack.redo=[];let i=s.invert(r),a=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(i=i.compose(l.delta),a=l.range)}else this.lastRecorded=o;i.length()!==0&&(this.stack.undo.push({delta:i,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(s){FT(this.stack.undo,s),FT(this.stack.redo,s)}undo(){this.change("undo","redo")}restoreSelection(s){if(s.range)this.quill.setSelection(s.range,Te.sources.USER);else{const r=Wde(this.quill.scroll,s.delta);this.quill.setSelection(r,Te.sources.USER)}}}Ge(qL,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function FT(t,e){let s=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:s.transform(i.delta,!0),range:i.range&&y1(i.range,s)},s=i.delta.transform(s),t[r].delta.length()===0&&t.splice(r,1)}}function Hde(t,e){const s=e.ops[e.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(r=>t.query(r,dt.BLOCK)!=null):!1}function Wde(t,e){const s=e.reduce((i,a)=>i+(a.delete||0),0);let r=e.length()-s;return Hde(t,e)&&(r-=1),r}function y1(t,e){if(!t)return t;const s=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:s,length:r-s}}class VL extends Ia{constructor(e,s){super(e,s),e.root.addEventListener("drop",r=>{var o;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(l.offsetNode,l.offset),i.setEnd(l.offsetNode,l.offset)}const a=i&&e.selection.normalizeNative(i);if(a){const l=e.selection.normalizedToRange(a);(o=r.dataTransfer)!=null&&o.files&&this.upload(l,r.dataTransfer.files)}})}upload(e,s){const r=[];Array.from(s).forEach(i=>{var a;i&&((a=this.options.mimetypes)!=null&&a.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}VL.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const s=e.map(r=>new Promise(i=>{const a=new FileReader;a.onload=()=>{i(a.result)},a.readAsDataURL(r)}));Promise.all(s).then(r=>{const i=r.reduce((a,o)=>a.insert({image:o}),new ot().retain(t.index).delete(t.length));this.quill.updateContents(i,nt.sources.USER),this.quill.setSelection(t.index+r.length,nt.sources.SILENT)})}};const Kde=["insertText","insertReplacementText"];class Gde extends Ia{constructor(e,s){super(e,s),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(Te.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){LS({range:e,quill:this.quill})}replaceText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(s){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new ot().retain(e.index).insert(s,r),Te.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+s.length,0,Te.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Kde.includes(e.inputType))return;const s=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!s||s.collapsed===!0)return;const r=Yde(e);if(r==null)return;const i=this.quill.selection.normalizeNative(s),a=i?this.quill.selection.normalizedToRange(i):null;a&&this.replaceText(a,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Yde(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Qde=/Mac/i.test(navigator.platform),Zde=100,Xde=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Qde&&t.key==="a"&&t.ctrlKey===!0);class Jde extends Ia{constructor(s,r){super(s,r);Ge(this,"isListening",!1);Ge(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(s,r){let{line:i,event:a}=r;if(!(i instanceof ya)||!i.uiNode)return!0;const o=getComputedStyle(i.domNode).direction==="rtl";return o&&a.key!=="ArrowRight"||!o&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(s.index-1,s.length+(a.shiftKey?1:0),Te.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",s=>{!s.defaultPrevented&&Xde(s)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Zde,this.isListening)return;this.isListening=!0;const s=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",s,{once:!0})}handleSelectionChange(){const s=document.getSelection();if(!s)return;const r=s.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof ya)||!i.uiNode)return;const a=document.createRange();a.setStartAfter(i.uiNode),a.setEndAfter(i.uiNode),s.removeAllRanges(),s.addRange(a)}}Te.register({"blots/block":Bn,"blots/block/embed":_i,"blots/break":Pa,"blots/container":bu,"blots/cursor":mf,"blots/embed":PS,"blots/inline":yo,"blots/scroll":Xu,"blots/text":ka,"modules/clipboard":zL,"modules/history":qL,"modules/keyboard":g0,"modules/uploader":VL,"modules/input":Gde,"modules/uiNode":Jde});class eue extends Aa{add(e,s){let r=0;if(s==="+1"||s==="-1"){const i=this.value(e)||0;r=s==="+1"?i+1:i-1}else typeof s=="number"&&(r=s);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,s){return super.canAdd(e,s)||super.canAdd(e,parseInt(s,10))}value(e){return parseInt(super.value(e),10)||void 0}}const tue=new eue("indent","ql-indent",{scope:dt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class v1 extends Bn{}Ge(v1,"blotName","blockquote"),Ge(v1,"tagName","blockquote");class b1 extends Bn{static formats(e){return this.tagName.indexOf(e.tagName)+1}}Ge(b1,"blotName","header"),Ge(b1,"tagName",["H1","H2","H3","H4","H5","H6"]);class xg extends bu{}xg.blotName="list-container";xg.tagName="OL";class yg extends Bn{static create(e){const s=super.create();return s.setAttribute("data-list",e),s}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Te.register(xg)}constructor(e,s){super(e,s);const r=s.ownerDocument.createElement("span"),i=a=>{if(!e.isEnabled())return;const o=this.statics.formats(s,e);o==="checked"?(this.format("list","unchecked"),a.preventDefault()):o==="unchecked"&&(this.format("list","checked"),a.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-list",s):super.format(e,s)}}yg.blotName="list";yg.tagName="LI";xg.allowedChildren=[yg];yg.requiredContainer=xg;class Em extends yo{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}Ge(Em,"blotName","bold"),Ge(Em,"tagName",["STRONG","B"]);class w1 extends Em{}Ge(w1,"blotName","italic"),Ge(w1,"tagName",["EM","I"]);class uc extends yo{static create(e){const s=super.create(e);return s.setAttribute("href",this.sanitize(e)),s.setAttribute("rel","noopener noreferrer"),s.setAttribute("target","_blank"),s}static formats(e){return e.getAttribute("href")}static sanitize(e){return HL(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,s){e!==this.statics.blotName||!s?super.format(e,s):this.domNode.setAttribute("href",this.constructor.sanitize(s))}}Ge(uc,"blotName","link"),Ge(uc,"tagName","A"),Ge(uc,"SANITIZED_URL","about:blank"),Ge(uc,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function HL(t,e){const s=document.createElement("a");s.href=t;const r=s.href.slice(0,s.href.indexOf(":"));return e.indexOf(r)>-1}class j1 extends yo{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}Ge(j1,"blotName","script"),Ge(j1,"tagName",["SUB","SUP"]);class N1 extends Em{}Ge(N1,"blotName","strike"),Ge(N1,"tagName",["S","STRIKE"]);class _1 extends yo{}Ge(_1,"blotName","underline"),Ge(_1,"tagName","U");class Rx extends PS{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const s=super.create(e);return typeof e=="string"&&(window.katex.render(e,s,{throwOnError:!1,errorColor:"#f00"}),s.setAttribute("data-value",e)),s}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}Ge(Rx,"blotName","formula"),Ge(Rx,"className","ql-formula"),Ge(Rx,"tagName","SPAN");const $T=["alt","height","width"];var ix;let sue=(ix=class extends ci{static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("src",this.sanitize(e)),s}static formats(e){return $T.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return HL(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,s){$T.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}},Ge(ix,"blotName","image"),Ge(ix,"tagName","IMG"),ix);const UT=["height","width"];class Ox extends _i{static create(e){const s=super.create(e);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen","true"),s.setAttribute("src",this.sanitize(e)),s}static formats(e){return UT.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static sanitize(e){return uc.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,s){UT.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}Ge(Ox,"blotName","video"),Ge(Ox,"className","ql-video"),Ge(Ox,"tagName","IFRAME");const wp=new Aa("code-token","hljs",{scope:dt.INLINE});class vl extends yo{static formats(e,s){for(;e!=null&&e!==s.domNode;){if(e.classList&&e.classList.contains(Xn.className))return super.formats(e,s);e=e.parentNode}}constructor(e,s,r){super(e,s,r),wp.add(this.domNode,r)}format(e,s){e!==vl.blotName?super.format(e,s):s?wp.add(this.domNode,s):(wp.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),wp.value(this.domNode)||this.unwrap()}}vl.blotName="code-token";vl.className="ql-token";class wi extends Xn{static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("data-language",e),s}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-language",s):super.format(e,s)}replaceWith(e,s){return this.formatAt(0,this.length(),vl.blotName,!1),super.replaceWith(e,s)}}class zp extends wu{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,s){e===wi.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,s)}))}formatAt(e,s,r,i){r===wi.blotName&&(this.forceNext=!0),super.formatAt(e,s,r,i)}highlight(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,a=wi.formats(this.children.head.domNode);if(s||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const o=this.children.reduce((c,d)=>c.concat(kL(d,!1)),new ot),l=e(i,a);o.diff(l).reduce((c,d)=>{let{retain:u,attributes:f}=d;return u?(f&&Object.keys(f).forEach(h=>{[wi.blotName,vl.blotName].includes(h)&&this.formatAt(c,u,h,f[h])}),c+u):c},0)}this.cachedText=i,this.forceNext=!1}}html(e,s){const[r]=this.children.find(e);return`<pre data-language="${r?wi.formats(r.domNode):"plain"}">
${m0(this.code(e,s))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const s=wi.formats(this.children.head.domNode);s!==this.uiNode.value&&(this.uiNode.value=s)}}}zp.allowedChildren=[wi];wi.requiredContainer=zp;wi.allowedChildren=[vl,mf,ka,Pa];const nue=(t,e,s)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(s,{language:e}).value}return t.highlight(e,s).value};class WL extends Ia{static register(){Te.register(vl,!0),Te.register(wi,!0),Te.register(zp,!0)}constructor(e,s){if(super(e,s),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:a}=i;return r[a]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Te.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof zp))return;const s=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:a}=r;const o=s.ownerDocument.createElement("option");o.textContent=a,o.setAttribute("value",i),s.appendChild(o)}),s.addEventListener("change",()=>{e.format(wi.blotName,s.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(s),e.children.head&&(s.value=wi.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Te.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Te.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(zp):[e]).forEach(a=>{a.highlight(this.highlightBlot,s)}),this.quill.update(Te.sources.SILENT),r!=null&&this.quill.setSelection(r,Te.sources.SILENT)}highlightBlot(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(s=this.languages[s]?s:"plain",s==="plain")return m0(e).split(`
`).reduce((i,a,o)=>(o!==0&&i.insert(`
`,{[Xn.blotName]:s}),i.insert(a)),new ot);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(Xn.className),r.innerHTML=nue(this.options.hljs,s,e),FS(this.quill.scroll,r,[(i,a)=>{const o=wp.value(i);return o?a.compose(new ot().retain(a.length(),{[vl.blotName]:o})):a}],[(i,a)=>i.data.split(`
`).reduce((o,l,c)=>(c!==0&&o.insert(`
`,{[Xn.blotName]:s}),o.insert(l)),a)],new WeakMap)}}WL.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const qp=class qp extends Bn{static create(e){const s=super.create();return e?s.setAttribute("data-row",e):s.setAttribute("data-row",$S()),s}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,s){e===qp.blotName&&s?this.domNode.setAttribute("data-row",s):super.format(e,s)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};Ge(qp,"blotName","table"),Ge(qp,"tagName","TD");let da=qp;class bl extends bu{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),s=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===s.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(s=>{if(s.next==null)return;const r=s.formats(),i=s.next.formats();if(r.table!==i.table){const a=this.splitAfter(s);a&&a.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}Ge(bl,"blotName","table-row"),Ge(bl,"tagName","TR");class ho extends bu{}Ge(ho,"blotName","table-body"),Ge(ho,"tagName","TBODY");class xf extends bu{balanceCells(){const e=this.descendants(bl),s=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(s-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=da.formats(r.children.head.domNode));const a=this.scroll.create(da.blotName,i);r.appendChild(a),a.optimize()})})}cells(e){return this.rows().map(s=>s.children.at(e))}deleteColumn(e){const[s]=this.descendant(ho);s==null||s.children.head==null||s.children.forEach(r=>{const i=r.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[s]=this.descendant(ho);s==null||s.children.head==null||s.children.forEach(r=>{const i=r.children.at(e),a=da.formats(r.children.head.domNode),o=this.scroll.create(da.blotName,a);r.insertBefore(o,i)})}insertRow(e){const[s]=this.descendant(ho);if(s==null||s.children.head==null)return;const r=$S(),i=this.scroll.create(bl.blotName);s.children.head.children.forEach(()=>{const o=this.scroll.create(da.blotName,r);i.appendChild(o)});const a=s.children.at(e);s.insertBefore(i,a)}rows(){const e=this.children.head;return e==null?[]:e.children.map(s=>s)}}Ge(xf,"blotName","table-container"),Ge(xf,"tagName","TABLE");xf.allowedChildren=[ho];ho.requiredContainer=xf;ho.allowedChildren=[bl];bl.requiredContainer=ho;bl.allowedChildren=[da];da.requiredContainer=bl;function $S(){return`row-${Math.random().toString(36).slice(2,6)}`}class rue extends Ia{static register(){Te.register(da),Te.register(bl),Te.register(ho),Te.register(xf)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(xf).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,s]=this.getTable();s!=null&&(e.deleteColumn(s.cellOffset()),this.quill.update(Te.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Te.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const s=e.offset();e.remove(),this.quill.update(Te.sources.USER),this.quill.setSelection(s,Te.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[s,r]=this.quill.getLine(e.index);if(s==null||s.statics.blotName!==da.blotName)return[null,null,null,-1];const i=s.parent;return[i.parent.parent,i,s,r]}insertColumn(e){const s=this.quill.getSelection();if(!s)return;const[r,i,a]=this.getTable(s);if(a==null)return;const o=a.cellOffset();r.insertColumn(o+e),this.quill.update(Te.sources.USER);let l=i.rowOffset();e===0&&(l+=1),this.quill.setSelection(s.index+l,s.length,Te.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const s=this.quill.getSelection();if(!s)return;const[r,i,a]=this.getTable(s);if(a==null)return;const o=i.rowOffset();r.insertRow(o+e),this.quill.update(Te.sources.USER),e>0?this.quill.setSelection(s,Te.sources.SILENT):this.quill.setSelection(s.index+i.children.length,s.length,Te.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,s){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(a=>{const o=new Array(s).fill(`
`).join("");return a.insert(o,{table:$S()})},new ot().retain(r.index));this.quill.updateContents(i,Te.sources.USER),this.quill.setSelection(r.index,Te.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Te.events.SCROLL_OPTIMIZE,e=>{e.some(s=>["TD","TR","TBODY","TABLE"].includes(s.target.tagName)?(this.quill.once(Te.events.TEXT_CHANGE,(r,i,a)=>{a===Te.sources.USER&&this.balanceTables()}),!0):!1)})}}const zT=_l("quill:toolbar");class US extends Ia{constructor(e,s){var r,i;if(super(e,s),Array.isArray(this.options.container)){const a=document.createElement("div");a.setAttribute("role","toolbar"),iue(a,this.options.container),(i=(r=e.container)==null?void 0:r.parentNode)==null||i.insertBefore(a,e.container),this.container=a}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){zT.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(a=>{var l;const o=(l=this.options.handlers)==null?void 0:l[a];o&&this.addHandler(a,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(a=>{this.attach(a)}),this.quill.on(Te.events.EDITOR_CHANGE,()=>{const[a]=this.quill.selection.getRange();this.update(a)})}addHandler(e,s){this.handlers[e]=s}attach(e){let s=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!s)return;if(s=s.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[s]==null&&this.quill.scroll.query(s)==null){zT.warn("ignoring attaching to nonexistent format",s,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let a;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const l=e.options[e.selectedIndex];l.hasAttribute("selected")?a=!1:a=l.value||!1}else e.classList.contains("ql-active")?a=!1:a=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[s]!=null)this.handlers[s].call(this,a);else if(this.quill.scroll.query(s).prototype instanceof ci){if(a=prompt(`Enter ${s}`),!a)return;this.quill.updateContents(new ot().retain(o.index).delete(o.length).insert({[s]:a}),Te.sources.USER)}else this.quill.format(s,a,Te.sources.USER);this.update(o)}),this.controls.push([s,e])}update(e){const s=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,a]=r;if(a.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(s[i]==null)o=a.querySelector("option[selected]");else if(!Array.isArray(s[i])){let l=s[i];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),o=a.querySelector(`option[value="${l}"]`)}o==null?(a.value="",a.selectedIndex=-1):o.selected=!0}else if(e==null)a.classList.remove("ql-active"),a.setAttribute("aria-pressed","false");else if(a.hasAttribute("value")){const o=s[i],l=o===a.getAttribute("value")||o!=null&&o.toString()===a.getAttribute("value")||o==null&&!a.getAttribute("value");a.classList.toggle("ql-active",l),a.setAttribute("aria-pressed",l.toString())}else{const o=s[i]!=null;a.classList.toggle("ql-active",o),a.setAttribute("aria-pressed",o.toString())}})}}US.DEFAULTS={};function BT(t,e,s){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),s!=null?(r.value=s,r.setAttribute("aria-label",`${e}: ${s}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function iue(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(s=>{const r=document.createElement("span");r.classList.add("ql-formats"),s.forEach(i=>{if(typeof i=="string")BT(r,i);else{const a=Object.keys(i)[0],o=i[a];Array.isArray(o)?aue(r,a,o):BT(r,a,o)}}),t.appendChild(r)})}function aue(t,e,s){const r=document.createElement("select");r.classList.add(`ql-${e}`),s.forEach(i=>{const a=document.createElement("option");i!==!1?a.setAttribute("value",String(i)):a.setAttribute("selected","selected"),r.appendChild(a)}),t.appendChild(r)}US.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(s=>{this.quill.scroll.query(s,dt.INLINE)!=null&&this.quill.format(s,!1,Te.sources.USER)})}else this.quill.removeFormat(t.index,t.length,Te.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",Te.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,Te.sources.USER),this.quill.format("direction",t,Te.sources.USER)},indent(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e),r=parseInt(s.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;s.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,Te.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Te.sources.USER)},list(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e);t==="check"?s.list==="checked"||s.list==="unchecked"?this.quill.format("list",!1,Te.sources.USER):this.quill.format("list","unchecked",Te.sources.USER):this.quill.format("list",t,Te.sources.USER)}}};const oue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',lue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',cue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',due='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',uue='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',hue='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',fue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',pue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',qT='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',mue='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',gue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',xue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',yue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',vue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',bue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',wue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',jue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Nue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',_ue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Sue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Cue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',kue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Eue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Tue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Aue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Pue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Iue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Rue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Oue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Due='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Mue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Lue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Fue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Tm={align:{"":oue,center:lue,right:cue,justify:due},background:uue,blockquote:hue,bold:fue,clean:pue,code:qT,"code-block":qT,color:mue,direction:{"":gue,rtl:xue},formula:yue,header:{1:vue,2:bue,3:wue,4:jue,5:Nue,6:_ue},italic:Sue,image:Cue,indent:{"+1":kue,"-1":Eue},link:Tue,list:{bullet:Aue,check:Pue,ordered:Iue},script:{sub:Rue,super:Oue},strike:Due,table:Mue,underline:Lue,video:Fue},$ue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let VT=0;function HT(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class x0{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),s.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),HT(this.label,"aria-expanded"),HT(this.options,"aria-hidden")}buildItem(e){const s=document.createElement("span");s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&s.setAttribute("data-value",r),e.textContent&&s.setAttribute("data-label",e.textContent),s.addEventListener("click",()=>{this.selectItem(s,!0)}),s.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(s,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),s}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=$ue,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${VT}`,VT+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(s=>{const r=this.buildItem(s);e.appendChild(r),s.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),s&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const s=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}class KL extends x0{constructor(e,s){super(e),this.label.innerHTML=s,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const s=super.buildItem(e);return s.style.backgroundColor=e.getAttribute("value")||"",s}selectItem(e,s){super.selectItem(e,s);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class GL extends x0{constructor(e,s){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=s[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,s){super.selectItem(e,s);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const Uue=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class YL{constructor(e,s){this.quill=e,this.boundsContainer=s||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Uue(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const s=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${s}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect();let o=0;if(a.right>i.right&&(o=i.right-a.right,this.root.style.left=`${s+o}px`),a.left<i.left&&(o=i.left-a.left,this.root.style.left=`${s+o}px`),a.bottom>i.bottom){const l=a.bottom-a.top,c=e.bottom-e.top+l;this.root.style.top=`${r-c}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const zue=[!1,"center","right","justify"],Bue=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],que=[!1,"serif","monospace"],Vue=["1","2","3",!1],Hue=["small",!1,"large","huge"];class vg extends gf{constructor(e,s){super(e,s);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(a=>{a.container.contains(i.target)||a.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const s=super.addModule(e);return e==="toolbar"&&this.extendToolbar(s),s}buildButtons(e,s){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(a=>{if(a.startsWith("ql-")&&(a=a.slice(3),s[a]!=null))if(a==="direction")r.innerHTML=s[a][""]+s[a].rtl;else if(typeof s[a]=="string")r.innerHTML=s[a];else{const o=r.value||"";o!=null&&s[a][o]&&(r.innerHTML=s[a][o])}})})}buildPickers(e,s){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&hp(i,zue),typeof s.align=="object"))return new GL(i,s.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const a=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&hp(i,Bue,a==="background"?"#ffffff":"#000000"),new KL(i,s[a])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?hp(i,que):i.classList.contains("ql-header")?hp(i,Vue):i.classList.contains("ql-size")&&hp(i,Hue)),new x0(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(nt.events.EDITOR_CHANGE,r)}}vg.DEFAULTS=kc({},gf.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class QL extends YL{constructor(e,s){super(e,s),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;s!=null?this.textbox.value=s:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:s}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,nt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,nt.sources.USER)),this.quill.root.scrollTop=s;break}case"video":e=Wue(e);case"formula":{if(!e)break;const s=this.quill.getSelection(!0);if(s!=null){const r=s.index+s.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,nt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",nt.sources.USER),this.quill.setSelection(r+2,nt.sources.USER)}break}}this.textbox.value="",this.hide()}}function Wue(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function hp(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===s?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const Kue=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class ZL extends QL{constructor(e,s){super(e,s),this.quill.on(nt.events.EDITOR_CHANGE,(r,i,a,o)=>{if(r===nt.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&o===nt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(i.index,i.length);if(l.length===1){const c=this.quill.getBounds(i);c!=null&&this.position(c)}else{const c=l[l.length-1],d=this.quill.getIndex(c),u=Math.min(c.length()-1,i.index+i.length-d),f=this.quill.getBounds(new iu(d,u));f!=null&&this.position(f)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(nt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const s=this.quill.getBounds(e);s!=null&&this.position(s)}},1)})}cancel(){this.show()}position(e){const s=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",s!==0&&(r.style.marginLeft=`${-1*s-r.offsetWidth/2}px`),s}}Ge(ZL,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class XL extends vg{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=Kue),super(e,s),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new ZL(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Tm),this.buildPickers(e.container.querySelectorAll("select"),Tm))}}XL.DEFAULTS=kc({},vg.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Te.sources.USER)}}}}});const Gue=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class JL extends QL{constructor(){super(...arguments);Ge(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",s=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),s.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",s=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,nt.sources.USER),delete this.linkRange}s.preventDefault(),this.hide()}),this.quill.on(nt.events.SELECTION_CHANGE,(s,r,i)=>{if(s!=null){if(s.length===0&&i===nt.sources.USER){const[a,o]=this.quill.scroll.descendant(uc,s.index);if(a!=null){this.linkRange=new iu(s.index-o,a.length());const l=uc.formats(a.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}Ge(JL,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class eF extends vg{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=Gue),super(e,s),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Tm),this.buildPickers(e.container.querySelectorAll("select"),Tm),this.tooltip=new JL(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(s,r)=>{e.handlers.link.call(e,!r.format.link)}))}}eF.DEFAULTS=kc({},vg.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let s=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(s)&&s.indexOf("mailto:")!==0&&(s=`mailto:${s}`);const{tooltip:r}=this.quill.theme;r.edit("link",s)}else this.quill.format("link",!1,Te.sources.USER)}}}}});Te.register({"attributors/attribute/direction":RL,"attributors/class/align":AL,"attributors/class/background":ude,"attributors/class/color":dde,"attributors/class/direction":OL,"attributors/class/font":LL,"attributors/class/size":$L,"attributors/style/align":PL,"attributors/style/background":OS,"attributors/style/color":RS,"attributors/style/direction":DL,"attributors/style/font":FL,"attributors/style/size":UL},!0);Te.register({"formats/align":AL,"formats/direction":OL,"formats/indent":tue,"formats/background":OS,"formats/color":RS,"formats/font":LL,"formats/size":$L,"formats/blockquote":v1,"formats/code-block":Xn,"formats/header":b1,"formats/list":yg,"formats/bold":Em,"formats/code":DS,"formats/italic":w1,"formats/link":uc,"formats/script":j1,"formats/strike":N1,"formats/underline":_1,"formats/formula":Rx,"formats/image":sue,"formats/video":Ox,"modules/syntax":WL,"modules/table":rue,"modules/toolbar":US,"themes/bubble":XL,"themes/snow":eF,"ui/icons":Tm,"ui/picker":x0,"ui/icon-picker":GL,"ui/color-picker":KL,"ui/tooltip":YL},!0);class Am extends qe.Component{constructor(e){super(e),this.editingAreaRef=p.createRef(),this.containerRef=p.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,i,a,o)=>{var l,c;r==="text-change"?(l=this.onEditorChangeText)==null||l.call(this,this.editor.getSemanticHTML(),i,o,this.unprivilegedEditor):r==="selection-change"&&((c=this.onEditorChangeSelection)==null||c.call(this,i,o,this.unprivilegedEditor))};const s=this.isControlled()?e.value:e.defaultValue;this.value=s??""}validateProps(e){if(qe.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(qe.Children.count(e.children)){const s=qe.Children.only(e.children);if((s==null?void 0:s.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,s){if(this.validateProps(e),!this.editor||this.state.generation!==s.generation)return!0;if("value"in e){const r=this.getEditorContents(),i=e.value??"";this.isEqualValue(i,r)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!Yl(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(s=>!Yl(e[s],this.props[s]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,s){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&e.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==s.generation){const{delta:r,selection:i}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const a=this.editor;a.setContents(r),WT(()=>this.setEditorSelection(a,i))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var r,i;if(!this.editor)return;this.unhookEditor(this.editor);const e=(r=this.props.modules)==null?void 0:r.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const a=(i=this.containerRef.current)==null?void 0:i.querySelector(".ql-toolbar");a&&a.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,s){const r=new Te(e,s);return s.tabIndex!=null&&this.setEditorTabIndex(r,s.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,s){return this.isDelta(e)&&this.isDelta(s)?Yl(e.ops,s.ops):Yl(e,s)}setEditorContents(e,s){this.value=s;const r=this.getEditorSelection();typeof s=="string"?e.setContents(e.clipboard.convert({html:s})):e.setContents(s),WT(()=>this.setEditorSelection(e,r))}setEditorSelection(e,s){if(this.selection=s,s){const r=e.getLength();s.index=Math.max(0,Math.min(s.index,r-1)),s.length=Math.max(0,Math.min(s.length,r-1-s.index)),e.setSelection(s)}}setEditorTabIndex(e,s){var r;(r=e==null?void 0:e.scroll)!=null&&r.domNode&&(e.scroll.domNode.tabIndex=s)}setEditorReadOnly(e,s){s?e.disable():e.enable()}makeUnprivilegedEditor(e){const s=e;return{getHTML:()=>s.root.innerHTML,getSemanticHTML:s.getSemanticHTML.bind(s),getLength:s.getLength.bind(s),getText:s.getText.bind(s),getContents:s.getContents.bind(s),getSelection:s.getSelection.bind(s),getBounds:s.getBounds.bind(s)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:s}=this.props,{generation:r}=this.state,i={key:r,ref:this.editingAreaRef};return qe.Children.count(e)?qe.cloneElement(qe.Children.only(e),i):s?qe.createElement("pre",{...i}):qe.createElement("div",{...i})}render(){return qe.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,s,r,i){var o,l;if(!this.editor)return;const a=this.isDelta(this.value)?i.getContents():i.getSemanticHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=s,this.value=a,(l=(o=this.props).onChange)==null||l.call(o,e,s,r,i))}onEditorChangeSelection(e,s,r){var l,c,d,u,f,h;if(!this.editor)return;const i=this.getEditorSelection(),a=!i&&e,o=i&&!e;Yl(e,i)||(this.selection=e,(c=(l=this.props).onChangeSelection)==null||c.call(l,e,s,r),a?(u=(d=this.props).onFocus)==null||u.call(d,e,s,r):o&&((h=(f=this.props).onBlur)==null||h.call(f,i,s,r)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Am.displayName="React Quill";Am.Quill=Te;Am.defaultProps={theme:"snow",modules:{},readOnly:!1};function WT(t){Promise.resolve().then(t)}const Yue={_id:"builtin-promotion-template",slug:"promotion-template",name:"Promotion Template",subject:"Launch Your Live Shopping Business with Tokshop",htmlContent:`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Launch Your Live Shopping Business with Tokshop</title>
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f4; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f4; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <tr>
            <td style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 50px 30px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 36px; font-weight: bold;">TOKSHOP</h1>
              <p style="color: #00d4ff; margin: 15px 0 0 0; font-size: 18px; font-weight: 500;">Build Your Own Live Shopping Empire</p>
            </td>
          </tr>
          <tr>
            <td style="padding: 40px 30px 20px 30px; text-align: center;">
              <h2 style="color: #1a1a2e; margin: 0 0 15px 0; font-size: 26px; line-height: 1.3;">Your Platform. Your Brand. Your Rules.</h2>
              <p style="color: #666666; font-size: 16px; line-height: 1.7; margin: 0;">
                Hi {{ params.name }},<br><br>
                Live shopping is a <strong>$68 billion industry</strong> and growing fast. Tokshop gives you everything you need to launch your own marketplace like Whatnot - with iOS, Android, and Web apps ready to go.
              </p>
            </td>
          </tr>
          <tr>
            <td style="padding: 20px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;">
                <tr>
                  <td width="33%" style="padding: 25px 10px; text-align: center; border-right: 1px solid rgba(255,255,255,0.2);">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">$68B</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">Market by 2026</p>
                  </td>
                  <td width="33%" style="padding: 25px 10px; text-align: center; border-right: 1px solid rgba(255,255,255,0.2);">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">10x</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">Higher Conversions</p>
                  </td>
                  <td width="33%" style="padding: 25px 10px; text-align: center;">
                    <p style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0;">48hrs</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin: 5px 0 0 0;">To Launch</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 30px 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">Sell Live, Sell More</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FEF3C7; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #F59E0B; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#127909;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Live Streaming</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers tap one button to go live from their phone or computer. Viewers watch in HD, chat in real-time, and buy products right from the stream.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #F0FDF4; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #10B981; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128296;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Live Auctions</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers auction products during their live shows. Buyers place bids, compete in real-time, and highest bidder wins when time runs out.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FCE7F3; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #EC4899; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128176;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Buy Now & Offers</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers list products at fixed prices for instant purchase. Buyers can also make offers to negotiate.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #ECFEFF; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #06B6D4; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#127873;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Giveaways & Engagement</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers run giveaways during shows - viewers tap to enter, system picks a random winner automatically.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">Payments & Operations Built-In</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #E0F2FE; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #0EA5E9; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128179;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Stripe Payments + Commissions</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Buyers pay securely with credit cards via Stripe. You set commission rates and earn on every sale.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FFF5F4; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #EF4444; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128230;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Shipping & Order Tracking</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Shipping costs calculate automatically at checkout via USPS. Sellers print shipping labels right from the app - no copy-pasting addresses. Buyers track their orders in real-time.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #EDE9FE; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #8B5CF6; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#9878;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Disputes & Refunds</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">If something goes wrong, buyers open a dispute. You review the case and decide the outcome. Process refunds with one click. Everything is tracked in one place.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FEF9C3; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #EAB308; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#127916;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Video Proof & Receipts</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Every auction ending is automatically recorded as a short video clip. Buyers get video proof showing exactly what they won and the final price.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">Powerful Dashboards for Everyone</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #F0F9FF; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #0369A1; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128187;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Admin Dashboard</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Your command center to run the entire platform. Approve new sellers, manage categories, set commission rates, handle disputes, view analytics.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 8px 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #F0FDF4; border-radius: 10px; padding: 18px;">
                <tr>
                  <td width="55" valign="top">
                    <div style="width: 45px; height: 45px; background-color: #15803D; border-radius: 10px; text-align: center; line-height: 45px;"><span style="font-size: 22px; color: #ffffff;">&#128188;</span></div>
                  </td>
                  <td style="padding-left: 12px;">
                    <h3 style="color: #333333; margin: 0 0 5px 0; font-size: 16px;">Seller Hub (Desktop)</h3>
                    <p style="color: #666666; margin: 0; font-size: 13px; line-height: 1.5;">Sellers get their own web dashboard - view orders, print shipping labels in bulk, track payouts, see sales analytics, manage inventory.</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 20px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #059669 0%, #047857 100%); border-radius: 12px;">
                <tr>
                  <td style="padding: 25px; text-align: center;">
                    <h3 style="color: #ffffff; margin: 0 0 8px 0; font-size: 18px;">&#128241; Try It Yourself</h3>
                    <p style="color: rgba(255,255,255,0.9); font-size: 14px; margin: 0 0 20px 0;">Download the apps and explore the full platform - no commitment required</p>
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://apps.apple.com/in/app/tokshop-live/id1630634917" style="display: inline-block; background-color: #000000; color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px;">&#63743; iOS App</a>
                        </td>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://play.google.com/store/apps/details?id=com.tokshop.live&hl=en_US" style="display: inline-block; background-color: #000000; color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px;">&#9654; Android App</a>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://tokshoplive.com" style="display: inline-block; background-color: rgba(255,255,255,0.15); color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px; border: 1px solid rgba(255,255,255,0.3);">&#127760; Web App</a>
                        </td>
                        <td width="50%" style="padding: 6px; text-align: center;">
                          <a href="https://admin.tokshoplive.com" style="display: inline-block; background-color: rgba(255,255,255,0.15); color: #ffffff; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; min-width: 120px; border: 1px solid rgba(255,255,255,0.3);">&#128187; Admin Demo</a>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 20px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 12px;">
                <tr>
                  <td style="padding: 25px; text-align: center;">
                    <h3 style="color: #ffffff; margin: 0 0 20px 0; font-size: 18px;">Complete Platform Control</h3>
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td width="50%" style="padding: 8px; text-align: left; vertical-align: top;">
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; iOS + Android + Web Apps</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Admin Dashboard</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Seller Center</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Seller Approval System</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0;">&#10003; Multi-Category Management</p>
                        </td>
                        <td width="50%" style="padding: 8px; text-align: left; vertical-align: top;">
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Your Brand & Colors</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Full Source Code</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; No Monthly Fees</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0 0 6px 0;">&#10003; Multi-Language Ready</p>
                          <p style="color: #00d4ff; font-size: 13px; margin: 0;">&#10003; Light & Dark Themes</p>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 15px 30px;">
              <h3 style="color: #1a1a2e; margin: 0; font-size: 20px; text-align: center;">And Much More</h3>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
                <tr>
                  <td style="padding: 20px;">
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#9889; <strong>Auto-Bid</strong> - Set max price, system bids for you</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128172; <strong>Live Chat</strong> - Real-time viewer interaction</p>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128176; <strong>Tipping</strong> - Viewers support sellers</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128226; <strong>Raid Shows</strong> - Send viewers to other shows</p>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#11088; <strong>Favorites</strong> - Save shows to watch later</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128276; <strong>Notifications</strong> - Alerts when sellers go live</p>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%" style="padding: 6px 10px 6px 0; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128200; <strong>Analytics</strong> - Sales and viewer reports</p>
                        </td>
                        <td width="50%" style="padding: 6px 0 6px 10px; vertical-align: top;">
                          <p style="color: #333333; font-size: 13px; margin: 0;">&#128274; <strong>Moderation</strong> - Block users, manage content</p>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 35px 30px; text-align: center;">
              <p style="color: #666666; font-size: 16px; margin: 0 0 20px 0;">Ready to launch your live shopping business?</p>
              <a href="https://wa.me/254791334234?text=Hi%2C%20I%27m%20interested%20in%20Tokshop%20for%20my%20live%20shopping%20business" style="display: inline-block; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: #ffffff; text-decoration: none; padding: 16px 45px; border-radius: 30px; font-size: 16px; font-weight: bold; box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);">Chat With Us on WhatsApp</a>
              <p style="color: #999999; font-size: 13px; margin: 15px 0 0 0;">or reply to this email</p>
            </td>
          </tr>
          <tr>
            <td style="padding: 0 30px 25px 30px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8fafc; border-radius: 12px;">
                <tr>
                  <td style="padding: 20px; text-align: center;">
                    <p style="color: #666666; font-size: 15px; font-style: italic; margin: 0 0 12px 0; line-height: 1.5;">"Launched in 3 days. First month: 200+ sellers, $50K+ in sales. The platform just works."</p>
                    <p style="color: #1a1a2e; font-size: 14px; font-weight: bold; margin: 0;">- Platform Owner</p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="background-color: #1a1a2e; padding: 25px; text-align: center;">
              <p style="color: rgba(255,255,255,0.6); font-size: 12px; margin: 0 0 10px 0;">Tokshop - White-Label Live Shopping Platform</p>
              <p style="color: rgba(255,255,255,0.4); font-size: 11px; margin: 0; line-height: 1.5;">
                You received this because you showed interest in live commerce.<br>
                <a href="https://tokshoplive.com/unsubscribe?email={{ params.email }}" style="color: #00d4ff; text-decoration: underline;">Unsubscribe</a>
              </p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,placeholders:["name","email"]};function Que(){var tr,Ra,Eo;const{toast:t}=Et(),e=p.useRef(null),[s,r]=p.useState("template"),[i,a]=p.useState(""),[o,l]=p.useState([]),[c,d]=p.useState([]),[u,f]=p.useState(""),[h,x]=p.useState(0),[g,y]=p.useState(!1),[w,b]=p.useState({success:0,failed:0,errors:[]}),[v,N]=p.useState(!1),[C,_]=p.useState(""),[T,j]=p.useState(""),[S,A]=p.useState(""),[I,P]=p.useState([]),[O,D]=p.useState(""),[M,J]=p.useState(""),[X,U]=p.useState(""),[$,L]=p.useState(!1),[te,F]=p.useState(""),[z,pe]=p.useState(""),[xe,_e]=p.useState(!1),[Me,K]=p.useState(!1),[Q,se]=p.useState(""),[ye,B]=p.useState(!1),[ie,ce]=p.useState(!1),[oe,Z]=p.useState(""),{data:he,isLoading:Ne,refetch:Ke}=Ve({queryKey:["/api/templates"]}),{data:$e,isLoading:W}=Ve({queryKey:["/users",{title:S}],enabled:S.length>=1}),ae=(he==null?void 0:he.data)||he||[],ge=[Yue,...ae],Ae=ge.find(Pe=>Pe._id===i),Y=($e==null?void 0:$e.data)||[],je=["app_name","support_email","primary_color","secondary_color","firstname","lastname","username","email","name","recipient_name","version","android_version","ios_version","android_link","ios_link"],ze=p.useMemo(()=>({toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{align:[]}],["blockquote","code-block"],["link","image","video"],["clean"]]}),[]),pt=["header","font","size","bold","italic","underline","strike","color","background","script","list","bullet","indent","direction","align","blockquote","code-block","link","image","video"],mt=()=>{T.length>=1&&A(T)},os=Pe=>{const rt=I.some(lt=>lt._id===Pe._id);P(rt?I.filter(lt=>lt._id!==Pe._id):[...I,Pe])},rs=Pe=>{P(I.filter(rt=>rt._id!==Pe))},bs=()=>{P([])},kn=async()=>{K(!0),se("Loading users...");try{const Pe=[];let rt=1;const lt=100;let Vt=!0;for(;Vt;){se(`Loading page ${rt}...`);const qs=await fetch(`/api/admin/users?page=${rt}&limit=${lt}`,{credentials:"include"});if(!qs.ok)throw new Error("Failed to fetch users");const pn=await qs.json(),yr=pn.data||pn,Ns=yr.users||yr.data||yr||[],Oa=yr.totalDoc||0;!Array.isArray(Ns)||Ns.length===0?Vt=!1:(Pe.push(...Ns),Pe.length>=Oa||Ns.length<lt?Vt=!1:rt++),se(`Loaded ${Pe.length} users...`)}const $t=Pe.filter(qs=>qs.email&&!I.some(pn=>pn._id===qs._id));P([...I,...$t]),t({title:"Users loaded",description:`Added ${$t.length} users (${Pe.length} total found)`})}catch(Pe){t({title:"Failed to load users",description:Pe.message||"Error fetching users",variant:"destructive"})}K(!1),se("")},Xe=Pe=>{var Vt;const rt=(Vt=Pe.target.files)==null?void 0:Vt[0];if(!rt)return;if(!rt.name.endsWith(".csv")){t({title:"Invalid file type",description:"Please upload a CSV file",variant:"destructive"});return}f(rt.name);const lt=new FileReader;lt.onload=$t=>{var pn;const qs=(pn=$t.target)==null?void 0:pn.result;Rt(qs)},lt.readAsText(rt)},Rt=Pe=>{const rt=Pe.split(`
`).filter($t=>$t.trim());if(rt.length<2){t({title:"Invalid CSV",description:"CSV must have a header row and at least one data row",variant:"destructive"});return}const lt=rt[0].split(",").map($t=>$t.trim().toLowerCase().replace(/['"]/g,""));if(!lt.includes("email")){t({title:"Missing email column",description:"CSV must have an 'email' column",variant:"destructive"});return}const Vt=[];for(let $t=1;$t<rt.length;$t++){const qs=Ot(rt[$t]);if(qs.length===lt.length){const pn={email:""};lt.forEach((yr,Ns)=>{var Oa;pn[yr]=((Oa=qs[Ns])==null?void 0:Oa.trim().replace(/^["']|["']$/g,""))||""}),pn.email&&Tt(pn.email)&&Vt.push(pn)}}d(lt),l(Vt),t({title:"CSV loaded",description:`Found ${Vt.length} valid email addresses`})},Ot=Pe=>{const rt=[];let lt="",Vt=!1;for(let $t=0;$t<Pe.length;$t++){const qs=Pe[$t];qs==='"'?Vt=!Vt:qs===","&&!Vt?(rt.push(lt),lt=""):lt+=qs}return rt.push(lt),rt},Tt=Pe=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Pe),St=()=>{l([]),d([]),f(""),b({success:0,failed:0,errors:[]}),e.current&&(e.current.value="")},ts=(Pe,rt)=>{let lt=Pe;for(const[Vt,$t]of Object.entries(rt))lt=lt.replace(new RegExp(`{{${Vt}}}`,"g"),$t);return lt},Es=()=>{const Pe=[...o];for(const rt of I)if(!Pe.some(lt=>lt.email===rt.email)){const lt=rt.firstName||"",Vt=rt.lastName||"",$t=rt.userName||"there";Pe.push({email:rt.email,firstname:lt,lastname:Vt,username:rt.userName||"",name:$t,recipient_name:$t})}return Pe},Ee=()=>{if(s==="template"&&Ae){const Pe=Ae.htmlContent||Ae.body||"";return{subject:Ae.subject||Ae.name||"Notification",html:Pe}}else if(s==="custom")return{subject:O,html:M};return null},Ct=()=>{const Pe=Ee();if(!Pe)return;const rt=Es();if(rt.length===0){_(Pe.html),N(!0);return}const lt=rt[0],Vt=ts(Pe.html,lt);_(Vt),N(!0)},is=async()=>{const Pe=Ee();if(!Pe)return;const rt=Es();if(rt.length!==0){y(!0),x(0),b({success:0,failed:0,errors:[]});try{const lt=rt.map(qs=>({...qs,whats_new:oe||""})),$t=await(await ut("POST","/api/admin/email/send-bulk",{recipients:lt,subject:Pe.subject,html:Pe.html,fromEmail:X||void 0,useWrapper:s==="custom"})).json();x(100),b({success:$t.sent||0,failed:$t.failed||0,errors:$t.errors||[]}),t({title:"Bulk send complete",description:`Sent: ${$t.sent||0}, Failed: ${$t.failed||0}`,variant:$t.failed>0?"destructive":"default"})}catch(lt){b({success:0,failed:rt.length,errors:[lt.message||"Failed to send"]}),t({title:"Bulk send failed",description:lt.message||"Failed to send emails",variant:"destructive"})}y(!1)}},On=(Ae==null?void 0:Ae.placeholders.filter(Pe=>!c.includes(Pe)&&!je.includes(Pe)))||[],nn=Es().length,ws=()=>nn===0?!1:s==="template"?!!i&&(On.length===0||o.length===0):O.trim()!==""&&M.trim()!=="",er=()=>s==="template"?!!i:M.trim()!=="",Dn=Pe=>{const rt=Pe.match(/\{\{(\w+)\}\}/g)||[];return[...new Set(rt.map(lt=>lt.replace(/\{\{|\}\}/g,"")))]},Bs=(Pe,rt)=>`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f4f4f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, {{primary_color}} 0%, {{secondary_color}} 100%); padding: 32px; text-align: center;">
              <h1 style="color: #ffffff; margin: 0; font-size: 24px; font-weight: 600;">{{app_name}}</h1>
            </td>
          </tr>
          <!-- Content -->
          <tr>
            <td style="padding: 40px;">
              <h2 style="color: #18181b; margin: 0 0 16px; font-size: 22px; text-align: center;">${rt}</h2>
              <div style="color: #52525b; font-size: 16px; line-height: 1.6;">
                ${Pe}
              </div>
            </td>
          </tr>
          <!-- Footer -->
          <tr>
            <td style="background-color: #f4f4f5; padding: 24px; text-align: center; border-top: 1px solid #e4e4e7;">
              <p style="color: #71717a; font-size: 14px; margin: 0 0 8px;">Questions? Contact us at <a href="mailto:{{support_email}}" style="color: {{primary_color}}; text-decoration: none;">{{support_email}}</a></p>
              <p style="color: #a1a1aa; font-size: 12px; margin: 0;"> ${new Date().getFullYear()} {{app_name}}. All rights reserved.</p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`,fn=async()=>{if(!te.trim()||!z.trim()){t({title:"Missing fields",description:"Please enter both template name and slug",variant:"destructive"});return}_e(!0);try{const Pe=Bs(M,O),rt=Dn(Pe);if(!(await ut("POST","/api/templates",{name:te,slug:z,htmlContent:Pe,placeholders:rt})).ok)throw new Error("Failed to save template");t({title:"Template saved",description:`"${te}" has been saved successfully`}),L(!1),F(""),pe("")}catch(Pe){t({title:"Save failed",description:Pe.message||"Failed to save template",variant:"destructive"})}_e(!1)},js=async()=>{if(i){ce(!0);try{if(!(await ut("DELETE",`/api/templates/${i}`)).ok)throw new Error("Failed to delete template");t({title:"Template deleted",description:"The template has been deleted successfully"}),a(""),B(!1),Ke()}catch(Pe){t({title:"Delete failed",description:Pe.message||"Failed to delete template",variant:"destructive"})}ce(!1)}};return n.jsxs(Ze,{title:"Bulk Emails",description:"Search users or upload CSV to send bulk emails",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(du,{className:"h-5 w-5"}),"Email Content"]}),n.jsx(Fe,{children:"Choose a template or create a custom email"})]}),n.jsxs(ue,{children:[n.jsxs("div",{className:"mb-4 space-y-2",children:[n.jsx(re,{htmlFor:"from-email",children:"From Email (optional - uses default from settings if empty)"}),n.jsx(le,{id:"from-email",type:"email",placeholder:"Leave empty to use default from settings",value:X,onChange:Pe=>U(Pe.target.value),"data-testid":"input-from-email"})]}),n.jsxs(Vi,{value:s,onValueChange:Pe=>r(Pe),children:[n.jsxs(li,{className:"mb-4",children:[n.jsx(_t,{value:"template","data-testid":"tab-template",children:"Use Template"}),n.jsx(_t,{value:"custom","data-testid":"tab-custom",children:"Create Custom"})]}),n.jsxs(Ft,{value:"template",className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsxs(Gt,{value:i,onValueChange:a,children:[n.jsx(Bt,{"data-testid":"select-template",className:"flex-1",children:n.jsx(Yt,{placeholder:"Select a template..."})}),n.jsx(qt,{children:ge.map(Pe=>n.jsxs(fe,{value:Pe._id,children:[Pe.name," (",Pe.slug,")"]},Pe._id))})]}),i&&n.jsx(G,{variant:"outline",size:"icon",onClick:()=>B(!0),"data-testid":"button-delete-template",children:n.jsx(bn,{className:"h-4 w-4 text-destructive"})})]}),Ae&&n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Placeholders (auto-populated from settings and user data):"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Ae.placeholders.map(Pe=>n.jsx(Ye,{variant:"outline",size:"sm",children:`{{${Pe}}}`},Pe))})]}),Ae&&(((tr=Ae.name)==null?void 0:tr.toLowerCase().includes("update"))||((Ra=Ae.slug)==null?void 0:Ra.toLowerCase().includes("update")))&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"What's New (Release Notes)"}),n.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:n.jsx(Am,{theme:"snow",value:oe,onChange:Z,modules:ze,formats:pt,placeholder:"Enter what's new in this update... (bullet points, features, bug fixes, etc.)",style:{minHeight:"150px"}})}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["This will replace ","{{whats_new}}"," in the email template"]})]})]}),n.jsxs(Ft,{value:"custom",className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"custom-subject",children:"Subject"}),n.jsx(le,{id:"custom-subject",placeholder:"Enter email subject...",value:O,onChange:Pe=>D(Pe.target.value),"data-testid":"input-custom-subject"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Email Body"}),n.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:n.jsx(Am,{theme:"snow",value:M,onChange:J,modules:ze,formats:pt,placeholder:"Compose your email...",style:{minHeight:"300px"}})}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available placeholders: ","{{username}}",", ","{{firstname}}",", ","{{lastname}}",", ","{{email}}"]})]}),O&&M&&n.jsxs(G,{variant:"outline",onClick:()=>L(!0),"data-testid":"button-save-template",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Save as Template"]})]})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(Xr,{className:"h-5 w-5"}),"Select Recipients"]}),n.jsx(Fe,{children:"Search for users, or load all users from the database"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(le,{placeholder:"Search by name or email...",value:T,onChange:Pe=>j(Pe.target.value),onKeyDown:Pe=>Pe.key==="Enter"&&mt(),className:"max-w-sm","data-testid":"input-user-search"}),n.jsxs(G,{onClick:mt,disabled:T.length<1,"data-testid":"button-search-users",children:[n.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Search"]}),n.jsxs(G,{variant:"secondary",onClick:kn,disabled:Me,"data-testid":"button-load-all-users",children:[n.jsx(AU,{className:"h-4 w-4 mr-2"}),Me?Q:"Load All Users"]})]}),W&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"Searching..."}),Y.length>0&&n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{className:"w-12"}),n.jsx(Ce,{children:"Email"}),n.jsx(Ce,{children:"Name"}),n.jsx(Ce,{children:"Username"})]})}),n.jsx(Us,{children:Y.slice(0,10).map(Pe=>n.jsxs(yt,{children:[n.jsx(ke,{children:n.jsx(tu,{checked:I.some(rt=>rt._id===Pe._id),onCheckedChange:()=>os(Pe),"data-testid":`checkbox-user-${Pe._id}`})}),n.jsx(ke,{children:Pe.email}),n.jsxs(ke,{children:[Pe.firstName," ",Pe.lastName]}),n.jsx(ke,{children:Pe.userName||"-"})]},Pe._id))})]})}),I.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm font-medium",children:["Selected Users (",I.length,")"]}),n.jsx(G,{variant:"ghost",size:"sm",onClick:bs,"data-testid":"button-clear-selected",children:"Clear All"})]}),I.length<=10?n.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(Pe=>n.jsxs(Ye,{variant:"secondary",size:"sm",className:"flex items-center gap-1",children:[Pe.email,n.jsx("button",{onClick:()=>rs(Pe._id),className:"ml-1","data-testid":`button-remove-user-${Pe._id}`,children:n.jsx(un,{className:"h-3 w-3"})})]},Pe._id))}):n.jsx("div",{className:"p-3 bg-muted rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.length," users selected for bulk email"]})})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(ul,{className:"h-5 w-5"}),"Upload CSV (Optional)"]}),n.jsx(Fe,{children:"Or upload a CSV file with an 'email' column and columns matching template placeholders"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(le,{ref:e,type:"file",accept:".csv",onChange:Xe,className:"max-w-sm","data-testid":"input-csv-upload"}),u&&n.jsx(G,{variant:"ghost",size:"icon",onClick:St,"data-testid":"button-clear-csv",children:n.jsx(un,{className:"h-4 w-4"})})]}),u&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Bd,{className:"h-4 w-4"}),u," - ",o.length," valid emails"]}),On.length>0&&o.length>0&&s==="template"&&n.jsxs(Xs,{variant:"destructive",children:[n.jsx(qr,{className:"h-4 w-4"}),n.jsx(n3,{children:"Missing columns"}),n.jsxs(Js,{children:["Your CSV is missing these required columns: ",On.join(", ")]})]}),o.length>0&&n.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[c.slice(0,5).map(Pe=>n.jsx(Ce,{children:Pe},Pe)),c.length>5&&n.jsx(Ce,{children:"..."})]})}),n.jsx(Us,{children:o.slice(0,5).map((Pe,rt)=>n.jsxs(yt,{children:[c.slice(0,5).map(lt=>n.jsx(ke,{className:"max-w-[200px] truncate",children:Pe[lt]},lt)),c.length>5&&n.jsx(ke,{children:"..."})]},rt))})]}),o.length>5&&n.jsxs("div",{className:"p-2 text-center text-sm text-muted-foreground bg-muted",children:["Showing 5 of ",o.length," rows"]})]})]})]}),g&&n.jsx(de,{children:n.jsx(ue,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Sending emails..."}),n.jsxs("span",{children:[h,"%"]})]}),n.jsx(yS,{value:h})]})})}),w.success>0||w.failed>0?n.jsxs(de,{children:[n.jsx(be,{children:n.jsx(we,{children:"Send Results"})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pd,{className:"h-5 w-5 text-green-500"}),n.jsxs("span",{children:[w.success," sent successfully"]})]}),w.failed>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-5 w-5 text-red-500"}),n.jsxs("span",{children:[w.failed," failed"]})]})]}),w.errors.length>0&&n.jsx("div",{className:"max-h-40 overflow-y-auto text-sm text-muted-foreground",children:w.errors.map((Pe,rt)=>n.jsx("p",{children:Pe},rt))})]})]}):null,n.jsxs("div",{className:"flex gap-4",children:[n.jsxs(G,{variant:"outline",onClick:Ct,disabled:!er(),"data-testid":"button-preview",children:[n.jsx(cn,{className:"h-4 w-4 mr-2"}),"Preview Email"]}),n.jsxs(G,{onClick:is,disabled:!ws()||g,"data-testid":"button-send-bulk",children:[n.jsx(hy,{className:"h-4 w-4 mr-2"}),"Send to ",nn," Recipients"]})]})]}),n.jsx(ys,{open:v,onOpenChange:N,children:n.jsxs(fs,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Email Preview"}),n.jsx(Ls,{children:s==="custom"?`Subject: ${O}`:`Preview of email to ${((Eo=Es()[0])==null?void 0:Eo.email)||"first recipient"}`})]}),n.jsx("div",{className:"border rounded-lg p-4 bg-white",dangerouslySetInnerHTML:{__html:C}})]})}),n.jsx(ys,{open:$,onOpenChange:L,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Save as Template"}),n.jsx(Ls,{children:"Save this email as a reusable template"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"template-name",children:"Template Name"}),n.jsx(le,{id:"template-name",placeholder:"e.g., Welcome Email",value:te,onChange:Pe=>F(Pe.target.value),"data-testid":"input-template-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"template-slug",children:"Template Slug"}),n.jsx(le,{id:"template-slug",placeholder:"e.g., welcome-email",value:z,onChange:Pe=>pe(Pe.target.value.toLowerCase().replace(/\s+/g,"-")),"data-testid":"input-template-slug"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Unique identifier for the template (lowercase, no spaces)"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(G,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),n.jsx(G,{onClick:fn,disabled:xe,"data-testid":"button-confirm-save-template",children:xe?"Saving...":"Save Template"})]})]})}),n.jsx(ys,{open:ye,onOpenChange:B,children:n.jsxs(fs,{children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Delete Template"}),n.jsxs(Ls,{children:['Are you sure you want to delete "',Ae==null?void 0:Ae.name,'"? This action cannot be undone.']})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),n.jsx(G,{variant:"destructive",onClick:js,disabled:ie,"data-testid":"button-confirm-delete-template",children:ie?"Deleting...":"Delete"})]})]})})]})}async function Zue(t,e){const s=DO();try{const r=t.name.split(".").pop()||"jpg",i=Date.now(),o=`${e||`new_${i}`}_${i}.${r}`,l=WK(s,`giveaway-images/${o}`),c=await VK(l,t);return await HK(c.ref)}catch(r){throw console.error("Error uploading giveaway image:",r),r}}function Xue(){const[,t]=Ds(),[e,s]=p.useState(1),[r,i]=p.useState(""),[a,o]=p.useState(""),[l,c]=p.useState(!1),[d,u]=p.useState(!1),[f,h]=p.useState(!1),[x,g]=p.useState(null),[y,w]=p.useState(null),[b,v]=p.useState({name:"",description:"",startedtime:"",endedtime:"",quantity:1,images:[],shipping_profile:""}),{externalApiUrl:N}=Ff(),{toast:C}=Et(),_=10,[T,j]=p.useState(!1),S=p.useRef(null),A=p.useRef(null),I=async Z=>{if(!Z.type.startsWith("image/")){C({title:"Error",description:"Please select an image file",variant:"destructive"});return}if(Z.size>5*1024*1024){C({title:"Error",description:"Image must be less than 5MB",variant:"destructive"});return}j(!0);try{const he=await Zue(Z);v(Ne=>({...Ne,images:[...Ne.images,he]})),C({title:"Success",description:"Image uploaded successfully"})}catch(he){console.error("Upload error:",he),C({title:"Error",description:he.message||"Failed to upload image",variant:"destructive"})}finally{j(!1)}},P=Z=>{v(he=>({...he,images:he.images.filter((Ne,Ke)=>Ke!==Z)}))},D=(()=>{const Z=new URLSearchParams;return Z.append("limit",_.toString()),Z.append("page",e.toString()),Z.append("type","icona"),r&&Z.append("name",r),Z.toString()})(),{data:M,isLoading:J}=Ve({queryKey:["/api/giveaways",D],queryFn:async()=>{const Z=await fetch(`/api/giveaways?${D}`,{credentials:"include"});if(!Z.ok)throw new Error("Failed to fetch giveaways");return Z.json()},refetchOnWindowFocus:!1,staleTime:3e4}),X=Array.isArray(M==null?void 0:M.giveaways)?M.giveaways:Array.isArray(M==null?void 0:M.data)?M.data:Array.isArray(M)?M:[],U=(M==null?void 0:M.totalPages)||(M==null?void 0:M.pages)||1,$=(M==null?void 0:M.totalDocuments)||(M==null?void 0:M.total)||X.length||0,L=()=>{i(a),s(1)},te=()=>{o(""),i(""),s(1)},F=()=>{v({name:"",description:"",startedtime:"",endedtime:"",quantity:1,images:[],shipping_profile:""})},{data:z}=Ve({queryKey:["/api/shipping/profiles"],queryFn:async()=>{const Z=await fetch("/api/shipping/profiles",{credentials:"include",cache:"no-store"});if(!Z.ok)throw new Error("Failed to fetch shipping profiles");return Z.json()},refetchOnWindowFocus:!1,staleTime:6e4}),pe=Array.isArray(z==null?void 0:z.data)?z.data:Array.isArray(z)?z:z!=null&&z._id?[z]:[],xe=st({mutationFn:async Z=>{const he=localStorage.getItem("adminAccessToken"),Ne=localStorage.getItem("accessToken"),Ke=localStorage.getItem("user"),$e={"Content-Type":"application/json"};he&&($e["x-admin-token"]=he),Ne&&($e["x-access-token"]=Ne,$e.Authorization=`Bearer ${Ne}`),Ke&&($e["x-user-data"]=btoa(unescape(encodeURIComponent(Ke))));const W=await fetch("/api/giveaways",{method:"POST",headers:$e,body:JSON.stringify(Z),credentials:"include"});if(!W.ok){const ae=await W.json().catch(()=>({}));throw new Error(ae.error||"Failed to create giveaway")}return W.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/giveaways"]}),C({title:"Success",description:"Giveaway created successfully"}),c(!1),F()},onError:Z=>{C({title:"Error",description:Z.message||"Failed to create giveaway",variant:"destructive"})}}),_e=st({mutationFn:async({id:Z,data:he})=>{const Ne=localStorage.getItem("adminAccessToken"),Ke=localStorage.getItem("accessToken"),$e=localStorage.getItem("user"),W={"Content-Type":"application/json"};Ne&&(W["x-admin-token"]=Ne),Ke&&(W["x-access-token"]=Ke,W.Authorization=`Bearer ${Ke}`),$e&&(W["x-user-data"]=btoa(unescape(encodeURIComponent($e))));const ae=await fetch(`/api/giveaways/${Z}`,{method:"PUT",headers:W,body:JSON.stringify(he),credentials:"include"});if(!ae.ok){const ge=await ae.json().catch(()=>({}));throw new Error(ge.error||"Failed to update giveaway")}return ae.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/giveaways"]}),C({title:"Success",description:"Giveaway updated successfully"}),u(!1),w(null),F()},onError:Z=>{C({title:"Error",description:Z.message||"Failed to update giveaway",variant:"destructive"})}}),Me=st({mutationFn:async Z=>{const he=localStorage.getItem("adminAccessToken"),Ne=localStorage.getItem("accessToken"),Ke=localStorage.getItem("user"),$e={"Content-Type":"application/json"};he&&($e["x-admin-token"]=he),Ne&&($e["x-access-token"]=Ne,$e.Authorization=`Bearer ${Ne}`),Ke&&($e["x-user-data"]=btoa(unescape(encodeURIComponent(Ke))));const W=await fetch(`/api/giveaways/${Z}`,{method:"DELETE",headers:$e,credentials:"include"});if(!W.ok){const ae=await W.json().catch(()=>({}));throw new Error(ae.error||"Failed to delete giveaway")}return W.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/giveaways"]}),C({title:"Success",description:"Giveaway deleted successfully"}),g(null)},onError:Z=>{C({title:"Error",description:Z.message||"Failed to delete giveaway",variant:"destructive"})}}),K=(Z,he)=>{if(!Z||!he)return 300;const Ne=new Date(Z),$e=new Date(he).getTime()-Ne.getTime();return Math.max(0,Math.floor($e/1e3))},Q=Z=>{if(!Z)return"";try{const he=new Date(Z);if(isNaN(he.getTime()))return"";const Ne=he.getFullYear(),Ke=String(he.getMonth()+1).padStart(2,"0"),$e=String(he.getDate()).padStart(2,"0"),W=String(he.getHours()).padStart(2,"0"),ae=String(he.getMinutes()).padStart(2,"0");return`${Ne}-${Ke}-${$e}T${W}:${ae}`}catch{return""}},se=()=>{const Z=new Date,he=Z.getFullYear(),Ne=String(Z.getMonth()+1).padStart(2,"0"),Ke=String(Z.getDate()).padStart(2,"0"),$e=String(Z.getHours()).padStart(2,"0"),W=String(Z.getMinutes()).padStart(2,"0");return`${he}-${Ne}-${Ke}T${$e}:${W}`},ye=()=>{if(!b.name.trim()){C({title:"Error",description:"Giveaway name is required",variant:"destructive"});return}if(!b.startedtime||!b.endedtime){C({title:"Error",description:"Start and end times are required",variant:"destructive"});return}if(!b.shipping_profile){C({title:"Error",description:"Shipping profile is required",variant:"destructive"});return}const Z=K(b.startedtime,b.endedtime),he=new Date(b.startedtime).toISOString(),Ne=new Date(b.endedtime).toISOString();xe.mutate({name:b.name,description:b.description,startedtime:he,endedtime:Ne,duration:Z,quantity:b.quantity,images:b.images,type:"icona",...b.shipping_profile&&{shipping_profile:b.shipping_profile}})},B=()=>{if(!y)return;if(!b.name.trim()){C({title:"Error",description:"Giveaway name is required",variant:"destructive"});return}if(!b.shipping_profile){C({title:"Error",description:"Shipping profile is required",variant:"destructive"});return}const Z=K(b.startedtime,b.endedtime),he=b.startedtime?new Date(b.startedtime).toISOString():void 0,Ne=b.endedtime?new Date(b.endedtime).toISOString():void 0;_e.mutate({id:y._id,data:{name:b.name,description:b.description,startedtime:he,endedtime:Ne,duration:Z,quantity:b.quantity,images:b.images,...b.shipping_profile&&{shipping_profile:b.shipping_profile}}})},ie=Z=>{var Ne;w(Z);const he=typeof Z.shipping_profile=="object"?(Ne=Z.shipping_profile)==null?void 0:Ne._id:Z.shipping_profile||"";v({name:Z.name||"",description:Z.description||"",startedtime:Q(Z.startedtime),endedtime:Q(Z.endedtime),quantity:Z.quantity||1,images:Z.images||[],shipping_profile:he}),u(!0)},ce=Z=>{w(Z),h(!0)},oe=Z=>{const he=Z.status||"active";return he==="ended"||he==="completed"?n.jsx(Ye,{variant:"secondary",children:"Ended"}):he==="pending"?n.jsx(Ye,{variant:"outline",children:"Pending"}):n.jsx(Ye,{className:"bg-green-500",children:"Active"})};return n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Giveaways"}),n.jsx("p",{className:"text-muted-foreground",children:"Create and manage giveaways for your marketplace"})]}),n.jsxs(G,{onClick:()=>{F(),c(!0)},children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Create Giveaway"]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(ji,{className:"h-5 w-5"}),"All Giveaways"]}),n.jsxs(Fe,{children:["Total: ",$," giveaways"]})]}),n.jsxs(ue,{children:[n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsx(le,{placeholder:"Search by name...",value:a,onChange:Z=>o(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&L(),className:"max-w-sm"}),n.jsx(G,{onClick:L,variant:"secondary",children:n.jsx(Rn,{className:"h-4 w-4"})}),r&&n.jsx(G,{onClick:te,variant:"outline",children:"Clear"})]}),J?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):X.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(ji,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No giveaways found"}),n.jsx("p",{className:"text-sm",children:"Create your first giveaway to get started"})]}):n.jsx("div",{className:"space-y-4",children:X.map(Z=>{var he;return n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(he=Z.images)!=null&&he[0]?n.jsx("img",{src:su(Z.images[0],N),alt:Z.name,className:"h-12 w-12 rounded-lg object-cover"}):n.jsx(ji,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:Z.name}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Z.startedtime&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ci,{className:"h-3 w-3"}),It(new Date(Z.startedtime),"MMM d, yyyy h:mm a"),Z.endedtime&&` - ${It(new Date(Z.endedtime),"MMM d, yyyy h:mm a")}`]}),Z.participants&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Xr,{className:"h-3 w-3"}),Z.participants.length," participants"]}),Z.bookmarked&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(tU,{className:"h-3 w-3"}),Z.bookmarked.length," bookmarked"]})]}),Z.description&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[Z.description.substring(0,50),Z.description.length>50?"...":""]}),Z.winner&&n.jsxs("div",{className:"flex items-center gap-2 mt-1 cursor-pointer hover:opacity-80",onClick:Ne=>{Ne.stopPropagation();const Ke=typeof Z.winner=="object"?Z.winner._id:Z.winner;Ke&&t(`/admin/users/${Ke}`)},children:[typeof Z.winner=="object"&&Z.winner.profilePhoto&&n.jsx("img",{src:Z.winner.profilePhoto,alt:"Winner",className:"w-5 h-5 rounded-full object-cover"}),n.jsxs("p",{className:"text-sm text-green-600 font-medium hover:underline",children:["Winner: ",typeof Z.winner=="object"?Z.winner.userName:Z.winner]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[oe(Z),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(G,{variant:"ghost",size:"icon",onClick:()=>ce(Z),children:n.jsx(cn,{className:"h-4 w-4"})}),n.jsx(G,{variant:"ghost",size:"icon",onClick:()=>ie(Z),children:n.jsx(Xh,{className:"h-4 w-4"})}),n.jsx(G,{variant:"ghost",size:"icon",onClick:()=>g(Z._id),children:n.jsx(bn,{className:"h-4 w-4 text-destructive"})})]})]})]},Z._id)})}),U>=1&&n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",X.length," of ",$," giveaways (Page ",e," of ",U,")"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>s(Z=>Math.max(1,Z-1)),disabled:e===1,children:[n.jsx(oi,{className:"h-4 w-4"}),"Previous"]}),n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>s(Z=>Math.min(U,Z+1)),disabled:e===U,children:["Next",n.jsx(Vn,{className:"h-4 w-4"})]})]})]})]})]}),n.jsx(ys,{open:l,onOpenChange:c,children:n.jsxs(fs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Create Giveaway"}),n.jsx(Ls,{children:"Create a new giveaway for your marketplace"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"name",children:"Name *"}),n.jsx(le,{id:"name",value:b.name,onChange:Z=>v(he=>({...he,name:Z.target.value})),placeholder:"Enter giveaway name"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"description",children:"Description"}),n.jsx(zs,{id:"description",value:b.description,onChange:Z=>v(he=>({...he,description:Z.target.value})),placeholder:"Describe the giveaway",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"startedtime",children:"Start Time *"}),n.jsx(le,{id:"startedtime",type:"datetime-local",value:b.startedtime,min:se(),onChange:Z=>v(he=>({...he,startedtime:Z.target.value}))})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"endedtime",children:"End Time *"}),n.jsx(le,{id:"endedtime",type:"datetime-local",value:b.endedtime,min:b.startedtime||se(),onChange:Z=>v(he=>({...he,endedtime:Z.target.value}))})]})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"quantity",children:"Quantity"}),n.jsx(le,{id:"quantity",type:"number",min:1,value:b.quantity,onChange:Z=>v(he=>({...he,quantity:parseInt(Z.target.value)||1})),placeholder:"1",className:"w-32"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"shipping-profile",children:"Shipping Profile *"}),n.jsxs(Gt,{value:b.shipping_profile,onValueChange:Z=>v(he=>({...he,shipping_profile:Z})),children:[n.jsx(Bt,{className:"w-full",children:n.jsx(Yt,{placeholder:"Select a shipping profile"})}),n.jsx(qt,{className:"z-[9999]",children:pe.length===0?n.jsx(fe,{value:"none",disabled:!0,children:"No shipping profiles available"}):pe.map(Z=>n.jsxs(fe,{value:Z._id,children:[Z.name," ",Z.weight&&`(${Z.weight} ${Z.scale||"oz"})`]},Z._id))})]})]}),n.jsxs("div",{children:[n.jsx(re,{children:"Images"}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:b.images.map((Z,he)=>n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border bg-muted",children:n.jsx("img",{src:Z,alt:`Image ${he+1}`,className:"w-full h-full object-cover"})}),n.jsx(G,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-1 -right-1 h-5 w-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>P(he),children:n.jsx(un,{className:"h-3 w-3"})})]},he))}),n.jsx(de,{className:"border-2 border-dashed border-muted-foreground/25 hover:border-muted-foreground/50",children:n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"mx-auto w-8 h-8 rounded-lg bg-muted flex items-center justify-center",children:T?n.jsx(dn,{className:"h-4 w-4 animate-spin text-muted-foreground"}):n.jsx(cy,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs(G,{type:"button",variant:"outline",size:"sm",disabled:T,onClick:()=>{var Z;return(Z=S.current)==null?void 0:Z.click()},children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),T?"Uploading...":"Add Image"]}),n.jsx("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:Z=>{var he;(he=Z.target.files)!=null&&he[0]&&(I(Z.target.files[0]),Z.target.value="")},disabled:T})]})})})]})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),n.jsx(G,{onClick:ye,disabled:xe.isPending,children:xe.isPending?"Creating...":"Create Giveaway"})]})]})}),n.jsx(ys,{open:d,onOpenChange:u,children:n.jsxs(fs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Edit Giveaway"}),n.jsx(Ls,{children:"Update giveaway details"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-name",children:"Name *"}),n.jsx(le,{id:"edit-name",value:b.name,onChange:Z=>v(he=>({...he,name:Z.target.value})),placeholder:"Enter giveaway name"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-description",children:"Description"}),n.jsx(zs,{id:"edit-description",value:b.description,onChange:Z=>v(he=>({...he,description:Z.target.value})),placeholder:"Describe the giveaway",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-startedtime",children:"Start Time *"}),n.jsx(le,{id:"edit-startedtime",type:"datetime-local",value:b.startedtime,min:se(),onChange:Z=>v(he=>({...he,startedtime:Z.target.value}))})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-endedtime",children:"End Time *"}),n.jsx(le,{id:"edit-endedtime",type:"datetime-local",value:b.endedtime,min:b.startedtime||se(),onChange:Z=>v(he=>({...he,endedtime:Z.target.value}))})]})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-quantity",children:"Quantity"}),n.jsx(le,{id:"edit-quantity",type:"number",min:1,value:b.quantity,onChange:Z=>v(he=>({...he,quantity:parseInt(Z.target.value)||1})),placeholder:"1",className:"w-32"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-shipping-profile",children:"Shipping Profile *"}),n.jsxs(Gt,{value:b.shipping_profile,onValueChange:Z=>v(he=>({...he,shipping_profile:Z})),children:[n.jsx(Bt,{className:"w-full",children:n.jsx(Yt,{placeholder:"Select a shipping profile"})}),n.jsx(qt,{className:"z-[9999]",children:pe.length===0?n.jsx(fe,{value:"none",disabled:!0,children:"No shipping profiles available"}):pe.map(Z=>n.jsxs(fe,{value:Z._id,children:[Z.name," ",Z.weight&&`(${Z.weight} ${Z.scale||"oz"})`]},Z._id))})]})]}),n.jsxs("div",{children:[n.jsx(re,{children:"Images"}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:b.images.map((Z,he)=>n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border bg-muted",children:n.jsx("img",{src:Z,alt:`Image ${he+1}`,className:"w-full h-full object-cover"})}),n.jsx(G,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-1 -right-1 h-5 w-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>P(he),children:n.jsx(un,{className:"h-3 w-3"})})]},he))}),n.jsx(de,{className:"border-2 border-dashed border-muted-foreground/25 hover:border-muted-foreground/50",children:n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"mx-auto w-8 h-8 rounded-lg bg-muted flex items-center justify-center",children:T?n.jsx(dn,{className:"h-4 w-4 animate-spin text-muted-foreground"}):n.jsx(cy,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs(G,{type:"button",variant:"outline",size:"sm",disabled:T,onClick:()=>{var Z;return(Z=A.current)==null?void 0:Z.click()},children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),T?"Uploading...":"Add Image"]}),n.jsx("input",{ref:A,type:"file",accept:"image/*",className:"hidden",onChange:Z=>{var he;(he=Z.target.files)!=null&&he[0]&&(I(Z.target.files[0]),Z.target.value="")},disabled:T})]})})})]})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),n.jsx(G,{onClick:B,disabled:_e.isPending,children:_e.isPending?"Saving...":"Save Changes"})]})]})}),n.jsx(ys,{open:f,onOpenChange:h,children:n.jsxs(fs,{className:"max-w-2xl",children:[n.jsx(ps,{children:n.jsx(ms,{children:y==null?void 0:y.name})}),y&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[oe(y),y.participants&&n.jsxs(Ye,{variant:"outline",children:[n.jsx(Xr,{className:"h-3 w-3 mr-1"}),y.participants.length," participants"]})]}),y.description&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Description"}),n.jsx("p",{children:y.description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.startedtime&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Start Time"}),n.jsx("p",{children:It(new Date(y.startedtime),"PPP p")})]}),y.endedtime&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"End Time"}),n.jsx("p",{children:It(new Date(y.endedtime),"PPP p")})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Quantity"}),n.jsx("p",{children:y.quantity||1})]}),y.images&&y.images.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Images"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:y.images.map((Z,he)=>n.jsx("img",{src:Z,alt:`${y.name} ${he+1}`,className:"h-20 w-20 object-cover rounded border"},he))})]}),y.winner&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Winner"}),n.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80",onClick:()=>{const Z=typeof y.winner=="object"?y.winner._id:y.winner;Z&&t(`/admin/users/${Z}`)},children:[typeof y.winner=="object"&&y.winner.profilePhoto&&n.jsx("img",{src:y.winner.profilePhoto,alt:"Winner",className:"w-8 h-8 rounded-full object-cover"}),n.jsx("p",{className:"text-green-600 font-medium hover:underline",children:typeof y.winner=="object"?y.winner.userName:y.winner})]})]})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>h(!1),children:"Close"}),n.jsxs(G,{onClick:()=>{h(!1),y&&ie(y)},children:[n.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})}),n.jsx(Ca,{open:!!x,onOpenChange:()=>g(null),children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Giveaway"}),n.jsx(Fi,{children:"Are you sure you want to delete this giveaway? This action cannot be undone."})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{children:"Cancel"}),n.jsx($i,{onClick:()=>x&&Me.mutate(x),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:Me.isPending?"Deleting...":"Delete"})]})]})})]})})}function Jue(){const[t,e]=p.useState(!1),[s,r]=p.useState(!1),[i,a]=p.useState(null),[o,l]=p.useState(null),[c,d]=p.useState({name:"",description:"",weight:"",scale:"oz",length:"",width:"",height:""}),{toast:u}=Et(),{data:f,isLoading:h}=Ve({queryKey:["/api/shipping/profiles"],queryFn:async()=>{const _=await fetch("/api/shipping/profiles",{credentials:"include",cache:"no-store"});if(!_.ok)throw new Error("Failed to fetch shipping profiles");return _.json()}}),x=Array.isArray(f==null?void 0:f.data)?f.data:Array.isArray(f)?f:f!=null&&f._id?[f]:[],g=()=>{d({name:"",description:"",weight:"",scale:"oz",length:"",width:"",height:""})},y=st({mutationFn:async _=>{const T=localStorage.getItem("adminAccessToken"),j=localStorage.getItem("accessToken"),S=localStorage.getItem("user"),A={"Content-Type":"application/json"};T&&(A["x-admin-token"]=T),j&&(A["x-access-token"]=j,A.Authorization=`Bearer ${j}`),S&&(A["x-user-data"]=btoa(unescape(encodeURIComponent(S))));const I=await fetch("/api/shipping/profiles",{method:"POST",headers:A,body:JSON.stringify(_),credentials:"include"});if(!I.ok){const P=await I.json().catch(()=>({}));throw new Error(P.error||"Failed to create shipping profile")}return I.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/shipping/profiles"]}),u({title:"Success",description:"Shipping profile created successfully"}),e(!1),g()},onError:_=>{u({title:"Error",description:_.message||"Failed to create shipping profile",variant:"destructive"})}}),w=st({mutationFn:async({id:_,data:T})=>{const j=localStorage.getItem("adminAccessToken"),S=localStorage.getItem("accessToken"),A=localStorage.getItem("user"),I={"Content-Type":"application/json"};j&&(I["x-admin-token"]=j),S&&(I["x-access-token"]=S,I.Authorization=`Bearer ${S}`),A&&(I["x-user-data"]=btoa(unescape(encodeURIComponent(A))));const P=await fetch(`/api/shipping/profiles/${_}`,{method:"PUT",headers:I,body:JSON.stringify(T),credentials:"include"});if(!P.ok){const O=await P.json().catch(()=>({}));throw new Error(O.error||"Failed to update shipping profile")}return P.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/shipping/profiles"]}),u({title:"Success",description:"Shipping profile updated successfully"}),r(!1),l(null),g()},onError:_=>{u({title:"Error",description:_.message||"Failed to update shipping profile",variant:"destructive"})}}),b=st({mutationFn:async _=>{const T=localStorage.getItem("adminAccessToken"),j=localStorage.getItem("accessToken"),S=localStorage.getItem("user"),A={"Content-Type":"application/json"};T&&(A["x-admin-token"]=T),j&&(A["x-access-token"]=j,A.Authorization=`Bearer ${j}`),S&&(A["x-user-data"]=btoa(unescape(encodeURIComponent(S))));const I=await fetch(`/api/shipping/profiles/${_}`,{method:"DELETE",headers:A,credentials:"include"});if(!I.ok){const P=await I.json().catch(()=>({}));throw new Error(P.error||"Failed to delete shipping profile")}return I.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/shipping/profiles"]}),u({title:"Success",description:"Shipping profile deleted successfully"}),a(null)},onError:_=>{u({title:"Error",description:_.message||"Failed to delete shipping profile",variant:"destructive"})}}),v=()=>{if(!c.name.trim()){u({title:"Error",description:"Profile name is required",variant:"destructive"});return}y.mutate({name:c.name,description:c.description,weight:c.weight?parseFloat(c.weight):void 0,scale:c.scale,length:c.length?parseFloat(c.length):void 0,width:c.width?parseFloat(c.width):void 0,height:c.height?parseFloat(c.height):void 0})},N=()=>{if(o){if(!c.name.trim()){u({title:"Error",description:"Profile name is required",variant:"destructive"});return}w.mutate({id:o._id,data:{name:c.name,description:c.description,weight:c.weight?parseFloat(c.weight):void 0,scale:c.scale,length:c.length?parseFloat(c.length):void 0,width:c.width?parseFloat(c.width):void 0,height:c.height?parseFloat(c.height):void 0}})}},C=_=>{var T,j,S,A;l(_),d({name:_.name||"",description:_.description||"",weight:((T=_.weight)==null?void 0:T.toString())||"",scale:_.scale||"oz",length:((j=_.length)==null?void 0:j.toString())||"",width:((S=_.width)==null?void 0:S.toString())||"",height:((A=_.height)==null?void 0:A.toString())||""}),r(!0)};return n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Shipping Profiles"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage general shipping profiles for giveaways and products"})]}),n.jsxs(G,{onClick:()=>{g(),e(!0)},children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),"Add Shipping Profile"]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs(we,{className:"flex items-center gap-2",children:[n.jsx(Ri,{className:"h-5 w-5"}),"All Shipping Profiles"]}),n.jsxs(Fe,{children:[x.length," shipping profile",x.length!==1?"s":""," available"]})]}),n.jsx(ue,{children:h?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):x.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(hs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No shipping profiles found"}),n.jsx("p",{className:"text-sm",children:"Create your first shipping profile to get started"})]}):n.jsx("div",{className:"space-y-3",children:x.map(_=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:n.jsx(Ri,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:_.name}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[_.weight&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(uj,{className:"h-3 w-3"}),_.weight," ",_.scale||"oz"]}),(_.length||_.width||_.height)&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(SU,{className:"h-3 w-3"}),_.length||0,"  ",_.width||0,"  ",_.height||0," in"]})]}),_.description&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[_.description.substring(0,50),_.description.length>50?"...":""]})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(G,{variant:"ghost",size:"icon",onClick:()=>C(_),children:n.jsx(Xh,{className:"h-4 w-4"})}),n.jsx(G,{variant:"ghost",size:"icon",onClick:()=>a(_._id),children:n.jsx(bn,{className:"h-4 w-4 text-destructive"})})]})]},_._id))})})]}),n.jsx(ys,{open:t,onOpenChange:e,children:n.jsxs(fs,{className:"max-w-md",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Create Shipping Profile"}),n.jsx(Ls,{children:"Add a new general shipping profile"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"name",children:"Name *"}),n.jsx(le,{id:"name",value:c.name,onChange:_=>d(T=>({...T,name:_.target.value})),placeholder:"e.g., Small Package"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"description",children:"Description"}),n.jsx(le,{id:"description",value:c.description,onChange:_=>d(T=>({...T,description:_.target.value})),placeholder:"Optional description"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"weight",children:"Weight"}),n.jsx(le,{id:"weight",type:"number",step:"0.1",min:"0",value:c.weight,onChange:_=>d(T=>({...T,weight:_.target.value})),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"scale",children:"Unit"}),n.jsxs(Gt,{value:c.scale,onValueChange:_=>d(T=>({...T,scale:_})),children:[n.jsx(Bt,{children:n.jsx(Yt,{})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"oz",children:"oz"}),n.jsx(fe,{value:"lb",children:"lb"}),n.jsx(fe,{value:"g",children:"g"}),n.jsx(fe,{value:"kg",children:"kg"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(re,{children:"Dimensions (inches)"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[n.jsx(le,{type:"number",step:"0.1",min:"0",value:c.length,onChange:_=>d(T=>({...T,length:_.target.value})),placeholder:"L"}),n.jsx(le,{type:"number",step:"0.1",min:"0",value:c.width,onChange:_=>d(T=>({...T,width:_.target.value})),placeholder:"W"}),n.jsx(le,{type:"number",step:"0.1",min:"0",value:c.height,onChange:_=>d(T=>({...T,height:_.target.value})),placeholder:"H"})]})]})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),n.jsx(G,{onClick:v,disabled:y.isPending,children:y.isPending?"Creating...":"Create Profile"})]})]})}),n.jsx(ys,{open:s,onOpenChange:r,children:n.jsxs(fs,{className:"max-w-md",children:[n.jsxs(ps,{children:[n.jsx(ms,{children:"Edit Shipping Profile"}),n.jsx(Ls,{children:"Update shipping profile details"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-name",children:"Name *"}),n.jsx(le,{id:"edit-name",value:c.name,onChange:_=>d(T=>({...T,name:_.target.value})),placeholder:"e.g., Small Package"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-description",children:"Description"}),n.jsx(le,{id:"edit-description",value:c.description,onChange:_=>d(T=>({...T,description:_.target.value})),placeholder:"Optional description"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-weight",children:"Weight"}),n.jsx(le,{id:"edit-weight",type:"number",step:"0.1",min:"0",value:c.weight,onChange:_=>d(T=>({...T,weight:_.target.value})),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"edit-scale",children:"Unit"}),n.jsxs(Gt,{value:c.scale,onValueChange:_=>d(T=>({...T,scale:_})),children:[n.jsx(Bt,{children:n.jsx(Yt,{})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"oz",children:"oz"}),n.jsx(fe,{value:"lb",children:"lb"}),n.jsx(fe,{value:"g",children:"g"}),n.jsx(fe,{value:"kg",children:"kg"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(re,{children:"Dimensions (inches)"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[n.jsx(le,{type:"number",step:"0.1",min:"0",value:c.length,onChange:_=>d(T=>({...T,length:_.target.value})),placeholder:"L"}),n.jsx(le,{type:"number",step:"0.1",min:"0",value:c.width,onChange:_=>d(T=>({...T,width:_.target.value})),placeholder:"W"}),n.jsx(le,{type:"number",step:"0.1",min:"0",value:c.height,onChange:_=>d(T=>({...T,height:_.target.value})),placeholder:"H"})]})]})]}),n.jsxs(ei,{children:[n.jsx(G,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(G,{onClick:N,disabled:w.isPending,children:w.isPending?"Saving...":"Save Changes"})]})]})}),n.jsx(Ca,{open:!!i,onOpenChange:()=>a(null),children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Shipping Profile"}),n.jsx(Fi,{children:"Are you sure you want to delete this shipping profile? This action cannot be undone."})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{children:"Cancel"}),n.jsx($i,{onClick:()=>i&&b.mutate(i),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:b.isPending?"Deleting...":"Delete"})]})]})})]})})}function ehe({open:t,onOpenChange:e,order:s}){var T,j,S,A,I,P,O,D,M,J,X;const{toast:r}=Et(),i=cu(),{data:a,isLoading:o}=Ve({queryKey:["/api/orders",s==null?void 0:s._id],queryFn:async()=>{if(!(s!=null&&s._id))return null;const U=await fetch(`/api/orders/${s._id}`);if(!U.ok)throw new Error("Failed to fetch order details");const $=await U.json();return $.data||$},enabled:t&&!!(s!=null&&s._id),staleTime:3e4}),l=st({mutationFn:async()=>{const U=c==null?void 0:c.shipment_id;if(!U)throw new Error("No shipment ID found for this order");return await(await ut("POST","/api/shipping/refund/label",{shipment_id:U})).json()},onSuccess:U=>{U.success?(i.invalidateQueries({queryKey:["admin-giveaway-orders"]}),i.invalidateQueries({predicate:$=>Array.isArray($.queryKey)&&$.queryKey[0]==="admin-shipments"}),r({title:"Label refunded!",description:"The shipping label has been refunded successfully."}),e(!1)):r({title:"Refund failed",description:U.message||"Unable to refund shipping label",variant:"destructive"})},onError:U=>{r({title:"Failed to refund shipping label",description:U.message||"An unexpected error occurred",variant:"destructive"})}}),c=a||s;if(!s)return null;const d=(c==null?void 0:c.tracking_number)||((T=c==null?void 0:c.tracking_url)==null?void 0:T.split("=")[1]),u=(c==null?void 0:c.label)||(c==null?void 0:c.shipping_label_url),f=(c==null?void 0:c.carrier)||"USPS",h=(c==null?void 0:c.servicelevel)||(c==null?void 0:c.service)||"-",x=(c==null?void 0:c.shipping_fee)||(c==null?void 0:c.total_shipping_cost)||0,g=(c==null?void 0:c.seller_shipping_fee_pay)||0,y=((j=c==null?void 0:c.weight)==null?void 0:j.toString())||"0",w=(c==null?void 0:c.scale)||"oz",b=c==null?void 0:c.length,v=c==null?void 0:c.width,N=c==null?void 0:c.height,C=(S=c==null?void 0:c.customer)==null?void 0:S.address,_=()=>{if(!(c!=null&&c.shipment_id)){r({title:"Cannot refund label",description:"No shipment ID found for this order",variant:"destructive"});return}l.mutate()};return n.jsx(r6,{open:t,onOpenChange:e,children:n.jsxs(lS,{className:"w-full sm:max-w-lg overflow-y-auto",children:[n.jsx(cS,{children:n.jsxs(dS,{className:"flex items-center gap-2",children:[n.jsx(Ri,{className:"h-5 w-5"}),"Shipment Details"]})}),o?n.jsx("div",{className:"mt-6 flex items-center justify-center py-12",children:n.jsx(dn,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"mt-6 space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-medium",children:"Order Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Order ID"}),n.jsxs("p",{className:"font-mono",children:["#",(c==null?void 0:c.invoice)||((A=c==null?void 0:c._id)==null?void 0:A.slice(-8))]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),n.jsx(Ye,{variant:"outline",children:(I=c==null?void 0:c.status)==null?void 0:I.replace(/_/g," ")})]})]})]}),n.jsx(vi,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-medium text-sm",children:"Order Items"}),n.jsxs("div",{className:"space-y-1",children:[(c==null?void 0:c.giveaway)&&c.giveaway._id&&n.jsxs("div",{className:"flex items-center gap-2 py-2 px-2 bg-muted/50 rounded text-xs",children:[c.giveaway.images&&c.giveaway.images[0]?n.jsx("img",{src:c.giveaway.images[0],alt:c.giveaway.name,className:"w-10 h-10 object-cover rounded"}):n.jsx("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"font-medium truncate",children:[c.giveaway.name," #",c.invoice||c._id.slice(-8)]}),n.jsxs("p",{className:"text-muted-foreground",children:["Giveaway  Qty: ",c.giveaway.quantity||1]})]}),n.jsx("p",{className:"font-medium",children:"$0.00"})]}),(c==null?void 0:c.items)&&c.items.length>0&&c.items.map((U,$)=>{var L,te;return n.jsxs("div",{className:"flex items-center gap-2 py-2 px-2 bg-muted/50 rounded text-xs",children:[U.images&&U.images[0]?n.jsx("img",{src:U.images[0],alt:((L=U.productId)==null?void 0:L.name)||U.name||"Item",className:"w-10 h-10 object-cover rounded"}):n.jsx("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:n.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"font-medium truncate",children:[((te=U.productId)==null?void 0:te.name)||U.name||"Unknown Item",U.order_reference&&` ${U.order_reference}`]}),n.jsxs("p",{className:"text-muted-foreground",children:["Qty: ",U.quantity||1]})]}),n.jsxs("p",{className:"font-medium",children:["$",((U.price||0)*(U.quantity||1)).toFixed(2)]})]},U._id||$)}),!((P=c==null?void 0:c.giveaway)!=null&&P._id)&&(!(c!=null&&c.items)||c.items.length===0)&&n.jsx("p",{className:"text-xs text-muted-foreground text-center py-1",children:"No items"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between py-2 border-b",children:[n.jsx("span",{className:"text-muted-foreground",children:"Order date"}),n.jsx("span",{className:"font-medium",children:c!=null&&c.date?new Date(c.date).toLocaleDateString():c!=null&&c.createdAt?new Date(c.createdAt).toLocaleDateString():"-"})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b",children:[n.jsx("span",{className:"text-muted-foreground",children:"Buyer"}),n.jsx("span",{className:"font-medium",children:((O=c==null?void 0:c.customer)==null?void 0:O.userName)||`${((D=c==null?void 0:c.customer)==null?void 0:D.firstName)||""} ${((M=c==null?void 0:c.customer)==null?void 0:M.lastName)||""}`.trim()||"-"})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b",children:[n.jsx("span",{className:"text-muted-foreground",children:"Seller paid shipping"}),n.jsxs("span",{className:"font-medium",children:["$",(g||0).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b",children:[n.jsx("span",{className:"text-muted-foreground",children:"Service level"}),n.jsx("span",{className:"font-medium",children:h})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b",children:[n.jsx("span",{className:"text-muted-foreground",children:"Package weight"}),n.jsxs("span",{className:"font-medium",children:[y," ",w]})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b",children:[n.jsx("span",{className:"text-muted-foreground",children:"Package dimensions"}),n.jsx("span",{className:"font-medium",children:b&&v&&N?`${b} x ${v} x ${N} in`:"-"})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b",children:[n.jsx("span",{className:"text-muted-foreground",children:"Carrier"}),n.jsx(Ye,{variant:"secondary",children:f})]}),n.jsxs("div",{className:"flex justify-between py-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Buyer Paid"}),n.jsxs("span",{className:"font-medium",children:["$",x.toFixed(2)]})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Shipping Actions"}),C&&n.jsxs("div",{className:"flex gap-4",children:[n.jsx("span",{className:"text-muted-foreground w-20 shrink-0",children:"Ship to"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{className:"font-medium",children:[C.firstName||((J=C.name)==null?void 0:J.split(" ")[0])||""," ",C.lastName||((X=C.name)==null?void 0:X.split(" ").slice(1).join(" "))||""]}),n.jsx("p",{children:C.addrress1}),C.addrress2&&n.jsx("p",{children:C.addrress2}),n.jsxs("p",{children:[C.city," ",C.state," ",C.zipcode]}),n.jsx("p",{children:C.country||"US"})]})]}),d&&n.jsxs("div",{className:"flex gap-4",children:[n.jsx("span",{className:"text-muted-foreground w-20 shrink-0",children:"Tracking #"}),n.jsxs("div",{className:"text-sm",children:[c!=null&&c.tracking_url?n.jsx("a",{href:c.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:d}):n.jsx("span",{className:"font-mono",children:d}),n.jsxs("p",{className:"text-muted-foreground",children:[f," ",h]})]})]}),n.jsxs("div",{className:"space-y-2 pt-2",children:[u&&n.jsxs(G,{variant:"default",className:"w-full",onClick:()=>window.open(u,"_blank"),"data-testid":"button-print-label",children:[n.jsx(RN,{className:"h-4 w-4 mr-2"}),"Print Shipping Label"]}),(c==null?void 0:c.shipment_id)&&u&&n.jsxs(G,{variant:"destructive",className:"w-full",onClick:_,disabled:l.isPending,"data-testid":"button-refund-label",children:[l.isPending?n.jsx(dn,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(bv,{className:"h-4 w-4 mr-2"}),"Refund Label"]})]})]})]})]})})}var Xb,y0="HoverCard",[tF]=Cn(y0,[wo]),v0=wo(),[the,zS]=tF(y0),sF=t=>{const{__scopeHoverCard:e,children:s,open:r,defaultOpen:i,onOpenChange:a,openDelay:o=700,closeDelay:l=300}=t,c=v0(e),d=p.useRef(0),u=p.useRef(0),f=p.useRef(!1),h=p.useRef(!1),[x,g]=si({prop:r,defaultProp:i??!1,onChange:a,caller:y0}),y=p.useCallback(()=>{clearTimeout(u.current),d.current=window.setTimeout(()=>g(!0),o)},[o,g]),w=p.useCallback(()=>{clearTimeout(d.current),!f.current&&!h.current&&(u.current=window.setTimeout(()=>g(!1),l))},[l,g]),b=p.useCallback(()=>g(!1),[g]);return p.useEffect(()=>()=>{clearTimeout(d.current),clearTimeout(u.current)},[]),n.jsx(the,{scope:e,open:x,onOpenChange:g,onOpen:y,onClose:w,onDismiss:b,hasSelectionRef:f,isPointerDownOnContentRef:h,children:n.jsx(kv,{...c,children:s})})};sF.displayName=y0;var nF="HoverCardTrigger",rF=p.forwardRef((t,e)=>{const{__scopeHoverCard:s,...r}=t,i=zS(nF,s),a=v0(s);return n.jsx(Pf,{asChild:!0,...a,children:n.jsx(Je.a,{"data-state":i.open?"open":"closed",...r,ref:e,onPointerEnter:Ie(t.onPointerEnter,Zy(i.onOpen)),onPointerLeave:Ie(t.onPointerLeave,Zy(i.onClose)),onFocus:Ie(t.onFocus,i.onOpen),onBlur:Ie(t.onBlur,i.onClose),onTouchStart:Ie(t.onTouchStart,o=>o.preventDefault())})})});rF.displayName=nF;var she="HoverCardPortal",[Hhe,nhe]=tF(she,{forceMount:void 0}),Qy="HoverCardContent",iF=p.forwardRef((t,e)=>{const s=nhe(Qy,t.__scopeHoverCard),{forceMount:r=s.forceMount,...i}=t,a=zS(Qy,t.__scopeHoverCard);return n.jsx(hn,{present:r||a.open,children:n.jsx(rhe,{"data-state":a.open?"open":"closed",...i,onPointerEnter:Ie(t.onPointerEnter,Zy(a.onOpen)),onPointerLeave:Ie(t.onPointerLeave,Zy(a.onClose)),ref:e})})});iF.displayName=Qy;var rhe=p.forwardRef((t,e)=>{const{__scopeHoverCard:s,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,...l}=t,c=zS(Qy,s),d=v0(s),u=p.useRef(null),f=ft(e,u),[h,x]=p.useState(!1);return p.useEffect(()=>{if(h){const g=document.body;return Xb=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=Xb,g.style.webkitUserSelect=Xb}}},[h]),p.useEffect(()=>{if(u.current){const g=()=>{x(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var w;((w=document.getSelection())==null?void 0:w.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),p.useEffect(()=>{u.current&&ohe(u.current).forEach(y=>y.setAttribute("tabindex","-1"))}),n.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:Ie(a,g=>{g.preventDefault()}),onDismiss:c.onDismiss,children:n.jsx(qm,{...d,...l,onPointerDown:Ie(l.onPointerDown,g=>{g.currentTarget.contains(g.target)&&x(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:h?"text":void 0,WebkitUserSelect:h?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),ihe="HoverCardArrow",ahe=p.forwardRef((t,e)=>{const{__scopeHoverCard:s,...r}=t,i=v0(s);return n.jsx(Vm,{...i,...r,ref:e})});ahe.displayName=ihe;function Zy(t){return e=>e.pointerType==="touch"?void 0:t()}function ohe(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;s.nextNode();)e.push(s.currentNode);return e}var lhe=sF,che=rF,aF=iF;const dhe=lhe,uhe=che,oF=p.forwardRef(({className:t,align:e="center",sideOffset:s=4,...r},i)=>n.jsx(aF,{ref:i,align:e,sideOffset:s,className:Re("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]",t),...r}));oF.displayName=aF.displayName;const hhe=p.forwardRef(({className:t,...e},s)=>n.jsx("ul",{ref:s,className:Re("flex flex-row items-center gap-1",t),...e}));hhe.displayName="PaginationContent";const fhe=p.forwardRef(({className:t,...e},s)=>n.jsx("li",{ref:s,className:Re("",t),...e}));fhe.displayName="PaginationItem";function phe({currentPage:t,totalPages:e,totalItems:s,itemsPerPage:r,itemsPerPageOptions:i=[10,20,50,100],onPageChange:a,onItemsPerPageChange:o,showingText:l="items",className:c}){const d=s===0?0:(t-1)*r+1,u=Math.min(t*r,s),f=t>1,h=t<e,x=()=>a(1),g=()=>a(Math.max(1,t-1)),y=()=>a(Math.min(e,t+1)),w=()=>a(e),v=(()=>{const N=[];if(e<=5)for(let _=1;_<=e;_++)N.push(_);else{const _=Math.max(1,t-2),T=Math.min(e,_+5-1),j=Math.max(1,T-5+1);for(let S=j;S<=T;S++)N.push(S)}return N})();return s===0?n.jsx("div",{className:Re("flex items-center justify-center px-2",c),children:n.jsxs("div",{className:"text-sm text-muted-foreground","data-testid":"pagination-info",children:["No ",l," found"]})}):n.jsxs("div",{className:Re("flex items-center justify-between px-2",c),children:[n.jsxs("div",{className:"text-sm text-muted-foreground","data-testid":"pagination-info",children:["Showing ",d,"-",u," of ",s," ",l]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Items per page"}),n.jsxs(Gt,{value:r.toString(),onValueChange:N=>o(parseInt(N)),"data-testid":"pagination-items-per-page",children:[n.jsx(Bt,{className:"w-[70px]",children:n.jsx(Yt,{})}),n.jsx(qt,{children:i.map(N=>n.jsx(fe,{value:N.toString(),children:N},N))})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:x,disabled:!f,"data-testid":"pagination-first",className:"h-8 w-8 p-0",children:n.jsx(iU,{className:"h-4 w-4"})}),n.jsx(G,{variant:"outline",size:"sm",onClick:g,disabled:!f,"data-testid":"pagination-previous",className:"h-8 w-8 p-0",children:n.jsx(oi,{className:"h-4 w-4"})}),n.jsx("div",{className:"flex items-center space-x-1",children:v.map(N=>n.jsx(G,{variant:N===t?"default":"outline",size:"sm",onClick:()=>a(N),"data-testid":`pagination-page-${N}`,className:"h-8 w-8 p-0",children:N},N))}),n.jsx(G,{variant:"outline",size:"sm",onClick:y,disabled:!h,"data-testid":"pagination-next",className:"h-8 w-8 p-0",children:n.jsx(Vn,{className:"h-4 w-4"})}),n.jsx(G,{variant:"outline",size:"sm",onClick:w,disabled:!h,"data-testid":"pagination-last",className:"h-8 w-8 p-0",children:n.jsx(aU,{className:"h-4 w-4"})})]}),n.jsxs("span",{className:"text-sm text-muted-foreground","data-testid":"pagination-page-info",children:["Page ",t," of ",e]})]})]})}const Jb={unfulfilled:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",processing:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",progressing:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",ready_to_ship:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",shipped:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",shipping:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",delivered:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",pending_cancellation:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",pickup:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400"};function mhe(){var ge,Ae;const[t,e]=p.useState([]),[s,r]=p.useState([]),[i,a]=p.useState("all"),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,f]=p.useState("customer"),[h,x]=p.useState(1),[g,y]=p.useState(20),[w,b]=p.useState(null),[v,N]=p.useState(null),[C,_]=p.useState(!1),[T,j]=p.useState(null),[S,A]=p.useState(!1),[I,P]=p.useState(null),[O,D]=p.useState(void 0),[M,J]=p.useState(void 0),{user:X}=qi(),{toast:U}=Et(),$=Y=>{x(Y)},L=Y=>{y(Y),x(1)},te=()=>{x(1)},F=Y=>{a(Y),te()},z=Y=>{D(Y),te()},pe=Y=>{J(Y),te()},xe=Y=>{l(Y)},_e=()=>{d(o),te()},Me=()=>{a("all"),l(""),f("customer"),D(void 0),J(void 0),te()},{data:K,isLoading:Q,error:se,isError:ye,refetch:B}=Ve({queryKey:["admin-shipments",i,c,u,h,g,O==null?void 0:O.toISOString(),M==null?void 0:M.toISOString()],queryFn:async()=>{const Y=new URLSearchParams;i&&i!=="all"&&Y.set("status",i),c&&c.trim()&&(Y.set("search",c.trim()),Y.set("searchBy",u)),O&&Y.set("startDate",It(O,"yyyy-MM-dd")),M&&Y.set("endDate",It(M,"yyyy-MM-dd")),Y.set("page",h.toString()),Y.set("limit",g.toString());const je=await fetch(`/api/orders?${Y.toString()}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!je.ok)throw new Error(`API error: ${je.status}`);return je.json()},enabled:!!(X!=null&&X.admin),staleTime:0,refetchOnMount:!0}),ie=(K==null?void 0:K.data)||(K==null?void 0:K.orders)||[],ce=Array.isArray(ie)?ie:[],oe=(K==null?void 0:K.total)||((ge=K==null?void 0:K.pagination)==null?void 0:ge.total)||0,Z=(K==null?void 0:K.pages)||((Ae=K==null?void 0:K.pagination)==null?void 0:Ae.pages)||1,he=[...ce].sort((Y,je)=>{var mt,os,rs,bs,kn,Xe,Rt,Ot;if(w&&v){let Tt=0;if(w==="customer"){const St=typeof Y.customer=="object"?((mt=Y.customer)==null?void 0:mt.userName)||`${((os=Y.customer)==null?void 0:os.firstName)||""} ${((rs=Y.customer)==null?void 0:rs.lastName)||""}`.trim():"",ts=typeof je.customer=="object"?((bs=je.customer)==null?void 0:bs.userName)||`${((kn=je.customer)==null?void 0:kn.firstName)||""} ${((Xe=je.customer)==null?void 0:Xe.lastName)||""}`.trim():"";Tt=St.localeCompare(ts)}else if(w==="orderDate"){const St=Y.createdAt?new Date(Y.createdAt).getTime():0,ts=je.createdAt?new Date(je.createdAt).getTime():0;Tt=St-ts}else if(w==="items"){const St=(((Rt=Y.items)==null?void 0:Rt.length)||0)+(Y.giveaway&&Y.giveaway._id?1:0),ts=(((Ot=je.items)==null?void 0:Ot.length)||0)+(je.giveaway&&je.giveaway._id?1:0);Tt=St-ts}else if(w==="total"){const St=(Y.total||0)+(Y.tax||0)+(Y.shipping_fee||0),ts=(je.total||0)+(je.tax||0)+(je.shipping_fee||0);Tt=St-ts}else if(w==="status"){const St=Y.status||"",ts=je.status||"";Tt=St.localeCompare(ts)}return v==="asc"?Tt:-Tt}const ze=Y.createdAt?new Date(Y.createdAt):new Date(0);return(je.createdAt?new Date(je.createdAt):new Date(0)).getTime()-ze.getTime()}),Ne=(Y,je)=>{e(je?[...t,Y]:t.filter(ze=>ze!==Y))},Ke=Y=>{if(Y){const je=ce.map(ze=>ze._id);e(je)}else e([])},$e=Y=>{s.includes(Y)?r(s.filter(je=>je!==Y)):r([...s,Y])},W=Y=>{w===Y?v==="asc"?N("desc"):v==="desc"&&(b(null),N(null)):(b(Y),N("asc"))};return Q&&!K?n.jsx(Ze,{children:n.jsx("div",{className:"py-6",children:n.jsx("div",{className:"px-4 sm:px-6 md:px-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-muted rounded w-48 mb-8"}),n.jsx("div",{className:"h-96 bg-muted rounded"})]})})})}):ye?n.jsx(Ze,{children:n.jsx("div",{className:"py-6",children:n.jsx("div",{className:"px-4 sm:px-6 md:px-8",children:n.jsx(de,{className:"max-w-md mx-auto mt-8",children:n.jsx(ue,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-destructive text-5xl mb-4",children:""}),n.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Failed to Load Shipments"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:(se==null?void 0:se.message)||"Something went wrong. Please try again."}),n.jsxs(G,{onClick:()=>B(),"data-testid":"button-retry",children:[n.jsx(_U,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})})})})}):n.jsx(Ze,{children:n.jsx("div",{className:"py-6",children:n.jsxs("div",{className:"px-4 sm:px-6 md:px-8",children:[n.jsxs("div",{className:"mb-6 sm:mb-8",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground","data-testid":"text-shipments-title",children:"Shipments"}),n.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-0",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage all shipments across sellers"}),n.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:It(new Date,"MM/dd/yyyy 'at' h:mm a")})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("div",{className:"w-32 sm:w-36",children:n.jsxs(Gt,{value:u,onValueChange:Y=>{f(Y),te()},children:[n.jsx(Bt,{"data-testid":"select-search-by",children:n.jsx(Yt,{placeholder:"Search by..."})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"customer",children:"Customer"}),n.jsx(fe,{value:"seller",children:"Seller"})]})]})}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{type:"text",placeholder:`Search by ${u}...`,value:o,onChange:Y=>xe(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&_e()},className:"pl-10 w-full","data-testid":"input-search-shipments"})]}),n.jsxs(G,{onClick:_e,"data-testid":"button-search",children:[n.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Search"]})]}),n.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[n.jsx("div",{className:"w-full sm:w-64",children:n.jsxs(Gt,{value:i,onValueChange:F,children:[n.jsx(Bt,{"data-testid":"select-status",children:n.jsx(Yt,{placeholder:"Filter by status..."})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"all",children:"All"}),n.jsx(fe,{value:"unfulfilled",children:"Unfulfilled"}),n.jsx(fe,{value:"processing",children:"Need Label"}),n.jsx(fe,{value:"ready_to_ship",children:"Ready to Ship"}),n.jsx(fe,{value:"shipped",children:"Shipped"}),n.jsx(fe,{value:"delivered",children:"Delivered"}),n.jsx(fe,{value:"cancelled",children:"Cancelled"})]})]})}),n.jsx("div",{className:"w-full sm:w-auto",children:n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:"w-full sm:w-[160px] justify-start text-left font-normal","data-testid":"button-date-from",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),O?It(O,"MMM d, yyyy"):"From date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:O,onSelect:z,initialFocus:!0})})]})}),n.jsx("div",{className:"w-full sm:w-auto",children:n.jsxs(to,{children:[n.jsx(so,{asChild:!0,children:n.jsxs(G,{variant:"outline",className:"w-full sm:w-[160px] justify-start text-left font-normal","data-testid":"button-date-to",children:[n.jsx(Ci,{className:"mr-2 h-4 w-4"}),M?It(M,"MMM d, yyyy"):"To date"]})}),n.jsx(pa,{className:"w-auto p-0",align:"start",children:n.jsx(fa,{mode:"single",selected:M,onSelect:pe,initialFocus:!0})})]})}),n.jsxs(G,{variant:"outline",onClick:Me,"data-testid":"button-reset-filters",className:"w-full sm:w-auto",children:[n.jsx(un,{size:16,className:"mr-1"}),"Reset Filters"]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"w-full flex flex-col gap-3",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("div",{className:"text-sm text-muted-foreground whitespace-nowrap",children:["1-",he.length," of ",oe]}),t.length>0&&n.jsx("div",{className:"flex flex-wrap items-center gap-2",children:n.jsxs("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[t.length," selected"]})})]})}),n.jsx(de,{className:"shadow border border-border w-full",children:n.jsx(ue,{className:"p-0",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse divide-y divide-border text-sm",children:[n.jsx("thead",{className:"bg-muted",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-3 text-left w-10",children:n.jsx(tu,{checked:t.length===ce.length&&ce.length>0,onCheckedChange:Ke,"data-testid":"checkbox-select-all-shipments"})}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap cursor-pointer select-none hover:bg-muted/80",onClick:()=>W("customer"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Customer",w==="customer"?v==="asc"?n.jsx(rp,{size:14}):n.jsx(sp,{size:14}):n.jsx(np,{size:14,className:"opacity-50"})]})}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap cursor-pointer select-none hover:bg-muted/80",onClick:()=>W("orderDate"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Order Date",w==="orderDate"?v==="asc"?n.jsx(rp,{size:14}):n.jsx(sp,{size:14}):n.jsx(np,{size:14,className:"opacity-50"})]})}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-muted-foreground uppercase whitespace-nowrap cursor-pointer select-none hover:bg-muted/80",onClick:()=>W("items"),children:n.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Items",w==="items"?v==="asc"?n.jsx(rp,{size:14}):n.jsx(sp,{size:14}):n.jsx(np,{size:14,className:"opacity-50"})]})}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-muted-foreground uppercase whitespace-nowrap cursor-pointer select-none hover:bg-muted/80",onClick:()=>W("total"),children:n.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Total",w==="total"?v==="asc"?n.jsx(rp,{size:14}):n.jsx(sp,{size:14}):n.jsx(np,{size:14,className:"opacity-50"})]})}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Dimensions"}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap cursor-pointer select-none hover:bg-muted/80",onClick:()=>W("status"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Status",w==="status"?v==="asc"?n.jsx(rp,{size:14}):n.jsx(sp,{size:14}):n.jsx(np,{size:14,className:"opacity-50"})]})}),n.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-muted-foreground uppercase whitespace-nowrap",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-card divide-y divide-border",children:Q?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading shipments..."})]})})}):he.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:8,className:"px-4 py-12 text-center",children:[n.jsx(Ip,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No shipments found"}),n.jsx("p",{className:"text-muted-foreground",children:i!=="all"||c?"Try adjusting your filters or search":"Shipments will appear here when there are orders to ship"})]})}):he.map(Y=>{var je,ze,pt,mt,os,rs,bs,kn;return n.jsxs(qe.Fragment,{children:[n.jsxs("tr",{"data-testid":`row-shipment-${Y._id}`,className:"cursor-pointer hover:bg-muted/50",onClick:Xe=>{const Rt=Xe.target;Rt.closest("button")||Rt.closest("input")||Rt.closest('[role="menuitem"]')||(Y.label?(P(Y),A(!0)):(j(Y),_(!0)))},children:[n.jsx("td",{className:"px-3 py-3",children:n.jsx(tu,{checked:t.includes(Y._id),onCheckedChange:Xe=>Ne(Y._id,Xe),"data-testid":`checkbox-shipment-${Y._id}`})}),n.jsx("td",{className:"px-3 py-3",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(G,{variant:"ghost",size:"sm",onClick:()=>$e(Y._id),className:"p-1 h-5 w-5 mr-1","data-testid":`button-expand-${Y._id}`,children:s.includes(Y._id)?n.jsx(Sf,{size:12}):n.jsx(Vn,{size:12})}),n.jsx("div",{children:n.jsxs("div",{className:"flex items-center",children:[Y.status==="delivered"&&n.jsx("div",{className:"text-xs bg-accent text-accent-foreground px-1 rounded mr-1",children:"NEW"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:typeof Y.customer=="object"?((je=Y.customer)==null?void 0:je.userName)||`${((ze=Y.customer)==null?void 0:ze.firstName)||"Unknown"} ${((pt=Y.customer)==null?void 0:pt.lastName)||""}`.trim():"Unknown Customer"})]})})]})}),n.jsx("td",{className:"px-3 py-3",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:Y.createdAt?It(new Date(Y.createdAt),"MMM dd, yyyy"):It(new Date(Y.date||0),"MMM dd, yyyy")})}),n.jsx("td",{className:"px-3 py-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-sm text-foreground font-medium",children:(((mt=Y.items)==null?void 0:mt.length)||0)+(Y.giveaway&&Y.giveaway._id&&!((os=Y.items)!=null&&os.some(Xe=>{var Rt,Ot,Tt,St;return Xe.giveawayId===((Rt=Y.giveaway)==null?void 0:Rt._id)||((Ot=Xe.giveawayId)==null?void 0:Ot._id)===((Tt=Y.giveaway)==null?void 0:Tt._id)||Xe.type==="giveaway"&&Xe._id===((St=Y.giveaway)==null?void 0:St._id)}))?1:0)})})}),n.jsx("td",{className:"px-3 py-3",children:n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",(()=>{let Xe=0;return Y.items&&Y.items.length>0&&(Xe+=Y.items.reduce((Rt,Ot)=>{const Tt=Ot.quantity||0,St=Ot.price||0;return Rt+Tt*St},0)),(Xe+(Y.tax||0)+(Y.shipping_fee||0)).toFixed(2)})()]})})}),n.jsx("td",{className:"px-3 py-3",children:n.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[n.jsx("div",{className:"text-xs",children:(()=>{var Ot,Tt;if(Y.weight)return`${Y.weight}${Y.scale||"oz"}`;let Xe=0,Rt="oz";return Y.items&&Y.items.length>0&&Y.items.forEach(St=>{St.weight&&(Xe+=Number(St.weight)*(St.quantity||1),Rt=St.scale||"oz")}),(Tt=(Ot=Y.giveaway)==null?void 0:Ot.shipping_profile)!=null&&Tt.weight&&(Xe+=Number(Y.giveaway.shipping_profile.weight),Rt=Y.giveaway.shipping_profile.scale||"oz"),Xe>0?`${Xe}${Rt}`:"-"})()}),n.jsx("div",{className:"text-xs",children:Y.length&&Y.width&&Y.height?`${Y.height}${Y.width}${Y.length}"`:Y.giveaway?"":Y.items&&Y.items.length>0&&Y.items[0].height&&Y.items[0].width&&Y.items[0].length?`${Y.items[0].height}${Y.items[0].width}${Y.items[0].length}"`:""})]})}),n.jsx("td",{className:"px-3 py-3",children:n.jsxs("div",{children:[n.jsx(Ye,{className:`${Jb[Y.status]||"bg-gray-100 text-gray-800"} text-xs`,"data-testid":`shipment-status-${Y.status}`,children:Y.status==="delivered"?"Delivered":Y.status?Y.status.replaceAll("_"," ").charAt(0).toUpperCase()+Y.status.replaceAll("_"," ").slice(1):"Unknown"}),Y.tracking_number&&n.jsx("div",{className:"text-xs text-primary font-mono mt-1 cursor-pointer hover:bg-primary/10 px-1 py-0.5 rounded transition-colors",onClick:()=>{navigator.clipboard.writeText(Y.tracking_number),U({title:"Copied!",description:"Tracking number copied to clipboard"})},title:"Click to copy tracking number","data-testid":`tracking-number-${Y._id}`,children:Y.tracking_number})]})}),n.jsx("td",{className:"px-3 py-3",children:n.jsx("div",{className:"flex items-center justify-center",children:n.jsxs(No,{children:[n.jsx(_o,{asChild:!0,children:n.jsx(G,{variant:"ghost",size:"sm","data-testid":`button-order-menu-${Y._id}`,children:n.jsx(ON,{size:16})})}),n.jsxs(Ea,{align:"end",children:[n.jsxs(Zt,{onClick:()=>{Y.label?(P(Y),A(!0)):(j(Y),_(!0))},children:[n.jsx(cn,{size:14,className:"mr-2"}),"View Details"]}),Y.status==="ready_to_ship"&&Y.label&&n.jsxs(Zt,{onClick:()=>{window.open(Y.label,"_blank")},"data-testid":`menu-view-label-${Y._id}`,children:[n.jsx(uy,{size:14,className:"mr-2"}),"View Label"]})]})]})})})]}),s.includes(Y._id)&&n.jsx("tr",{className:"bg-muted/50","data-testid":`expanded-row-${Y._id}`,children:n.jsx("td",{colSpan:8,className:"px-3 py-3",children:n.jsxs("div",{className:"bg-card rounded-lg p-4 border",children:[n.jsx("h4",{className:"font-medium text-sm mb-3 text-muted-foreground",children:"Items in this order:"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Listing"}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Qty"}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Weight"}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Price"}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Shipping"}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:n.jsxs(dhe,{children:[n.jsx(uhe,{asChild:!0,children:n.jsxs("div",{className:"flex items-center gap-1 cursor-help",children:["S. Shipping",n.jsx(wc,{size:12,className:"text-muted-foreground"})]})}),n.jsx(oF,{className:"w-64",children:n.jsx("p",{className:"text-xs",children:"Shipping seller is paying"})})]})}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Type"}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Date"}),n.jsx("th",{className:"text-left py-2 px-2 font-medium text-muted-foreground",children:"Status"})]})}),n.jsxs("tbody",{children:[Y.giveaway&&Y.giveaway._id&&!((rs=Y.items)!=null&&rs.some(Xe=>{var Rt,Ot,Tt,St;return Xe.giveawayId===((Rt=Y.giveaway)==null?void 0:Rt._id)||((Ot=Xe.giveawayId)==null?void 0:Ot._id)===((Tt=Y.giveaway)==null?void 0:Tt._id)||Xe.type==="giveaway"&&Xe._id===((St=Y.giveaway)==null?void 0:St._id)}))&&n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"py-2 px-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[Y.giveaway.images&&Y.giveaway.images[0]?n.jsx("img",{src:Y.giveaway.images[0],alt:Y.giveaway.name,className:"w-10 h-10 object-cover rounded"}):n.jsx("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:n.jsx(Ip,{size:16,className:"text-muted-foreground"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium",children:[Y.giveaway.name,Y.order_reference?` ${Y.order_reference}`:""]}),n.jsx("p",{className:"text-xs text-muted-foreground lowercase",children:((bs=Y.giveaway.category)==null?void 0:bs.name)||"-"})]})]})}),n.jsx("td",{className:"py-2 px-2",children:Y.giveaway.quantity||1}),n.jsx("td",{className:"py-2 px-2",children:(kn=Y.giveaway.shipping_profile)!=null&&kn.weight?`${Y.giveaway.shipping_profile.weight} ${Y.giveaway.shipping_profile.scale||""}`:"-"}),n.jsx("td",{className:"py-2 px-2",children:"$0.00"}),n.jsxs("td",{className:"py-2 px-2",children:["$",(Y.shipping_fee||0).toFixed(2)]}),n.jsx("td",{className:"py-2 px-2 text-center",children:Y.seller_shipping_fee_pay&&Y.seller_shipping_fee_pay>0?`$${Y.seller_shipping_fee_pay.toFixed(2)}`:"-"}),n.jsx("td",{className:"py-2 px-2",children:"Giveaway"}),n.jsx("td",{className:"py-2 px-2 text-xs text-muted-foreground",children:Y.date?new Date(Y.date).toLocaleDateString():"-"}),n.jsx("td",{className:"py-2 px-2",children:n.jsx("span",{className:`px-2 py-1 rounded-md text-xs ${Jb[Y.status]||"bg-gray-100 text-gray-800"}`,children:Y.status||"unfulfilled"})})]}),Y.items&&Y.items.length>0&&Y.items.map((Xe,Rt)=>{var Tt,St,ts,Es;const Ot=Xe.status||Y.status;return n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"py-2 px-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[(Tt=Xe.productId)!=null&&Tt.images&&Xe.productId.images[0]?n.jsx("img",{src:Xe.productId.images[0],alt:Xe.productId.name,className:"w-10 h-10 object-cover rounded"}):n.jsx("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:n.jsx(Ip,{size:16,className:"text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:(St=Xe.productId)!=null&&St.name?`${Xe.productId.name}${Xe.order_reference?` ${Xe.order_reference}`:""}`:Xe.order_reference?`${Xe.order_reference}`:"Item"}),n.jsx("p",{className:"text-xs text-muted-foreground lowercase",children:((Es=(ts=Xe.productId)==null?void 0:ts.category)==null?void 0:Es.name)||"-"})]})]})}),n.jsx("td",{className:"py-2 px-2",children:Xe.quantity||1}),n.jsx("td",{className:"py-2 px-2",children:Xe.weight?`${Xe.weight} ${Xe.scale||""}`:"-"}),n.jsxs("td",{className:"py-2 px-2",children:["$",(Xe.price||0).toFixed(2)]}),n.jsxs("td",{className:"py-2 px-2",children:["$",(Xe.shipping_fee||0).toFixed(2)]}),n.jsx("td",{className:"py-2 px-2 text-center",children:Xe.seller_shipping_fee_pay&&Xe.seller_shipping_fee_pay>0?`$${Xe.seller_shipping_fee_pay.toFixed(2)}`:"-"}),n.jsx("td",{className:"py-2 px-2",children:Xe.orderType||(Y.tokshow?"Show":"Marketplace")}),n.jsx("td",{className:"py-2 px-2 text-xs text-muted-foreground",children:Y.date?new Date(Y.date).toLocaleDateString():"-"}),n.jsx("td",{className:"py-2 px-2",children:n.jsx("span",{className:`px-2 py-1 rounded-md text-xs ${Jb[Ot]||"bg-gray-100 text-gray-800"}`,children:(Ot==null?void 0:Ot.replace(/_/g," "))||"unfulfilled"})})]},`${Y._id}-${Rt}`)}),!Y.giveaway&&(!Y.items||Y.items.length===0)&&n.jsx("tr",{className:"border-b",children:n.jsx("td",{colSpan:9,className:"py-4 px-2 text-center text-muted-foreground",children:"No items available"})})]})]})})]})})})]},Y._id)})})]})})})})]}),n.jsx("div",{className:"mt-6",children:n.jsx(phe,{currentPage:h,totalPages:Z,totalItems:oe,itemsPerPage:g,itemsPerPageOptions:[10,20,50,100],onPageChange:$,onItemsPerPageChange:L,showingText:"shipping items",className:"bg-white dark:bg-gray-950 rounded-lg border p-4"})}),T&&n.jsx(j6,{order:T,open:C,onOpenChange:_}),I&&n.jsx(ehe,{order:I,open:S,onOpenChange:A})]})})})}const KT=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"},{value:"DC",label:"District of Columbia"}];function ghe(){const{user:t}=qi(),[e,s]=p.useState({name:"",phone:"",email:"",addrress1:"",addrress2:"",city:"",state:"",zipcode:"",countryCode:"US"}),{toast:r}=Et(),i=(t==null?void 0:t.id)||(t==null?void 0:t._id),{data:a,isLoading:o}=Ve({queryKey:["/api/address/all",i],queryFn:async()=>{if(!i)return[];const d=await fetch(`/api/address/all/${i}`,{credentials:"include",cache:"no-store"});if(!d.ok){if(d.status===404)return[];throw new Error("Failed to fetch address")}return d.json()},enabled:!!i,refetchOnWindowFocus:!1,staleTime:6e4});p.useEffect(()=>{if(a&&a.length>0){const d=a.find(u=>u.primary)||a[0];s({_id:d._id,name:d.name||"",phone:d.phone||"",email:d.email||"",addrress1:d.addrress1||"",addrress2:d.addrress2||"",city:d.city||"",state:d.state||d.stateCode||"",zipcode:d.zipcode||d.zip||"",countryCode:d.countryCode||"US"})}},[a]);const l=st({mutationFn:async d=>{const u=localStorage.getItem("adminAccessToken"),f=localStorage.getItem("accessToken"),h={"Content-Type":"application/json"};u&&(h["x-admin-token"]=u),f&&(h["x-access-token"]=f,h.Authorization=`Bearer ${f}`);const x=KT.find(b=>b.value===d.state),g={userId:i,name:d.name,phone:d.phone,email:d.email,addrress1:d.addrress1,addrress2:d.addrress2||"",city:d.city,state:(x==null?void 0:x.label)||d.state,stateCode:d.state,zipcode:d.zipcode,country:"United States",countryCode:d.countryCode},y=await fetch("/api/address",{method:"POST",headers:h,body:JSON.stringify(g),credentials:"include"}),w=await y.json();if(!y.ok)throw new Error(w.error||w.message||"Failed to save address");return w},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/address/all",i]}),r({title:"Success",description:"Business address saved successfully"})},onError:d=>{r({title:"Error",description:d.message||"Failed to save address",variant:"destructive"})}}),c=d=>{if(d.preventDefault(),!e.name.trim()){r({title:"Error",description:"Business name is required",variant:"destructive"});return}if(!e.phone.trim()){r({title:"Error",description:"Phone number is required",variant:"destructive"});return}if(!e.email.trim()){r({title:"Error",description:"Email is required",variant:"destructive"});return}if(!e.addrress1.trim()){r({title:"Error",description:"Street address is required",variant:"destructive"});return}if(!e.city.trim()){r({title:"Error",description:"City is required",variant:"destructive"});return}if(!e.state){r({title:"Error",description:"State is required",variant:"destructive"});return}if(!e.zipcode.trim()){r({title:"Error",description:"ZIP code is required",variant:"destructive"});return}l.mutate(e)};return n.jsx(Ze,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(vv,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Business Address"}),n.jsx("p",{className:"text-muted-foreground",children:"Enter your valid business address for shipping and fulfillment"})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Address Details"}),n.jsx(Fe,{children:"This address will be validated and used as the return address for shipping labels"})]}),n.jsx(ue,{children:o?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(dn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"name",children:"Business Name *"}),n.jsx(le,{id:"name",value:e.name,onChange:d=>s(u=>({...u,name:d.target.value})),placeholder:"Your business or company name"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"email",children:"Email *"}),n.jsx(le,{id:"email",type:"email",value:e.email,onChange:d=>s(u=>({...u,email:d.target.value})),placeholder:"business@example.com"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"phone",children:"Phone *"}),n.jsx(le,{id:"phone",type:"tel",value:e.phone,onChange:d=>s(u=>({...u,phone:d.target.value})),placeholder:"+1 (555) 123-4567"})]})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"addrress1",children:"Street Address *"}),n.jsx(le,{id:"addrress1",value:e.addrress1,onChange:d=>s(u=>({...u,addrress1:d.target.value})),placeholder:"123 Main Street"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"addrress2",children:"Address Line 2"}),n.jsx(le,{id:"addrress2",value:e.addrress2,onChange:d=>s(u=>({...u,addrress2:d.target.value})),placeholder:"Suite, unit, building, floor, etc. (optional)"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"city",children:"City *"}),n.jsx(le,{id:"city",value:e.city,onChange:d=>s(u=>({...u,city:d.target.value})),placeholder:"City"})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"state",children:"State *"}),n.jsxs(Gt,{value:e.state,onValueChange:d=>s(u=>({...u,state:d})),children:[n.jsx(Bt,{id:"state",children:n.jsx(Yt,{placeholder:"Select state"})}),n.jsx(qt,{children:KT.map(d=>n.jsx(fe,{value:d.value,children:d.label},d.value))})]})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"zipcode",children:"ZIP Code *"}),n.jsx(le,{id:"zipcode",value:e.zipcode,onChange:d=>s(u=>({...u,zipcode:d.target.value})),placeholder:"12345"})]})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"countryCode",children:"Country"}),n.jsxs(Gt,{value:e.countryCode,onValueChange:d=>s(u=>({...u,countryCode:d})),children:[n.jsx(Bt,{id:"countryCode",children:n.jsx(Yt,{placeholder:"Select country"})}),n.jsx(qt,{children:n.jsx(fe,{value:"US",children:"United States"})})]})]}),n.jsx("div",{className:"pt-4",children:n.jsx(G,{type:"submit",disabled:l.isPending,className:"w-full",children:l.isPending?n.jsxs(n.Fragment,{children:[n.jsx(dn,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating & Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"mr-2 h-4 w-4"}),"Save Address"]})})})]})})]})]})})}function xhe(){const[t,e]=p.useState(""),[s,r]=p.useState(""),[i,a]=p.useState(1),o=()=>{const g={"Content-Type":"application/json"},y=localStorage.getItem("adminAccessToken"),w=localStorage.getItem("accessToken"),b=localStorage.getItem("user");return y&&(g["x-admin-token"]=y),w&&(g["x-access-token"]=w),b&&(g["x-user-data"]=btoa(unescape(encodeURIComponent(b)))),g},{data:l,isLoading:c}=Ve({queryKey:["admin-referral-logs",i,s],queryFn:async()=>{const g=new URLSearchParams;g.append("page",String(i)),s.trim()&&g.append("username",s.trim());const y=await fetch(`/api/admin/referral-logs?${g.toString()}`,{credentials:"include",headers:o()});if(!y.ok)throw new Error("Failed to fetch referral logs");return y.json()}}),d=(l==null?void 0:l.logs)||[],u=(l==null?void 0:l.totalPages)||0,f=(l==null?void 0:l.totalRecords)||0,h=()=>{r(t),a(1)},x=()=>{e(""),r(""),a(1)};return n.jsx(Ze,{title:"Referral Logs",icon:n.jsx(Xr,{className:"h-5 w-5"}),children:n.jsx("div",{className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(we,{className:"text-lg",children:"All Referral Logs"}),n.jsxs(Ye,{variant:"secondary",children:[f," total"]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("div",{className:"relative flex-1 max-w-sm",children:[n.jsx(Rn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(le,{placeholder:"Search by username...",value:t,onChange:g=>e(g.target.value),onKeyDown:g=>g.key==="Enter"&&h(),className:"pl-10"})]}),n.jsx(G,{onClick:h,size:"sm",children:"Search"}),s&&n.jsxs(G,{onClick:x,variant:"ghost",size:"sm",children:[n.jsx(un,{className:"h-4 w-4 mr-1"})," Clear"]})]})]}),n.jsx(ue,{children:c?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):d.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No referral logs found."}):n.jsxs(n.Fragment,{children:[n.jsxs(Fs,{children:[n.jsx($s,{children:n.jsxs(yt,{children:[n.jsx(Ce,{children:"Referrer"}),n.jsx(Ce,{children:"Referred User"}),n.jsx(Ce,{children:"IP Address"}),n.jsx(Ce,{children:"Credit Redeemed"}),n.jsx(Ce,{children:"Date"})]})}),n.jsx(Us,{children:d.map(g=>{var y,w,b,v,N,C;return n.jsxs(yt,{children:[n.jsx(ke,{className:"font-medium",children:((y=g.referrerId)==null?void 0:y.userName)||((w=g.referrerId)==null?void 0:w._id)||"-"}),n.jsx(ke,{children:((b=g.referredUserId)==null?void 0:b.userName)||((v=g.referredUserId)==null?void 0:v._id)||"-"}),n.jsx(ke,{className:"text-muted-foreground text-sm",children:g.ip||"-"}),n.jsx(ke,{children:n.jsx(Ye,{variant:(N=g.referredUserId)!=null&&N.awarded_referal_credit?"default":"secondary",children:(C=g.referredUserId)!=null&&C.awarded_referal_credit?"Yes":"No"})}),n.jsx(ke,{className:"text-muted-foreground text-sm",children:g.createdAt?new Date(g.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]},g._id)})})]}),u>1&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",i," of ",u]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",size:"sm",onClick:()=>a(g=>Math.max(1,g-1)),disabled:i<=1,children:n.jsx(oi,{className:"h-4 w-4"})}),n.jsx(G,{variant:"outline",size:"sm",onClick:()=>a(g=>Math.min(u,g+1)),disabled:i>=u,children:n.jsx(Vn,{className:"h-4 w-4"})})]})]})]})})]})})})}function Bo({value:t="",onChange:e,resourceKey:s,label:r="Upload Image",maxFileSize:i=5*1024*1024,disabled:a=!1,aspectRatio:o="aspect-video"}){const[l,c]=p.useState(!1),[d,u]=p.useState(!1),f=p.useRef(null),{externalApiUrl:h}=Ff(),x=async C=>{if(!(a||l)){if(!C.type.startsWith("image/")){console.warn(`File ${C.name} is not an image`);return}if(C.size>i){console.warn(`File ${C.name} exceeds size limit`);return}c(!0);try{const _=new FormData;_.append("key",s),_.append("file",C);const T=localStorage.getItem("adminAccessToken"),j=localStorage.getItem("accessToken"),S=localStorage.getItem("user"),A={};T&&(A["x-admin-token"]=T),j&&(A["x-access-token"]=j),S&&(A["x-user-data"]=btoa(unescape(encodeURIComponent(S))));const I=await fetch("/api/themes/upload-resource",{method:"POST",credentials:"include",headers:A,body:_});if(!I.ok)throw new Error("Upload failed");const P=await I.json();if(P.success&&P.url)e(P.url);else throw new Error(P.message||"Upload failed")}catch(_){console.error("Upload error:",_)}finally{c(!1)}}},g=C=>{if(C.preventDefault(),u(!1),a||l)return;const _=Array.from(C.dataTransfer.files);_.length>0&&x(_[0])},y=C=>{C.preventDefault(),!a&&!l&&u(!0)},w=C=>{C.preventDefault(),u(!1)},b=C=>{C.target.files&&C.target.files.length>0&&x(C.target.files[0]),f.current&&(f.current.value="")},v=()=>{a||l||e("")},N=su(t,h);return n.jsx("div",{className:"space-y-2",children:t?n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:`${o} rounded-lg overflow-hidden border bg-muted`,children:n.jsx("img",{src:N,alt:r,className:"w-full h-full object-cover"})}),n.jsx(G,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:v,disabled:a||l,children:n.jsx(un,{className:"h-4 w-4"})})]}):n.jsx(de,{className:`border-2 border-dashed transition-colors ${d?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,children:n.jsx(ue,{className:"p-4",onDrop:g,onDragOver:y,onDragLeave:w,children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsx("div",{className:"mx-auto w-10 h-10 rounded-lg bg-muted flex items-center justify-center",children:l?n.jsx(dn,{className:"h-5 w-5 animate-spin text-muted-foreground"}):n.jsx(cy,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm font-medium",children:r}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag & drop or click to upload"})]}),n.jsxs(G,{type:"button",variant:"outline",size:"sm",disabled:a||l,onClick:()=>{var C;return(C=f.current)==null?void 0:C.click()},children:[n.jsx(ul,{className:"h-4 w-4 mr-2"}),l?"Uploading...":"Select File"]}),n.jsx(le,{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:b,disabled:a||l})]})})})})}const qo={hero:{title:"The Live Shopping Marketplace",subtitle:"Shop, sell, and connect around the things you love.",primaryButtonText:"Get Started",primaryButtonLink:"/signup",secondaryButtonText:"Browse Shows",secondaryButtonLink:"/marketplace",downloadText:"Download",phoneImage1:"",phoneImage2:"",qrCodeImage:""},joinFun:{title:"Join In the Fun",subtitle:"Take part in fast-paced auctions, incredible flash sales, live show giveaways, and so much more.",downloadText:"Download",phoneImage:"",qrCodeImage:""},gotItAll:{title:"We've Got It All",subtitle:"Search our marketplace to find the exact product you're looking for",downloadText:"Download",phoneImage:"",qrCodeImage:""},deals:{title:"Find Incredible Deals on Name Brands",subtitle:"From the brands you love, to hard-to-find specialty products. There's a deal on whatever you're looking for.",buttonText:"Start Shopping",buttonLink:"/signup",downloadText:"Download",trustBadgeText:"PEACE OF MIND",phoneImage:"",qrCodeImage:""},footer:{copyrightText:"2025"}};function yhe(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),[r,i]=p.useState(!1),{data:a,isLoading:o}=Ve({queryKey:["/api/content/landing"]}),l=(a==null?void 0:a.data)||null,[c,d]=p.useState(qo);p.useEffect(()=>{var g;l&&l.hero&&l.joinFun&&l.gotItAll&&l.deals&&(g=l.hero)!=null&&g.title&&d({...qo,...l,hero:{...qo.hero,...l.hero},joinFun:{...qo.joinFun,...l.joinFun},gotItAll:{...qo.gotItAll,...l.gotItAll},deals:{...qo.deals,...l.deals},footer:{...qo.footer,...l.footer}})},[l]);const u=st({mutationFn:async g=>(await ut("PUT","/api/admin/content/landing",g)).json(),onSuccess:()=>{We.invalidateQueries({queryKey:["/api/content/landing"]}),t({title:"Success",description:"Landing page updated successfully"}),i(!1)},onError:g=>{t({title:"Error",description:g.message||"Failed to update landing page",variant:"destructive"}),i(!1)}}),f=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}i(!0),u.mutate(c)},h=st({mutationFn:async()=>(await ut("PUT","/api/admin/content/landing",qo)).json(),onSuccess:()=>{d(qo),We.invalidateQueries({queryKey:["/api/content/landing"]}),t({title:"Success",description:"Landing page reset to default"})},onError:g=>{t({title:"Error",description:g.message||"Failed to reset landing page",variant:"destructive"})}}),x=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}h.mutate()};return o?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Landing Page Editor"}),n.jsx("p",{className:"text-muted-foreground",children:"Customize the 4-section landing page with images and text"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",onClick:x,disabled:!e||s||h.isPending,"data-testid":"button-reset-default",children:"Reset to Default"}),n.jsxs(G,{onClick:f,disabled:r||!e||s,"data-testid":"button-save-all",className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),r?"Saving...":"Save All Changes"]})]})]}),s&&n.jsx(Xs,{children:n.jsx(Js,{children:"Content editing is disabled in demo mode"})}),n.jsxs(Vi,{defaultValue:"hero",className:"space-y-6",children:[n.jsxs(li,{className:"grid w-full grid-cols-5",children:[n.jsx(_t,{value:"hero",children:"Section 1: Hero"}),n.jsx(_t,{value:"join-fun",children:"Section 2: Join Fun"}),n.jsx(_t,{value:"got-it-all",children:"Section 3: Got It All"}),n.jsx(_t,{value:"deals",children:"Section 4: Deals"}),n.jsx(_t,{value:"footer",children:"Footer"})]}),n.jsx(Ft,{value:"hero",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Section 1: Hero (Gradient Background)"}),n.jsx(Fe,{children:"Main banner with phone mockups and call-to-action buttons"})]}),n.jsxs(ue,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Text Content"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"hero-title",children:"Title"}),n.jsx(le,{id:"hero-title",value:c.hero.title,onChange:g=>d({...c,hero:{...c.hero,title:g.target.value}}),disabled:!e||s,placeholder:"The Live Shopping Marketplace","data-testid":"input-hero-title"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"hero-subtitle",children:"Subtitle"}),n.jsx(zs,{id:"hero-subtitle",value:c.hero.subtitle,onChange:g=>d({...c,hero:{...c.hero,subtitle:g.target.value}}),disabled:!e||s,placeholder:"Shop, sell, and connect around the things you love.","data-testid":"input-hero-subtitle"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"hero-primary-btn",children:"Primary Button Text"}),n.jsx(le,{id:"hero-primary-btn",value:c.hero.primaryButtonText,onChange:g=>d({...c,hero:{...c.hero,primaryButtonText:g.target.value}}),disabled:!e||s,placeholder:"Get Started","data-testid":"input-hero-primary-btn"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"hero-primary-link",children:"Primary Button Link"}),n.jsx(le,{id:"hero-primary-link",value:c.hero.primaryButtonLink,onChange:g=>d({...c,hero:{...c.hero,primaryButtonLink:g.target.value}}),disabled:!e||s,placeholder:"/signup","data-testid":"input-hero-primary-link"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"hero-secondary-btn",children:"Secondary Button Text"}),n.jsx(le,{id:"hero-secondary-btn",value:c.hero.secondaryButtonText,onChange:g=>d({...c,hero:{...c.hero,secondaryButtonText:g.target.value}}),disabled:!e||s,placeholder:"Browse Shows","data-testid":"input-hero-secondary-btn"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"hero-secondary-link",children:"Secondary Button Link"}),n.jsx(le,{id:"hero-secondary-link",value:c.hero.secondaryButtonLink,onChange:g=>d({...c,hero:{...c.hero,secondaryButtonLink:g.target.value}}),disabled:!e||s,placeholder:"/marketplace","data-testid":"input-hero-secondary-link"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"hero-download",children:"Download Label"}),n.jsx(le,{id:"hero-download",value:c.hero.downloadText,onChange:g=>d({...c,hero:{...c.hero,downloadText:g.target.value}}),disabled:!e||s,placeholder:"Download","data-testid":"input-hero-download"})]})]}),n.jsx(vi,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Images"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Main Phone Screenshot"}),n.jsx(Bo,{value:c.hero.phoneImage1,onChange:g=>d({...c,hero:{...c.hero,phoneImage1:g}}),label:"Upload Main Phone Image",resourceKey:"landing-hero-phone1",disabled:!e||s,aspectRatio:"aspect-[9/16]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Secondary Phone Screenshot"}),n.jsx(Bo,{value:c.hero.phoneImage2,onChange:g=>d({...c,hero:{...c.hero,phoneImage2:g}}),label:"Upload Secondary Phone Image",resourceKey:"landing-hero-phone2",disabled:!e||s,aspectRatio:"aspect-[9/16]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"QR Code Image"}),n.jsx(Bo,{value:c.hero.qrCodeImage,onChange:g=>d({...c,hero:{...c.hero,qrCodeImage:g}}),label:"Upload QR Code",resourceKey:"landing-hero-qrcode",disabled:!e||s,aspectRatio:"aspect-square"})]})]})]})]})]})}),n.jsx(Ft,{value:"join-fun",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Section 2: Join In the Fun (Dark Background)"}),n.jsx(Fe,{children:"Features auctions, flash sales, and giveaways with phone mockup"})]}),n.jsxs(ue,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Text Content"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"join-title",children:"Title"}),n.jsx(le,{id:"join-title",value:c.joinFun.title,onChange:g=>d({...c,joinFun:{...c.joinFun,title:g.target.value}}),disabled:!e||s,placeholder:"Join In the Fun","data-testid":"input-join-title"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"join-subtitle",children:"Subtitle"}),n.jsx(zs,{id:"join-subtitle",value:c.joinFun.subtitle,onChange:g=>d({...c,joinFun:{...c.joinFun,subtitle:g.target.value}}),disabled:!e||s,placeholder:"Take part in fast-paced auctions, incredible flash sales...","data-testid":"input-join-subtitle"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"join-download",children:"Download Label"}),n.jsx(le,{id:"join-download",value:c.joinFun.downloadText,onChange:g=>d({...c,joinFun:{...c.joinFun,downloadText:g.target.value}}),disabled:!e||s,placeholder:"Download","data-testid":"input-join-download"})]})]}),n.jsx(vi,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Images"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Phone Screenshot"}),n.jsx(Bo,{value:c.joinFun.phoneImage,onChange:g=>d({...c,joinFun:{...c.joinFun,phoneImage:g}}),label:"Upload Phone Image",resourceKey:"landing-joinfun-phone",disabled:!e||s,aspectRatio:"aspect-[9/16]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"QR Code Image"}),n.jsx(Bo,{value:c.joinFun.qrCodeImage,onChange:g=>d({...c,joinFun:{...c.joinFun,qrCodeImage:g}}),label:"Upload QR Code",resourceKey:"landing-joinfun-qrcode",disabled:!e||s,aspectRatio:"aspect-square"})]})]})]})]})]})}),n.jsx(Ft,{value:"got-it-all",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Section 3: We've Got It All (Dark Background)"}),n.jsx(Fe,{children:"Marketplace search and product discovery with phone mockup"})]}),n.jsxs(ue,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Text Content"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"got-title",children:"Title"}),n.jsx(le,{id:"got-title",value:c.gotItAll.title,onChange:g=>d({...c,gotItAll:{...c.gotItAll,title:g.target.value}}),disabled:!e||s,placeholder:"We've Got It All","data-testid":"input-got-title"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"got-subtitle",children:"Subtitle"}),n.jsx(zs,{id:"got-subtitle",value:c.gotItAll.subtitle,onChange:g=>d({...c,gotItAll:{...c.gotItAll,subtitle:g.target.value}}),disabled:!e||s,placeholder:"Search our marketplace to find the exact product...","data-testid":"input-got-subtitle"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"got-download",children:"Download Label"}),n.jsx(le,{id:"got-download",value:c.gotItAll.downloadText,onChange:g=>d({...c,gotItAll:{...c.gotItAll,downloadText:g.target.value}}),disabled:!e||s,placeholder:"Download","data-testid":"input-got-download"})]})]}),n.jsx(vi,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Images"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Phone Screenshot"}),n.jsx(Bo,{value:c.gotItAll.phoneImage,onChange:g=>d({...c,gotItAll:{...c.gotItAll,phoneImage:g}}),label:"Upload Phone Image",resourceKey:"landing-gotitall-phone",disabled:!e||s,aspectRatio:"aspect-[9/16]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"QR Code Image"}),n.jsx(Bo,{value:c.gotItAll.qrCodeImage,onChange:g=>d({...c,gotItAll:{...c.gotItAll,qrCodeImage:g}}),label:"Upload QR Code",resourceKey:"landing-gotitall-qrcode",disabled:!e||s,aspectRatio:"aspect-square"})]})]})]})]})]})}),n.jsx(Ft,{value:"deals",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Section 4: Find Incredible Deals (Gradient Background)"}),n.jsx(Fe,{children:"Final call-to-action with trust badge and phone mockup"})]}),n.jsxs(ue,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Text Content"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"deals-title",children:"Title"}),n.jsx(le,{id:"deals-title",value:c.deals.title,onChange:g=>d({...c,deals:{...c.deals,title:g.target.value}}),disabled:!e||s,placeholder:"Find Incredible Deals on Name Brands","data-testid":"input-deals-title"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"deals-subtitle",children:"Subtitle"}),n.jsx(zs,{id:"deals-subtitle",value:c.deals.subtitle,onChange:g=>d({...c,deals:{...c.deals,subtitle:g.target.value}}),disabled:!e||s,placeholder:"From the brands you love, to hard-to-find specialty products...","data-testid":"input-deals-subtitle"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"deals-btn",children:"Button Text"}),n.jsx(le,{id:"deals-btn",value:c.deals.buttonText,onChange:g=>d({...c,deals:{...c.deals,buttonText:g.target.value}}),disabled:!e||s,placeholder:"Start Shopping","data-testid":"input-deals-btn"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"deals-link",children:"Button Link"}),n.jsx(le,{id:"deals-link",value:c.deals.buttonLink,onChange:g=>d({...c,deals:{...c.deals,buttonLink:g.target.value}}),disabled:!e||s,placeholder:"/signup","data-testid":"input-deals-link"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"deals-trust",children:"Trust Badge Text"}),n.jsx(le,{id:"deals-trust",value:c.deals.trustBadgeText,onChange:g=>d({...c,deals:{...c.deals,trustBadgeText:g.target.value}}),disabled:!e||s,placeholder:"PEACE OF MIND","data-testid":"input-deals-trust"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"deals-download",children:"Download Label"}),n.jsx(le,{id:"deals-download",value:c.deals.downloadText,onChange:g=>d({...c,deals:{...c.deals,downloadText:g.target.value}}),disabled:!e||s,placeholder:"Download","data-testid":"input-deals-download"})]})]}),n.jsx(vi,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Images"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"Phone Screenshot"}),n.jsx(Bo,{value:c.deals.phoneImage,onChange:g=>d({...c,deals:{...c.deals,phoneImage:g}}),label:"Upload Phone Image",resourceKey:"landing-deals-phone",disabled:!e||s,aspectRatio:"aspect-[9/16]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{children:"QR Code Image"}),n.jsx(Bo,{value:c.deals.qrCodeImage,onChange:g=>d({...c,deals:{...c.deals,qrCodeImage:g}}),label:"Upload QR Code",resourceKey:"landing-deals-qrcode",disabled:!e||s,aspectRatio:"aspect-square"})]})]})]})]})]})}),n.jsx(Ft,{value:"footer",className:"space-y-6",children:n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Footer"}),n.jsx(Fe,{children:"Bottom section with links and copyright"})]}),n.jsx(ue,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"footer-copyright",children:"Copyright Year"}),n.jsx(le,{id:"footer-copyright",value:c.footer.copyrightText,onChange:g=>d({...c,footer:{...c.footer,copyrightText:g.target.value}}),disabled:!e||s,placeholder:"2025","data-testid":"input-footer-copyright"})]})})]})})]})]})})}function vhe(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),[,r]=Ds(),[i,a]=p.useState(!1),[o,l]=p.useState(null),{data:c,isLoading:d}=Ve({queryKey:["/api/admin/articles"]}),u=(c==null?void 0:c.data)||[],f=st({mutationFn:async v=>{const N=await fetch(`/api/admin/articles/${v}`,{method:"DELETE",credentials:"include"});if(!N.ok){const C=await N.json();throw new Error(C.error||"Failed to delete article")}return N.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/articles"]}),t({title:"Success",description:"Help article deleted successfully"}),a(!1),l(null)},onError:v=>{t({title:"Error",description:v.message||"Failed to delete article",variant:"destructive"})}}),h=st({mutationFn:async({id:v,published:N})=>{const C=await fetch(`/api/admin/articles/${v}`,{credentials:"include"});if(!C.ok){const S=await C.json();throw new Error(S.error||"Failed to fetch article")}const T=(await C.json()).data,j=await fetch(`/api/admin/articles/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:T.title,slug:T.slug,excerpt:T.excerpt,content:T.content,category:T.category,published:N,order:T.order||0})});if(!j.ok){const S=await j.json();throw new Error(S.error||"Failed to update article")}return j.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/articles"]}),t({title:"Success",description:"Article visibility updated"})},onError:v=>{t({title:"Error",description:v.message||"Failed to update article",variant:"destructive"})}}),x=v=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot delete articles in demo mode":"You don't have permission to manage content",variant:"destructive"});return}l(v),a(!0)},g=()=>{o&&f.mutate(o)},y=(v,N)=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify articles in demo mode":"You don't have permission to manage content",variant:"destructive"});return}h.mutate({id:v,published:!N})},w=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot create articles in demo mode":"You don't have permission to manage content",variant:"destructive"});return}r("/admin/pages/general/new")},b=v=>{r(`/admin/pages/general/${v}`)};return d?n.jsx(Ze,{children:n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(ly,{className:"h-8 w-8"}),"General Help Articles"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage help center articles for buyers and sellers"})]}),n.jsxs(G,{onClick:w,"data-testid":"button-create-article",className:"gap-2",children:[n.jsx(fr,{className:"h-4 w-4"}),"New Article"]})]}),s&&n.jsx(Xs,{"data-testid":"alert-demo-mode",children:n.jsx(Js,{children:"Demo mode is enabled. Article management is read-only."})}),u.length===0?n.jsx(de,{children:n.jsxs(ue,{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-6",children:[n.jsx(ly,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles yet"}),n.jsx("p",{className:"text-muted-foreground mb-4 max-w-md",children:"Create your first help article to provide support and guidance to your users"}),n.jsxs(G,{onClick:w,className:"gap-2",children:[n.jsx(fr,{className:"h-4 w-4"}),"Create First Article"]})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(v=>n.jsxs(de,{className:"hover-elevate cursor-pointer transition-all","data-testid":`article-card-${v._id}`,children:[n.jsx(be,{children:n.jsx("div",{className:"flex items-start justify-between gap-2",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(we,{className:"text-lg line-clamp-2",children:v.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(Ye,{variant:v.published?"default":"secondary",className:"text-xs",children:v.published?n.jsxs(n.Fragment,{children:[n.jsx(cn,{className:"h-3 w-3 mr-1"}),"Published"]}):n.jsxs(n.Fragment,{children:[n.jsx(PC,{className:"h-3 w-3 mr-1"}),"Draft"]})}),n.jsx(Ye,{variant:"outline",className:"text-xs capitalize",children:v.category})]})]})})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsx(Fe,{className:"line-clamp-3",children:v.excerpt}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(G,{variant:"outline",size:"sm",onClick:()=>b(v._id),className:"flex-1 gap-2","data-testid":`button-edit-${v._id}`,children:[n.jsx(Xh,{className:"h-4 w-4"}),"Edit"]}),n.jsx(G,{variant:v.published?"secondary":"default",size:"sm",onClick:N=>{N.stopPropagation(),y(v._id,v.published)},className:"gap-2","data-testid":`button-toggle-publish-${v._id}`,children:v.published?n.jsxs(n.Fragment,{children:[n.jsx(PC,{className:"h-4 w-4"}),"Unpublish"]}):n.jsxs(n.Fragment,{children:[n.jsx(cn,{className:"h-4 w-4"}),"Publish"]})}),n.jsx(G,{variant:"destructive",size:"sm",onClick:N=>{N.stopPropagation(),x(v._id)},"data-testid":`button-delete-${v._id}`,children:n.jsx(bn,{className:"h-4 w-4"})})]})]})]},v._id))}),n.jsx(Ca,{open:i,onOpenChange:a,children:n.jsxs(Oi,{children:[n.jsxs(Di,{children:[n.jsx(Li,{children:"Delete Article"}),n.jsx(Fi,{children:"Are you sure you want to delete this help article? This action cannot be undone."})]}),n.jsxs(Mi,{children:[n.jsx(Ui,{"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx($i,{onClick:g,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-delete",children:"Delete"})]})]})})]})})}const bhe={title:"",slug:"",excerpt:"",content:"",category:"general",published:!0,order:0};function whe(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),[,r]=Ds(),i=RP(),a=i.id==="new",{data:o,isLoading:l}=Ve({queryKey:["/api/admin/articles",i.id],enabled:!a}),c=fu({resolver:pu(kY),defaultValues:bhe}),d=x=>{if(c.setValue("title",x),a){const g=x.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");c.setValue("slug",g)}};p.useEffect(()=>{o!=null&&o.data&&!a&&c.reset({title:o.data.title||"",slug:o.data.slug||"",excerpt:o.data.excerpt||"",content:o.data.content||"",category:o.data.category||"general",published:o.data.published??!0,order:o.data.order||0})},[o,c,a]);const u=st({mutationFn:async x=>{const g=a?"/api/admin/articles":`/api/admin/articles/${i.id}`,w=await fetch(g,{method:a?"POST":"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(!w.ok){const b=await w.json();throw new Error(b.error||`Failed to ${a?"create":"update"} article`)}return w.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/admin/articles"]}),t({title:"Success",description:`Help article ${a?"created":"updated"} successfully`}),r("/admin/pages/general")},onError:x=>{t({title:"Error",description:x.message||`Failed to ${a?"create":"update"} article`,variant:"destructive"})}}),f=c.handleSubmit(x=>{if(s||!e){t({title:"Permission Denied",description:s?`Cannot ${a?"create":"update"} articles in demo mode`:"You don't have permission to manage content",variant:"destructive"});return}u.mutate(x)}),h=()=>{r("/admin/pages/general")};return l&&!a?n.jsx(Ze,{children:n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(G,{variant:"outline",size:"icon",onClick:h,"data-testid":"button-back",children:n.jsx(ba,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(ly,{className:"h-8 w-8"}),a?"Create Help Article":"Edit Help Article"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:a?"Add a new article to the help center":"Update article content and settings"})]})]}),n.jsxs(G,{onClick:f,disabled:u.isPending,"data-testid":"button-save-article",className:"gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),u.isPending?"Saving...":"Save Article"]})]}),s&&n.jsx(Xs,{"data-testid":"alert-demo-mode",children:n.jsx(Js,{children:"Demo mode is enabled. Article management is read-only."})}),n.jsxs("div",{className:"grid gap-6",children:[n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Article Details"}),n.jsx(Fe,{children:"Basic information about this help article"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{htmlFor:"title",children:["Title ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(le,{id:"title",placeholder:"e.g., How do I create an account?",...c.register("title"),onChange:x=>d(x.target.value),"data-testid":"input-title"}),c.formState.errors.title&&n.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.title.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{htmlFor:"slug",children:["URL Slug ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(le,{id:"slug",placeholder:"how-do-i-create-an-account",...c.register("slug"),"data-testid":"input-slug"}),c.formState.errors.slug&&n.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.slug.message}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-generated from title. You can customize it if needed."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{htmlFor:"excerpt",children:["Short Description ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(zs,{id:"excerpt",placeholder:"Brief summary that appears on the article card...",rows:3,...c.register("excerpt"),"data-testid":"input-excerpt"}),c.formState.errors.excerpt&&n.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.excerpt.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"category",children:"Category"}),n.jsxs(Gt,{value:c.watch("category"),onValueChange:x=>c.setValue("category",x),children:[n.jsx(Bt,{id:"category","data-testid":"select-category",children:n.jsx(Yt,{})}),n.jsxs(qt,{children:[n.jsx(fe,{value:"general",children:"General"}),n.jsx(fe,{value:"seller",children:"Seller"}),n.jsx(fe,{value:"buyer",children:"Buyer"}),n.jsx(fe,{value:"payments",children:"Payments"}),n.jsx(fe,{value:"shipping",children:"Shipping"}),n.jsx(fe,{value:"other",children:"Other"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"order",children:"Display Order"}),n.jsx(le,{id:"order",type:"number",min:"0",placeholder:"0",...c.register("order",{valueAsNumber:!0}),"data-testid":"input-order"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower numbers appear first"})]}),n.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(re,{htmlFor:"published",children:"Published"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this article visible to users"})]}),n.jsx(il,{id:"published",checked:c.watch("published"),onCheckedChange:x=>c.setValue("published",x),"data-testid":"switch-published"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Article Content"}),n.jsx(Fe,{children:"Full article content (supports Markdown)"})]}),n.jsx(ue,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(zs,{id:"content",placeholder:"Write your full article content here. You can use Markdown formatting...",rows:20,className:"font-mono text-sm",...c.register("content"),"data-testid":"input-content"}),c.formState.errors.content&&n.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.content.message}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Use Markdown for formatting: **bold**, *italic*, # Heading, - List items, etc."})]})})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(G,{variant:"outline",onClick:h,"data-testid":"button-cancel",children:"Cancel"}),n.jsxs(G,{onClick:f,disabled:u.isPending,"data-testid":"button-save-bottom",className:"gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),u.isPending?"Saving...":"Save Article"]})]})]})]})})}const GT={title:"Frequently Asked Questions",subtitle:"Find answers to common questions about our platform",faqs:[{question:"How do I create an account?",answer:'Click on the "Get Started" button and follow the registration process. You can sign up using your email or social media accounts.'},{question:"Is it safe to shop here?",answer:"Yes! We provide buyer protection on all purchases and use secure payment processing to ensure your transactions are safe."},{question:"How do live auctions work?",answer:"Join a live show, browse the items being showcased, and place your bids in real-time. The highest bidder wins when the auction closes."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards, debit cards, and digital payment methods through our secure payment processor."}]};function jhe(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),{data:r,isLoading:i}=Ve({queryKey:["/api/content/faq"]}),a=fu({resolver:pu(_Y),defaultValues:GT}),{fields:o,append:l,remove:c}=Jm({control:a.control,name:"faqs"});p.useEffect(()=>{r!=null&&r.data&&r.data.title&&a.reset(r.data)},[r,a]);const d=st({mutationFn:async x=>{const g=await fetch("/api/admin/content/faq",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(!g.ok){const y=await g.json();throw new Error(y.message||"Failed to update FAQ page")}return g.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/content/faq"]}),t({title:"Success",description:"FAQ page updated successfully"})},onError:x=>{t({title:"Error",description:x.message||"Failed to update FAQ page",variant:"destructive"})}}),u=st({mutationFn:async()=>{const x=await fetch("/api/admin/content/faq/reset",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!x.ok){const g=await x.json();throw new Error(g.message||"Failed to reset FAQ page")}return x.json()},onSuccess:()=>{a.reset(GT),We.invalidateQueries({queryKey:["/api/content/faq"]}),t({title:"Success",description:"FAQ page reset to default content"})},onError:x=>{t({title:"Error",description:x.message||"Failed to reset FAQ page",variant:"destructive"})}}),f=a.handleSubmit(x=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}d.mutate(x)}),h=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}confirm("Are you sure you want to reset the FAQ page to default content? This cannot be undone.")&&u.mutate()};return i?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading content..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[n.jsx(vI,{className:"h-8 w-8"}),"FAQ Page Editor"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage frequently asked questions"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",onClick:h,disabled:!e||s||u.isPending,"data-testid":"button-reset-default",children:"Reset to Default"}),n.jsxs(G,{onClick:f,disabled:d.isPending||!e||s,"data-testid":"button-save",className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),d.isPending?"Saving...":"Save Changes"]})]})]}),s&&n.jsx(Xs,{children:n.jsx(Js,{children:"Content editing is disabled in demo mode"})}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Page Settings"}),n.jsx(Fe,{children:"Configure the main title and subtitle"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"title",children:"Title"}),n.jsx(le,{id:"title",...a.register("title"),disabled:!e||s,"data-testid":"input-title"}),a.formState.errors.title&&n.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.title.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"subtitle",children:"Subtitle (Optional)"}),n.jsx(le,{id:"subtitle",...a.register("subtitle"),disabled:!e||s,"data-testid":"input-subtitle"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"FAQ Items"}),n.jsx(Fe,{children:"Add and manage frequently asked questions"})]}),n.jsxs(ue,{className:"space-y-4",children:[o.map((x,g)=>{var y,w,b,v,N,C,_,T;return n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(we,{className:"text-lg",children:["FAQ #",g+1]}),n.jsx(G,{type:"button",variant:"destructive",size:"sm",onClick:()=>c(g),disabled:!e||s||o.length===1,"data-testid":`button-remove-faq-${g}`,children:n.jsx(bn,{className:"h-4 w-4"})})]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`faqs.${g}.question`,children:"Question"}),n.jsx(zs,{id:`faqs.${g}.question`,...a.register(`faqs.${g}.question`),disabled:!e||s,className:"min-h-20","data-testid":`input-faq-question-${g}`}),((w=(y=a.formState.errors.faqs)==null?void 0:y[g])==null?void 0:w.question)&&n.jsx("p",{className:"text-sm text-destructive",children:(v=(b=a.formState.errors.faqs[g])==null?void 0:b.question)==null?void 0:v.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`faqs.${g}.answer`,children:"Answer"}),n.jsx(zs,{id:`faqs.${g}.answer`,...a.register(`faqs.${g}.answer`),disabled:!e||s,className:"min-h-32","data-testid":`input-faq-answer-${g}`}),((C=(N=a.formState.errors.faqs)==null?void 0:N[g])==null?void 0:C.answer)&&n.jsx("p",{className:"text-sm text-destructive",children:(T=(_=a.formState.errors.faqs[g])==null?void 0:_.answer)==null?void 0:T.message})]})]})]},x.id)}),n.jsxs(G,{type:"button",variant:"outline",onClick:()=>l({question:"",answer:""}),disabled:!e||s,className:"w-full","data-testid":"button-add-faq",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add FAQ"]})]})]})]})})}const YT={title:"About Us",subtitle:"Learn more about our mission and what makes us different",sections:[{title:"Our Story",content:"We started with a simple mission: to create the most engaging and trustworthy live shopping marketplace. Today, thousands of buyers and sellers connect on our platform every day to discover amazing deals and build lasting relationships."},{title:"Our Mission",content:"We believe shopping should be fun, social, and exciting. That's why we've built a platform that combines the thrill of live auctions with the convenience of online shopping."},{title:"Why Choose Us",content:"With buyer protection, secure payments, and a vibrant community of sellers, we're committed to providing the best live shopping experience possible."}]};function Nhe(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),{data:r,isLoading:i}=Ve({queryKey:["/api/content/about"]}),a=fu({resolver:pu(y_),defaultValues:YT}),{fields:o,append:l,remove:c}=Jm({control:a.control,name:"sections"});p.useEffect(()=>{r!=null&&r.data&&r.data.title&&a.reset(r.data)},[r,a]);const d=st({mutationFn:async x=>{const g=await fetch("/api/admin/content/about",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(!g.ok){const y=await g.json();throw new Error(y.message||"Failed to update About page")}return g.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/content/about"]}),t({title:"Success",description:"About page updated successfully"})},onError:x=>{t({title:"Error",description:x.message||"Failed to update About page",variant:"destructive"})}}),u=st({mutationFn:async()=>{const x=await fetch("/api/admin/content/about/reset",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!x.ok){const g=await x.json();throw new Error(g.message||"Failed to reset About page")}return x.json()},onSuccess:()=>{a.reset(YT),We.invalidateQueries({queryKey:["/api/content/about"]}),t({title:"Success",description:"About page reset to default content"})},onError:x=>{t({title:"Error",description:x.message||"Failed to reset About page",variant:"destructive"})}}),f=a.handleSubmit(x=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}d.mutate(x)}),h=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}confirm("Are you sure you want to reset the About page to default content? This cannot be undone.")&&u.mutate()};return i?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading content..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[n.jsx(Bd,{className:"h-8 w-8"}),"About Us Page Editor"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage the About Us page content"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",onClick:h,disabled:!e||s||u.isPending,"data-testid":"button-reset-default",children:"Reset to Default"}),n.jsxs(G,{onClick:f,disabled:d.isPending||!e||s,"data-testid":"button-save",className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),d.isPending?"Saving...":"Save Changes"]})]})]}),s&&n.jsx(Xs,{children:n.jsx(Js,{children:"Content editing is disabled in demo mode"})}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Page Settings"}),n.jsx(Fe,{children:"Configure the main title and subtitle"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"title",children:"Title"}),n.jsx(le,{id:"title",...a.register("title"),disabled:!e||s,"data-testid":"input-title"}),a.formState.errors.title&&n.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.title.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"subtitle",children:"Subtitle (Optional)"}),n.jsx(le,{id:"subtitle",...a.register("subtitle"),disabled:!e||s,"data-testid":"input-subtitle"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Content Sections"}),n.jsx(Fe,{children:"Add and manage page sections"})]}),n.jsxs(ue,{className:"space-y-4",children:[o.map((x,g)=>{var y,w,b,v,N,C,_,T;return n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(we,{className:"text-lg",children:["Section #",g+1]}),n.jsx(G,{type:"button",variant:"destructive",size:"sm",onClick:()=>c(g),disabled:!e||s||o.length===1,"data-testid":`button-remove-section-${g}`,children:n.jsx(bn,{className:"h-4 w-4"})})]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${g}.title`,children:"Section Title"}),n.jsx(le,{id:`sections.${g}.title`,...a.register(`sections.${g}.title`),disabled:!e||s,"data-testid":`input-section-title-${g}`}),((w=(y=a.formState.errors.sections)==null?void 0:y[g])==null?void 0:w.title)&&n.jsx("p",{className:"text-sm text-destructive",children:(v=(b=a.formState.errors.sections[g])==null?void 0:b.title)==null?void 0:v.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${g}.content`,children:"Section Content"}),n.jsx(zs,{id:`sections.${g}.content`,...a.register(`sections.${g}.content`),disabled:!e||s,className:"min-h-48","data-testid":`input-section-content-${g}`}),((C=(N=a.formState.errors.sections)==null?void 0:N[g])==null?void 0:C.content)&&n.jsx("p",{className:"text-sm text-destructive",children:(T=(_=a.formState.errors.sections[g])==null?void 0:_.content)==null?void 0:T.message})]})]})]},x.id)}),n.jsxs(G,{type:"button",variant:"outline",onClick:()=>l({title:"",content:""}),disabled:!e||s,className:"w-full","data-testid":"button-add-section",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Section"]})]})]})]})})}const QT={title:"Privacy Policy",subtitle:"How we collect, use, and protect your information",sections:[{title:"Information We Collect",content:"We collect information you provide directly to us, such as when you create an account, make a purchase, or contact our support team."},{title:"How We Use Your Information",content:"We use the information we collect to provide, maintain, and improve our services, process transactions, and communicate with you."},{title:"Data Security",content:"We implement appropriate security measures to protect your personal information from unauthorized access, alteration, or disclosure."},{title:"Your Rights",content:"You have the right to access, update, or delete your personal information. Contact us if you'd like to exercise these rights."}]};function _he(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),{data:r,isLoading:i}=Ve({queryKey:["/api/content/privacy"]}),a=fu({resolver:pu(y_),defaultValues:QT}),{fields:o,append:l,remove:c}=Jm({control:a.control,name:"sections"});p.useEffect(()=>{r!=null&&r.data&&r.data.title&&a.reset(r.data)},[r,a]);const d=st({mutationFn:async x=>{const g=await fetch("/api/admin/content/privacy",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(!g.ok){const y=await g.json();throw new Error(y.message||"Failed to update Privacy Policy")}return g.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/content/privacy"]}),t({title:"Success",description:"Privacy Policy updated successfully"})},onError:x=>{t({title:"Error",description:x.message||"Failed to update Privacy Policy",variant:"destructive"})}}),u=st({mutationFn:async()=>{const x=await fetch("/api/admin/content/privacy/reset",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!x.ok){const g=await x.json();throw new Error(g.message||"Failed to reset Privacy Policy")}return x.json()},onSuccess:()=>{a.reset(QT),We.invalidateQueries({queryKey:["/api/content/privacy"]}),t({title:"Success",description:"Privacy Policy reset to default content"})},onError:x=>{t({title:"Error",description:x.message||"Failed to reset Privacy Policy",variant:"destructive"})}}),f=a.handleSubmit(x=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}d.mutate(x)}),h=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}confirm("Are you sure you want to reset the Privacy Policy to default content? This cannot be undone.")&&u.mutate()};return i?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading content..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[n.jsx(_I,{className:"h-8 w-8"}),"Privacy Policy Editor"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage the Privacy Policy content"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",onClick:h,disabled:!e||s||u.isPending,"data-testid":"button-reset-default",children:"Reset to Default"}),n.jsxs(G,{onClick:f,disabled:d.isPending||!e||s,"data-testid":"button-save",className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),d.isPending?"Saving...":"Save Changes"]})]})]}),s&&n.jsx(Xs,{children:n.jsx(Js,{children:"Content editing is disabled in demo mode"})}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Page Settings"}),n.jsx(Fe,{children:"Configure the main title and subtitle"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"title",children:"Title"}),n.jsx(le,{id:"title",...a.register("title"),disabled:!e||s,"data-testid":"input-title"}),a.formState.errors.title&&n.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.title.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"subtitle",children:"Subtitle (Optional)"}),n.jsx(le,{id:"subtitle",...a.register("subtitle"),disabled:!e||s,"data-testid":"input-subtitle"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Content Sections"}),n.jsx(Fe,{children:"Add and manage policy sections"})]}),n.jsxs(ue,{className:"space-y-4",children:[o.map((x,g)=>{var y,w,b,v,N,C,_,T;return n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(we,{className:"text-lg",children:["Section #",g+1]}),n.jsx(G,{type:"button",variant:"destructive",size:"sm",onClick:()=>c(g),disabled:!e||s||o.length===1,"data-testid":`button-remove-section-${g}`,children:n.jsx(bn,{className:"h-4 w-4"})})]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${g}.title`,children:"Section Title"}),n.jsx(le,{id:`sections.${g}.title`,...a.register(`sections.${g}.title`),disabled:!e||s,"data-testid":`input-section-title-${g}`}),((w=(y=a.formState.errors.sections)==null?void 0:y[g])==null?void 0:w.title)&&n.jsx("p",{className:"text-sm text-destructive",children:(v=(b=a.formState.errors.sections[g])==null?void 0:b.title)==null?void 0:v.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${g}.content`,children:"Section Content"}),n.jsx(zs,{id:`sections.${g}.content`,...a.register(`sections.${g}.content`),disabled:!e||s,className:"min-h-48","data-testid":`input-section-content-${g}`}),((C=(N=a.formState.errors.sections)==null?void 0:N[g])==null?void 0:C.content)&&n.jsx("p",{className:"text-sm text-destructive",children:(T=(_=a.formState.errors.sections[g])==null?void 0:_.content)==null?void 0:T.message})]})]})]},x.id)}),n.jsxs(G,{type:"button",variant:"outline",onClick:()=>l({title:"",content:""}),disabled:!e||s,className:"w-full","data-testid":"button-add-section",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Section"]})]})]})]})})}const ZT={title:"Terms of Service",subtitle:"Rules and guidelines for using our platform",sections:[{title:"Acceptance of Terms",content:"By accessing and using this platform, you accept and agree to be bound by the terms and provision of this agreement."},{title:"User Accounts",content:"You are responsible for maintaining the confidentiality of your account and password. You agree to accept responsibility for all activities that occur under your account."},{title:"Prohibited Activities",content:"You may not use our platform for any illegal purposes or to violate any laws. This includes but is not limited to fraud, harassment, or posting harmful content."},{title:"Termination",content:"We reserve the right to terminate or suspend your account at any time for violations of these terms or for any other reason we deem necessary."}]};function She(){const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),{data:r,isLoading:i}=Ve({queryKey:["/api/content/terms"]}),a=fu({resolver:pu(y_),defaultValues:ZT}),{fields:o,append:l,remove:c}=Jm({control:a.control,name:"sections"});p.useEffect(()=>{r!=null&&r.data&&r.data.title&&a.reset(r.data)},[r,a]);const d=st({mutationFn:async x=>{const g=await fetch("/api/admin/content/terms",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(!g.ok){const y=await g.json();throw new Error(y.message||"Failed to update Terms of Service")}return g.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/content/terms"]}),t({title:"Success",description:"Terms of Service updated successfully"})},onError:x=>{t({title:"Error",description:x.message||"Failed to update Terms of Service",variant:"destructive"})}}),u=st({mutationFn:async()=>{const x=await fetch("/api/admin/content/terms/reset",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!x.ok){const g=await x.json();throw new Error(g.message||"Failed to reset Terms of Service")}return x.json()},onSuccess:()=>{a.reset(ZT),We.invalidateQueries({queryKey:["/api/content/terms"]}),t({title:"Success",description:"Terms of Service reset to default content"})},onError:x=>{t({title:"Error",description:x.message||"Failed to reset Terms of Service",variant:"destructive"})}}),f=a.handleSubmit(x=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}d.mutate(x)}),h=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}confirm("Are you sure you want to reset the Terms of Service to default content? This cannot be undone.")&&u.mutate()};return i?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading content..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[n.jsx(Bd,{className:"h-8 w-8"}),"Terms of Service Editor"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage the Terms of Service content"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",onClick:h,disabled:!e||s||u.isPending,"data-testid":"button-reset-default",children:"Reset to Default"}),n.jsxs(G,{onClick:f,disabled:d.isPending||!e||s,"data-testid":"button-save",className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),d.isPending?"Saving...":"Save Changes"]})]})]}),s&&n.jsx(Xs,{children:n.jsx(Js,{children:"Content editing is disabled in demo mode"})}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Page Settings"}),n.jsx(Fe,{children:"Configure the main title and subtitle"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"title",children:"Title"}),n.jsx(le,{id:"title",...a.register("title"),disabled:!e||s,"data-testid":"input-title"}),a.formState.errors.title&&n.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.title.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"subtitle",children:"Subtitle (Optional)"}),n.jsx(le,{id:"subtitle",...a.register("subtitle"),disabled:!e||s,"data-testid":"input-subtitle"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Content Sections"}),n.jsx(Fe,{children:"Add and manage terms sections"})]}),n.jsxs(ue,{className:"space-y-4",children:[o.map((x,g)=>{var y,w,b,v,N,C,_,T;return n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(we,{className:"text-lg",children:["Section #",g+1]}),n.jsx(G,{type:"button",variant:"destructive",size:"sm",onClick:()=>c(g),disabled:!e||s||o.length===1,"data-testid":`button-remove-section-${g}`,children:n.jsx(bn,{className:"h-4 w-4"})})]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${g}.title`,children:"Section Title"}),n.jsx(le,{id:`sections.${g}.title`,...a.register(`sections.${g}.title`),disabled:!e||s,"data-testid":`input-section-title-${g}`}),((w=(y=a.formState.errors.sections)==null?void 0:y[g])==null?void 0:w.title)&&n.jsx("p",{className:"text-sm text-destructive",children:(v=(b=a.formState.errors.sections[g])==null?void 0:b.title)==null?void 0:v.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${g}.content`,children:"Section Content"}),n.jsx(zs,{id:`sections.${g}.content`,...a.register(`sections.${g}.content`),disabled:!e||s,className:"min-h-48","data-testid":`input-section-content-${g}`}),((C=(N=a.formState.errors.sections)==null?void 0:N[g])==null?void 0:C.content)&&n.jsx("p",{className:"text-sm text-destructive",children:(T=(_=a.formState.errors.sections[g])==null?void 0:_.content)==null?void 0:T.message})]})]})]},x.id)}),n.jsxs(G,{type:"button",variant:"outline",onClick:()=>l({title:"",content:""}),disabled:!e||s,className:"w-full","data-testid":"button-add-section",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Section"]})]})]})]})})}const XT={title:"Contact Us",subtitle:"Get in touch with our team",description:"Have a question or need help? We're here for you. Reach out and we'll respond as soon as possible.",contactInfo:{email:"support@example.com",phone:"+1 (555) 123-4567",address:"123 Main Street, City, State 12345"},showContactForm:!0,sections:[{title:"Customer Support",content:"Our support team is available Monday through Friday, 9am to 5pm EST. We aim to respond to all inquiries within 24 hours."}]};function Che(){var x;const{toast:t}=Et(),{canManageSettings:e,isDemoMode:s}=So(),{data:r,isLoading:i}=Ve({queryKey:["/api/content/contact"]}),a=fu({resolver:pu(CY),defaultValues:XT}),{fields:o,append:l,remove:c}=Jm({control:a.control,name:"sections"});p.useEffect(()=>{r!=null&&r.data&&r.data.title&&a.reset(r.data)},[r,a]);const d=st({mutationFn:async g=>{const y=await fetch("/api/admin/content/contact",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(g)});if(!y.ok){const w=await y.json();throw new Error(w.message||"Failed to update Contact page")}return y.json()},onSuccess:()=>{We.invalidateQueries({queryKey:["/api/content/contact"]}),t({title:"Success",description:"Contact page updated successfully"})},onError:g=>{t({title:"Error",description:g.message||"Failed to update Contact page",variant:"destructive"})}}),u=st({mutationFn:async()=>{const g=await fetch("/api/admin/content/contact/reset",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!g.ok){const y=await g.json();throw new Error(y.message||"Failed to reset Contact page")}return g.json()},onSuccess:()=>{a.reset(XT),We.invalidateQueries({queryKey:["/api/content/contact"]}),t({title:"Success",description:"Contact page reset to default content"})},onError:g=>{t({title:"Error",description:g.message||"Failed to reset Contact page",variant:"destructive"})}}),f=a.handleSubmit(g=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}d.mutate(g)}),h=()=>{if(s||!e){t({title:"Permission Denied",description:s?"Cannot modify content in demo mode":"You don't have permission to modify content",variant:"destructive"});return}confirm("Are you sure you want to reset the Contact page to default content? This cannot be undone.")&&u.mutate()};return i?n.jsx(Ze,{children:n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading content..."})]})})}):n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[n.jsx(du,{className:"h-8 w-8"}),"Contact Page Editor"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage the Contact Us page content"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(G,{variant:"outline",onClick:h,disabled:!e||s||u.isPending,"data-testid":"button-reset-default",children:"Reset to Default"}),n.jsxs(G,{onClick:f,disabled:d.isPending||!e||s,"data-testid":"button-save",className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),d.isPending?"Saving...":"Save Changes"]})]})]}),s&&n.jsx(Xs,{children:n.jsx(Js,{children:"Content editing is disabled in demo mode"})}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Page Settings"}),n.jsx(Fe,{children:"Configure the main title and description"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"title",children:"Title"}),n.jsx(le,{id:"title",...a.register("title"),disabled:!e||s,"data-testid":"input-title"}),a.formState.errors.title&&n.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.title.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"subtitle",children:"Subtitle (Optional)"}),n.jsx(le,{id:"subtitle",...a.register("subtitle"),disabled:!e||s,"data-testid":"input-subtitle"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"description",children:"Description (Optional)"}),n.jsx(zs,{id:"description",...a.register("description"),disabled:!e||s,className:"min-h-20","data-testid":"input-description"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Contact Information"}),n.jsx(Fe,{children:"Provide contact details for users"})]}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"contactInfo.email",children:"Email (Optional)"}),n.jsx(le,{id:"contactInfo.email",type:"email",...a.register("contactInfo.email"),disabled:!e||s,"data-testid":"input-contact-email"}),((x=a.formState.errors.contactInfo)==null?void 0:x.email)&&n.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.contactInfo.email.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"contactInfo.phone",children:"Phone (Optional)"}),n.jsx(le,{id:"contactInfo.phone",...a.register("contactInfo.phone"),disabled:!e||s,"data-testid":"input-contact-phone"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:"contactInfo.address",children:"Address (Optional)"}),n.jsx(zs,{id:"contactInfo.address",...a.register("contactInfo.address"),disabled:!e||s,className:"min-h-20","data-testid":"input-contact-address"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tu,{id:"showContactForm",checked:a.watch("showContactForm"),onCheckedChange:g=>a.setValue("showContactForm",g),disabled:!e||s,"data-testid":"checkbox-show-contact-form"}),n.jsx(re,{htmlFor:"showContactForm",className:"text-sm font-normal",children:"Show contact form on the page"})]})]})]}),n.jsxs(de,{children:[n.jsxs(be,{children:[n.jsx(we,{children:"Additional Sections (Optional)"}),n.jsx(Fe,{children:"Add extra content sections to the contact page"})]}),n.jsxs(ue,{className:"space-y-4",children:[o.map((g,y)=>{var w,b,v,N,C,_,T,j;return n.jsxs(de,{children:[n.jsx(be,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(we,{className:"text-lg",children:["Section #",y+1]}),n.jsx(G,{type:"button",variant:"destructive",size:"sm",onClick:()=>c(y),disabled:!e||s,"data-testid":`button-remove-section-${y}`,children:n.jsx(bn,{className:"h-4 w-4"})})]})}),n.jsxs(ue,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${y}.title`,children:"Section Title"}),n.jsx(le,{id:`sections.${y}.title`,...a.register(`sections.${y}.title`),disabled:!e||s,"data-testid":`input-section-title-${y}`}),((b=(w=a.formState.errors.sections)==null?void 0:w[y])==null?void 0:b.title)&&n.jsx("p",{className:"text-sm text-destructive",children:(N=(v=a.formState.errors.sections[y])==null?void 0:v.title)==null?void 0:N.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(re,{htmlFor:`sections.${y}.content`,children:"Section Content"}),n.jsx(zs,{id:`sections.${y}.content`,...a.register(`sections.${y}.content`),disabled:!e||s,className:"min-h-32","data-testid":`input-section-content-${y}`}),((_=(C=a.formState.errors.sections)==null?void 0:C[y])==null?void 0:_.content)&&n.jsx("p",{className:"text-sm text-destructive",children:(j=(T=a.formState.errors.sections[y])==null?void 0:T.content)==null?void 0:j.message})]})]})]},g.id)}),n.jsxs(G,{type:"button",variant:"outline",onClick:()=>l({title:"",content:""}),disabled:!e||s,className:"w-full","data-testid":"button-add-section",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Add Section"]})]})]})]})})}function khe(){return n.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:n.jsx(de,{className:"w-full max-w-md mx-4",children:n.jsxs(ue,{className:"pt-6",children:[n.jsxs("div",{className:"flex mb-4 gap-2",children:[n.jsx(qr,{className:"h-8 w-8 text-red-500"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),n.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Ehe(t){const{settings:e}=qc();p.useEffect(()=>{const s=e.seo_title||e.app_name;document.title=s},[t,e.app_name,e.seo_title])}function The({children:t}){const[e]=Ds(),[s,r]=p.useState(!0),[i,a]=p.useState(!1);return p.useEffect(()=>{if(e==="/admin/setup"){r(!1),a(!0);return}(async()=>{try{const c=await(await fetch("/api/admin/exists",{credentials:"include"})).json();c.success&&a(c.exists)}catch(l){console.error("Error checking if admin exists:",l),a(!0)}finally{r(!1)}})()},[e]),s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Checking admin setup..."})]})}):!i&&e!=="/admin/setup"?(window.location.href="/admin/setup",n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Redirecting to setup..."})]})})):n.jsx(n.Fragment,{children:t})}function Ahe(){const{isAuthenticated:t,isLoading:e,user:s,pendingSocialAuth:r,pendingSocialAuthEmail:i,pendingSocialAuthData:a,completeSocialAuth:o}=qi(),[,l]=Ds(),[c,d]=p.useState(!1);Ehe();const u=async f=>{try{await o(f),d(!0)}catch(h){console.error("Social auth completion failed:",h)}};return p.useEffect(()=>{c&&t&&!r&&s&&(s.admin?l("/admin"):l("/admin/login"),d(!1))},[c,t,r,s,l]),e?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):r&&i&&a?n.jsx(WZ,{userEmail:i,socialAuthData:a,onComplete:u,isLoading:e}):t?s!=null&&s.admin?n.jsx("div",{className:"flex flex-col h-screen bg-background",children:n.jsx("main",{className:"flex-1 overflow-y-auto",children:n.jsxs(dC,{children:[n.jsx(wt,{path:"/",component:RE}),n.jsx(wt,{path:"/admin",component:RE}),n.jsx(wt,{path:"/admin/users/:userId/shipments",component:Nne}),n.jsx(wt,{path:"/admin/users/:userId/details/:itemType/:itemId",component:jne}),n.jsx(wt,{path:"/admin/users/:userId",component:wne}),n.jsx(wt,{path:"/admin/users",component:une}),n.jsx(wt,{path:"/admin/pending-approvals",component:hne}),n.jsx(wt,{path:"/admin/inventory",component:qne}),n.jsx(wt,{path:"/admin/products/:productId",component:Vne}),n.jsx(wt,{path:"/admin/orders/:orderId",component:ire}),n.jsx(wt,{path:"/admin/orders",component:rre}),n.jsx(wt,{path:"/admin/disputes/:disputeId",component:Nre}),n.jsx(wt,{path:"/admin/disputes",component:xre}),n.jsx(wt,{path:"/admin/reported-cases",component:_re}),n.jsx(wt,{path:"/admin/transactions",component:are}),n.jsx(wt,{path:"/admin/payouts",component:ore}),n.jsx(wt,{path:"/admin/application-fees",component:fre}),n.jsx(wt,{path:"/admin/categories/:categoryId/subcategories",component:gre}),n.jsx(wt,{path:"/admin/categories",component:pre}),n.jsx(wt,{path:"/admin/shows/:showId",component:cre}),n.jsx(wt,{path:"/admin/shows",component:lre}),n.jsx(wt,{path:"/admin/giveaways",component:Xue}),n.jsx(wt,{path:"/admin/shipping-profiles",component:Jue}),n.jsx(wt,{path:"/admin/shipments",component:mhe}),n.jsx(wt,{path:"/admin/referral-logs",component:xhe}),n.jsx(wt,{path:"/admin/address",component:ghe}),n.jsx(wt,{path:"/admin/email-templates",component:Zre}),n.jsx(wt,{path:"/admin/email-settings",component:Sre}),n.jsx(wt,{path:"/admin/email-brevo-campaign",component:Qre}),n.jsx(wt,{path:"/admin/email-bulk",component:Que}),n.jsx(wt,{path:"/admin/pages/landing",component:yhe}),n.jsx(wt,{path:"/admin/pages/general/:id",component:whe}),n.jsx(wt,{path:"/admin/pages/general",component:vhe}),n.jsx(wt,{path:"/admin/pages/faq",component:jhe}),n.jsx(wt,{path:"/admin/pages/about",component:Nhe}),n.jsx(wt,{path:"/admin/pages/privacy",component:_he}),n.jsx(wt,{path:"/admin/pages/terms",component:She}),n.jsx(wt,{path:"/admin/pages/contact",component:Che}),n.jsx(wt,{path:"/admin/settings",component:dre}),n.jsx(wt,{path:"/admin/profile",component:hre}),n.jsx(wt,{component:khe})]})})}):n.jsx("div",{className:"flex flex-col h-screen bg-background",children:n.jsx("main",{className:"flex-1 overflow-y-auto",children:n.jsx(Ab,{})})}):n.jsx("div",{className:"flex flex-col h-screen bg-background",children:n.jsx("main",{className:"flex-1 overflow-y-auto",children:n.jsxs(dC,{children:[n.jsx(wt,{path:"/admin/setup",component:KZ}),n.jsx(wt,{path:"/admin/login",component:Ab}),n.jsx(wt,{component:Ab})]})})})}function Phe(){return n.jsx(O9,{client:We,children:n.jsx(EY,{children:n.jsx(TY,{children:n.jsxs(tq,{children:[n.jsx(hz,{}),n.jsx(The,{children:n.jsx(Ahe,{})})]})})})})}jP(document.getElementById("root")).render(n.jsx(Phe,{}))});export default Ihe();

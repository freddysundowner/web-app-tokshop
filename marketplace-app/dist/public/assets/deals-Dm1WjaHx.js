import{O as p,r as h,q as d,j as s,L as c,B as o,m}from"./index-FVTY5sKH.js";import{u}from"./useQuery-DsZx8GVA.js";import{A as f}from"./auction-card-D137QEZZ.js";import{P as j}from"./product-card-Pdo5-SPt.js";import{C as x}from"./chevron-right-HRo85rGP.js";import"./card-CF4CqaN2.js";import"./badge-BTf7a5Ku.js";import"./package-dXPzRBiL.js";import"./clock-BQ-aHkQg.js";import"./circle-check-big-btKq8keq.js";function B(){p("Deals"),h.useEffect(()=>{d.invalidateQueries({queryKey:["/api/products","deals","auction"]}),d.invalidateQueries({queryKey:["/api/products","deals","trending"]})},[]);const{data:t,isLoading:i}=u({queryKey:["/api/products","deals","auction"],queryFn:async()=>{const e=new URLSearchParams({saletype:"auction",status:"active",limit:"10",sortBy:"views",featured:"true",type:"scheduled"});return(await fetch(`/api/products?${e.toString()}`)).json()}}),{data:a,isLoading:r}=u({queryKey:["/api/products","deals","trending"],queryFn:async()=>{const e=new URLSearchParams({saletype:"buy_now",status:"active",limit:"6",sortBy:"views"});return(await fetch(`/api/products?${e.toString()}`)).json()}}),l=(t==null?void 0:t.products)||[],n=(a==null?void 0:a.products)||[];return s.jsx("div",{className:"flex flex-col min-h-screen bg-background","data-testid":"page-deals",children:s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsx("div",{className:"flex justify-center w-full",children:s.jsxs("div",{className:"w-full lg:w-[90%] px-4 md:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground mb-2",children:"Deals"}),s.jsx("p",{className:"text-muted-foreground",children:"Discover trending products and exciting auctions"})]}),(i||l.length>0)&&s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Auctions"}),s.jsx(c,{href:"/deals/auctions",children:s.jsxs(o,{variant:"ghost",className:"gap-2","data-testid":"button-view-all-auctions",children:["View All",s.jsx(x,{className:"h-4 w-4"})]})})]}),i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(m,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-6",children:l.slice(0,6).map(e=>s.jsx(f,{auction:e},e._id||e.id))})]}),(r||n.length>0)&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Trending Products"}),s.jsx(c,{href:"/deals/trending",children:s.jsxs(o,{variant:"ghost",className:"gap-2","data-testid":"button-view-all-trending",children:["View All",s.jsx(x,{className:"h-4 w-4"})]})})]}),r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(m,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-6",children:n.slice(0,6).map(e=>s.jsx(j,{product:e},e._id||e.id))})]})]})})})})}export{B as default};

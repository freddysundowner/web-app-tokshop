const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/buy-now-dialog-DbnibDu0.js","assets/index-FVTY5sKH.js","assets/index-Cwiwp1bt.css","assets/dialog-A2pFZcsY.js","assets/separator-QabP-acS.js","assets/useQuery-DsZx8GVA.js","assets/useMutation-DKG1zDtN.js","assets/chevron-right-HRo85rGP.js","assets/plus-CFqimBvi.js","assets/credit-card-BDFvtuhf.js","assets/map-pin-jcALPDnh.js","assets/add-payment-dialog-D5fvnLYl.js","assets/index-DCmjaWpM.js","assets/add-address-dialog-M47ojcPW.js","assets/react-country-state-city-DuU_Cl-F.js","assets/react-country-state-city-BZfUZqIr.css","assets/payment-method-list-dialog-DPh4XEb7.js","assets/circle-check-B-MitUmb.js","assets/trash-2-CSnPCayR.js","assets/address-list-dialog-DNMaRwcN.js"])))=>i.map(i=>d[i]);
import{g as we,u as Se,a as ke,b as _e,f as Ce,r as o,q as f,j as e,B as x,L as ue,m as xe,n as Fe,_ as C}from"./index-FVTY5sKH.js";import{u as y}from"./useQuery-DsZx8GVA.js";import{u as Pe}from"./useMutation-DKG1zDtN.js";import{A as $e,a as De,b as Ie}from"./avatar-BgbrThQo.js";import{C as E}from"./card-CF4CqaN2.js";import{S as he}from"./separator-QabP-acS.js";import{g as qe}from"./firebase-chat-COGJCOhY.js";import{A as Ae}from"./arrow-left-C3R-C2jj.js";import{S as G}from"./shopping-bag-CmfLtQot.js";import{C as Oe}from"./chevron-left-CnSIvoVj.js";import{C as Le}from"./chevron-right-HRo85rGP.js";import{M as Te}from"./message-circle-KFHS6dr0.js";import{S as Ke}from"./star-E1-v1kNw.js";import{S as ze}from"./shield-ZxSMvgGn.js";import{F as Re}from"./flag-DeqhqjwT.js";import{C as W}from"./chevron-down-BD1mluAZ.js";import{C as Qe}from"./credit-card-BDFvtuhf.js";const Be=o.lazy(()=>C(()=>import("./buy-now-dialog-DbnibDu0.js").then(b=>b.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),Me=o.lazy(()=>C(()=>import("./add-payment-dialog-D5fvnLYl.js"),__vite__mapDeps([11,1,2,3,12]))),Ve=o.lazy(()=>C(()=>import("./add-address-dialog-M47ojcPW.js"),__vite__mapDeps([13,1,2,3,14,15]))),Ue=o.lazy(()=>C(()=>import("./payment-method-list-dialog-DPh4XEb7.js"),__vite__mapDeps([16,1,2,3,5,11,12,9,17,18]))),Ye=o.lazy(()=>C(()=>import("./address-list-dialog-DNMaRwcN.js"),__vite__mapDeps([19,1,2,3,5,13,14,15,10,17,18])));function us(){var re,oe,de,le,ce;const[,b]=we("/product/:productId"),[,g]=Se(),{user:r,refreshUserData:T}=ke(),{settings:pe}=_e(),{toast:N}=Ce(),[K,z]=o.useState(0),[fe,H]=o.useState(!1),[J,R]=o.useState(!1),[X,F]=o.useState(!1),[Z,P]=o.useState(!1),[ee,$]=o.useState(!1),[se,D]=o.useState(!1),[I,Ee]=o.useState(1),[te,ge]=o.useState(!1),[Q,q]=o.useState(!1),h=b==null?void 0:b.productId;o.useEffect(()=>{q(!1)},[h]);const{data:t,isLoading:je}=y({queryKey:["/api/products",h],queryFn:async()=>{const s=await fetch(`/api/products/${h}`);if(!s.ok)throw new Error("Failed to fetch product");const i=await s.json();return i.product||i},enabled:!!h}),{data:n}=y({queryKey:["/api/shipping/estimate",h],queryFn:async()=>{var s,i;if(!t)return null;try{const u=await fetch("/api/shipping/estimate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({weight:t.weight||1,unit:t.unit||"oz",product:h,owner:((s=t.ownerId)==null?void 0:s._id)||t.ownerId,tokshow:((i=t.tokshow)==null?void 0:i._id)||t.tokshow||null,buying_label:!1})});return u.ok?u.json():null}catch(u){return console.error("Failed to fetch shipping estimate:",u),null}},enabled:!!t&&!!h}),ae=t!=null&&t.ownerId&&typeof t.ownerId=="object"?t.ownerId:null,l=((re=t==null?void 0:t.ownerId)==null?void 0:re._id)||(t==null?void 0:t.ownerId),{data:ye}=y({queryKey:["/api/profile",l],queryFn:async()=>{if(!l)return null;const s=await fetch(`/api/profile/${l}`);if(!s.ok)return null;const i=await s.json();return i.data||i},enabled:!!l&&!ae}),a=ae||ye,d=(r==null?void 0:r._id)||(r==null?void 0:r.id)||(r==null?void 0:r.id),{data:v,refetch:A}=y({queryKey:[`/api/users/paymentmethod/default/${d}`],enabled:!!d,staleTime:0,gcTime:0}),j=v!=null&&v.data?v.data:v||null,{data:B,refetch:O}=y({queryKey:[`/api/address/default/address/${d}`],enabled:!!d,staleTime:0,gcTime:0}),p=(B==null?void 0:B.address)||null;o.useEffect(()=>{Q&&(f.invalidateQueries({queryKey:[`/api/users/paymentmethod/default/${d}`]}),f.invalidateQueries({queryKey:[`/api/address/default/address/${d}`]}),setTimeout(()=>{A(),O()},100))},[Q,d]);const{data:M}=y({queryKey:["/api/products","seller-products",l,h],queryFn:async()=>{if(!l)return{products:[]};const s=new URLSearchParams({userid:l,roomid:"",type:"inventory",saletype:"",category:"",page:"1",limit:"50",featured:"true",status:"active"}),i=await fetch(`/api/products?${s.toString()}`);return i.ok?i.json():{products:[]}},enabled:!!l}),V=Pe({mutationFn:async()=>{var me;if(!t)throw new Error("Product not found");const s=t._id||t.id,i=parseFloat((n==null?void 0:n.amount)||"0"),u=(t.price||0)*I,L=u+i,_={product:s,seller:l,buyer:d,quantity:I,subtotal:parseFloat(u.toFixed(2)),shippingFee:parseFloat(i.toFixed(2)),tax:0,total:parseFloat(L.toFixed(2)),color:"",size:"",bundleId:(n==null?void 0:n.bundleId)||"",rate_id:(n==null?void 0:n.rate_id)||"",servicelevel:((me=n==null?void 0:n.servicelevel)==null?void 0:me.name)||(n==null?void 0:n.servicelevel)||"",totalWeightOz:parseFloat((n==null?void 0:n.totalWeightOz)||"0"),seller_shipping_fee_pay:parseFloat((n==null?void 0:n.seller_shipping_fee_pay)||"0"),status:"processing"};return t.tokshow&&(_.tokshow=t.tokshow),await(await Fe("POST",`/api/orders/${s}`,_)).json()},onSuccess:s=>{var u,L,_,Y;console.log("Order created, response:",s);const i=((L=(u=s==null?void 0:s.data)==null?void 0:u.newOrder)==null?void 0:L._id)||((_=s==null?void 0:s.newOrder)==null?void 0:_._id)||((Y=s==null?void 0:s.order)==null?void 0:Y._id)||(s==null?void 0:s._id);console.log("Extracted order ID:",i),N({title:"Purchase Successful!",description:"Your order has been placed"}),f.invalidateQueries({queryKey:["/api/orders"]}),q(!1),i?(console.log("Navigating to thank you page:",`/thank-you/${i}`),g(`/thank-you/${i}`)):(console.error("No order ID found in response, going to purchases"),g("/purchases"))},onError:s=>{N({title:"Purchase Failed",description:(s==null?void 0:s.message)||"Please try again later",variant:"destructive"})}}),be=async()=>{if(!r){N({title:"Please log in",description:"You need to be logged in to message",variant:"destructive"});return}if(k){g("/inbox");return}if(!a){N({title:"Error",description:"Seller information not available",variant:"destructive"});return}H(!0);try{const s=(r==null?void 0:r._id)||(r==null?void 0:r.id),i=await qe(s,l);g(`/inbox/${i}`)}catch{N({title:"Failed to open chat",description:"Please try again later",variant:"destructive"})}finally{H(!1)}};if(je)return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-96 bg-muted rounded-lg"}),e.jsx("div",{className:"h-20 bg-muted rounded-lg"}),e.jsx("div",{className:"h-40 bg-muted rounded-lg"})]})})});if(!t)return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"Product not found"}),e.jsx(x,{onClick:()=>g("/"),className:"mt-4",children:"Go Home"})]})});const m=t.images||[],Ne=(a==null?void 0:a.firstName)||(a==null?void 0:a.userName)||"Seller",ve=(a==null?void 0:a.userName)||"user",U=(a==null?void 0:a.averagereviews)||(a==null?void 0:a.rating),w=a==null?void 0:a.reviewCount,S=a==null?void 0:a.soldCount;(oe=a==null?void 0:a.following)!=null&&oe.length||(a==null||a.followingCount),(de=a==null?void 0:a.followers)!=null&&de.length||(a==null||a.followersCount);const ie=((le=M==null?void 0:M.products)==null?void 0:le.filter(s=>(s._id||s.id)!==h))||[],c=(n==null?void 0:n.amount)||((ce=n==null?void 0:n[0])==null?void 0:ce.amount)||t.shipping_fee||null,ne=(r==null?void 0:r._id)||(r==null?void 0:r.id),k=ne&&ne===l;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-4",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),"data-testid":"button-back",children:e.jsx(Ae,{className:"h-5 w-5"})}),e.jsx("h1",{className:"font-semibold truncate flex-1",children:t.productName||"Product"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"aspect-square bg-muted rounded-lg overflow-hidden mb-4 relative",children:[m.length>0&&m[K]?e.jsx("img",{src:m[K],alt:t.productName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:e.jsx(G,{className:"w-12 h-12 text-muted-foreground/40"})}),m.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-background/80 hover:bg-background",onClick:()=>z(s=>(s-1+m.length)%m.length),"data-testid":"button-prev-image",children:e.jsx(Oe,{className:"h-5 w-5"})}),e.jsx(x,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-background/80 hover:bg-background",onClick:()=>z(s=>(s+1)%m.length),"data-testid":"button-next-image",children:e.jsx(Le,{className:"h-5 w-5"})})]})]}),m.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:m.slice(0,4).map((s,i)=>e.jsx("button",{onClick:()=>z(i),className:`aspect-square rounded-lg overflow-hidden border-2 ${K===i?"border-primary":"border-transparent"}`,"data-testid":`thumbnail-${i}`,children:e.jsx("img",{src:s,alt:"",className:"w-full h-full object-cover"})},i))})]}),Q?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b",children:[e.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden bg-muted",children:m.length>0?e.jsx("img",{src:m[0],alt:t.productName||t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-muted-foreground/40"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-bold text-base leading-tight mb-1 truncate","data-testid":"text-product-title",children:t.productName||t.name}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-quantity",children:t.quantity>0?`${t.quantity} available`:"Out of stock"})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>ge(!te),className:"w-full flex items-center justify-between py-3 px-0 text-left border-b","data-testid":"button-option-dropdown",children:[e.jsx("span",{className:"text-sm font-medium",children:"Option"}),e.jsx(W,{className:`h-4 w-4 text-muted-foreground transition-transform ${te?"rotate-180":""}`})]})}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-0 border-b",children:[e.jsx("span",{className:"text-sm font-medium",children:"Price"}),e.jsxs("span",{className:"font-semibold","data-testid":"text-product-price",children:["US$",(t.price||0).toFixed(2)]})]}),e.jsx("div",{className:"border-b",children:e.jsxs("button",{onClick:()=>{j?P(!0):F(!0)},className:"w-full flex items-center justify-between py-3 px-0 text-left hover:bg-muted/50 transition-colors","data-testid":"button-payment-method",children:[e.jsx("span",{className:"text-sm font-medium",children:"Payment"}),e.jsxs("div",{className:"flex items-center gap-2",children:[j?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[j.brand," •••• ",j.last4]})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Add payment"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]})]})}),e.jsx("div",{className:"border-b",children:e.jsxs("button",{onClick:()=>{p?D(!0):$(!0)},className:"w-full flex items-center justify-between py-3 px-0 text-left hover:bg-muted/50 transition-colors","data-testid":"button-shipping-address",children:[e.jsx("span",{className:"text-sm font-medium",children:"Address"}),e.jsxs("div",{className:"flex items-center gap-2",children:[p?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-right text-sm max-w-[200px]",children:[e.jsx("div",{className:"font-medium truncate",children:p.name||"User"}),e.jsxs("div",{className:"text-muted-foreground truncate",children:[p.city&&`${p.city}, `,p.state," ",p.zipcode]})]})}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Add address"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]})]})}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["US$",((t.price||0)*I).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Shipping"}),c!==null?e.jsxs("span",{className:"font-medium",children:["US$",(typeof c=="string"?parseFloat(c):c).toFixed(2)]}):e.jsx(xe,{className:"h-4 w-4 animate-spin"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Taxes"}),e.jsx("span",{className:"font-medium",children:"US$0.00"})]}),e.jsx(he,{}),e.jsxs("div",{className:"flex justify-between text-base font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{"data-testid":"text-total-price",children:["US$",((t.price||0)*I+(c?typeof c=="string"?parseFloat(c):c:0)).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(x,{variant:"outline",className:"flex-1",onClick:()=>q(!1),"data-testid":"button-back",children:"Back"}),e.jsx(x,{className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold",disabled:k||!j||!p||V.isPending,onClick:()=>V.mutate(),"data-testid":"button-checkout",children:V.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4 animate-spin mr-2"}),"Processing..."]}):"Check out"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2","data-testid":"text-product-title",children:t.productName||t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[e.jsx("span",{"data-testid":"text-quantity",children:t.quantity>0?`${t.quantity} Available`:"Out of Stock"}),t.condition&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:t.condition})]})]}),e.jsxs("p",{className:"text-3xl font-bold","data-testid":"text-product-price",children:["US$",(t.price||0).toFixed(2),c!==null&&e.jsxs("span",{className:"text-sm text-muted-foreground font-normal",children:[" ","+ US$",(typeof c=="string"?parseFloat(c):c).toFixed(2)," shipping + taxes"]})]})]}),e.jsx("div",{children:e.jsx(x,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-buy-now",disabled:k,onClick:()=>{k||q(!0)},children:k?"Your Product":"Buy Now"})}),e.jsxs(E,{className:"overflow-hidden",children:[e.jsx(ue,{href:`/profile/${l}`,children:e.jsxs("div",{className:"flex items-center justify-between p-4 border-b cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs($e,{className:"h-12 w-12",children:[e.jsx(De,{src:a==null?void 0:a.profilePhoto}),e.jsx(Ie,{children:Ne.charAt(0).toUpperCase()})]}),e.jsx("p",{className:"font-semibold text-lg","data-testid":"text-seller-name",children:ve})]}),e.jsx(x,{variant:"ghost",size:"icon",className:"rounded-full",onClick:s=>{s.preventDefault(),s.stopPropagation(),be()},disabled:fe,"data-testid":"button-message-icon",children:e.jsx(Te,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"grid grid-cols-3 divide-x bg-muted/30",children:[U!=null&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-xl font-bold mb-1",children:[e.jsx(Ke,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),U.toFixed(1)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rating"})]}),w!=null&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("p",{className:"text-xl font-bold mb-1",children:w>=1e3?`${(w/1e3).toFixed(1)}K`:w}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reviews"})]}),S!=null&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("p",{className:"text-xl font-bold mb-1",children:S>=1e3?`${(S/1e3).toFixed(1)}K`:S}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sold"})]})]})]}),e.jsxs(E,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Product Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.condition&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Condition"}),e.jsx("span",{className:"font-medium","data-testid":"text-condition",children:t.condition})]}),t.category&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category"}),e.jsx("span",{className:"font-medium",children:typeof t.category=="object"?t.category.name:t.category})]}),t.productType&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type"}),e.jsx("span",{className:"font-medium",children:t.productType})]})]}),t.description&&e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-description",children:t.description})})]}),e.jsx(x,{variant:"outline",className:"w-full",onClick:()=>g(`/profile/${l}`),"data-testid":"button-view-profile",children:"View Profile"}),e.jsxs(E,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Buyer Protections"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ze,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[pe.app_name," Buyer Guarantee"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive your purchase on time and as described or we'll make it right."})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.createdAt&&e.jsxs("span",{className:"text-muted-foreground",children:["Created on ",new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),e.jsxs(x,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700","data-testid":"button-report",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"Report Listing"]})]})]})]}),ie.length>0&&e.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8",children:[e.jsx(he,{className:"mb-6"}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"More from the Seller"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:ie.slice(0,15).map(s=>{var i;return e.jsx(ue,{href:`/product/${s._id}`,children:e.jsxs("div",{className:"cursor-pointer group","data-testid":`related-product-${s._id}`,children:[e.jsx("div",{className:"aspect-square bg-muted rounded-lg overflow-hidden mb-2 relative",children:(i=s.images)!=null&&i[0]?e.jsx("img",{src:s.images[0],alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:e.jsx(G,{className:"w-12 h-12 text-muted-foreground/40"})})}),e.jsx("p",{className:"font-medium text-sm truncate","data-testid":`product-name-${s._id}`,children:s.name||"No Title"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["US$",(s.price||0).toFixed(2)]})]})},s._id)})})]}),J&&e.jsx(o.Suspense,{fallback:e.jsx("div",{}),children:e.jsx(Be,{open:J,onOpenChange:R,product:t,onOpenPaymentMethods:()=>{R(!1),j?P(!0):F(!0)},onOpenShippingAddresses:()=>{R(!1),p?D(!0):$(!0)}})}),X&&e.jsx(o.Suspense,{fallback:e.jsx("div",{}),children:e.jsx(Me,{open:X,onOpenChange:F,onSuccess:async()=>{F(!1),await f.invalidateQueries({queryKey:[`/api/users/paymentmethod/default/${d}`]}),await A()}})}),Z&&e.jsx(o.Suspense,{fallback:e.jsx("div",{}),children:e.jsx(Ue,{open:Z,onOpenChange:async s=>{P(s),s||(await f.invalidateQueries({queryKey:[`/api/users/paymentmethod/default/${d}`]}),await A())},onSuccess:async()=>{P(!1),await f.invalidateQueries({queryKey:[`/api/users/paymentmethod/default/${d}`]}),await A()}})}),ee&&e.jsx(o.Suspense,{fallback:e.jsx("div",{}),children:e.jsx(Ve,{open:ee,onOpenChange:$,onSuccess:async()=>{$(!1),await f.invalidateQueries({queryKey:[`/api/address/default/address/${d}`]}),await O(),await T()}})}),se&&e.jsx(o.Suspense,{fallback:e.jsx("div",{}),children:e.jsx(Ye,{open:se,onOpenChange:async s=>{D(s),s||(await f.invalidateQueries({queryKey:[`/api/address/default/address/${d}`]}),await O(),await T())},onSuccess:async()=>{D(!1),await f.invalidateQueries({queryKey:[`/api/address/default/address/${d}`]}),await O(),await T()}})})]})}export{us as default};

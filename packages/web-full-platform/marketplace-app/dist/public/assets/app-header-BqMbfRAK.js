import{c as P,a as te,r as u,j as e,L as l,d as W,b as ne,u as J,e as ie}from"./index-sx6K5zvX.js";import{B as x}from"./button-BhKWRVKT.js";import{I as X}from"./input-D9aLazCK.js";import{A as L,a as U,b as M}from"./avatar-0uinKUeM.js";import{S as oe,a as de}from"./sheet-D885dNqh.js";import{S as z}from"./separator-GUgqmzB4.js";import{T as ce,a as me,b as Y,c as Z}from"./tabs-BFEhDEaE.js";import{u as E}from"./useQuery-BbAFWd3P.js";import{C as v}from"./chevron-right-BMekTT0X.js";import{S as xe}from"./shopping-bag-D4iuDx4j.js";import{M as he}from"./map-pin-CyryTmSF.js";import{H as ue}from"./house-D32rhlCw.js";import{R as pe}from"./radio-Q1nT0ViM.js";import{R as fe}from"./receipt-Cvz0JzoL.js";import{P as ge}from"./package-vaCfuI3Q.js";import{T as je}from"./truck-DsoUBxdC.js";import{D as ve}from"./dollar-sign-MBL8n1jo.js";import{M as be}from"./message-circle-wvvinv5k.js";import{C as Ne}from"./circle-help-BQp5GvKu.js";import{D as we,a as ye,b as ke,c as ee}from"./dropdown-menu-BOeL9IeC.js";import{S as h}from"./search-CokuAmim.js";import{P as Ce}from"./plus-C4q9dHNM.js";import{C as Se}from"./calendar-C6lCMhWH.js";import{M as $e}from"./message-square-D33FmQ-H.js";import"./index-BvxB2yyY.js";import"./index-DI5236x7.js";import"./index-BVScwSuZ.js";import"./index-UxBk8lm-.js";import"./index-CLz3BQaN.js";import"./check-y82geyed.js";import"./circle-BdzxhEiG.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=P("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=P("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=P("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=P("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=P("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);function Pe({open:b,onOpenChange:p}){const{user:o,logout:T}=te(),D=(o==null?void 0:o._id)||(o==null?void 0:o.id),{data:N}=E({queryKey:[`/api/profile/${D}`],enabled:!!D&&b,staleTime:0}),s=N||o,[w,F]=u.useState(s!=null&&s.seller?"selling":"buying");if(!o)return null;const f=()=>s.firstName&&s.lastName?`${s.firstName[0]}${s.lastName[0]}`.toUpperCase():s.firstName?s.firstName[0].toUpperCase():s.email?s.email[0].toUpperCase():"U",H=()=>{var a;return s.userName?s.userName:s.firstName||s.lastName?`${s.firstName||""}${s.lastName||""}`.trim():((a=s.email)==null?void 0:a.split("@")[0])||"User"},y=[{icon:pe,label:"Shows",href:"/live-shows",testId:"action-shows"},{icon:fe,label:"Orders",href:"/orders",testId:"action-orders"},{icon:ge,label:"Inventory",href:"/inventory",testId:"action-inventory"},{icon:je,label:"Shipments",href:"/shipping",testId:"action-shipments"},{icon:ve,label:"Finances",href:"/payments",testId:"action-finances"}],d=[{icon:xe,label:"Purchases",href:"/purchases",testId:"action-purchases"},{icon:he,label:"Addresses",href:"/addresses",testId:"action-addresses"}],k=[{icon:ze,label:"Seller Hub",href:"/seller/hub",testId:"menu-seller-hub",sellerOnly:!0},{icon:be,label:"Friends",href:"/friends",testId:"menu-friends"},{icon:Ne,label:"Help & Legal",href:"/help",testId:"menu-help"},{icon:De,label:"Logout",testId:"menu-logout",onClick:async()=>{await T(),p(!1)},isDestructive:!0}],n=a=>{p(!1)},g=a=>e.jsx(l,{href:a.href,children:e.jsxs("button",{onClick:()=>n(a.href),className:"flex flex-col items-center justify-center p-4 rounded-lg hover-elevate active-elevate-2 transition-all","data-testid":a.testId,children:[e.jsx(a.icon,{className:"h-6 w-6 text-foreground mb-2"}),e.jsx("span",{className:"text-xs text-center text-foreground font-medium",children:a.label})]})},a.testId),_=a=>a.sellerOnly&&!s.seller?null:a.onClick?e.jsxs("button",{onClick:a.onClick,className:W("flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all",a.isDestructive&&"text-destructive"),"data-testid":a.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:W("h-5 w-5",a.isDestructive?"text-destructive":"text-foreground")}),e.jsx("span",{className:"text-base",children:a.label})]}),e.jsx(v,{className:"h-5 w-5 text-muted-foreground"})]},a.testId):e.jsx(l,{href:a.href||"#",children:e.jsxs("button",{onClick:()=>n(a.href||"#"),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":a.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:a.label})]}),e.jsx(v,{className:"h-5 w-5 text-muted-foreground"})]})},a.testId);return e.jsx(oe,{open:b,onOpenChange:p,children:e.jsxs(de,{side:"right",className:"w-full sm:max-w-md p-0 overflow-y-auto flex flex-col",onOpenAutoFocus:a=>a.preventDefault(),children:[e.jsx("div",{className:"p-4",children:e.jsx(l,{href:"/profile-view",children:e.jsxs("button",{onClick:()=>n(),className:"flex items-center gap-3 w-full hover-elevate active-elevate-2 p-2 rounded-lg transition-all","data-testid":"button-profile-view",children:[e.jsxs(L,{className:"h-14 w-14","data-testid":"drawer-avatar",children:[e.jsx(U,{src:s.profilePhoto,alt:s.userName||s.email}),e.jsx(M,{className:"bg-teal-500 text-white text-lg font-bold",children:f()})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("p",{className:"font-bold text-foreground text-base truncate","data-testid":"text-username",children:H()}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-0.5",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:"23"})," following"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:"52"})," followers"]})]})]}),e.jsx(v,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"})]})})}),e.jsx(z,{}),e.jsx("div",{className:"md:hidden flex-1",children:e.jsxs("div",{className:"space-y-1 p-2",children:[e.jsx(l,{href:"/marketplace",children:e.jsxs("button",{onClick:()=>n(),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":"menu-home-mobile",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:"Home"})]}),e.jsx(v,{className:"h-5 w-5 text-muted-foreground"})]})}),e.jsx(l,{href:"/browse",children:e.jsxs("button",{onClick:()=>n(),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":"menu-browse-mobile",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:"Browse"})]}),e.jsx(v,{className:"h-5 w-5 text-muted-foreground"})]})}),e.jsx(z,{className:"my-2"}),s.seller&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase",children:"Selling"}),y.map(a=>e.jsx(l,{href:a.href,children:e.jsxs("button",{onClick:()=>n(a.href),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":a.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:a.label})]}),e.jsx(v,{className:"h-5 w-5 text-muted-foreground"})]})},a.testId))]}),e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase",children:"Buying"}),d.map(a=>e.jsx(l,{href:a.href,children:e.jsxs("button",{onClick:()=>n(a.href),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":a.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:a.label})]}),e.jsx(v,{className:"h-5 w-5 text-muted-foreground"})]})},a.testId)),e.jsx(z,{className:"my-2"}),e.jsx("div",{className:"space-y-1",children:k.map(a=>_(a))})]})}),e.jsxs(ce,{value:w,onValueChange:F,className:"hidden md:flex flex-1 flex-col",children:[e.jsxs(me,{className:"w-full justify-start rounded-none border-b bg-transparent p-0 h-auto",children:[s.seller&&e.jsx(Y,{value:"selling",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-foreground data-[state=active]:bg-transparent px-6 py-3 font-semibold","data-testid":"tab-selling",children:"Selling"}),e.jsx(Y,{value:"buying",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-foreground data-[state=active]:bg-transparent px-6 py-3 font-semibold","data-testid":"tab-buying",children:"Buying"})]}),s.seller&&e.jsxs(Z,{value:"selling",className:"flex-1 mt-0 p-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:y.map(a=>g(a))}),e.jsx(z,{className:"my-4"}),e.jsx("div",{className:"space-y-1",children:k.map(a=>_(a))})]}),e.jsxs(Z,{value:"buying",className:"flex-1 mt-0 p-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:d.map(a=>g(a))}),e.jsx(z,{className:"my-4"}),e.jsx("div",{className:"space-y-1",children:k.map(a=>_(a))})]})]})]})})}function mt({onMobileMenuToggle:b,mobileMenuOpen:p=!1,onMobileMenuClose:o,hideLogo:T=!1,hideNavigation:D=!1}){var V,K,G;const{settings:N}=ne(),{user:s,isAuthenticated:w,refreshUserData:F}=te(),[,f]=J(),[H,y]=u.useState(!1),[d,B]=u.useState(""),[k,n]=u.useState(!1),[g,_]=u.useState(""),a=u.useRef(null),{toast:q}=ie(),[A]=J(),O=(s==null?void 0:s._id)||(s==null?void 0:s.id),{data:se}=E({queryKey:[`/api/profile/${O}`],enabled:!!O&&!!w,staleTime:0}),c=se||s,ae=()=>{y(!p),b==null||b()},re=t=>{y(t),!t&&p&&(o==null||o())},le=()=>s!=null&&s.firstName&&(s!=null&&s.lastName)?`${s.firstName[0]}${s.lastName[0]}`.toUpperCase():s!=null&&s.firstName?s.firstName[0].toUpperCase():s!=null&&s.email?s.email[0].toUpperCase():"U",i=A.startsWith("/show/");u.useEffect(()=>{const t=setTimeout(()=>{_(d)},300);return()=>clearTimeout(t)},[d]);const{data:m}=E({queryKey:["/api/products/search",g],queryFn:async()=>{if(!g.trim())return{results:{products:[],rooms:[],users:[]}};const t=await fetch(`/api/products/search?q=${encodeURIComponent(g)}`);if(!t.ok)throw new Error("Search failed");return t.json()},enabled:g.length>0}),C=((V=m==null?void 0:m.results)==null?void 0:V.products)||[],S=((K=m==null?void 0:m.results)==null?void 0:K.rooms)||[],$=((G=m==null?void 0:m.results)==null?void 0:G.users)||[];u.useEffect(()=>{const t=r=>{a.current&&!a.current.contains(r.target)&&n(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const Q=t=>{B(t),n(t.length>0)},I=t=>{console.log("ðŸ” Autocomplete click:",t),B(""),n(!1),f(t)},R=t=>t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.firstName?t.firstName:t.lastName?t.lastName:t.username?t.username:t.name?t.name:t.displayName?t.displayName:t.email?t.email.split("@")[0]:"User";return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:`sticky top-0 z-50 border-b ${i?"bg-black border-zinc-800":"bg-background border-border"}`,children:[e.jsx("div",{className:"flex justify-center w-full",children:e.jsxs("div",{className:"flex items-center justify-between h-14 px-3 sm:px-6 w-full lg:w-[90%]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[w&&e.jsx(x,{size:"icon",variant:"ghost",className:`lg:hidden h-9 w-9 rounded-full ${i?"text-white hover:text-white":""}`,onClick:ae,"data-testid":"button-mobile-menu",children:e.jsx(_e,{className:"h-5 w-5"})}),!T&&e.jsx(l,{href:"/","data-testid":"link-home",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-6 w-6 sm:h-7 sm:w-7 bg-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-xs sm:text-sm",children:N.app_name.charAt(0).toUpperCase()})}),e.jsx("span",{className:`text-base sm:text-lg font-bold hidden sm:inline ${i?"text-white":"text-foreground"}`,children:N.app_name})]})}),!D&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 ml-4",children:[e.jsx(l,{href:"/",children:e.jsx(x,{className:A==="/"?"bg-primary text-primary-foreground font-semibold px-5 rounded-full h-9 text-sm":`font-medium text-sm h-9 px-4 ${i?"text-white hover:text-white":""}`,variant:A==="/"?void 0:"ghost","data-testid":"button-home",children:"Home"})}),e.jsx(l,{href:"/browse",children:e.jsx(x,{className:A==="/browse"?"bg-primary text-primary-foreground font-semibold px-5 rounded-full h-9 text-sm":`font-medium text-sm h-9 px-4 ${i?"text-white hover:text-white":""}`,variant:A==="/browse"?void 0:"ghost","data-testid":"button-browse",children:"Browse"})})]}),!D&&e.jsxs("div",{ref:a,className:"relative hidden sm:block w-48 md:w-64 lg:w-96 ml-2",children:[e.jsx(h,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${i?"text-zinc-400":"text-muted-foreground"} pointer-events-none z-10`}),e.jsx(X,{type:"text",value:d,onChange:t=>Q(t.target.value),onFocus:()=>d.length>0&&n(!0),placeholder:`Search ${N.app_name}`,className:`pl-10 text-sm h-9 rounded-md ${i?"bg-zinc-900 border-zinc-700 text-white placeholder:text-zinc-500":"bg-muted/50 border-border"}`,"data-testid":"input-search"}),k&&(C.length>0||S.length>0||$.length>0)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border border-border rounded-md shadow-lg max-h-96 overflow-y-auto z-50",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:d})]})}),$.length>0&&e.jsx("div",{children:$.slice(0,3).map(t=>{const r=R(t);return e.jsxs("div",{onMouseDown:j=>{j.preventDefault(),I(`/profile/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer","data-testid":`autocomplete-user-${t._id}`,children:[e.jsxs(L,{className:"h-8 w-8",children:[e.jsx(U,{src:t.profilePhoto}),e.jsx(M,{className:"bg-primary text-primary-foreground text-xs",children:r[0].toUpperCase()})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:r})})]},t._id)})}),S.length>0&&e.jsx("div",{children:S.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:r=>{r.preventDefault(),I(`/show/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer","data-testid":`autocomplete-show-${t._id}`,children:[e.jsx(h,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Shows"})]})]},t._id))}),C.length>0&&e.jsx("div",{children:C.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:r=>{r.preventDefault(),I(`/product/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer","data-testid":`autocomplete-product-${t._id}`,children:[e.jsx(h,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Products"})]})]},t._id))})]})]})]}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:w?e.jsxs(e.Fragment,{children:[(c==null?void 0:c.seller)&&e.jsxs(we,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(x,{size:"icon",variant:"default",className:`h-9 w-9 rounded-full ${i?"bg-white text-black hover:bg-white/90":""}`,"data-testid":"button-seller-actions",children:e.jsx(Ce,{className:"h-5 w-5"})})}),e.jsxs(ke,{align:"end",className:"w-48",children:[e.jsx(ee,{asChild:!0,children:e.jsxs(l,{href:"/inventory/add",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Listing"})]})}),e.jsx(ee,{asChild:!0,children:e.jsxs(l,{href:"/schedule-show",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule a Show"})]})})]})]}),!(c!=null&&c.seller)&&e.jsx(x,{variant:"outline",size:"sm",className:`hidden md:flex w-full rounded-full text-sm h-9 px-4 font-medium ${i?"border-white text-white bg-transparent hover:bg-white/10 hover:text-white":"border-border"}`,"data-testid":"button-seller-setup",onClick:async()=>{const t=(s==null?void 0:s._id)||(s==null?void 0:s.id);if(t)try{const r=await fetch(`/api/profile/${t}`,{credentials:"include"});if(r.ok){const j=await r.json();if(console.log("Fetched user data for seller check:",{seller:j.seller,applied_seller:j.applied_seller}),j.seller){console.log("User is a seller - updating local data and navigating to /seller/hub"),await F(),f("/seller/hub");return}console.log("User is not a seller - navigating to /seller/setup"),f("/seller/setup")}else console.error(`Failed to fetch user data: ${r.status} ${r.statusText}`),q({title:"Could not verify status",description:"Proceeding to seller setup page",variant:"default"}),f("/seller/setup")}catch(r){console.error("Error fetching user data:",r),q({title:"Connection error",description:"Could not verify seller status. Please try again.",variant:"destructive"}),f("/seller/setup")}},children:c!=null&&c.applied_seller?"Complete Seller Setup":"Become a Seller"}),e.jsx(l,{href:"/inbox",children:e.jsx(x,{size:"icon",variant:"ghost",className:`h-9 w-9 rounded-full hidden md:flex ${i?"text-white hover:text-white":""}`,"data-testid":"button-messages",children:e.jsx($e,{className:"h-5 w-5"})})}),s&&e.jsxs(L,{className:"h-9 w-9 cursor-pointer","data-testid":"avatar-user-profile",onClick:()=>y(!0),children:[e.jsx(U,{src:s.profilePhoto,alt:`${s.firstName||s.email}`}),e.jsx(M,{className:"bg-teal-500 text-white text-sm font-bold",children:le()})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{href:"/login",children:e.jsx(x,{variant:"ghost",size:"sm",className:`h-9 px-3 sm:px-4 font-medium text-sm ${i?"text-white hover:text-white":""}`,"data-testid":"button-login",children:"Log In"})}),e.jsx(l,{href:"/signup",children:e.jsx(x,{className:"bg-primary text-black font-semibold rounded-full h-9 px-4 sm:px-6 text-sm","data-testid":"button-signup",children:"Sign Up"})})]})})]})}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("div",{className:"sm:hidden px-3 pb-2 w-full lg:w-[90%]",children:e.jsxs("div",{ref:a,className:"relative",children:[e.jsx(h,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${i?"text-zinc-400":"text-muted-foreground"} pointer-events-none z-10`}),e.jsx(X,{type:"text",value:d,onChange:t=>Q(t.target.value),onFocus:()=>d.length>0&&n(!0),placeholder:`Search ${N.app_name}`,className:`pl-10 text-sm h-9 rounded-md ${i?"bg-zinc-900 border-zinc-700 text-white placeholder:text-zinc-500":"bg-muted/50 border-border"}`,"data-testid":"input-search-mobile"}),k&&(C.length>0||S.length>0||$.length>0)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border border-border rounded-md shadow-lg max-h-96 overflow-y-auto z-50",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:d})]})}),$.length>0&&e.jsx("div",{children:$.slice(0,3).map(t=>{const r=R(t);return e.jsxs("div",{onMouseDown:j=>{j.preventDefault(),I(`/profile/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer",children:[e.jsxs(L,{className:"h-8 w-8",children:[e.jsx(U,{src:t.profilePhoto}),e.jsx(M,{className:"bg-primary text-primary-foreground text-xs",children:r[0].toUpperCase()})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:r})})]},t._id)})}),S.length>0&&e.jsx("div",{children:S.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:r=>{r.preventDefault(),I(`/show/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer",children:[e.jsx(h,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Shows"})]})]},t._id))}),C.length>0&&e.jsx("div",{children:C.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:r=>{r.preventDefault(),I(`/product/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer",children:[e.jsx(h,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Products"})]})]},t._id))})]})]})})})]}),w&&e.jsx(Pe,{open:H||p,onOpenChange:re})]})}export{mt as AppHeader};

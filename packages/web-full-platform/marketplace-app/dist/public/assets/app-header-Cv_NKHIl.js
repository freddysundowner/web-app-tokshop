import{c as P,a as se,r as j,j as e,L as n,d as J,b as ie,u as X,e as oe}from"./index-DOZKoalF.js";import{B as f}from"./button-bCrgsaso.js";import{I as Y}from"./input-CsVTZWQJ.js";import{A as T,a as F,b as H}from"./avatar-BNno7OSM.js";import{S as de,a as ce}from"./sheet-BgQwtBuK.js";import{S as z}from"./separator-B5Em_GJT.js";import{T as me,a as xe,b as Z,c as ee}from"./tabs-BCgd9IQZ.js";import{u as q}from"./useQuery-48pQeuS3.js";import{C as w}from"./chevron-right-SEiIbCON.js";import{S as he}from"./shopping-bag-Bumzb4mp.js";import{M as ue}from"./map-pin-CsYpw2VJ.js";import{H as pe}from"./house-C3I58tZj.js";import{R as fe}from"./radio-DpHzpEDt.js";import{R as ge}from"./receipt-CDn5HmDW.js";import{P as je}from"./package-BkkIjgzC.js";import{T as ve}from"./truck-DxYEbFC6.js";import{D as be}from"./dollar-sign-C45zWx1k.js";import{M as Ne}from"./message-circle-CLKU1yj_.js";import{C as we}from"./circle-help-CUthFkBB.js";import{D as ye,a as ke,b as Ce,c as te}from"./dropdown-menu-D0VRtd9b.js";import{S as g}from"./search-DsOHL3-T.js";import{P as $e}from"./plus-CGXGABxL.js";import{C as Se}from"./calendar-DitP2OUB.js";import{M as Ie}from"./message-square-CVdGvBRf.js";import"./index-D0GAShZH.js";import"./index-CxUEmdCc.js";import"./index-CXm_CZR6.js";import"./index-CYumVO2i.js";import"./index-DwAU5pHh.js";import"./check-Bj3EYrSG.js";import"./circle-D2uhURtr.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=P("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=P("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=P("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=P("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=P("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);function Le({open:y,onOpenChange:v}){const{user:o,logout:B}=se(),_=(o==null?void 0:o._id)||(o==null?void 0:o.id),{data:L}=q({queryKey:[`/api/profile/${_}`],enabled:!!_&&y,staleTime:0}),r=L||o,[a,c]=j.useState(r!=null&&r.seller?"selling":"buying");if(!o)return null;const E=()=>r.firstName&&r.lastName?`${r.firstName[0]}${r.lastName[0]}`.toUpperCase():r.firstName?r.firstName[0].toUpperCase():r.email?r.email[0].toUpperCase():"U",b=()=>{var s;return r.userName?r.userName:r.firstName||r.lastName?`${r.firstName||""}${r.lastName||""}`.trim():((s=r.email)==null?void 0:s.split("@")[0])||"User"},U=[{icon:fe,label:"Shows",href:"/live-shows",testId:"action-shows"},{icon:ge,label:"Orders",href:"/orders",testId:"action-orders"},{icon:je,label:"Inventory",href:"/inventory",testId:"action-inventory"},{icon:ve,label:"Shipments",href:"/shipping",testId:"action-shipments"},{icon:be,label:"Finances",href:"/payments",testId:"action-finances"}],k=[{icon:he,label:"Purchases",href:"/purchases",testId:"action-purchases"},{icon:ue,label:"Addresses",href:"/addresses",testId:"action-addresses"}],C=[{icon:Pe,label:"Seller Hub",href:"/seller/hub",testId:"menu-seller-hub",sellerOnly:!0},{icon:Ne,label:"Friends",href:"/friends",testId:"menu-friends"},{icon:we,label:"Help & Legal",href:"/help",testId:"menu-help"},{icon:_e,label:"Logout",testId:"menu-logout",onClick:async()=>{await B(),v(!1)},isDestructive:!0}],d=s=>{v(!1)},u=s=>e.jsx(n,{href:s.href,children:e.jsxs("button",{onClick:()=>d(s.href),className:"flex flex-col items-center justify-center p-4 rounded-lg hover-elevate active-elevate-2 transition-all","data-testid":s.testId,children:[e.jsx(s.icon,{className:"h-6 w-6 text-foreground mb-2"}),e.jsx("span",{className:"text-xs text-center text-foreground font-medium",children:s.label})]})},s.testId),p=s=>s.sellerOnly&&!r.seller?null:s.onClick?e.jsxs("button",{onClick:s.onClick,className:J("flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all",s.isDestructive&&"text-destructive"),"data-testid":s.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:J("h-5 w-5",s.isDestructive?"text-destructive":"text-foreground")}),e.jsx("span",{className:"text-base",children:s.label})]}),e.jsx(w,{className:"h-5 w-5 text-muted-foreground"})]},s.testId):e.jsx(n,{href:s.href||"#",children:e.jsxs("button",{onClick:()=>d(s.href||"#"),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":s.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:s.label})]}),e.jsx(w,{className:"h-5 w-5 text-muted-foreground"})]})},s.testId);return e.jsx(de,{open:y,onOpenChange:v,children:e.jsxs(ce,{side:"right",className:"w-full sm:max-w-md p-0 overflow-y-auto flex flex-col",onOpenAutoFocus:s=>s.preventDefault(),children:[e.jsx("div",{className:"p-4",children:e.jsx(n,{href:"/profile-view",children:e.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-3 w-full hover-elevate active-elevate-2 p-2 rounded-lg transition-all","data-testid":"button-profile-view",children:[e.jsxs(T,{className:"h-14 w-14","data-testid":"drawer-avatar",children:[e.jsx(F,{src:r.profilePhoto,alt:r.userName||r.email}),e.jsx(H,{className:"bg-teal-500 text-white text-lg font-bold",children:E()})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("p",{className:"font-bold text-foreground text-base truncate","data-testid":"text-username",children:b()}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-0.5",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:"23"})," following"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:"52"})," followers"]})]})]}),e.jsx(w,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"})]})})}),e.jsx(z,{}),e.jsx("div",{className:"md:hidden flex-1",children:e.jsxs("div",{className:"space-y-1 p-2",children:[e.jsx(n,{href:"/marketplace",children:e.jsxs("button",{onClick:()=>d(),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":"menu-home-mobile",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:"Home"})]}),e.jsx(w,{className:"h-5 w-5 text-muted-foreground"})]})}),e.jsx(n,{href:"/browse",children:e.jsxs("button",{onClick:()=>d(),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":"menu-browse-mobile",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:"Browse"})]}),e.jsx(w,{className:"h-5 w-5 text-muted-foreground"})]})}),e.jsx(z,{className:"my-2"}),r.seller&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase",children:"Selling"}),U.map(s=>e.jsx(n,{href:s.href,children:e.jsxs("button",{onClick:()=>d(s.href),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":s.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:s.label})]}),e.jsx(w,{className:"h-5 w-5 text-muted-foreground"})]})},s.testId))]}),e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase",children:"Buying"}),k.map(s=>e.jsx(n,{href:s.href,children:e.jsxs("button",{onClick:()=>d(s.href),className:"flex items-center justify-between w-full py-3 px-4 hover-elevate active-elevate-2 transition-all","data-testid":s.testId,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"text-base text-foreground",children:s.label})]}),e.jsx(w,{className:"h-5 w-5 text-muted-foreground"})]})},s.testId)),e.jsx(z,{className:"my-2"}),e.jsx("div",{className:"space-y-1",children:C.map(s=>p(s))})]})}),e.jsxs(me,{value:a,onValueChange:c,className:"hidden md:flex flex-1 flex-col",children:[e.jsxs(xe,{className:"w-full justify-start rounded-none border-b bg-transparent p-0 h-auto",children:[r.seller&&e.jsx(Z,{value:"selling",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-foreground data-[state=active]:bg-transparent px-6 py-3 font-semibold","data-testid":"tab-selling",children:"Selling"}),e.jsx(Z,{value:"buying",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-foreground data-[state=active]:bg-transparent px-6 py-3 font-semibold","data-testid":"tab-buying",children:"Buying"})]}),r.seller&&e.jsxs(ee,{value:"selling",className:"flex-1 mt-0 p-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:U.map(s=>u(s))}),e.jsx(z,{className:"my-4"}),e.jsx("div",{className:"space-y-1",children:C.map(s=>p(s))})]}),e.jsxs(ee,{value:"buying",className:"flex-1 mt-0 p-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:k.map(s=>u(s))}),e.jsx(z,{className:"my-4"}),e.jsx("div",{className:"space-y-1",children:C.map(s=>p(s))})]})]})]})})}function xt({onMobileMenuToggle:y,mobileMenuOpen:v=!1,onMobileMenuClose:o,hideLogo:B=!1,hideNavigation:_=!1,isDashboard:L=!1}){var K,G,W;const{settings:r}=ie(),{user:a,isAuthenticated:c,refreshUserData:E}=se(),[,b]=X(),[U,k]=j.useState(!1),[m,C]=j.useState(""),[d,u]=j.useState(!1),[p,s]=j.useState(""),M=j.useRef(null),{toast:O}=oe(),[A]=X(),Q=(a==null?void 0:a._id)||(a==null?void 0:a.id),{data:ae}=q({queryKey:[`/api/profile/${Q}`],enabled:!!Q&&!!c,staleTime:0}),x=ae||a,re=()=>{k(!v),y==null||y()},le=t=>{k(t),!t&&v&&(o==null||o())},ne=()=>a!=null&&a.firstName&&(a!=null&&a.lastName)?`${a.firstName[0]}${a.lastName[0]}`.toUpperCase():a!=null&&a.firstName?a.firstName[0].toUpperCase():a!=null&&a.email?a.email[0].toUpperCase():"U",i=A.startsWith("/show/");j.useEffect(()=>{const t=setTimeout(()=>{s(m)},300);return()=>clearTimeout(t)},[m]);const{data:h}=q({queryKey:["/api/products/search",p],queryFn:async()=>{if(!p.trim())return{results:{products:[],rooms:[],users:[]}};const t=await fetch(`/api/products/search?q=${encodeURIComponent(p)}`);if(!t.ok)throw new Error("Search failed");return t.json()},enabled:p.length>0}),$=((K=h==null?void 0:h.results)==null?void 0:K.products)||[],S=((G=h==null?void 0:h.results)==null?void 0:G.rooms)||[],I=((W=h==null?void 0:h.results)==null?void 0:W.users)||[];j.useEffect(()=>{const t=l=>{M.current&&!M.current.contains(l.target)&&u(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const R=t=>{C(t),u(t.length>0)},D=t=>{console.log("ðŸ” Autocomplete click:",t),C(""),u(!1),b(t)},V=t=>t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.firstName?t.firstName:t.lastName?t.lastName:t.username?t.username:t.name?t.name:t.displayName?t.displayName:t.email?t.email.split("@")[0]:"User";return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:`sticky top-0 z-50 border-b ${i?"bg-black border-zinc-800":"bg-background border-border"}`,children:[e.jsx("div",{className:`flex w-full ${L?"":"justify-center"}`,children:e.jsxs("div",{className:`flex items-center justify-between h-14 px-3 sm:px-6 w-full ${L?"":"lg:w-[90%]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx(f,{size:"icon",variant:"ghost",className:`lg:hidden h-9 w-9 rounded-full ${i?"text-white hover:text-white":""}`,onClick:re,"data-testid":"button-mobile-menu",children:e.jsx(Ae,{className:"h-5 w-5"})}),!B&&e.jsx(n,{href:"/","data-testid":"link-home",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-6 w-6 sm:h-7 sm:w-7 bg-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-xs sm:text-sm",children:r.app_name.charAt(0).toUpperCase()})}),e.jsx("span",{className:`text-base sm:text-lg font-bold hidden sm:inline ${i?"text-white":"text-foreground"}`,children:r.app_name})]})}),!_&&c&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 ml-4",children:[e.jsx(n,{href:"/",children:e.jsx(f,{className:A==="/"?"bg-primary text-primary-foreground font-semibold px-5 rounded-full h-9 text-sm":`font-medium text-sm h-9 px-4 ${i?"text-white hover:text-white":""}`,variant:A==="/"?void 0:"ghost","data-testid":"button-home",children:"Home"})}),e.jsx(n,{href:"/browse",children:e.jsx(f,{className:A==="/browse"?"bg-primary text-primary-foreground font-semibold px-5 rounded-full h-9 text-sm":`font-medium text-sm h-9 px-4 ${i?"text-white hover:text-white":""}`,variant:A==="/browse"?void 0:"ghost","data-testid":"button-browse",children:"Browse"})})]}),!_&&c&&e.jsxs("div",{ref:M,className:"relative hidden sm:block w-48 md:w-64 lg:w-96 ml-2",children:[e.jsx(g,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${i?"text-zinc-400":"text-muted-foreground"} pointer-events-none z-10`}),e.jsx(Y,{type:"text",value:m,onChange:t=>R(t.target.value),onFocus:()=>m.length>0&&u(!0),placeholder:`Search ${r.app_name}`,className:`pl-10 text-sm h-9 rounded-md ${i?"bg-zinc-900 border-zinc-700 text-white placeholder:text-zinc-500":"bg-muted/50 border-border"}`,"data-testid":"input-search"}),d&&($.length>0||S.length>0||I.length>0)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border border-border rounded-md shadow-lg max-h-96 overflow-y-auto z-50",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:m})]})}),I.length>0&&e.jsx("div",{children:I.slice(0,3).map(t=>{const l=V(t);return e.jsxs("div",{onMouseDown:N=>{N.preventDefault(),D(`/profile/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer","data-testid":`autocomplete-user-${t._id}`,children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(F,{src:t.profilePhoto}),e.jsx(H,{className:"bg-primary text-primary-foreground text-xs",children:l[0].toUpperCase()})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:l})})]},t._id)})}),S.length>0&&e.jsx("div",{children:S.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:l=>{l.preventDefault(),D(`/show/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer","data-testid":`autocomplete-show-${t._id}`,children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Shows"})]})]},t._id))}),$.length>0&&e.jsx("div",{children:$.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:l=>{l.preventDefault(),D(`/product/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer","data-testid":`autocomplete-product-${t._id}`,children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Products"})]})]},t._id))})]})]})]}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:c?e.jsxs(e.Fragment,{children:[(x==null?void 0:x.seller)&&e.jsxs(ye,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(f,{size:"icon",variant:"default",className:`h-9 w-9 rounded-full ${i?"bg-white text-black hover:bg-white/90":""}`,"data-testid":"button-seller-actions",children:e.jsx($e,{className:"h-5 w-5"})})}),e.jsxs(Ce,{align:"end",className:"w-48",children:[e.jsx(te,{asChild:!0,children:e.jsxs(n,{href:"/add-product",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Listing"})]})}),e.jsx(te,{asChild:!0,children:e.jsxs(n,{href:"/schedule-show",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule a Show"})]})})]})]}),!(x!=null&&x.seller)&&e.jsx(f,{variant:"outline",size:"sm",className:`hidden md:flex w-full rounded-full text-sm h-9 px-4 font-medium ${i?"border-white text-white bg-transparent hover:bg-white/10 hover:text-white":"border-border"}`,"data-testid":"button-seller-setup",onClick:async()=>{const t=(a==null?void 0:a._id)||(a==null?void 0:a.id);if(t)try{const l=await fetch(`/api/profile/${t}`,{credentials:"include"});if(l.ok){const N=await l.json();if(console.log("Fetched user data for seller check:",{seller:N.seller,applied_seller:N.applied_seller}),N.seller){console.log("User is a seller - updating local data and navigating to /seller/hub"),await E(),b("/seller/hub");return}console.log("User is not a seller - navigating to /seller/setup"),b("/seller/setup")}else console.error(`Failed to fetch user data: ${l.status} ${l.statusText}`),O({title:"Could not verify status",description:"Proceeding to seller setup page",variant:"default"}),b("/seller/setup")}catch(l){console.error("Error fetching user data:",l),O({title:"Connection error",description:"Could not verify seller status. Please try again.",variant:"destructive"}),b("/seller/setup")}},children:x!=null&&x.applied_seller?"Complete Seller Setup":"Become a Seller"}),e.jsx(n,{href:"/inbox",children:e.jsx(f,{size:"icon",variant:"ghost",className:`h-9 w-9 rounded-full hidden md:flex ${i?"text-white hover:text-white":""}`,"data-testid":"button-messages",children:e.jsx(Ie,{className:"h-5 w-5"})})}),a&&e.jsxs(T,{className:"h-9 w-9 cursor-pointer","data-testid":"avatar-user-profile",onClick:()=>k(!0),children:[e.jsx(F,{src:a.profilePhoto,alt:`${a.firstName||a.email}`}),e.jsx(H,{className:"bg-teal-500 text-white text-sm font-bold",children:ne()})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{href:"/login",children:e.jsx(f,{variant:"ghost",size:"sm",className:`h-9 px-3 sm:px-4 font-medium text-sm ${i?"text-white hover:text-white":""}`,"data-testid":"button-login",children:"Log In"})}),e.jsx(n,{href:"/signup",children:e.jsx(f,{className:"bg-primary text-black font-semibold rounded-full h-9 px-4 sm:px-6 text-sm","data-testid":"button-signup",children:"Sign Up"})})]})})]})}),c&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("div",{className:"sm:hidden px-3 pb-2 w-full lg:w-[90%]",children:e.jsxs("div",{ref:M,className:"relative",children:[e.jsx(g,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 ${i?"text-zinc-400":"text-muted-foreground"} pointer-events-none z-10`}),e.jsx(Y,{type:"text",value:m,onChange:t=>R(t.target.value),onFocus:()=>m.length>0&&u(!0),placeholder:`Search ${r.app_name}`,className:`pl-10 text-sm h-9 rounded-md ${i?"bg-zinc-900 border-zinc-700 text-white placeholder:text-zinc-500":"bg-muted/50 border-border"}`,"data-testid":"input-search-mobile"}),d&&($.length>0||S.length>0||I.length>0)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border border-border rounded-md shadow-lg max-h-96 overflow-y-auto z-50",children:[e.jsx("div",{className:"px-3 py-2 border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:m})]})}),I.length>0&&e.jsx("div",{children:I.slice(0,3).map(t=>{const l=V(t);return e.jsxs("div",{onMouseDown:N=>{N.preventDefault(),D(`/profile/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(F,{src:t.profilePhoto}),e.jsx(H,{className:"bg-primary text-primary-foreground text-xs",children:l[0].toUpperCase()})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:l})})]},t._id)})}),S.length>0&&e.jsx("div",{children:S.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:l=>{l.preventDefault(),D(`/show/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer",children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Shows"})]})]},t._id))}),$.length>0&&e.jsx("div",{children:$.slice(0,3).map(t=>e.jsxs("div",{onMouseDown:l=>{l.preventDefault(),D(`/product/${t._id}`)},className:"flex items-center gap-3 px-3 py-2 hover-elevate cursor-pointer",children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"in Products"})]})]},t._id))})]})]})})})]}),c&&e.jsx(Le,{open:U||v,onOpenChange:le})]})}export{xt as AppHeader};

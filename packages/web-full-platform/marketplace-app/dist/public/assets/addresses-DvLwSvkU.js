import{c as le,r as m,a as de,e as ce,t as ue,j as e,k as w}from"./index-sx6K5zvX.js";import{u as me}from"./useQuery-BbAFWd3P.js";import{u as k}from"./useMutation-CvlU_VR_.js";import{C as B,a as z,b as q,d as he}from"./card-y7XVqkDr.js";import{B as v}from"./button-BhKWRVKT.js";import{I as y}from"./input-D9aLazCK.js";import{L as g}from"./label-BJe6VCdD.js";import{S as W,a as T,b as R,c as H,d as E}from"./select-C7m4p16O.js";import{D as ge,a as pe,b as ye,c as Ce,d as Se,e as be}from"./dialog-lan0uYA-.js";import{A as ve,a as xe,b as fe,c as Ne,d as Ae,e as we,f as ke,g as Be,h as je}from"./alert-dialog-7qLZ3S2i.js";import{D as Me,a as Pe,b as Le,c as G}from"./dropdown-menu-BOeL9IeC.js";import{P as J}from"./plus-C4q9dHNM.js";import{M as De}from"./map-pin-CyryTmSF.js";import{H as Fe}from"./house-D32rhlCw.js";import{S as U}from"./star-CGPgdBCV.js";import{E as We}from"./ellipsis-DYmGatb3.js";import{S as Te}from"./square-pen-Cy68seCm.js";import{T as Re}from"./trash-2-DvJeVEKj.js";import"./index-BdQq_4o_.js";import"./index-CLz3BQaN.js";import"./index-BVScwSuZ.js";import"./index-DI5236x7.js";import"./index-yIM9ZdYr.js";import"./chevron-down-D9nmsT4r.js";import"./check-y82geyed.js";import"./chevron-up-BQLqsJm2.js";import"./index-BvxB2yyY.js";import"./index-UxBk8lm-.js";import"./chevron-right-BMekTT0X.js";import"./circle-BdzxhEiG.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=le("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Q=[{code:"US",name:"United States",states:[{code:"AL",name:"Alabama",cities:["Birmingham","Montgomery","Mobile","Huntsville","Tuscaloosa","Hoover","Dothan","Auburn","Decatur","Madison"]},{code:"AK",name:"Alaska",cities:["Anchorage","Fairbanks","Juneau","Wasilla","Sitka","Ketchikan","Kenai","Kodiak","Bethel","Palmer"]},{code:"AZ",name:"Arizona",cities:["Phoenix","Tucson","Mesa","Chandler","Scottsdale","Glendale","Gilbert","Tempe","Peoria","Surprise"]},{code:"AR",name:"Arkansas",cities:["Little Rock","Fort Smith","Fayetteville","Springdale","Jonesboro","North Little Rock","Conway","Rogers","Pine Bluff","Bentonville"]},{code:"CA",name:"California",cities:["Los Angeles","San Diego","San Jose","San Francisco","Fresno","Sacramento","Long Beach","Oakland","Bakersfield","Anaheim"]},{code:"CO",name:"Colorado",cities:["Denver","Colorado Springs","Aurora","Fort Collins","Lakewood","Thornton","Arvada","Westminster","Pueblo","Centennial"]},{code:"CT",name:"Connecticut",cities:["Bridgeport","New Haven","Hartford","Stamford","Waterbury","Norwalk","Danbury","New Britain","West Hartford","Greenwich"]},{code:"DE",name:"Delaware",cities:["Wilmington","Dover","Newark","Middletown","Smyrna","Milford","Seaford","Georgetown","Elsmere","New Castle"]},{code:"FL",name:"Florida",cities:["Jacksonville","Miami","Tampa","Orlando","St. Petersburg","Hialeah","Tallahassee","Fort Lauderdale","Port St. Lucie","Cape Coral"]},{code:"GA",name:"Georgia",cities:["Atlanta","Augusta","Columbus","Macon","Savannah","Athens","Sandy Springs","Roswell","Johns Creek","Albany"]},{code:"HI",name:"Hawaii",cities:["Honolulu","Pearl City","Hilo","Kailua","Waipahu","Kaneohe","Kailua-Kona","Kahului","Lihue","Mililani"]},{code:"ID",name:"Idaho",cities:["Boise","Meridian","Nampa","Idaho Falls","Pocatello","Caldwell","Coeur d'Alene","Twin Falls","Lewiston","Post Falls"]},{code:"IL",name:"Illinois",cities:["Chicago","Aurora","Rockford","Joliet","Naperville","Springfield","Peoria","Elgin","Waukegan","Cicero"]},{code:"IN",name:"Indiana",cities:["Indianapolis","Fort Wayne","Evansville","South Bend","Carmel","Fishers","Bloomington","Hammond","Gary","Muncie"]},{code:"IA",name:"Iowa",cities:["Des Moines","Cedar Rapids","Davenport","Sioux City","Iowa City","Waterloo","Council Bluffs","Ames","Dubuque","West Des Moines"]},{code:"KS",name:"Kansas",cities:["Wichita","Overland Park","Kansas City","Topeka","Olathe","Lawrence","Shawnee","Manhattan","Lenexa","Salina"]},{code:"KY",name:"Kentucky",cities:["Louisville","Lexington","Bowling Green","Owensboro","Covington","Richmond","Georgetown","Florence","Hopkinsville","Nicholasville"]},{code:"LA",name:"Louisiana",cities:["New Orleans","Baton Rouge","Shreveport","Lafayette","Lake Charles","Kenner","Bossier City","Monroe","Alexandria","Houma"]},{code:"ME",name:"Maine",cities:["Portland","Lewiston","Bangor","South Portland","Auburn","Biddeford","Sanford","Saco","Augusta","Westbrook"]},{code:"MD",name:"Maryland",cities:["Baltimore","Frederick","Rockville","Gaithersburg","Bowie","Hagerstown","Annapolis","College Park","Salisbury","Laurel"]},{code:"MA",name:"Massachusetts",cities:["Boston","Worcester","Springfield","Cambridge","Lowell","Brockton","Quincy","Lynn","Fall River","Newton"]},{code:"MI",name:"Michigan",cities:["Detroit","Grand Rapids","Warren","Sterling Heights","Lansing","Ann Arbor","Flint","Dearborn","Livonia","Westland"]},{code:"MN",name:"Minnesota",cities:["Minneapolis","Saint Paul","Rochester","Duluth","Bloomington","Brooklyn Park","Plymouth","Woodbury","Maple Grove","Blaine"]},{code:"MS",name:"Mississippi",cities:["Jackson","Gulfport","Southaven","Hattiesburg","Biloxi","Meridian","Tupelo","Greenville","Olive Branch","Horn Lake"]},{code:"MO",name:"Missouri",cities:["Kansas City","St. Louis","Springfield","Independence","Columbia","Lee's Summit","O'Fallon","St. Joseph","St. Charles","St. Peters"]},{code:"MT",name:"Montana",cities:["Billings","Missoula","Great Falls","Bozeman","Butte","Helena","Kalispell","Havre","Anaconda","Miles City"]},{code:"NE",name:"Nebraska",cities:["Omaha","Lincoln","Bellevue","Grand Island","Kearney","Fremont","Hastings","North Platte","Norfolk","Columbus"]},{code:"NV",name:"Nevada",cities:["Las Vegas","Henderson","Reno","North Las Vegas","Sparks","Carson City","Fernley","Elko","Mesquite","Boulder City"]},{code:"NH",name:"New Hampshire",cities:["Manchester","Nashua","Concord","Derry","Rochester","Salem","Dover","Merrimack","Londonderry","Hudson"]},{code:"NJ",name:"New Jersey",cities:["Newark","Jersey City","Paterson","Elizabeth","Edison","Woodbridge","Lakewood","Toms River","Hamilton","Trenton"]},{code:"NM",name:"New Mexico",cities:["Albuquerque","Las Cruces","Rio Rancho","Santa Fe","Roswell","Farmington","Clovis","Hobbs","Alamogordo","Carlsbad"]},{code:"NY",name:"New York",cities:["New York City","Buffalo","Rochester","Yonkers","Syracuse","Albany","New Rochelle","Mount Vernon","Schenectady","Utica"]},{code:"NC",name:"North Carolina",cities:["Charlotte","Raleigh","Greensboro","Durham","Winston-Salem","Fayetteville","Cary","Wilmington","High Point","Greenville"]},{code:"ND",name:"North Dakota",cities:["Fargo","Bismarck","Grand Forks","Minot","West Fargo","Williston","Dickinson","Mandan","Jamestown","Wahpeton"]},{code:"OH",name:"Ohio",cities:["Columbus","Cleveland","Cincinnati","Toledo","Akron","Dayton","Parma","Canton","Youngstown","Lorain"]},{code:"OK",name:"Oklahoma",cities:["Oklahoma City","Tulsa","Norman","Broken Arrow","Lawton","Edmond","Moore","Midwest City","Enid","Stillwater"]},{code:"OR",name:"Oregon",cities:["Portland","Eugene","Salem","Gresham","Hillsboro","Bend","Beaverton","Medford","Springfield","Corvallis"]},{code:"PA",name:"Pennsylvania",cities:["Philadelphia","Pittsburgh","Allentown","Erie","Reading","Scranton","Bethlehem","Lancaster","Levittown","Harrisburg"]},{code:"RI",name:"Rhode Island",cities:["Providence","Warwick","Cranston","Pawtucket","East Providence","Woonsocket","Newport","Central Falls","Westerly","North Providence"]},{code:"SC",name:"South Carolina",cities:["Charleston","Columbia","North Charleston","Mount Pleasant","Rock Hill","Greenville","Summerville","Sumter","Goose Creek","Hilton Head Island"]},{code:"SD",name:"South Dakota",cities:["Sioux Falls","Rapid City","Aberdeen","Brookings","Watertown","Mitchell","Yankton","Pierre","Huron","Spearfish"]},{code:"TN",name:"Tennessee",cities:["Nashville","Memphis","Knoxville","Chattanooga","Clarksville","Murfreesboro","Franklin","Jackson","Johnson City","Bartlett"]},{code:"TX",name:"Texas",cities:["Houston","San Antonio","Dallas","Austin","Fort Worth","El Paso","Arlington","Corpus Christi","Plano","Lubbock"]},{code:"UT",name:"Utah",cities:["Salt Lake City","West Valley City","Provo","West Jordan","Orem","Sandy","Ogden","St. George","Layton","Taylorsville"]},{code:"VT",name:"Vermont",cities:["Burlington","South Burlington","Rutland","Barre","Montpelier","Winooski","St. Albans","Newport","Vergennes","Brattleboro"]},{code:"VA",name:"Virginia",cities:["Virginia Beach","Norfolk","Chesapeake","Richmond","Newport News","Alexandria","Hampton","Portsmouth","Suffolk","Roanoke"]},{code:"WA",name:"Washington",cities:["Seattle","Spokane","Tacoma","Vancouver","Bellevue","Kent","Everett","Renton","Spokane Valley","Federal Way"]},{code:"WV",name:"West Virginia",cities:["Charleston","Huntington","Morgantown","Parkersburg","Wheeling","Martinsburg","Fairmont","Beckley","Clarksburg","Lewisburg"]},{code:"WI",name:"Wisconsin",cities:["Milwaukee","Madison","Green Bay","Kenosha","Racine","Appleton","Waukesha","Eau Claire","Oshkosh","Janesville"]},{code:"WY",name:"Wyoming",cities:["Cheyenne","Casper","Laramie","Gillette","Rock Springs","Sheridan","Green River","Evanston","Riverton","Jackson"]}]},{code:"CA",name:"Canada",states:[{code:"AB",name:"Alberta",cities:["Calgary","Edmonton","Red Deer","Lethbridge","St. Albert","Medicine Hat","Grande Prairie","Airdrie","Spruce Grove","Okotoks"]},{code:"BC",name:"British Columbia",cities:["Vancouver","Surrey","Burnaby","Richmond","Abbotsford","Coquitlam","Kelowna","Saanich","Delta","Langley"]},{code:"MB",name:"Manitoba",cities:["Winnipeg","Brandon","Steinbach","Thompson","Portage la Prairie","Winkler","Selkirk","Morden","Dauphin","The Pas"]},{code:"NB",name:"New Brunswick",cities:["Saint John","Moncton","Fredericton","Dieppe","Riverview","Edmundston","Campbellton","Rothesay","Bathurst","Miramichi"]},{code:"NL",name:"Newfoundland and Labrador",cities:["St. John's","Mount Pearl","Corner Brook","Conception Bay South","Paradise","Grand Falls-Windsor","Happy Valley-Goose Bay","Gander","Labrador City","Stephenville"]},{code:"NS",name:"Nova Scotia",cities:["Halifax","Sydney","Dartmouth","Truro","New Glasgow","Glace Bay","Yarmouth","Bridgewater","Kentville","Amherst"]},{code:"ON",name:"Ontario",cities:["Toronto","Ottawa","Mississauga","Brampton","Hamilton","London","Markham","Vaughan","Kitchener","Windsor"]},{code:"PE",name:"Prince Edward Island",cities:["Charlottetown","Summerside","Stratford","Cornwall","Montague","Kensington","Souris","Alberton","Georgetown","Tignish"]},{code:"QC",name:"Quebec",cities:["Montreal","Quebec City","Laval","Gatineau","Longueuil","Sherbrooke","Saguenay","Lévis","Trois-Rivières","Terrebonne"]},{code:"SK",name:"Saskatchewan",cities:["Saskatoon","Regina","Prince Albert","Moose Jaw","Swift Current","Yorkton","North Battleford","Estevan","Weyburn","Lloydminster"]},{code:"NT",name:"Northwest Territories",cities:["Yellowknife","Hay River","Inuvik","Fort Smith","Behchokǫ̀","Iqaluit","Norman Wells","Rankin Inlet","Arviat","Baker Lake"]},{code:"NU",name:"Nunavut",cities:["Iqaluit","Rankin Inlet","Arviat","Baker Lake","Igloolik","Pangnirtung","Pond Inlet","Cape Dorset","Gjoa Haven","Cambridge Bay"]},{code:"YT",name:"Yukon",cities:["Whitehorse","Dawson City","Watson Lake","Haines Junction","Mayo","Carmacks","Faro","Ross River","Teslin","Old Crow"]}]},{code:"GB",name:"United Kingdom",states:[{code:"ENG",name:"England",cities:["London","Birmingham","Leeds","Glasgow","Sheffield","Bradford","Liverpool","Edinburgh","Manchester","Bristol"]},{code:"SCT",name:"Scotland",cities:["Edinburgh","Glasgow","Aberdeen","Dundee","Stirling","Perth","Inverness","Paisley","East Kilbride","Livingston"]},{code:"WLS",name:"Wales",cities:["Cardiff","Swansea","Newport","Wrexham","Barry","Caerphilly","Bridgend","Neath","Port Talbot","Cwmbran"]},{code:"NIR",name:"Northern Ireland",cities:["Belfast","Derry","Lisburn","Newtownabbey","Bangor","Craigavon","Castlereagh","Ballymena","Newtownards","Carrickfergus"]}]},{code:"AU",name:"Australia",states:[{code:"NSW",name:"New South Wales",cities:["Sydney","Newcastle","Wollongong","Maitland","Wagga Wagga","Albury","Port Macquarie","Tamworth","Orange","Dubbo"]},{code:"VIC",name:"Victoria",cities:["Melbourne","Geelong","Ballarat","Bendigo","Frankston","Melton","Casey","Monash","Latrobe","Greater Dandenong"]},{code:"QLD",name:"Queensland",cities:["Brisbane","Gold Coast","Townsville","Cairns","Toowoomba","Rockingham","Mackay","Bundaberg","Rockhampton","Hervey Bay"]},{code:"WA",name:"Western Australia",cities:["Perth","Fremantle","Rockingham","Mandurah","Bunbury","Kalgoorlie","Geraldton","Albany","Broome","Port Hedland"]},{code:"SA",name:"South Australia",cities:["Adelaide","Mount Gambier","Whyalla","Murray Bridge","Port Augusta","Port Pirie","Victor Harbor","Gawler","Port Lincoln","Kadina"]},{code:"TAS",name:"Tasmania",cities:["Hobart","Launceston","Devonport","Burnie","Somerset","Glenorchy","Clarence","Kingborough","Waratah-Wynyard","West Tamar"]},{code:"ACT",name:"Australian Capital Territory",cities:["Canberra","Gungahlin","Tuggeranong","Weston Creek","Belconnen","Inner South","Inner North","Woden Valley","Molonglo Valley","Kowen"]},{code:"NT",name:"Northern Territory",cities:["Darwin","Alice Springs","Palmerston","Katherine","Tennant Creek","Nhulunbuy","Casuarina","Jabiru","Yulara","Alyangula"]}]},{code:"DE",name:"Germany",states:[{code:"BW",name:"Baden-Württemberg",cities:["Stuttgart","Mannheim","Karlsruhe","Freiburg","Heidelberg","Heilbronn","Ulm","Pforzheim","Reutlingen","Esslingen"]},{code:"BY",name:"Bavaria",cities:["Munich","Nuremberg","Augsburg","Regensburg","Würzburg","Ingolstadt","Fürth","Erlangen","Bayreuth","Bamberg"]},{code:"BE",name:"Berlin",cities:["Berlin"]},{code:"BB",name:"Brandenburg",cities:["Potsdam","Cottbus","Brandenburg","Frankfurt (Oder)","Oranienburg","Falkensee","Königs Wusterhausen","Eberswalde","Eisenhüttenstadt","Rathenow"]},{code:"HB",name:"Bremen",cities:["Bremen","Bremerhaven"]},{code:"HH",name:"Hamburg",cities:["Hamburg"]},{code:"HE",name:"Hesse",cities:["Frankfurt am Main","Wiesbaden","Kassel","Darmstadt","Offenbach","Hanau","Marburg","Fulda","Rüsselsheim","Gießen"]},{code:"MV",name:"Mecklenburg-Vorpommern",cities:["Schwerin","Rostock","Neubrandenburg","Stralsund","Greifswald","Wismar","Güstrow","Waren","Neustrelitz","Bergen"]},{code:"NI",name:"Lower Saxony",cities:["Hannover","Braunschweig","Oldenburg","Osnabrück","Wolfsburg","Göttingen","Salzgitter","Hildesheim","Delmenhorst","Wilhelmshaven"]},{code:"NW",name:"North Rhine-Westphalia",cities:["Cologne","Düsseldorf","Dortmund","Essen","Duisburg","Bochum","Wuppertal","Bielefeld","Bonn","Münster"]},{code:"RP",name:"Rhineland-Palatinate",cities:["Mainz","Ludwigshafen","Koblenz","Trier","Kaiserslautern","Worms","Neuwied","Speyer","Frankenthal","Neustadt"]},{code:"SL",name:"Saarland",cities:["Saarbrücken","Neunkirchen","Homburg","Völklingen","St. Ingbert","Merzig","St. Wendel","Blieskastel","Lebach","Dillingen"]},{code:"SN",name:"Saxony",cities:["Dresden","Leipzig","Chemnitz","Zwickau","Plauen","Görlitz","Freiberg","Bautzen","Pirna","Hoyerswerda"]},{code:"ST",name:"Saxony-Anhalt",cities:["Magdeburg","Halle","Dessau-Roßlau","Wittenberg","Stendal","Weißenfels","Merseburg","Bernburg","Naumburg","Zeitz"]},{code:"SH",name:"Schleswig-Holstein",cities:["Kiel","Lübeck","Flensburg","Neumünster","Norderstedt","Elmshorn","Pinneberg","Wedel","Ahrensburg","Geesthacht"]},{code:"TH",name:"Thuringia",cities:["Erfurt","Jena","Gera","Weimar","Gotha","Nordhausen","Eisenach","Suhl","Mühlhausen","Altenburg"]}]},{code:"FR",name:"France",states:[{code:"IDF",name:"Île-de-France",cities:["Paris","Boulogne-Billancourt","Saint-Denis","Argenteuil","Versailles","Montreuil","Créteil","Nanterre","Courbevoie","Colombes"]},{code:"ARA",name:"Auvergne-Rhône-Alpes",cities:["Lyon","Saint-Étienne","Grenoble","Villeurbanne","Clermont-Ferrand","Valence","Chambéry","Annecy","Bourg-en-Bresse","Roanne"]},{code:"HDF",name:"Hauts-de-France",cities:["Lille","Amiens","Roubaix","Tourcoing","Calais","Dunkerque","Villeneuve-d'Ascq","Valenciennes","Boulogne-sur-Mer","Arras"]},{code:"OCC",name:"Occitanie",cities:["Toulouse","Montpellier","Nîmes","Perpignan","Béziers","Narbonne","Carcassonne","Albi","Tarbes","Bayonne"]},{code:"NAQ",name:"Nouvelle-Aquitaine",cities:["Bordeaux","Limoges","Poitiers","Pau","La Rochelle","Mérignac","Pessac","Bayonne","Angoulême","Niort"]},{code:"GES",name:"Grand Est",cities:["Strasbourg","Reims","Metz","Nancy","Mulhouse","Troyes","Charleville-Mézières","Colmar","Châlons-en-Champagne","Thionville"]},{code:"PDL",name:"Pays de la Loire",cities:["Nantes","Angers","Le Mans","Saint-Nazaire","Cholet","Laval","Rezé","Saint-Sébastien-sur-Loire","La Roche-sur-Yon","Saumur"]},{code:"BRE",name:"Brittany",cities:["Rennes","Brest","Quimper","Lorient","Vannes","Saint-Malo","Saint-Brieuc","Lanester","Fougères","Lannion"]},{code:"NOR",name:"Normandy",cities:["Le Havre","Rouen","Caen","Cherbourg-en-Cotentin","Évreux","Dieppe","Sotteville-lès-Rouen","Saint-Étienne-du-Rouvray","Alençon","Lisieux"]},{code:"CVL",name:"Centre-Val de Loire",cities:["Orléans","Tours","Bourges","Blois","Chartres","Châteauroux","Joué-lès-Tours","Dreux","Vierzon","Fleury-les-Aubrais"]},{code:"BFC",name:"Bourgogne-Franche-Comté",cities:["Dijon","Besançon","Belfort","Chalon-sur-Saône","Nevers","Auxerre","Mâcon","Montbéliard","Sens","Le Creusot"]},{code:"PAC",name:"Provence-Alpes-Côte d'Azur",cities:["Marseille","Nice","Toulon","Aix-en-Provence","Antibes","Cannes","Avignon","Fréjus","Arles","Gap"]},{code:"COR",name:"Corsica",cities:["Ajaccio","Bastia","Porto-Vecchio","Corte","Bonifacio","Calvi","Propriano","Sartène","Ghisonaccia","Saint-Florent"]}]}];function $(u){return Q.find(s=>s.code===u)}function x(u){const s=$(u);return(s==null?void 0:s.states)||[]}function Y(u,s){const c=x(u).find(r=>r.code===s);return(c==null?void 0:c.cities)||[]}function Ee(u,s){return x(u).find(c=>c.code===s)}function pa(){const[u,s]=m.useState(!1),[j,c]=m.useState(!1),[r,f]=m.useState(null),[i,o]=m.useState({name:"",addrress1:"",addrress2:"",city:"",state:"",stateCode:"",cityCode:"",zipcode:"",countryCode:"US",country:"United States",phone:"",email:"",userId:""}),[I,M]=m.useState([]),[P,p]=m.useState([]),[N,C]=m.useState(""),{user:t}=de(),{toast:h}=ce(),A=ue();m.useEffect(()=>{const a=x(i.countryCode);M(a),p([]),C(""),i.countryCode&&o(n=>({...n,state:"",city:""}))},[i.countryCode]),m.useEffect(()=>{if(N&&i.countryCode){const a=Y(i.countryCode,N);p(a),o(n=>({...n,city:""}))}else p([])},[N,i.countryCode]);const{data:O=[],isLoading:_,error:Z}=me({queryKey:["addresses",t==null?void 0:t.id],queryFn:async()=>{const a=await fetch(`/api/address/all/${t==null?void 0:t.id}`);if(!a.ok)throw new Error("Failed to fetch addresses");return a.json()},enabled:!!(t!=null&&t.id)}),L=k({mutationFn:async a=>(await w("POST","/api/address",{...a,userId:t==null?void 0:t.id})).json(),onSuccess:()=>{A.invalidateQueries({queryKey:["addresses"]}),s(!1),S(),h({title:"Success",description:"Address created successfully"})},onError:a=>{h({title:"Address Validation Error",description:a.message,variant:"destructive"})}}),D=k({mutationFn:async a=>{const{id:n,...l}=a;return(await w("PUT",`/api/address/${n}`,{...l,userId:t==null?void 0:t.id})).json()},onSuccess:()=>{A.invalidateQueries({queryKey:["addresses"]}),c(!1),f(null),S(),h({title:"Success",description:"Address updated successfully"})},onError:a=>{h({title:"Address Validation Error",description:a.message,variant:"destructive"})}}),X=k({mutationFn:async a=>{const n=await w("DELETE",`/api/address/${a}`,{});if(!n.ok)throw new Error("Failed to delete address");return n.json()},onSuccess:()=>{A.invalidateQueries({queryKey:["addresses"]}),h({title:"Success",description:"Address deleted successfully"})},onError:a=>{h({title:"Error",description:"Failed to delete address",variant:"destructive"})}}),ee=k({mutationFn:async({id:a,primary:n,userId:l})=>{const d=await w("PATCH",`/api/address/${a}`,{primary:n,userId:l});if(!d.ok)throw new Error("Failed to update address primary status");return d.json()},onSuccess:()=>{A.invalidateQueries({queryKey:["addresses"]}),h({title:"Success",description:"Primary address updated successfully"})},onError:a=>{h({title:"Error",description:"Failed to update primary address",variant:"destructive"})}}),S=()=>{o({name:"",addrress1:"",addrress2:"",city:"",state:"",stateCode:"",cityCode:"",zipcode:"",countryCode:"US",country:"United States",phone:"",email:"",userId:""}),C(""),M(x("US")),p([])},K=()=>{s(!0),S()},ae=a=>{f(a);const n=a.countryCode||"US",l=x(n);M(l);let d="";if(a.state){const b=l.find(V=>V.name===a.state||V.code===a.state);d=(b==null?void 0:b.code)||""}if(C(d),d){const b=Y(n,d);p(b)}else p([]);const F={name:a.name||"",addrress1:a.addrress1||"",addrress2:a.addrress2||"",city:a.city||"",state:a.state||"",stateCode:d,cityCode:"",zipcode:a.zipcode||a.zip||"",countryCode:n,country:a.country||"United States",phone:a.phone||"",email:a.email||"",userId:(t==null?void 0:t.id)||""};o(F),c(!0)},ne=a=>{a.preventDefault();const n=`${(t==null?void 0:t.firstName)||""} ${(t==null?void 0:t.lastName)||""}`.trim()||(t==null?void 0:t.userName)||(t==null?void 0:t.email)||"",l=(t==null?void 0:t.email)||"",d={...i,name:n,email:l};if(r){const F=r.id||r._id;D.mutate({...d,id:F})}else L.mutate(d)},te=a=>{const n=a.id||a._id;X.mutate(n)},ie=(a,n)=>{const l=a.id||a._id;ee.mutate({id:l,primary:!n,userId:(t==null?void 0:t.id)||""})},re=a=>{const n=$(a);o({...i,countryCode:a,country:(n==null?void 0:n.name)||a,state:"",city:""}),C("")},se=a=>{const n=Ee(i.countryCode,a);C(a),o({...i,state:(n==null?void 0:n.name)||a,stateCode:a,city:"",cityCode:""})},oe=a=>{o({...i,city:a})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Addresses"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your shipping and billing addresses"})]}),e.jsxs(v,{onClick:K,"data-testid":"button-create-address",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Add Address"]})]}),_?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((a,n)=>e.jsxs(B,{className:"animate-pulse",children:[e.jsxs(z,{children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsx(q,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})})]},n))}):Z?e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(De,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Error loading addresses"}),e.jsx("p",{className:"text-muted-foreground",children:"Failed to load addresses. Please try again."})]}):O.length===0?e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(Fe,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No addresses"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first address."}),e.jsxs(v,{onClick:K,"data-testid":"button-create-first-address",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Add Your First Address"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(a=>{const n=a.id||a._id;return e.jsxs(B,{className:"relative",children:[e.jsx(z,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"text-lg text-foreground",children:a.name}),a.primary&&e.jsx(U,{className:"h-4 w-4 text-yellow-500 fill-current"})]})}),e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"sm","data-testid":`dropdown-address-${n}`,children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsxs(Le,{align:"end",children:[e.jsxs(G,{onClick:()=>ae(a),"data-testid":`button-edit-${n}`,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(G,{onClick:()=>ie(a,a.primary||!1),"data-testid":`button-primary-${n}`,children:a.primary?e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Remove Primary"]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Make Primary"]})}),e.jsxs(ve,{children:[e.jsx(xe,{asChild:!0,children:e.jsxs(G,{onSelect:l=>l.preventDefault(),"data-testid":`button-delete-${n}`,children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Delete"]})}),e.jsxs(fe,{children:[e.jsxs(Ne,{children:[e.jsx(Ae,{children:"Delete Address"}),e.jsxs(we,{children:['Are you sure you want to delete "',a.name,'"? This action cannot be undone.']})]}),e.jsxs(ke,{children:[e.jsx(Be,{children:"Cancel"}),e.jsx(je,{onClick:()=>te(a),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})]})}),e.jsx(q,{children:e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("div",{children:a.addrress1}),a.addrress2&&e.jsx("div",{children:a.addrress2}),e.jsxs("div",{children:[a.city,", ",a.state," ",a.zipcode]}),e.jsx("div",{children:a.country}),a.phone&&e.jsxs("div",{children:["Phone: ",a.phone]}),a.email&&e.jsxs("div",{children:["Email: ",a.email]})]})})]},n)})}),e.jsx(ge,{open:u||j,onOpenChange:a=>{a||(s(!1),c(!1),f(null),S())},children:e.jsxs(pe,{className:"max-w-lg max-h-[80vh] overflow-y-auto",children:[e.jsxs(ye,{children:[e.jsx(Ce,{children:r?"Edit Address":"Add New Address"}),e.jsx(Se,{children:r?"Update the address details below.":"Add a new shipping or billing address."})]}),e.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"addrress1",children:"Street Address"}),e.jsx(y,{id:"addrress1",value:i.addrress1,onChange:a=>o({...i,addrress1:a.target.value}),placeholder:"123 Main Street",required:!0,"data-testid":"input-address-street1"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"addrress2",children:"Street Address 2 (Optional)"}),e.jsx(y,{id:"addrress2",value:i.addrress2,onChange:a=>o({...i,addrress2:a.target.value}),placeholder:"Apt, Suite, Unit, etc.","data-testid":"input-address-street2"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"country",children:"Country"}),e.jsxs(W,{value:i.countryCode,onValueChange:re,required:!0,children:[e.jsx(T,{"data-testid":"select-address-country",children:e.jsx(R,{placeholder:"Select country"})}),e.jsx(H,{children:Q.map(a=>e.jsx(E,{value:a.code,children:a.name},a.code))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"state",children:"State/Province"}),I.length>0?e.jsxs(W,{value:N,onValueChange:se,required:!0,children:[e.jsx(T,{"data-testid":"select-address-state",children:e.jsx(R,{placeholder:"Select state/province"})}),e.jsx(H,{children:I.map(a=>e.jsx(E,{value:a.code,children:a.name},a.code))})]}):e.jsx(y,{id:"state",value:i.state,onChange:a=>o({...i,state:a.target.value}),placeholder:"Enter state/province",required:!0,"data-testid":"input-address-state"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"city",children:"City"}),P.length>0?e.jsxs(W,{value:(()=>{const a=i.city||(r==null?void 0:r.city)||"",n=P.includes(a);return!i.city&&(r!=null&&r.city)&&n&&setTimeout(()=>{o(l=>({...l,city:r.city||""}))},0),n?a:""})(),onValueChange:oe,required:!0,children:[e.jsx(T,{"data-testid":"select-address-city",children:e.jsx(R,{placeholder:"Select city"})}),e.jsx(H,{children:P.map(a=>e.jsx(E,{value:a,children:a},a))})]}):e.jsx(y,{id:"city",value:i.city,onChange:a=>o({...i,city:a.target.value}),placeholder:"Enter city",required:!0,"data-testid":"input-address-city"})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"zipcode",children:"ZIP/Postal Code"}),e.jsx(y,{id:"zipcode",value:i.zipcode,onChange:a=>o({...i,zipcode:a.target.value}),placeholder:"10001",required:!0,"data-testid":"input-address-zip"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"phone",children:"Phone Number"}),e.jsx(y,{id:"phone",value:i.phone,onChange:a=>o({...i,phone:a.target.value}),placeholder:"+1 (555) 123-4567",required:!0,"data-testid":"input-address-phone"})]}),e.jsxs(be,{children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>{s(!1),c(!1),f(null),S()},children:"Cancel"}),e.jsx(v,{type:"submit",disabled:L.isPending||D.isPending,"data-testid":"button-save-address",children:L.isPending||D.isPending?"Saving...":r?"Update Address":"Add Address"})]})]})]})})]})}export{pa as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/add-payment-dialog-DoThKuX2.js","assets/index-GnvmivW0.js","assets/index-B0C4fpEQ.css","assets/dialog-D1L4tMGI.js","assets/index-QZHL2phQ.js","assets/add-address-dialog-BRDWlqBi.js","assets/input-CDJz7BeV.js","assets/label-CbaFYhHW.js","assets/react-country-state-city-4XimWX2C.js","assets/react-country-state-city-BZfUZqIr.css","assets/address-list-dialog-DBVChEdX.js","assets/map-pin-Dn0fBe7g.js","assets/circle-check-jk63TU7f.js","assets/trash-2-V4a6hNaj.js","assets/payment-method-list-dialog-DU4kJKqj.js","assets/badge-CL9MXKGS.js","assets/credit-card-B0WsppBV.js"])))=>i.map(i=>d[i]);
import{a as z,r as t,j as e,T as M,a9 as c}from"./index-GnvmivW0.js";import{S as I,a as V,b as F,c as H,d as J}from"./sheet-D5QVNRkq.js";import{P as O}from"./package-DWwkENv3.js";import{C as i}from"./chevron-right-CXw-mF7y.js";import{C as T}from"./credit-card-B0WsppBV.js";const U=t.lazy(()=>c(()=>import("./add-payment-dialog-DoThKuX2.js"),__vite__mapDeps([0,1,2,3,4]))),q=t.lazy(()=>c(()=>import("./add-address-dialog-BRDWlqBi.js"),__vite__mapDeps([5,1,2,3,6,7,8,9]))),B=t.lazy(()=>c(()=>import("./address-list-dialog-DBVChEdX.js"),__vite__mapDeps([10,1,2,3,5,6,7,8,9,11,12,13]))),G=t.lazy(()=>c(()=>import("./payment-method-list-dialog-DU4kJKqj.js"),__vite__mapDeps([14,1,2,3,15,0,4,16,13])));function Z({open:d,onOpenChange:p}){var D,C,k,E,L;const{user:s,refreshUserData:j}=z(),[y,m]=t.useState(!1),[b,h]=t.useState(!1),[N,x]=t.useState(!1),[v,g]=t.useState(!1),[w,u]=t.useState(!1);t.useEffect(()=>{d&&u(!1)},[d]);const r=!!(s!=null&&s.address),n=!!(s!=null&&s.defaultpaymentmethod),R=s==null?void 0:s.defaultpaymentmethod;t.useEffect(()=>{d&&w&&r&&n&&p(!1)},[r,n,d,w]);const A=()=>{r?g(!0):x(!0)},S=()=>{n?h(!0):m(!0)},_=async()=>{await j(),u(!0),x(!1),g(!1)},P=async()=>{await j(),u(!0),m(!1),h(!1)},$=a=>{p(a)};return e.jsxs(e.Fragment,{children:[e.jsx(I,{open:d,onOpenChange:$,children:e.jsxs(V,{side:"bottom",className:"h-auto max-h-[80vh] overflow-y-auto left-0 right-0 lg:left-96 lg:right-72","data-testid":"sheet-payment-shipping",children:[e.jsxs(F,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 p-2 rounded-full",children:e.jsx(M,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsx(H,{className:"text-lg",children:"Payment & Shipping Required"})]}),e.jsx(J,{className:"text-base text-muted-foreground",children:"To purchase items in live shows and place bids on auctions, you need to add your payment method and shipping address."})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[r?e.jsx("button",{onClick:A,className:"border rounded-lg p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-left w-full","data-testid":"button-address-card",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-md",children:e.jsx(O,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Delivery Method ✓"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((D=s==null?void 0:s.address)==null?void 0:D.addrress1)||((C=s==null?void 0:s.address)==null?void 0:C.address1)||"Address on file",((k=s==null?void 0:s.address)==null?void 0:k.city)&&`, ${s.address.city}`,((E=s==null?void 0:s.address)==null?void 0:E.state)&&`, ${s.address.state}`,((L=s==null?void 0:s.address)==null?void 0:L.zipcode)&&` ${s.address.zipcode}`]})]})]}),e.jsx(i,{className:"h-5 w-5 text-muted-foreground"})]})}):e.jsx("button",{onClick:A,className:"border rounded-lg p-4 bg-muted/30 hover:bg-muted/50 transition-colors text-left","data-testid":"button-add-address",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-md",children:e.jsx(O,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Delivery Method"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your shipping address"})]})]}),e.jsx(i,{className:"h-5 w-5 text-muted-foreground"})]})}),n?e.jsx("button",{onClick:S,className:"border rounded-lg p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-left w-full","data-testid":"button-payment-card",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-md",children:e.jsx(T,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Payment Method ✓"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(()=>{const a=R;if(!a)return"Payment method on file";const f=a.name||a.brand||a.card_type||a.type||"",l=a.last4||a.lastFour||a.last_four||"",o=f?f.charAt(0).toUpperCase()+f.slice(1):"";return o&&l?`${o} ****${l}`:l?`Card ****${l}`:o?`${o} card on file`:"Payment method on file"})()})]})]}),e.jsx(i,{className:"h-5 w-5 text-muted-foreground"})]})}):e.jsx("button",{onClick:S,className:"border rounded-lg p-4 bg-muted/30 hover:bg-muted/50 transition-colors text-left","data-testid":"button-add-payment",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-md",children:e.jsx(T,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your payment information"})]})]}),e.jsx(i,{className:"h-5 w-5 text-muted-foreground"})]})}),(!r||!n)&&e.jsx("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"Add both delivery and payment methods to bid or buy items"})]})]})}),e.jsxs(t.Suspense,{fallback:null,children:[N&&e.jsx(q,{open:N,onOpenChange:x,onSuccess:_}),v&&e.jsx(B,{open:v,onOpenChange:g,onSuccess:_}),y&&e.jsx(U,{open:y,onOpenChange:m,onSuccess:P}),b&&e.jsx(G,{open:b,onOpenChange:h,onSuccess:P})]})]})}export{Z as PaymentShippingSheet,Z as default};

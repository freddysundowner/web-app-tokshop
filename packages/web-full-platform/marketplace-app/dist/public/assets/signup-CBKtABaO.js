import{b as K,r,g as R,a as V,u as H,ab as C,j as e,B as x,L as O,ac as W}from"./index-GnvmivW0.js";import{u as T,F as $,a as l,b as o,c as n,d as i,t as q}from"./form-CgNvNzQO.js";import{C as J,a as Q,b as X}from"./card-Bsqf9o7h.js";import{I as d}from"./input-CDJz7BeV.js";import{A as Y,a as Z}from"./alert-BCAR44i4.js";import{S as ee}from"./separator-Datc7ShZ.js";import{w as te}from"./react-country-state-city-4XimWX2C.js";import{C as se,A as ae,E as k}from"./eye-off-CFCqOyIF.js";import{M as re}from"./mail-Ck7aiNy-.js";import{U as b}from"./user-CCcReMRJ.js";import{P as oe}from"./phone-CoIyr-gn.js";import{E as P}from"./eye-MrtS8r4d.js";import"./label-CbaFYhHW.js";function ye(){const{settings:ne}=K(),[f,F]=r.useState(!1),[g,A]=r.useState(!1),[j,c]=r.useState(""),[N,m]=r.useState(!1),[ie,E]=r.useState(!1),[p,y]=r.useState(null),{toast:h}=R(),{emailSignup:z,loginWithGoogle:L,loginWithApple:I}=V(),[,G]=H();r.useEffect(()=>{(async()=>{try{const s=await fetch("/api/settings/keys");if(s.ok){const u=await s.json();if(u.success&&u.data){const{firebase_api_key:v,firebase_auth_domain:B,firebase_project_id:S}=u.data;v&&S&&(W({apiKey:v,authDomain:B,projectId:S,storageBucket:"",appId:""}),E(!0))}}}catch(s){console.error("Failed to fetch Firebase keys:",s)}})()},[]),r.useEffect(()=>{p||y({id:233,name:"United States",iso2:"US"})},[]);const M=C.extend({confirmPassword:C.shape.password}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),a=T({resolver:q(M),defaultValues:{email:"",firstName:"",lastName:"",userName:"",phone:"",country:"United States",password:"",confirmPassword:""}}),U=async()=>{try{m(!0),c(""),await L()}catch(t){let s="Google signup failed";t.code==="auth/unauthorized-domain"?s="Domain not authorized for Firebase authentication. Please contact support.":t.code==="auth/popup-blocked"?s="Popup was blocked. Please allow popups and try again.":t.message&&(s=t.message),c(s),h({title:"Signup failed",description:s,variant:"destructive"})}finally{m(!1)}},_=async()=>{try{m(!0),c(""),await I()}catch(t){let s="Apple signup failed";t.code==="auth/unauthorized-domain"?s="Domain not authorized for Firebase authentication. Please contact support.":t.code==="auth/popup-blocked"?s="Popup was blocked. Please allow popups and try again.":t.message&&(s=t.message),c(s),h({title:"Signup failed",description:s,variant:"destructive"})}finally{m(!1)}},w=t=>{t==="Google"?U():t==="Apple"?_():h({title:"Coming Soon",description:`${t} signup will be available soon!`,variant:"default"})},D=async t=>{try{m(!0),c("");const s=(p==null?void 0:p.name)||t.country||"";await z(t.email,t.password,t.firstName,t.lastName,t.userName,t.phone||"",s),G("/")}catch(s){const u=s instanceof Error?s.message:"Signup failed";c(u),h({title:"Signup failed",description:u,variant:"destructive"})}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-primary/5 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 sm:px-6 md:px-8 pt-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold",children:[e.jsx("span",{className:"text-primary",children:"Shop Live."}),e.jsx("br",{}),e.jsx("span",{className:"text-accent",children:"Stream. Sell. Connect."})]})})}),e.jsxs(J,{className:"shadow-2xl border border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsx(Q,{className:"pb-4",children:e.jsx("div",{className:"text-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Create your account"})})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(x,{type:"button",variant:"outline",className:"w-full !bg-white hover:!bg-gray-50 !text-gray-900 !border-gray-300 dark:!bg-white dark:hover:!bg-gray-100 dark:!text-gray-900",onClick:()=>w("Google"),"data-testid":"button-google-signup",children:[e.jsx(se,{className:"h-4 w-4 mr-2 !text-gray-900"}),"Continue with Google"]}),e.jsxs(x,{type:"button",variant:"outline",className:"w-full bg-black hover:bg-gray-900 text-white border-gray-800",onClick:()=>w("Apple"),"data-testid":"button-apple-signup",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Continue with Apple"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"my-4"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"px-3 bg-card text-muted-foreground text-sm",children:"or"})})]}),j&&e.jsx(Y,{variant:"destructive",className:"mb-4","data-testid":"alert-signup-error",children:e.jsx(Z,{children:j})}),e.jsx($,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(D),className:"space-y-4",children:[e.jsx(l,{control:a.control,name:"email",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"email",placeholder:"Email Address",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground","data-testid":"input-email",...t})]})}),e.jsx(i,{})]})}),e.jsx(l,{control:a.control,name:"firstName",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"text",placeholder:"First Name",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground","data-testid":"input-firstname",...t})]})}),e.jsx(i,{})]})}),e.jsx(l,{control:a.control,name:"lastName",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"text",placeholder:"Last Name",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground","data-testid":"input-lastname",...t})]})}),e.jsx(i,{})]})}),e.jsx(l,{control:a.control,name:"userName",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"text",placeholder:"Username",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground","data-testid":"input-username",...t})]})}),e.jsx(i,{})]})}),e.jsx(l,{control:a.control,name:"phone",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"tel",placeholder:"Phone Number (Optional)",className:"pl-10 bg-input border-border text-foreground placeholder:text-muted-foreground","data-testid":"input-phone",...t})]})}),e.jsx(i,{})]})}),e.jsxs(o,{children:[e.jsx(n,{children:e.jsx("div",{"data-testid":"select-country",children:e.jsx(te,{defaultValue:p,onChange:t=>{y(t),a.setValue("country",(t==null?void 0:t.name)||"")},placeHolder:"Select your country",containerClassName:"w-full",inputClassName:"w-full h-10 px-3 py-2 text-sm bg-input border border-border rounded-md text-foreground placeholder:text-muted-foreground"})})}),e.jsx(i,{})]}),e.jsx(l,{control:a.control,name:"password",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:f?"text":"password",placeholder:"Password",className:"bg-input border-border text-foreground placeholder:text-muted-foreground pr-10","data-testid":"input-password",...t}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>F(!f),"data-testid":"button-toggle-password",children:f?e.jsx(k,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})})]})}),e.jsx(i,{})]})}),e.jsx(l,{control:a.control,name:"confirmPassword",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:g?"text":"password",placeholder:"Confirm Password",className:"bg-input border-border text-foreground placeholder:text-muted-foreground pr-10","data-testid":"input-confirm-password",...t}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>A(!g),"data-testid":"button-toggle-confirm-password",children:g?e.jsx(k,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})})]})}),e.jsx(i,{})]})}),e.jsx(x,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white font-medium py-3 rounded-lg transition-all duration-200",disabled:N,"data-testid":"button-signup",children:N?"Creating account...":"Create Account"})]})}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Already have an account?"," ",e.jsx(O,{href:"/login",children:e.jsx("button",{className:"text-primary hover:text-primary/80 font-medium","data-testid":"link-login",children:"Sign in"})})]})})]})]}),e.jsx("div",{className:"text-center mt-8 text-muted-foreground text-sm",children:e.jsx("p",{children:"Need help? Contact our support team"})})]})]})}export{ye as default};

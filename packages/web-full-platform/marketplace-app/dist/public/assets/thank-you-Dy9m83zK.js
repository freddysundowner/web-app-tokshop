import{p,u as f,d as j,j as e,B as l}from"./index-GnvmivW0.js";import{C as g,a as N,c as b,b as y}from"./card-Bsqf9o7h.js";import{S as w}from"./separator-Datc7ShZ.js";import{C as v}from"./circle-check-jk63TU7f.js";import{P as C}from"./package-DWwkENv3.js";import{A as k}from"./arrow-right-CTv_q6A6.js";function I(){var o;const[,a]=p("/thank-you/:orderId"),[,i]=f(),n=a==null?void 0:a.orderId,{data:s,isLoading:m}=j({queryKey:["/api/orders",n],queryFn:async()=>{const t=await fetch(`/api/orders/${n}`);if(!t.ok)throw new Error("Failed to fetch order");const r=await t.json();return r.data||r},enabled:!!n}),x=()=>{s&&(sessionStorage.setItem("openPurchaseOrder",JSON.stringify(s)),i("/purchases"))};return m?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"animate-pulse text-center",children:[e.jsx("div",{className:"h-8 w-48 bg-muted rounded mx-auto mb-4"}),e.jsx("div",{className:"h-4 w-64 bg-muted rounded mx-auto"})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(g,{className:"max-w-2xl w-full",children:[e.jsxs(N,{className:"text-center pb-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"rounded-full bg-green-100 dark:bg-green-900/30 p-4",children:e.jsx(v,{className:"h-12 w-12 text-green-600 dark:text-green-400"})})}),e.jsx(b,{className:"text-3xl font-bold",children:"Thank You for Your Order!"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Your order has been successfully placed"})]}),e.jsxs(y,{className:"space-y-6",children:[s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Order Number"}),e.jsxs("span",{className:"font-mono font-semibold","data-testid":"text-order-id",children:["#",s.invoice||((o=s._id)==null?void 0:o.slice(-8).toUpperCase())||"N/A"]})]}),e.jsx(w,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Amount"}),e.jsxs("span",{className:"font-semibold text-lg","data-testid":"text-order-total",children:["US$",(()=>{var d;const t=((d=s.items)==null?void 0:d.reduce((h,c)=>h+(c.price||0)*(c.quantity||1),0))||0,r=s.shipping_fee||0,u=s.tax||0;return(t+r+u).toFixed(2)})()]})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"What's Next?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You'll receive an email confirmation shortly. The seller will process your order and update you with shipping details."})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx(l,{variant:"outline",className:"flex-1",onClick:()=>i("/"),"data-testid":"button-continue-shopping",children:"Continue Shopping"}),e.jsxs(l,{className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold",onClick:x,"data-testid":"button-view-order",children:["View Order Details",e.jsx(k,{className:"ml-2 h-4 w-4"})]})]})]})]})})}export{I as default};

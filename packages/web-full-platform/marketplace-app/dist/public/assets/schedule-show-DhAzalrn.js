import{u as fe,g as ye,a as be,b as ve,r as f,d as K,j as e,B as E,X as ee,x as we,q as se,a6 as Ne,a7 as y,b0 as z,b1 as I}from"./index-GnvmivW0.js";import{u as Se,F as Ce,a as c,b as i,f as n,c as r,g as P,d as x,t as _e}from"./form-CgNvNzQO.js";import{I as k}from"./input-CDJz7BeV.js";import{T as Pe}from"./textarea-DkmXbh6O.js";import{L as V}from"./label-CbaFYhHW.js";import{S as te,a as ae,b as ie,c as re,d as A}from"./select-EUq1_viI.js";import{S as L}from"./switch-C_scnTkE.js";import{R as Q,a as b}from"./radio-group-CiS8qgSW.js";import{a as ke,b as Ve}from"./upload-images-Cu-UJNNB.js";import{A as Ae}from"./arrow-left-CUbNyMTb.js";import{U as Fe}from"./upload-DciL_rQf.js";import{V as Te}from"./video--84agJTh.js";import{C as oe}from"./chevron-up-Cda9uppk.js";import{C as le}from"./chevron-down-tcDKR_mK.js";import"./index-BdQq_4o_.js";import"./index-CmYyiKyk.js";import"./index-Vue-pIA6.js";import"./check-DoxmrmEj.js";import"./index-kVvGtud3.js";import"./circle-iUglX5Df.js";const Ee=Ne({title:y().min(1,"Show title is required"),scheduledAt:y().min(1,"Date and time is required"),category:y().min(1,"Category is required"),description:y().optional(),thumbnail:y().optional(),preview_videos:y().optional(),freePickup:I().default(!1),uspsPriorityMail:I().default(!0),uspsGroundAdvantage:I().default(!0),shippingProfile:y().optional(),shippingCoverage:z(["seller_pays_all","buyer_pays_up_to","buyer_pays_all"]),maxBuyerPays:y().optional(),roomType:z(["public","private"]),explicitContent:I().default(!1),repeatShow:z(["none","daily","weekly","monthly"]),repeatCount:y().optional()});function es(){const[,q]=fe(),{toast:v}=ye(),{user:u}=be(),{isFirebaseReady:J,fetchSettings:Y}=ve(),[H,U]=f.useState(null),[W,M]=f.useState(null),[S,X]=f.useState(!1),[C,Z]=f.useState(!1),[B,ne]=f.useState(!1),[R,de]=f.useState(!1);f.useEffect(()=>{J||Y()},[J,Y]);const w=new URLSearchParams(window.location.search).get("edit"),_=!!w,{data:o,isLoading:$}=K({queryKey:["/api/rooms",w],queryFn:async()=>{if(!w)return null;const s=await fetch(`/api/rooms/${w}`);if(!s.ok)throw new Error("Failed to fetch show");return s.json()},enabled:_}),{data:h,isLoading:D}=K({queryKey:["/api/categories"],queryFn:async()=>{const s=await fetch("/api/categories?status=active&page=1&limit=100");if(!s.ok)throw new Error("Failed to fetch categories");return s.json()}}),G=f.useMemo(()=>{if(!(h!=null&&h.categories))return[];const s=[];return h.categories.forEach(a=>{s.push(a),a.subCategories&&Array.isArray(a.subCategories)&&a.subCategories.length>0&&s.push(...a.subCategories)}),console.log("ðŸ“¦ Flattened categories:",s.map(a=>({id:a._id,name:a.name}))),s},[h]),{data:F,isLoading:O}=K({queryKey:["external-shipping-profiles",u==null?void 0:u.id],queryFn:async()=>{if(!(u!=null&&u.id))throw new Error("User ID required");const s=await fetch(`/api/shipping/profiles/${u.id}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Failed to fetch shipping profiles: ${s.status}`);return s.json()},enabled:!!(u!=null&&u.id)}),t=Se({resolver:_e(Ee),defaultValues:{title:"",scheduledAt:"",category:"",description:"",freePickup:!1,uspsPriorityMail:!0,uspsGroundAdvantage:!0,shippingProfile:"",shippingCoverage:"buyer_pays_all",maxBuyerPays:"",roomType:"public",explicitContent:!1,repeatShow:"none",repeatCount:""}});f.useEffect(()=>{var s,a,d;if(o&&_&&!D&&!O){console.log("ðŸ“ Populating form with show data:",o),console.log("ðŸ“¦ Categories loaded:",(s=h==null?void 0:h.categories)==null?void 0:s.length),console.log("ðŸ“¦ Shipping profiles loaded:",F==null?void 0:F.length);const g=new Date(o.date).toISOString().slice(0,16),l=o.shipping_settings||{};console.log("ðŸšš Shipping settings from API:",l);let j="buyer_pays_all";l.shippingCostMode?j=l.shippingCostMode:l.seller_pays?j="seller_pays_all":l.reducedShippingCapAmount>0&&(j="buyer_pays_up_to"),console.log("ðŸšš Calculated shipping coverage:",j);const m=typeof o.category=="object"?((a=o.category)==null?void 0:a._id)||((d=o.category)==null?void 0:d.id)||"":o.category||"";console.log("ðŸ“Œ Category value:",{raw:o.category,extracted:m}),console.log("ðŸ“Œ Available categories:",G.map(N=>({id:N._id,name:N.name})));const T=G.some(N=>N._id===m);console.log("ðŸ“Œ Category exists in list?",T),setTimeout(()=>{t.setValue("title",o.title||""),t.setValue("scheduledAt",g),t.setValue("category",m),console.log('ðŸ“Œ After setValue, form.getValues("category"):',t.getValues("category")),t.setValue("description",o.description||""),t.setValue("freePickup",!!l.freePickupEnabled),t.setValue("uspsPriorityMail",!!l.priorityMailEnabled),t.setValue("uspsGroundAdvantage",!!l.groundAdvantageEnabled),t.setValue("shippingProfile",l.shippingProfile||""),console.log("ðŸšš Set shipping values:",{freePickup:!!l.freePickupEnabled,uspsPriorityMail:!!l.priorityMailEnabled,uspsGroundAdvantage:!!l.groundAdvantageEnabled,shippingProfile:l.shippingProfile}),t.setValue("shippingCoverage",j),t.setValue("maxBuyerPays",l.reducedShippingCapAmount?String(l.reducedShippingCapAmount):""),t.setValue("roomType",o.roomType||"public"),t.setValue("explicitContent",o.explicit_content||!1),t.setValue("repeatShow",o.repeat||"none"),t.setValue("repeatCount",o.repeat_count?String(o.repeat_count):""),o.thumbnail&&(t.setValue("thumbnail",o.thumbnail),U(o.thumbnail)),o.preview_videos&&(t.setValue("preview_videos",o.preview_videos),M(o.preview_videos)),console.log("âœ… Form values set with category:",m)},100)}},[o,_,t,D,O,G,F]);const ce=async s=>{var d;const a=(d=s.target.files)==null?void 0:d[0];if(a)try{X(!0);const p=new FileReader;p.onloadend=()=>{U(p.result)},p.readAsDataURL(a);const g=w||`show_${Date.now()}`,l=await ke(a,g);t.setValue("thumbnail",l),console.log("ðŸ“¸ Image uploaded to Firebase:",l),v({title:"Image Uploaded",description:"Thumbnail uploaded successfully!"})}catch(p){console.error("Error uploading image:",p),v({title:"Upload Failed",description:"Failed to upload image. Please try again.",variant:"destructive"}),U(null),t.setValue("thumbnail","")}finally{X(!1)}},pe=()=>{U(null),t.setValue("thumbnail","")},ue=async s=>{var d;const a=(d=s.target.files)==null?void 0:d[0];if(a)try{Z(!0);const p=new FileReader;p.onloadend=()=>{M(p.result)},p.readAsDataURL(a);const g=w||`show_${Date.now()}`,l=await Ve(a,g);t.setValue("preview_videos",l),console.log("ðŸŽ¥ Video uploaded to Firebase:",l),v({title:"Video Uploaded",description:"Preview video uploaded successfully!"})}catch(p){console.error("Error uploading video:",p),v({title:"Upload Failed",description:"Failed to upload video. Please try again.",variant:"destructive"}),M(null),t.setValue("preview_videos","")}finally{Z(!1)}},he=()=>{M(null),t.setValue("preview_videos","")},me=async s=>{try{if(!(u!=null&&u.id)){v({title:"Authentication Required",description:"Please log in to schedule a show.",variant:"destructive"});return}const d=new Date(s.scheduledAt).getTime(),p=s.maxBuyerPays?parseFloat(s.maxBuyerPays):0;let g=s.shippingCoverage;p>0&&(g="buyer_pays_up_to");const l={priorityMailEnabled:s.uspsPriorityMail,groundAdvantageEnabled:s.uspsGroundAdvantage,shippingCostMode:g,reducedShippingCapAmount:p,buyer_pays:g==="buyer_pays_all"||g==="buyer_pays_up_to",seller_pays:g==="seller_pays_all",freePickupEnabled:s.freePickup,shippingProfile:s.shippingProfile||null},j={title:s.title,roomType:s.roomType,userId:u.id,category:s.category,activeTime:Date.now(),status:!0,repeat:s.repeatShow,repeat_count:s.repeatCount?parseInt(s.repeatCount):0,date:d,shipping_settings:l,explicit_content:s.explicitContent,description:s.description||"",thumbnail:s.thumbnail||"",preview_videos:s.preview_videos||""};if(_&&w){console.log("Updating show with data:",j);const m=await fetch(`/api/rooms/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!m.ok){const N=await m.json();throw new Error(N.error||"Failed to update show")}const T=await m.json();console.log("Show updated successfully:",T),await se.invalidateQueries({queryKey:["/api/rooms"]}),v({title:"Show Updated Successfully",description:`Your show "${s.title}" has been updated.`})}else{console.log("Creating show with data:",j);const m=await fetch("/api/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!m.ok){const N=await m.json();throw new Error(N.error||"Failed to create show")}const T=await m.json();console.log("Show created successfully:",T),await se.invalidateQueries({queryKey:["/api/rooms"]}),v({title:"Show Scheduled Successfully",description:`Your show "${s.title}" has been scheduled.`})}q("/live-shows")}catch(a){console.error("Error creating show:",a),v({title:"Failed to Schedule Show",description:a instanceof Error?a.message:"An error occurred",variant:"destructive"})}},xe=t.watch("shippingCoverage"),ge=t.watch("repeatShow"),je=F||[];return e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsx("div",{className:"border-b border-border bg-background px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>q("/live-shows"),"data-testid":"button-back",children:e.jsx(Ae,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground","data-testid":"text-schedule-show-title",children:_?"Edit Show":"Schedule a Show"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:_?"Update your show details and settings":"Set up your live selling show with shipping and content settings"})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsx("div",{className:"w-full max-w-6xl mx-auto",children:e.jsx(Ce,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(me),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{control:t.control,name:"title",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Show Title *"}),e.jsx(r,{children:e.jsx(k,{placeholder:"e.g., $100 in giveaways. $1 pre-loved Lululemon",...s,"data-testid":"input-show-title"})}),e.jsx(P,{children:"Make it descriptive to tell viewers what you're selling"}),e.jsx(x,{})]})}),e.jsx(c,{control:t.control,name:"scheduledAt",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Date & Time *"}),e.jsx(r,{children:e.jsx(k,{type:"datetime-local",...s,"data-testid":"input-scheduled-at"})}),e.jsx(P,{children:"Schedule 1 week in advance for maximum bookmarks"}),e.jsx(x,{})]})}),e.jsx(c,{control:t.control,name:"category",render:({field:s})=>(console.log("ðŸŽ¯ Category field.value:",s.value),e.jsxs(i,{children:[e.jsx(n,{children:"Category *"}),e.jsxs(te,{onValueChange:s.onChange,value:s.value,children:[e.jsx(r,{children:e.jsx(ae,{"data-testid":"select-category",children:e.jsx(ie,{placeholder:D?"Loading categories...":"Select a category"})})}),e.jsx(re,{children:D?e.jsx(A,{value:"loading",disabled:!0,children:"Loading..."}):h!=null&&h.categories&&h.categories.length>0?e.jsx(e.Fragment,{children:h.categories.map(a=>[e.jsx(A,{value:a._id||a.id,className:"font-semibold",children:a.name},a._id||a.id),...a.subCategories&&a.subCategories.length>0?a.subCategories.map(d=>e.jsxs(A,{value:d._id||d.id,className:"pl-6",children:["â†³ ",d.name]},d._id||d.id)):[]])}):e.jsx(A,{value:"none",disabled:!0,children:"No categories available"})})]}),e.jsx(P,{children:"Helps buyers discover your show"}),e.jsx(x,{})]}))})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(c,{control:t.control,name:"description",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Description"}),e.jsx(r,{children:e.jsx(Pe,{placeholder:"Add more details about what you'll be selling...",...s,className:"min-h-[120px]","data-testid":"textarea-description"})}),e.jsx(x,{})]})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium",children:"Thumbnail/Cover Photo"}),e.jsx(c,{control:t.control,name:"thumbnail",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:H?e.jsxs("div",{className:"relative w-full max-w-[160px]",children:[e.jsx("img",{src:H,alt:"Thumbnail preview",className:"w-full aspect-[9/16] object-cover rounded-lg border border-border"}),e.jsx(E,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-7 w-7",onClick:pe,"data-testid":"button-remove-thumbnail",children:e.jsx(ee,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[e.jsx(Fe,{className:"h-10 w-10 text-muted-foreground mx-auto mb-2"}),e.jsx(V,{htmlFor:"thumbnail-upload",className:`cursor-pointer text-sm text-primary hover:underline ${S?"opacity-50 pointer-events-none":""}`,children:S?"Uploading...":"Upload"}),e.jsx(k,{id:"thumbnail-upload",type:"file",accept:"image/*,video/*",onChange:ce,className:"hidden","data-testid":"input-thumbnail",disabled:S}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"1080x1920px (9:16)"})]})})}),e.jsx(x,{})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium",children:"Preview Video"}),e.jsx(c,{control:t.control,name:"preview_videos",render:({field:s})=>e.jsxs(i,{children:[e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:W?e.jsxs("div",{className:"relative w-full max-w-[160px]",children:[e.jsx("video",{src:W,className:"w-full aspect-[9/16] object-cover rounded-lg border border-border",controls:!0}),e.jsx(E,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-7 w-7",onClick:he,"data-testid":"button-remove-video",children:e.jsx(ee,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[e.jsx(Te,{className:"h-10 w-10 text-muted-foreground mx-auto mb-2"}),e.jsx(V,{htmlFor:"video-upload",className:`cursor-pointer text-sm text-primary hover:underline ${C?"opacity-50 pointer-events-none":""}`,children:C?"Uploading...":"Upload"}),e.jsx(k,{id:"video-upload",type:"file",accept:"video/*",onChange:ue,className:"hidden","data-testid":"input-video",disabled:C}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"MP4, MOV, or other video formats"})]})})}),e.jsx(x,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{control:t.control,name:"shippingProfile",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Shipping Profile"}),e.jsxs(te,{onValueChange:s.onChange,value:s.value,disabled:O,"data-testid":"select-shipping-profile",children:[e.jsx(r,{children:e.jsx(ae,{children:e.jsx(ie,{placeholder:"Select shipping profile"})})}),e.jsxs(re,{position:"popper",children:[e.jsx(A,{value:"skip",children:"No Shipping Profile"}),je.map(a=>e.jsx(A,{value:a._id,children:a.name},a._id))]})]}),e.jsx(x,{})]})}),e.jsx(c,{control:t.control,name:"freePickup",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border border-border p-4",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(n,{className:"text-base",children:"Free pickup"})}),e.jsx(r,{children:e.jsx(L,{checked:s.value,onCheckedChange:s.onChange,"data-testid":"switch-free-pickup"})})]})}),e.jsxs("div",{className:"rounded-lg border border-border",children:[e.jsxs("button",{type:"button",onClick:()=>ne(!B),className:"w-full flex items-center justify-between p-4 hover:bg-muted/50 transition-colors","data-testid":"button-domestic-shipments",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-sm",children:"Domestic Shipments"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All orders falling outside of your shipping preferences will default to USPS Ground Advantage. Eligible sellers will default to Media Mail shipping."})]}),B?e.jsx(oe,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 ml-2"}):e.jsx(le,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 ml-2"})]}),B&&e.jsxs("div",{className:"p-4 pt-0 border-t border-border space-y-3",children:[e.jsx(c,{control:t.control,name:"uspsPriorityMail",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border border-border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"text-base font-semibold",children:"USPS Priority Mail"}),e.jsx(P,{className:"text-xs",children:"Arrives in 1-3 business days. Best for time-sensitive shipments."})]}),e.jsx(r,{children:e.jsx(L,{checked:s.value,onCheckedChange:s.onChange,"data-testid":"switch-usps-priority"})})]})}),e.jsx(c,{control:t.control,name:"uspsGroundAdvantage",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border border-border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"text-base font-semibold",children:"USPS Ground Advantage"}),e.jsx(P,{className:"text-xs",children:"Best for shipping heavier items that aren't time-sensitive."})]}),e.jsx(r,{children:e.jsx(L,{checked:s.value,onCheckedChange:s.onChange,"data-testid":"switch-usps-ground"})})]})})]})]}),e.jsxs("div",{className:"rounded-lg border border-border",children:[e.jsxs("button",{type:"button",onClick:()=>de(!R),className:"w-full flex items-center justify-between p-4 hover:bg-muted/50 transition-colors","data-testid":"button-shipping-costs",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-sm",children:"Shipping Costs"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Costs calculated based on buyer's location and shipment weight. Only applies to shipments within the contiguous U.S."})]}),R?e.jsx(oe,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 ml-2"}):e.jsx(le,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 ml-2"})]}),R&&e.jsx("div",{className:"p-4 pt-0 border-t border-border",children:e.jsx(c,{control:t.control,name:"shippingCoverage",render:({field:s})=>e.jsxs(i,{className:"space-y-3",children:[e.jsx(r,{children:e.jsxs(Q,{onValueChange:s.onChange,defaultValue:s.value,className:"flex flex-col space-y-3",children:[e.jsx(i,{className:"flex flex-col space-y-2 rounded-lg border border-border p-3",children:e.jsxs("div",{className:"flex items-start space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"seller_pays_all","data-testid":"radio-seller-pays-all",className:"mt-1"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{className:"font-semibold cursor-pointer",children:"Seller pays all shipping costs"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This only applies to domestic orders. Buyers have to pay for shipping on international orders."})]})]})}),e.jsxs(i,{className:"flex flex-col space-y-2 rounded-lg border border-border p-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"buyer_pays_up_to","data-testid":"radio-buyer-pays-up-to",className:"mt-1"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{className:"font-semibold cursor-pointer",children:"Buyer pays up to a set shipping cost"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set a maximum shipping cost buyers will pay for unlimited orders within your show."})]})]}),xe==="buyer_pays_up_to"&&e.jsx("div",{className:"ml-9 mt-2",children:e.jsx(c,{control:t.control,name:"maxBuyerPays",render:({field:a})=>e.jsxs(i,{children:[e.jsx(n,{className:"text-sm",children:"Amount"}),e.jsx(r,{children:e.jsx(k,{type:"number",step:"0.01",placeholder:"e.g., 9.21",...a,"data-testid":"input-max-buyer-pays",className:"max-w-[200px]"})}),e.jsx(x,{})]})})})]}),e.jsx(i,{className:"flex flex-col space-y-2 rounded-lg border border-border p-3",children:e.jsxs("div",{className:"flex items-start space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"buyer_pays_all","data-testid":"radio-buyer-pays-all",className:"mt-1"})}),e.jsx("div",{className:"flex-1",children:e.jsx(n,{className:"font-semibold cursor-pointer",children:"Buyer pays all shipping costs"})})]})})]})}),e.jsx(x,{})]})})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium",children:"Content Settings"}),e.jsx(c,{control:t.control,name:"roomType",render:({field:s})=>e.jsxs(i,{className:"space-y-2",children:[e.jsx(n,{className:"text-sm",children:"Room Type *"}),e.jsx(r,{children:e.jsxs(Q,{onValueChange:s.onChange,value:s.value,className:"flex flex-col space-y-2",children:[e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"public","data-testid":"radio-public"})}),e.jsx(n,{className:"font-normal cursor-pointer text-sm",children:"Public - Visible to everyone"})]}),e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"private","data-testid":"radio-private"})}),e.jsx(n,{className:"font-normal cursor-pointer text-sm",children:"Private - Share link only"})]})]})}),e.jsx(x,{})]})}),e.jsx(c,{control:t.control,name:"explicitContent",render:({field:s})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border border-border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"text-sm",children:"Explicit Content"}),e.jsx(P,{className:"text-xs",children:"Enable this if your stream includes age-restricted (18+) or mature artwork, or if strong language will be used"})]}),e.jsx(r,{children:e.jsx(L,{checked:s.value,onCheckedChange:s.onChange,"data-testid":"switch-explicit-content"})})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium",children:"Repeat Settings"}),e.jsx(c,{control:t.control,name:"repeatShow",render:({field:s})=>e.jsxs(i,{className:"space-y-2",children:[e.jsx(n,{className:"text-sm",children:"Repeat Frequency *"}),e.jsx(r,{children:e.jsxs(Q,{onValueChange:s.onChange,defaultValue:s.value,className:"flex flex-col space-y-1",children:[e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"none","data-testid":"radio-none"})}),e.jsx(n,{className:"font-normal cursor-pointer text-sm",children:"No repeat (one-time show)"})]}),e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"daily","data-testid":"radio-daily"})}),e.jsx(n,{className:"font-normal cursor-pointer text-sm",children:"Daily"})]}),e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"weekly","data-testid":"radio-weekly"})}),e.jsx(n,{className:"font-normal cursor-pointer text-sm",children:"Weekly"})]}),e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(r,{children:e.jsx(b,{value:"monthly","data-testid":"radio-monthly"})}),e.jsx(n,{className:"font-normal cursor-pointer text-sm",children:"Monthly"})]})]})}),e.jsx(x,{})]})}),ge!=="none"&&e.jsx(c,{control:t.control,name:"repeatCount",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{className:"text-sm",children:"Number of Occurrences"}),e.jsx(r,{children:e.jsx(k,{type:"number",min:"1",placeholder:"e.g., 5",...s,"data-testid":"input-repeat-count",className:"max-w-[200px]"})}),e.jsx(P,{className:"text-xs",children:"Leave blank for unlimited"}),e.jsx(x,{})]})})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:justify-end pt-4 border-t border-border",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>q("/live-shows"),"data-testid":"button-cancel",disabled:S||C,children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:$||S||C,"data-testid":"button-submit",children:[(S||C||$)&&e.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),S||C?"Uploading...":_?"Update Show":$?"Scheduling...":"Schedule Show"]})]})]})})})})]})}export{es as default};

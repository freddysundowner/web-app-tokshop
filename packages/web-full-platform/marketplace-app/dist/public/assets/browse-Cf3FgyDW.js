import{O as p,r as f,j as e,B as l,L as h}from"./index-FVTY5sKH.js";import{u as j}from"./useQuery-DsZx8GVA.js";import{u as v,g as o}from"./use-api-config-CmVD2X-T.js";function C(){p("Browse Categories");const[t,i]=f.useState("recommended"),{externalApiUrl:r,isLoading:c}=v(),{data:d,isLoading:m}=j({queryKey:["/api/categories"]}),x=c||m||!r,u=[...((d==null?void 0:d.categories)||[]).map(s=>({...s,viewers:s.viewersCount||0}))].sort((s,a)=>t==="popular"?a.viewers-s.viewers:t==="a-z"?s.name.localeCompare(a.name):0),g=s=>s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString();return x?e.jsx("div",{className:"flex flex-col min-h-screen bg-background","data-testid":"page-browse",children:e.jsx("main",{className:"flex-1 overflow-y-auto bg-white dark:bg-background",children:e.jsx("div",{className:"flex justify-center w-full",children:e.jsxs("div",{className:"w-full lg:w-[90%] px-4 md:px-6 lg:px-8 py-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground mb-6",children:"Browse by Category"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4",children:[...Array(10)].map((s,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"aspect-square rounded-lg bg-muted animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-2/3"})]},a))})]})})})}):e.jsx("div",{className:"flex flex-col min-h-screen bg-background","data-testid":"page-browse",children:e.jsx("main",{className:"flex-1 overflow-y-auto bg-white dark:bg-background",children:e.jsx("div",{className:"flex justify-center w-full",children:e.jsxs("div",{className:"w-full lg:w-[90%] px-4 md:px-6 lg:px-8 py-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground mb-6","data-testid":"heading-browse-category",children:"Browse by Category"}),e.jsxs("div",{className:"flex gap-2 mb-6","data-testid":"sort-buttons",children:[e.jsx(l,{variant:t==="recommended"?"default":"outline",onClick:()=>i("recommended"),className:"h-9","data-testid":"button-sort-recommended",children:"Recommended"}),e.jsx(l,{variant:t==="popular"?"default":"outline",onClick:()=>i("popular"),className:"h-9","data-testid":"button-sort-popular",children:"Popular"}),e.jsx(l,{variant:t==="a-z"?"default":"outline",onClick:()=>i("a-z"),className:"h-9","data-testid":"button-sort-az",children:"A-Z"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4","data-testid":"grid-categories",children:u.map(s=>{const a=s.icon?o(s.icon,r):null,n=s.image?o(s.image,r):a;return e.jsx(h,{href:`/category/${s._id}`,"data-testid":`link-category-${s._id}`,children:e.jsxs("div",{className:"group cursor-pointer rounded-lg overflow-hidden bg-muted hover-elevate active-elevate-2",children:[e.jsx("div",{className:"p-3 pb-2",children:e.jsx("h3",{className:"font-semibold text-sm md:text-base text-foreground line-clamp-1","data-testid":`text-category-name-${s._id}`,children:s.name})}),e.jsx("div",{className:"flex justify-center items-center py-4 px-6",children:e.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 flex items-center justify-center",children:n?e.jsx("img",{src:n,alt:s.name,className:"w-full h-full object-contain"}):e.jsx("div",{className:"text-4xl",children:"ðŸ“¦"})})}),e.jsx("div",{className:"px-3 pb-3 pt-1",children:e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground flex items-center gap-1","data-testid":`text-viewers-${s._id}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 flex-shrink-0"}),g(s.viewers)," viewers"]})})]})},s._id)})})]})})})})}export{C as default};
